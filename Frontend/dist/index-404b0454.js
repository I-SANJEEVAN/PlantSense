function iI(e,t){for(var i=0;i<t.length;i++){const s=t[i];if(typeof s!="string"&&!Array.isArray(s)){for(const u in s)if(u!=="default"&&!(u in e)){const p=Object.getOwnPropertyDescriptor(s,u);p&&Object.defineProperty(e,u,p.get?p:{enumerable:!0,get:()=>s[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const p of u)if(p.type==="childList")for(const v of p.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&s(v)}).observe(document,{childList:!0,subtree:!0});function i(u){const p={};return u.integrity&&(p.integrity=u.integrity),u.referrerPolicy&&(p.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?p.credentials="include":u.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function s(u){if(u.ep)return;u.ep=!0;const p=i(u);fetch(u.href,p)}})();var r_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function OS(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var u=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(i,s,u.get?u:{enumerable:!0,get:function(){return e[s]}})}),i}var DS={exports:{}},eg={},BS={exports:{}},Br={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pp=Symbol.for("react.element"),oI=Symbol.for("react.portal"),aI=Symbol.for("react.fragment"),sI=Symbol.for("react.strict_mode"),lI=Symbol.for("react.profiler"),cI=Symbol.for("react.provider"),uI=Symbol.for("react.context"),hI=Symbol.for("react.forward_ref"),dI=Symbol.for("react.suspense"),pI=Symbol.for("react.memo"),fI=Symbol.for("react.lazy"),zb=Symbol.iterator;function mI(e){return e===null||typeof e!="object"?null:(e=zb&&e[zb]||e["@@iterator"],typeof e=="function"?e:null)}var FS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},NS=Object.assign,US={};function ah(e,t,i){this.props=e,this.context=t,this.refs=US,this.updater=i||FS}ah.prototype.isReactComponent={};ah.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ah.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function jS(){}jS.prototype=ah.prototype;function n_(e,t,i){this.props=e,this.context=t,this.refs=US,this.updater=i||FS}var i_=n_.prototype=new jS;i_.constructor=n_;NS(i_,ah.prototype);i_.isPureReactComponent=!0;var Lb=Array.isArray,$S=Object.prototype.hasOwnProperty,o_={current:null},VS={key:!0,ref:!0,__self:!0,__source:!0};function qS(e,t,i){var s,u={},p=null,v=null;if(t!=null)for(s in t.ref!==void 0&&(v=t.ref),t.key!==void 0&&(p=""+t.key),t)$S.call(t,s)&&!VS.hasOwnProperty(s)&&(u[s]=t[s]);var c=arguments.length-2;if(c===1)u.children=i;else if(1<c){for(var w=Array(c),T=0;T<c;T++)w[T]=arguments[T+2];u.children=w}if(e&&e.defaultProps)for(s in c=e.defaultProps,c)u[s]===void 0&&(u[s]=c[s]);return{$$typeof:pp,type:e,key:p,ref:v,props:u,_owner:o_.current}}function gI(e,t){return{$$typeof:pp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function a_(e){return typeof e=="object"&&e!==null&&e.$$typeof===pp}function yI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var Ob=/\/+/g;function Xy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yI(""+e.key):t.toString(36)}function Gf(e,t,i,s,u){var p=typeof e;(p==="undefined"||p==="boolean")&&(e=null);var v=!1;if(e===null)v=!0;else switch(p){case"string":case"number":v=!0;break;case"object":switch(e.$$typeof){case pp:case oI:v=!0}}if(v)return v=e,u=u(v),e=s===""?"."+Xy(v,0):s,Lb(u)?(i="",e!=null&&(i=e.replace(Ob,"$&/")+"/"),Gf(u,t,i,"",function(T){return T})):u!=null&&(a_(u)&&(u=gI(u,i+(!u.key||v&&v.key===u.key?"":(""+u.key).replace(Ob,"$&/")+"/")+e)),t.push(u)),1;if(v=0,s=s===""?".":s+":",Lb(e))for(var c=0;c<e.length;c++){p=e[c];var w=s+Xy(p,c);v+=Gf(p,t,i,w,u)}else if(w=mI(e),typeof w=="function")for(e=w.call(e),c=0;!(p=e.next()).done;)p=p.value,w=s+Xy(p,c++),v+=Gf(p,t,i,w,u);else if(p==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return v}function xf(e,t,i){if(e==null)return e;var s=[],u=0;return Gf(e,s,"","",function(p){return t.call(i,p,u++)}),s}function vI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var bo={current:null},Hf={transition:null},_I={ReactCurrentDispatcher:bo,ReactCurrentBatchConfig:Hf,ReactCurrentOwner:o_};Br.Children={map:xf,forEach:function(e,t,i){xf(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return xf(e,function(){t++}),t},toArray:function(e){return xf(e,function(t){return t})||[]},only:function(e){if(!a_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Br.Component=ah;Br.Fragment=aI;Br.Profiler=lI;Br.PureComponent=n_;Br.StrictMode=sI;Br.Suspense=dI;Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_I;Br.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=NS({},e.props),u=e.key,p=e.ref,v=e._owner;if(t!=null){if(t.ref!==void 0&&(p=t.ref,v=o_.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(w in t)$S.call(t,w)&&!VS.hasOwnProperty(w)&&(s[w]=t[w]===void 0&&c!==void 0?c[w]:t[w])}var w=arguments.length-2;if(w===1)s.children=i;else if(1<w){c=Array(w);for(var T=0;T<w;T++)c[T]=arguments[T+2];s.children=c}return{$$typeof:pp,type:e.type,key:u,ref:p,props:s,_owner:v}};Br.createContext=function(e){return e={$$typeof:uI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cI,_context:e},e.Consumer=e};Br.createElement=qS;Br.createFactory=function(e){var t=qS.bind(null,e);return t.type=e,t};Br.createRef=function(){return{current:null}};Br.forwardRef=function(e){return{$$typeof:hI,render:e}};Br.isValidElement=a_;Br.lazy=function(e){return{$$typeof:fI,_payload:{_status:-1,_result:e},_init:vI}};Br.memo=function(e,t){return{$$typeof:pI,type:e,compare:t===void 0?null:t}};Br.startTransition=function(e){var t=Hf.transition;Hf.transition={};try{e()}finally{Hf.transition=t}};Br.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Br.useCallback=function(e,t){return bo.current.useCallback(e,t)};Br.useContext=function(e){return bo.current.useContext(e)};Br.useDebugValue=function(){};Br.useDeferredValue=function(e){return bo.current.useDeferredValue(e)};Br.useEffect=function(e,t){return bo.current.useEffect(e,t)};Br.useId=function(){return bo.current.useId()};Br.useImperativeHandle=function(e,t,i){return bo.current.useImperativeHandle(e,t,i)};Br.useInsertionEffect=function(e,t){return bo.current.useInsertionEffect(e,t)};Br.useLayoutEffect=function(e,t){return bo.current.useLayoutEffect(e,t)};Br.useMemo=function(e,t){return bo.current.useMemo(e,t)};Br.useReducer=function(e,t,i){return bo.current.useReducer(e,t,i)};Br.useRef=function(e){return bo.current.useRef(e)};Br.useState=function(e){return bo.current.useState(e)};Br.useSyncExternalStore=function(e,t,i){return bo.current.useSyncExternalStore(e,t,i)};Br.useTransition=function(){return bo.current.useTransition()};Br.version="18.2.0";BS.exports=Br;var ge=BS.exports;const kn=Tl(ge),fm=iI({__proto__:null,default:kn},[ge]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xI=ge,bI=Symbol.for("react.element"),wI=Symbol.for("react.fragment"),SI=Object.prototype.hasOwnProperty,EI=xI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TI={key:!0,ref:!0,__self:!0,__source:!0};function GS(e,t,i){var s,u={},p=null,v=null;i!==void 0&&(p=""+i),t.key!==void 0&&(p=""+t.key),t.ref!==void 0&&(v=t.ref);for(s in t)SI.call(t,s)&&!TI.hasOwnProperty(s)&&(u[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)u[s]===void 0&&(u[s]=t[s]);return{$$typeof:bI,type:e,key:p,ref:v,props:u,_owner:EI.current}}eg.Fragment=wI;eg.jsx=GS;eg.jsxs=GS;DS.exports=eg;var ke=DS.exports,Fv={},HS={exports:{}},Qo={},WS={exports:{}},ZS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($e,lt){var wt=$e.length;$e.push(lt);e:for(;0<wt;){var rr=wt-1>>>1,or=$e[rr];if(0<u(or,lt))$e[rr]=lt,$e[wt]=or,wt=rr;else break e}}function i($e){return $e.length===0?null:$e[0]}function s($e){if($e.length===0)return null;var lt=$e[0],wt=$e.pop();if(wt!==lt){$e[0]=wt;e:for(var rr=0,or=$e.length,fr=or>>>1;rr<fr;){var dr=2*(rr+1)-1,Jt=$e[dr],Ir=dr+1,zr=$e[Ir];if(0>u(Jt,wt))Ir<or&&0>u(zr,Jt)?($e[rr]=zr,$e[Ir]=wt,rr=Ir):($e[rr]=Jt,$e[dr]=wt,rr=dr);else if(Ir<or&&0>u(zr,wt))$e[rr]=zr,$e[Ir]=wt,rr=Ir;else break e}}return lt}function u($e,lt){var wt=$e.sortIndex-lt.sortIndex;return wt!==0?wt:$e.id-lt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;e.unstable_now=function(){return p.now()}}else{var v=Date,c=v.now();e.unstable_now=function(){return v.now()-c}}var w=[],T=[],P=1,L=null,B=3,U=!1,O=!1,N=!1,ae=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K($e){for(var lt=i(T);lt!==null;){if(lt.callback===null)s(T);else if(lt.startTime<=$e)s(T),lt.sortIndex=lt.expirationTime,t(w,lt);else break;lt=i(T)}}function ie($e){if(N=!1,K($e),!O)if(i(w)!==null)O=!0,Mt(_e);else{var lt=i(T);lt!==null&&kt(ie,lt.startTime-$e)}}function _e($e,lt){O=!1,N&&(N=!1,q(Me),Me=-1),U=!0;var wt=B;try{for(K(lt),L=i(w);L!==null&&(!(L.expirationTime>lt)||$e&&!Je());){var rr=L.callback;if(typeof rr=="function"){L.callback=null,B=L.priorityLevel;var or=rr(L.expirationTime<=lt);lt=e.unstable_now(),typeof or=="function"?L.callback=or:L===i(w)&&s(w),K(lt)}else s(w);L=i(w)}if(L!==null)var fr=!0;else{var dr=i(T);dr!==null&&kt(ie,dr.startTime-lt),fr=!1}return fr}finally{L=null,B=wt,U=!1}}var Se=!1,xe=null,Me=-1,Ze=5,Le=-1;function Je(){return!(e.unstable_now()-Le<Ze)}function ur(){if(xe!==null){var $e=e.unstable_now();Le=$e;var lt=!0;try{lt=xe(!0,$e)}finally{lt?Nt():(Se=!1,xe=null)}}else Se=!1}var Nt;if(typeof W=="function")Nt=function(){W(ur)};else if(typeof MessageChannel<"u"){var mr=new MessageChannel,tt=mr.port2;mr.port1.onmessage=ur,Nt=function(){tt.postMessage(null)}}else Nt=function(){ae(ur,0)};function Mt($e){xe=$e,Se||(Se=!0,Nt())}function kt($e,lt){Me=ae(function(){$e(e.unstable_now())},lt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($e){$e.callback=null},e.unstable_continueExecution=function(){O||U||(O=!0,Mt(_e))},e.unstable_forceFrameRate=function($e){0>$e||125<$e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ze=0<$e?Math.floor(1e3/$e):5},e.unstable_getCurrentPriorityLevel=function(){return B},e.unstable_getFirstCallbackNode=function(){return i(w)},e.unstable_next=function($e){switch(B){case 1:case 2:case 3:var lt=3;break;default:lt=B}var wt=B;B=lt;try{return $e()}finally{B=wt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($e,lt){switch($e){case 1:case 2:case 3:case 4:case 5:break;default:$e=3}var wt=B;B=$e;try{return lt()}finally{B=wt}},e.unstable_scheduleCallback=function($e,lt,wt){var rr=e.unstable_now();switch(typeof wt=="object"&&wt!==null?(wt=wt.delay,wt=typeof wt=="number"&&0<wt?rr+wt:rr):wt=rr,$e){case 1:var or=-1;break;case 2:or=250;break;case 5:or=1073741823;break;case 4:or=1e4;break;default:or=5e3}return or=wt+or,$e={id:P++,callback:lt,priorityLevel:$e,startTime:wt,expirationTime:or,sortIndex:-1},wt>rr?($e.sortIndex=wt,t(T,$e),i(w)===null&&$e===i(T)&&(N?(q(Me),Me=-1):N=!0,kt(ie,wt-rr))):($e.sortIndex=or,t(w,$e),O||U||(O=!0,Mt(_e))),$e},e.unstable_shouldYield=Je,e.unstable_wrapCallback=function($e){var lt=B;return function(){var wt=B;B=lt;try{return $e.apply(this,arguments)}finally{B=wt}}}})(ZS);WS.exports=ZS;var CI=WS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KS=ge,Yo=CI;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var XS=new Set,jd={};function wc(e,t){$u(e,t),$u(e+"Capture",t)}function $u(e,t){for(jd[e]=t,e=0;e<t.length;e++)XS.add(t[e])}var zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nv=Object.prototype.hasOwnProperty,kI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Db={},Bb={};function PI(e){return Nv.call(Bb,e)?!0:Nv.call(Db,e)?!1:kI.test(e)?Bb[e]=!0:(Db[e]=!0,!1)}function AI(e,t,i,s){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function II(e,t,i,s){if(t===null||typeof t>"u"||AI(e,t,i,s))return!0;if(s)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function wo(e,t,i,s,u,p,v){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=u,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=p,this.removeEmptyString=v}var Xi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xi[e]=new wo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xi[t]=new wo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xi[e]=new wo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xi[e]=new wo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xi[e]=new wo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xi[e]=new wo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xi[e]=new wo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xi[e]=new wo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xi[e]=new wo(e,5,!1,e.toLowerCase(),null,!1,!1)});var s_=/[\-:]([a-z])/g;function l_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(s_,l_);Xi[t]=new wo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(s_,l_);Xi[t]=new wo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(s_,l_);Xi[t]=new wo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xi[e]=new wo(e,1,!1,e.toLowerCase(),null,!1,!1)});Xi.xlinkHref=new wo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xi[e]=new wo(e,1,!1,e.toLowerCase(),null,!0,!0)});function c_(e,t,i,s){var u=Xi.hasOwnProperty(t)?Xi[t]:null;(u!==null?u.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(II(t,i,u,s)&&(i=null),s||u===null?PI(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):u.mustUseProperty?e[u.propertyName]=i===null?u.type===3?!1:"":i:(t=u.attributeName,s=u.attributeNamespace,i===null?e.removeAttribute(t):(u=u.type,i=u===3||u===4&&i===!0?"":""+i,s?e.setAttributeNS(s,t,i):e.setAttribute(t,i))))}var $s=KS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bf=Symbol.for("react.element"),yu=Symbol.for("react.portal"),vu=Symbol.for("react.fragment"),u_=Symbol.for("react.strict_mode"),Uv=Symbol.for("react.profiler"),YS=Symbol.for("react.provider"),JS=Symbol.for("react.context"),h_=Symbol.for("react.forward_ref"),jv=Symbol.for("react.suspense"),$v=Symbol.for("react.suspense_list"),d_=Symbol.for("react.memo"),al=Symbol.for("react.lazy"),QS=Symbol.for("react.offscreen"),Fb=Symbol.iterator;function od(e){return e===null||typeof e!="object"?null:(e=Fb&&e[Fb]||e["@@iterator"],typeof e=="function"?e:null)}var Qn=Object.assign,Yy;function _d(e){if(Yy===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Yy=t&&t[1]||""}return`
`+Yy+e}var Jy=!1;function Qy(e,t){if(!e||Jy)return"";Jy=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(T){var s=T}Reflect.construct(e,[],t)}else{try{t.call()}catch(T){s=T}e.call(t.prototype)}else{try{throw Error()}catch(T){s=T}e()}}catch(T){if(T&&s&&typeof T.stack=="string"){for(var u=T.stack.split(`
`),p=s.stack.split(`
`),v=u.length-1,c=p.length-1;1<=v&&0<=c&&u[v]!==p[c];)c--;for(;1<=v&&0<=c;v--,c--)if(u[v]!==p[c]){if(v!==1||c!==1)do if(v--,c--,0>c||u[v]!==p[c]){var w=`
`+u[v].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=v&&0<=c);break}}}finally{Jy=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?_d(e):""}function MI(e){switch(e.tag){case 5:return _d(e.type);case 16:return _d("Lazy");case 13:return _d("Suspense");case 19:return _d("SuspenseList");case 0:case 2:case 15:return e=Qy(e.type,!1),e;case 11:return e=Qy(e.type.render,!1),e;case 1:return e=Qy(e.type,!0),e;default:return""}}function Vv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vu:return"Fragment";case yu:return"Portal";case Uv:return"Profiler";case u_:return"StrictMode";case jv:return"Suspense";case $v:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case JS:return(e.displayName||"Context")+".Consumer";case YS:return(e._context.displayName||"Context")+".Provider";case h_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case d_:return t=e.displayName||null,t!==null?t:Vv(e.type)||"Memo";case al:t=e._payload,e=e._init;try{return Vv(e(t))}catch{}}return null}function RI(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vv(t);case 8:return t===u_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Sl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function eE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zI(e){var t=eE(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,p=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(v){s=""+v,p.call(this,v)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(v){s=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wf(e){e._valueTracker||(e._valueTracker=zI(e))}function tE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=eE(e)?e.checked?"true":"false":e.value),e=s,e!==i?(t.setValue(e),!0):!1}function mm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function qv(e,t){var i=t.checked;return Qn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Nb(e,t){var i=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;i=Sl(t.value!=null?t.value:i),e._wrapperState={initialChecked:s,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function rE(e,t){t=t.checked,t!=null&&c_(e,"checked",t,!1)}function Gv(e,t){rE(e,t);var i=Sl(t.value),s=t.type;if(i!=null)s==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Hv(e,t.type,i):t.hasOwnProperty("defaultValue")&&Hv(e,t.type,Sl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ub(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Hv(e,t,i){(t!=="number"||mm(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var xd=Array.isArray;function Iu(e,t,i,s){if(e=e.options,t){t={};for(var u=0;u<i.length;u++)t["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=t.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&s&&(e[i].defaultSelected=!0)}else{for(i=""+Sl(i),t=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,s&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function Wv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return Qn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function jb(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(et(92));if(xd(i)){if(1<i.length)throw Error(et(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Sl(i)}}function nE(e,t){var i=Sl(t.value),s=Sl(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),s!=null&&(e.defaultValue=""+s)}function $b(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function iE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?iE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Sf,oE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,s,u){MSApp.execUnsafeLocalFunction(function(){return e(t,i,s,u)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Sf=Sf||document.createElement("div"),Sf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Sf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $d(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Pd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LI=["Webkit","ms","Moz","O"];Object.keys(Pd).forEach(function(e){LI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pd[t]=Pd[e]})});function aE(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Pd.hasOwnProperty(e)&&Pd[e]?(""+t).trim():t+"px"}function sE(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var s=i.indexOf("--")===0,u=aE(i,t[i],s);i==="float"&&(i="cssFloat"),s?e.setProperty(i,u):e[i]=u}}var OI=Qn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kv(e,t){if(t){if(OI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function Xv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yv=null;function p_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jv=null,Mu=null,Ru=null;function Vb(e){if(e=gp(e)){if(typeof Jv!="function")throw Error(et(280));var t=e.stateNode;t&&(t=og(t),Jv(e.stateNode,e.type,t))}}function lE(e){Mu?Ru?Ru.push(e):Ru=[e]:Mu=e}function cE(){if(Mu){var e=Mu,t=Ru;if(Ru=Mu=null,Vb(e),t)for(e=0;e<t.length;e++)Vb(t[e])}}function uE(e,t){return e(t)}function hE(){}var ev=!1;function dE(e,t,i){if(ev)return e(t,i);ev=!0;try{return uE(e,t,i)}finally{ev=!1,(Mu!==null||Ru!==null)&&(hE(),cE())}}function Vd(e,t){var i=e.stateNode;if(i===null)return null;var s=og(i);if(s===null)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(et(231,t,typeof i));return i}var Qv=!1;if(zs)try{var ad={};Object.defineProperty(ad,"passive",{get:function(){Qv=!0}}),window.addEventListener("test",ad,ad),window.removeEventListener("test",ad,ad)}catch{Qv=!1}function DI(e,t,i,s,u,p,v,c,w){var T=Array.prototype.slice.call(arguments,3);try{t.apply(i,T)}catch(P){this.onError(P)}}var Ad=!1,gm=null,ym=!1,e0=null,BI={onError:function(e){Ad=!0,gm=e}};function FI(e,t,i,s,u,p,v,c,w){Ad=!1,gm=null,DI.apply(BI,arguments)}function NI(e,t,i,s,u,p,v,c,w){if(FI.apply(this,arguments),Ad){if(Ad){var T=gm;Ad=!1,gm=null}else throw Error(et(198));ym||(ym=!0,e0=T)}}function Sc(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function pE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qb(e){if(Sc(e)!==e)throw Error(et(188))}function UI(e){var t=e.alternate;if(!t){if(t=Sc(e),t===null)throw Error(et(188));return t!==e?null:e}for(var i=e,s=t;;){var u=i.return;if(u===null)break;var p=u.alternate;if(p===null){if(s=u.return,s!==null){i=s;continue}break}if(u.child===p.child){for(p=u.child;p;){if(p===i)return qb(u),e;if(p===s)return qb(u),t;p=p.sibling}throw Error(et(188))}if(i.return!==s.return)i=u,s=p;else{for(var v=!1,c=u.child;c;){if(c===i){v=!0,i=u,s=p;break}if(c===s){v=!0,s=u,i=p;break}c=c.sibling}if(!v){for(c=p.child;c;){if(c===i){v=!0,i=p,s=u;break}if(c===s){v=!0,s=p,i=u;break}c=c.sibling}if(!v)throw Error(et(189))}}if(i.alternate!==s)throw Error(et(190))}if(i.tag!==3)throw Error(et(188));return i.stateNode.current===i?e:t}function fE(e){return e=UI(e),e!==null?mE(e):null}function mE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=mE(e);if(t!==null)return t;e=e.sibling}return null}var gE=Yo.unstable_scheduleCallback,Gb=Yo.unstable_cancelCallback,jI=Yo.unstable_shouldYield,$I=Yo.unstable_requestPaint,di=Yo.unstable_now,VI=Yo.unstable_getCurrentPriorityLevel,f_=Yo.unstable_ImmediatePriority,yE=Yo.unstable_UserBlockingPriority,vm=Yo.unstable_NormalPriority,qI=Yo.unstable_LowPriority,vE=Yo.unstable_IdlePriority,tg=null,as=null;function GI(e){if(as&&typeof as.onCommitFiberRoot=="function")try{as.onCommitFiberRoot(tg,e,void 0,(e.current.flags&128)===128)}catch{}}var $a=Math.clz32?Math.clz32:ZI,HI=Math.log,WI=Math.LN2;function ZI(e){return e>>>=0,e===0?32:31-(HI(e)/WI|0)|0}var Ef=64,Tf=4194304;function bd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _m(e,t){var i=e.pendingLanes;if(i===0)return 0;var s=0,u=e.suspendedLanes,p=e.pingedLanes,v=i&268435455;if(v!==0){var c=v&~u;c!==0?s=bd(c):(p&=v,p!==0&&(s=bd(p)))}else v=i&~u,v!==0?s=bd(v):p!==0&&(s=bd(p));if(s===0)return 0;if(t!==0&&t!==s&&!(t&u)&&(u=s&-s,p=t&-t,u>=p||u===16&&(p&4194240)!==0))return t;if(s&4&&(s|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)i=31-$a(t),u=1<<i,s|=e[i],t&=~u;return s}function KI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XI(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,u=e.expirationTimes,p=e.pendingLanes;0<p;){var v=31-$a(p),c=1<<v,w=u[v];w===-1?(!(c&i)||c&s)&&(u[v]=KI(c,t)):w<=t&&(e.expiredLanes|=c),p&=~c}}function t0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _E(){var e=Ef;return Ef<<=1,!(Ef&4194240)&&(Ef=64),e}function tv(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function fp(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-$a(t),e[t]=i}function YI(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<i;){var u=31-$a(i),p=1<<u;t[u]=0,s[u]=-1,e[u]=-1,i&=~p}}function m_(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-$a(i),u=1<<s;u&t|e[s]&t&&(e[s]|=t),i&=~u}}var cn=0;function xE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var bE,g_,wE,SE,EE,r0=!1,Cf=[],fl=null,ml=null,gl=null,qd=new Map,Gd=new Map,ll=[],JI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hb(e,t){switch(e){case"focusin":case"focusout":fl=null;break;case"dragenter":case"dragleave":ml=null;break;case"mouseover":case"mouseout":gl=null;break;case"pointerover":case"pointerout":qd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gd.delete(t.pointerId)}}function sd(e,t,i,s,u,p){return e===null||e.nativeEvent!==p?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:p,targetContainers:[u]},t!==null&&(t=gp(t),t!==null&&g_(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function QI(e,t,i,s,u){switch(t){case"focusin":return fl=sd(fl,e,t,i,s,u),!0;case"dragenter":return ml=sd(ml,e,t,i,s,u),!0;case"mouseover":return gl=sd(gl,e,t,i,s,u),!0;case"pointerover":var p=u.pointerId;return qd.set(p,sd(qd.get(p)||null,e,t,i,s,u)),!0;case"gotpointercapture":return p=u.pointerId,Gd.set(p,sd(Gd.get(p)||null,e,t,i,s,u)),!0}return!1}function TE(e){var t=ac(e.target);if(t!==null){var i=Sc(t);if(i!==null){if(t=i.tag,t===13){if(t=pE(i),t!==null){e.blockedOn=t,EE(e.priority,function(){wE(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=n0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);Yv=s,i.target.dispatchEvent(s),Yv=null}else return t=gp(i),t!==null&&g_(t),e.blockedOn=i,!1;t.shift()}return!0}function Wb(e,t,i){Wf(e)&&i.delete(t)}function eM(){r0=!1,fl!==null&&Wf(fl)&&(fl=null),ml!==null&&Wf(ml)&&(ml=null),gl!==null&&Wf(gl)&&(gl=null),qd.forEach(Wb),Gd.forEach(Wb)}function ld(e,t){e.blockedOn===t&&(e.blockedOn=null,r0||(r0=!0,Yo.unstable_scheduleCallback(Yo.unstable_NormalPriority,eM)))}function Hd(e){function t(u){return ld(u,e)}if(0<Cf.length){ld(Cf[0],e);for(var i=1;i<Cf.length;i++){var s=Cf[i];s.blockedOn===e&&(s.blockedOn=null)}}for(fl!==null&&ld(fl,e),ml!==null&&ld(ml,e),gl!==null&&ld(gl,e),qd.forEach(t),Gd.forEach(t),i=0;i<ll.length;i++)s=ll[i],s.blockedOn===e&&(s.blockedOn=null);for(;0<ll.length&&(i=ll[0],i.blockedOn===null);)TE(i),i.blockedOn===null&&ll.shift()}var zu=$s.ReactCurrentBatchConfig,xm=!0;function tM(e,t,i,s){var u=cn,p=zu.transition;zu.transition=null;try{cn=1,y_(e,t,i,s)}finally{cn=u,zu.transition=p}}function rM(e,t,i,s){var u=cn,p=zu.transition;zu.transition=null;try{cn=4,y_(e,t,i,s)}finally{cn=u,zu.transition=p}}function y_(e,t,i,s){if(xm){var u=n0(e,t,i,s);if(u===null)hv(e,t,s,bm,i),Hb(e,s);else if(QI(u,e,t,i,s))s.stopPropagation();else if(Hb(e,s),t&4&&-1<JI.indexOf(e)){for(;u!==null;){var p=gp(u);if(p!==null&&bE(p),p=n0(e,t,i,s),p===null&&hv(e,t,s,bm,i),p===u)break;u=p}u!==null&&s.stopPropagation()}else hv(e,t,s,null,i)}}var bm=null;function n0(e,t,i,s){if(bm=null,e=p_(s),e=ac(e),e!==null)if(t=Sc(e),t===null)e=null;else if(i=t.tag,i===13){if(e=pE(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return bm=e,null}function CE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VI()){case f_:return 1;case yE:return 4;case vm:case qI:return 16;case vE:return 536870912;default:return 16}default:return 16}}var ul=null,v_=null,Zf=null;function kE(){if(Zf)return Zf;var e,t=v_,i=t.length,s,u="value"in ul?ul.value:ul.textContent,p=u.length;for(e=0;e<i&&t[e]===u[e];e++);var v=i-e;for(s=1;s<=v&&t[i-s]===u[p-s];s++);return Zf=u.slice(e,1<s?1-s:void 0)}function Kf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function kf(){return!0}function Zb(){return!1}function ea(e){function t(i,s,u,p,v){this._reactName=i,this._targetInst=u,this.type=s,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(i=e[c],this[c]=i?i(p):p[c]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?kf:Zb,this.isPropagationStopped=Zb,this}return Qn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=kf)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=kf)},persist:function(){},isPersistent:kf}),t}var sh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},__=ea(sh),mp=Qn({},sh,{view:0,detail:0}),nM=ea(mp),rv,nv,cd,rg=Qn({},mp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:x_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cd&&(cd&&e.type==="mousemove"?(rv=e.screenX-cd.screenX,nv=e.screenY-cd.screenY):nv=rv=0,cd=e),rv)},movementY:function(e){return"movementY"in e?e.movementY:nv}}),Kb=ea(rg),iM=Qn({},rg,{dataTransfer:0}),oM=ea(iM),aM=Qn({},mp,{relatedTarget:0}),iv=ea(aM),sM=Qn({},sh,{animationName:0,elapsedTime:0,pseudoElement:0}),lM=ea(sM),cM=Qn({},sh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uM=ea(cM),hM=Qn({},sh,{data:0}),Xb=ea(hM),dM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fM[e])?!!t[e]:!1}function x_(){return mM}var gM=Qn({},mp,{key:function(e){if(e.key){var t=dM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Kf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:x_,charCode:function(e){return e.type==="keypress"?Kf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Kf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yM=ea(gM),vM=Qn({},rg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yb=ea(vM),_M=Qn({},mp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:x_}),xM=ea(_M),bM=Qn({},sh,{propertyName:0,elapsedTime:0,pseudoElement:0}),wM=ea(bM),SM=Qn({},rg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),EM=ea(SM),TM=[9,13,27,32],b_=zs&&"CompositionEvent"in window,Id=null;zs&&"documentMode"in document&&(Id=document.documentMode);var CM=zs&&"TextEvent"in window&&!Id,PE=zs&&(!b_||Id&&8<Id&&11>=Id),Jb=String.fromCharCode(32),Qb=!1;function AE(e,t){switch(e){case"keyup":return TM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _u=!1;function kM(e,t){switch(e){case"compositionend":return IE(t);case"keypress":return t.which!==32?null:(Qb=!0,Jb);case"textInput":return e=t.data,e===Jb&&Qb?null:e;default:return null}}function PM(e,t){if(_u)return e==="compositionend"||!b_&&AE(e,t)?(e=kE(),Zf=v_=ul=null,_u=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return PE&&t.locale!=="ko"?null:t.data;default:return null}}var AM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ew(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!AM[e.type]:t==="textarea"}function ME(e,t,i,s){lE(s),t=wm(t,"onChange"),0<t.length&&(i=new __("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var Md=null,Wd=null;function IM(e){$E(e,0)}function ng(e){var t=wu(e);if(tE(t))return e}function MM(e,t){if(e==="change")return t}var RE=!1;if(zs){var ov;if(zs){var av="oninput"in document;if(!av){var tw=document.createElement("div");tw.setAttribute("oninput","return;"),av=typeof tw.oninput=="function"}ov=av}else ov=!1;RE=ov&&(!document.documentMode||9<document.documentMode)}function rw(){Md&&(Md.detachEvent("onpropertychange",zE),Wd=Md=null)}function zE(e){if(e.propertyName==="value"&&ng(Wd)){var t=[];ME(t,Wd,e,p_(e)),dE(IM,t)}}function RM(e,t,i){e==="focusin"?(rw(),Md=t,Wd=i,Md.attachEvent("onpropertychange",zE)):e==="focusout"&&rw()}function zM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ng(Wd)}function LM(e,t){if(e==="click")return ng(t)}function OM(e,t){if(e==="input"||e==="change")return ng(t)}function DM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qa=typeof Object.is=="function"?Object.is:DM;function Zd(e,t){if(qa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var u=i[s];if(!Nv.call(t,u)||!qa(e[u],t[u]))return!1}return!0}function nw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function iw(e,t){var i=nw(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=t&&s>=t)return{node:i,offset:t-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=nw(i)}}function LE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?LE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function OE(){for(var e=window,t=mm();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=mm(e.document)}return t}function w_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function BM(e){var t=OE(),i=e.focusedElem,s=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&LE(i.ownerDocument.documentElement,i)){if(s!==null&&w_(i)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=i.textContent.length,p=Math.min(s.start,u);s=s.end===void 0?p:Math.min(s.end,u),!e.extend&&p>s&&(u=s,s=p,p=u),u=iw(i,p);var v=iw(i,s);u&&v&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==v.node||e.focusOffset!==v.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),p>s?(e.addRange(t),e.extend(v.node,v.offset)):(t.setEnd(v.node,v.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var FM=zs&&"documentMode"in document&&11>=document.documentMode,xu=null,i0=null,Rd=null,o0=!1;function ow(e,t,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;o0||xu==null||xu!==mm(s)||(s=xu,"selectionStart"in s&&w_(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Rd&&Zd(Rd,s)||(Rd=s,s=wm(i0,"onSelect"),0<s.length&&(t=new __("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=xu)))}function Pf(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var bu={animationend:Pf("Animation","AnimationEnd"),animationiteration:Pf("Animation","AnimationIteration"),animationstart:Pf("Animation","AnimationStart"),transitionend:Pf("Transition","TransitionEnd")},sv={},DE={};zs&&(DE=document.createElement("div").style,"AnimationEvent"in window||(delete bu.animationend.animation,delete bu.animationiteration.animation,delete bu.animationstart.animation),"TransitionEvent"in window||delete bu.transitionend.transition);function ig(e){if(sv[e])return sv[e];if(!bu[e])return e;var t=bu[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in DE)return sv[e]=t[i];return e}var BE=ig("animationend"),FE=ig("animationiteration"),NE=ig("animationstart"),UE=ig("transitionend"),jE=new Map,aw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cl(e,t){jE.set(e,t),wc(t,[e])}for(var lv=0;lv<aw.length;lv++){var cv=aw[lv],NM=cv.toLowerCase(),UM=cv[0].toUpperCase()+cv.slice(1);Cl(NM,"on"+UM)}Cl(BE,"onAnimationEnd");Cl(FE,"onAnimationIteration");Cl(NE,"onAnimationStart");Cl("dblclick","onDoubleClick");Cl("focusin","onFocus");Cl("focusout","onBlur");Cl(UE,"onTransitionEnd");$u("onMouseEnter",["mouseout","mouseover"]);$u("onMouseLeave",["mouseout","mouseover"]);$u("onPointerEnter",["pointerout","pointerover"]);$u("onPointerLeave",["pointerout","pointerover"]);wc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wc("onBeforeInput",["compositionend","keypress","textInput","paste"]);wc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jM=new Set("cancel close invalid load scroll toggle".split(" ").concat(wd));function sw(e,t,i){var s=e.type||"unknown-event";e.currentTarget=i,NI(s,t,void 0,e),e.currentTarget=null}function $E(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],u=s.event;s=s.listeners;e:{var p=void 0;if(t)for(var v=s.length-1;0<=v;v--){var c=s[v],w=c.instance,T=c.currentTarget;if(c=c.listener,w!==p&&u.isPropagationStopped())break e;sw(u,c,T),p=w}else for(v=0;v<s.length;v++){if(c=s[v],w=c.instance,T=c.currentTarget,c=c.listener,w!==p&&u.isPropagationStopped())break e;sw(u,c,T),p=w}}}if(ym)throw e=e0,ym=!1,e0=null,e}function An(e,t){var i=t[u0];i===void 0&&(i=t[u0]=new Set);var s=e+"__bubble";i.has(s)||(VE(t,e,2,!1),i.add(s))}function uv(e,t,i){var s=0;t&&(s|=4),VE(i,e,s,t)}var Af="_reactListening"+Math.random().toString(36).slice(2);function Kd(e){if(!e[Af]){e[Af]=!0,XS.forEach(function(i){i!=="selectionchange"&&(jM.has(i)||uv(i,!1,e),uv(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Af]||(t[Af]=!0,uv("selectionchange",!1,t))}}function VE(e,t,i,s){switch(CE(t)){case 1:var u=tM;break;case 4:u=rM;break;default:u=y_}i=u.bind(null,t,i,e),u=void 0,!Qv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),s?u!==void 0?e.addEventListener(t,i,{capture:!0,passive:u}):e.addEventListener(t,i,!0):u!==void 0?e.addEventListener(t,i,{passive:u}):e.addEventListener(t,i,!1)}function hv(e,t,i,s,u){var p=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var v=s.tag;if(v===3||v===4){var c=s.stateNode.containerInfo;if(c===u||c.nodeType===8&&c.parentNode===u)break;if(v===4)for(v=s.return;v!==null;){var w=v.tag;if((w===3||w===4)&&(w=v.stateNode.containerInfo,w===u||w.nodeType===8&&w.parentNode===u))return;v=v.return}for(;c!==null;){if(v=ac(c),v===null)return;if(w=v.tag,w===5||w===6){s=p=v;continue e}c=c.parentNode}}s=s.return}dE(function(){var T=p,P=p_(i),L=[];e:{var B=jE.get(e);if(B!==void 0){var U=__,O=e;switch(e){case"keypress":if(Kf(i)===0)break e;case"keydown":case"keyup":U=yM;break;case"focusin":O="focus",U=iv;break;case"focusout":O="blur",U=iv;break;case"beforeblur":case"afterblur":U=iv;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=Kb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=oM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=xM;break;case BE:case FE:case NE:U=lM;break;case UE:U=wM;break;case"scroll":U=nM;break;case"wheel":U=EM;break;case"copy":case"cut":case"paste":U=uM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=Yb}var N=(t&4)!==0,ae=!N&&e==="scroll",q=N?B!==null?B+"Capture":null:B;N=[];for(var W=T,K;W!==null;){K=W;var ie=K.stateNode;if(K.tag===5&&ie!==null&&(K=ie,q!==null&&(ie=Vd(W,q),ie!=null&&N.push(Xd(W,ie,K)))),ae)break;W=W.return}0<N.length&&(B=new U(B,O,null,i,P),L.push({event:B,listeners:N}))}}if(!(t&7)){e:{if(B=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",B&&i!==Yv&&(O=i.relatedTarget||i.fromElement)&&(ac(O)||O[Ls]))break e;if((U||B)&&(B=P.window===P?P:(B=P.ownerDocument)?B.defaultView||B.parentWindow:window,U?(O=i.relatedTarget||i.toElement,U=T,O=O?ac(O):null,O!==null&&(ae=Sc(O),O!==ae||O.tag!==5&&O.tag!==6)&&(O=null)):(U=null,O=T),U!==O)){if(N=Kb,ie="onMouseLeave",q="onMouseEnter",W="mouse",(e==="pointerout"||e==="pointerover")&&(N=Yb,ie="onPointerLeave",q="onPointerEnter",W="pointer"),ae=U==null?B:wu(U),K=O==null?B:wu(O),B=new N(ie,W+"leave",U,i,P),B.target=ae,B.relatedTarget=K,ie=null,ac(P)===T&&(N=new N(q,W+"enter",O,i,P),N.target=K,N.relatedTarget=ae,ie=N),ae=ie,U&&O)t:{for(N=U,q=O,W=0,K=N;K;K=lu(K))W++;for(K=0,ie=q;ie;ie=lu(ie))K++;for(;0<W-K;)N=lu(N),W--;for(;0<K-W;)q=lu(q),K--;for(;W--;){if(N===q||q!==null&&N===q.alternate)break t;N=lu(N),q=lu(q)}N=null}else N=null;U!==null&&lw(L,B,U,N,!1),O!==null&&ae!==null&&lw(L,ae,O,N,!0)}}e:{if(B=T?wu(T):window,U=B.nodeName&&B.nodeName.toLowerCase(),U==="select"||U==="input"&&B.type==="file")var _e=MM;else if(ew(B))if(RE)_e=OM;else{_e=zM;var Se=RM}else(U=B.nodeName)&&U.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(_e=LM);if(_e&&(_e=_e(e,T))){ME(L,_e,i,P);break e}Se&&Se(e,B,T),e==="focusout"&&(Se=B._wrapperState)&&Se.controlled&&B.type==="number"&&Hv(B,"number",B.value)}switch(Se=T?wu(T):window,e){case"focusin":(ew(Se)||Se.contentEditable==="true")&&(xu=Se,i0=T,Rd=null);break;case"focusout":Rd=i0=xu=null;break;case"mousedown":o0=!0;break;case"contextmenu":case"mouseup":case"dragend":o0=!1,ow(L,i,P);break;case"selectionchange":if(FM)break;case"keydown":case"keyup":ow(L,i,P)}var xe;if(b_)e:{switch(e){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else _u?AE(e,i)&&(Me="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Me="onCompositionStart");Me&&(PE&&i.locale!=="ko"&&(_u||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&_u&&(xe=kE()):(ul=P,v_="value"in ul?ul.value:ul.textContent,_u=!0)),Se=wm(T,Me),0<Se.length&&(Me=new Xb(Me,e,null,i,P),L.push({event:Me,listeners:Se}),xe?Me.data=xe:(xe=IE(i),xe!==null&&(Me.data=xe)))),(xe=CM?kM(e,i):PM(e,i))&&(T=wm(T,"onBeforeInput"),0<T.length&&(P=new Xb("onBeforeInput","beforeinput",null,i,P),L.push({event:P,listeners:T}),P.data=xe))}$E(L,t)})}function Xd(e,t,i){return{instance:e,listener:t,currentTarget:i}}function wm(e,t){for(var i=t+"Capture",s=[];e!==null;){var u=e,p=u.stateNode;u.tag===5&&p!==null&&(u=p,p=Vd(e,i),p!=null&&s.unshift(Xd(e,p,u)),p=Vd(e,t),p!=null&&s.push(Xd(e,p,u))),e=e.return}return s}function lu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lw(e,t,i,s,u){for(var p=t._reactName,v=[];i!==null&&i!==s;){var c=i,w=c.alternate,T=c.stateNode;if(w!==null&&w===s)break;c.tag===5&&T!==null&&(c=T,u?(w=Vd(i,p),w!=null&&v.unshift(Xd(i,w,c))):u||(w=Vd(i,p),w!=null&&v.push(Xd(i,w,c)))),i=i.return}v.length!==0&&e.push({event:t,listeners:v})}var $M=/\r\n?/g,VM=/\u0000|\uFFFD/g;function cw(e){return(typeof e=="string"?e:""+e).replace($M,`
`).replace(VM,"")}function If(e,t,i){if(t=cw(t),cw(e)!==t&&i)throw Error(et(425))}function Sm(){}var a0=null,s0=null;function l0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var c0=typeof setTimeout=="function"?setTimeout:void 0,qM=typeof clearTimeout=="function"?clearTimeout:void 0,uw=typeof Promise=="function"?Promise:void 0,GM=typeof queueMicrotask=="function"?queueMicrotask:typeof uw<"u"?function(e){return uw.resolve(null).then(e).catch(HM)}:c0;function HM(e){setTimeout(function(){throw e})}function dv(e,t){var i=t,s=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"){if(s===0){e.removeChild(u),Hd(t);return}s--}else i!=="$"&&i!=="$?"&&i!=="$!"||s++;i=u}while(i);Hd(t)}function yl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var lh=Math.random().toString(36).slice(2),is="__reactFiber$"+lh,Yd="__reactProps$"+lh,Ls="__reactContainer$"+lh,u0="__reactEvents$"+lh,WM="__reactListeners$"+lh,ZM="__reactHandles$"+lh;function ac(e){var t=e[is];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ls]||i[is]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=hw(e);e!==null;){if(i=e[is])return i;e=hw(e)}return t}e=i,i=e.parentNode}return null}function gp(e){return e=e[is]||e[Ls],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function og(e){return e[Yd]||null}var h0=[],Su=-1;function kl(e){return{current:e}}function In(e){0>Su||(e.current=h0[Su],h0[Su]=null,Su--)}function Cn(e,t){Su++,h0[Su]=e.current,e.current=t}var El={},so=kl(El),Mo=kl(!1),fc=El;function Vu(e,t){var i=e.type.contextTypes;if(!i)return El;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var u={},p;for(p in i)u[p]=t[p];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function Ro(e){return e=e.childContextTypes,e!=null}function Em(){In(Mo),In(so)}function dw(e,t,i){if(so.current!==El)throw Error(et(168));Cn(so,t),Cn(Mo,i)}function qE(e,t,i){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return i;s=s.getChildContext();for(var u in s)if(!(u in t))throw Error(et(108,RI(e)||"Unknown",u));return Qn({},i,s)}function Tm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||El,fc=so.current,Cn(so,e),Cn(Mo,Mo.current),!0}function pw(e,t,i){var s=e.stateNode;if(!s)throw Error(et(169));i?(e=qE(e,t,fc),s.__reactInternalMemoizedMergedChildContext=e,In(Mo),In(so),Cn(so,e)):In(Mo),Cn(Mo,i)}var ks=null,ag=!1,pv=!1;function GE(e){ks===null?ks=[e]:ks.push(e)}function KM(e){ag=!0,GE(e)}function Pl(){if(!pv&&ks!==null){pv=!0;var e=0,t=cn;try{var i=ks;for(cn=1;e<i.length;e++){var s=i[e];do s=s(!0);while(s!==null)}ks=null,ag=!1}catch(u){throw ks!==null&&(ks=ks.slice(e+1)),gE(f_,Pl),u}finally{cn=t,pv=!1}}return null}var Eu=[],Tu=0,Cm=null,km=0,ga=[],ya=0,mc=null,Ps=1,As="";function rc(e,t){Eu[Tu++]=km,Eu[Tu++]=Cm,Cm=e,km=t}function HE(e,t,i){ga[ya++]=Ps,ga[ya++]=As,ga[ya++]=mc,mc=e;var s=Ps;e=As;var u=32-$a(s)-1;s&=~(1<<u),i+=1;var p=32-$a(t)+u;if(30<p){var v=u-u%5;p=(s&(1<<v)-1).toString(32),s>>=v,u-=v,Ps=1<<32-$a(t)+u|i<<u|s,As=p+e}else Ps=1<<p|i<<u|s,As=e}function S_(e){e.return!==null&&(rc(e,1),HE(e,1,0))}function E_(e){for(;e===Cm;)Cm=Eu[--Tu],Eu[Tu]=null,km=Eu[--Tu],Eu[Tu]=null;for(;e===mc;)mc=ga[--ya],ga[ya]=null,As=ga[--ya],ga[ya]=null,Ps=ga[--ya],ga[ya]=null}var Ko=null,Zo=null,$n=!1,Na=null;function WE(e,t){var i=va(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function fw(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ko=e,Zo=yl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ko=e,Zo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=mc!==null?{id:Ps,overflow:As}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=va(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Ko=e,Zo=null,!0):!1;default:return!1}}function d0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function p0(e){if($n){var t=Zo;if(t){var i=t;if(!fw(e,t)){if(d0(e))throw Error(et(418));t=yl(i.nextSibling);var s=Ko;t&&fw(e,t)?WE(s,i):(e.flags=e.flags&-4097|2,$n=!1,Ko=e)}}else{if(d0(e))throw Error(et(418));e.flags=e.flags&-4097|2,$n=!1,Ko=e}}}function mw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ko=e}function Mf(e){if(e!==Ko)return!1;if(!$n)return mw(e),$n=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!l0(e.type,e.memoizedProps)),t&&(t=Zo)){if(d0(e))throw ZE(),Error(et(418));for(;t;)WE(e,t),t=yl(t.nextSibling)}if(mw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Zo=yl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Zo=null}}else Zo=Ko?yl(e.stateNode.nextSibling):null;return!0}function ZE(){for(var e=Zo;e;)e=yl(e.nextSibling)}function qu(){Zo=Ko=null,$n=!1}function T_(e){Na===null?Na=[e]:Na.push(e)}var XM=$s.ReactCurrentBatchConfig;function Da(e,t){if(e&&e.defaultProps){t=Qn({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var Pm=kl(null),Am=null,Cu=null,C_=null;function k_(){C_=Cu=Am=null}function P_(e){var t=Pm.current;In(Pm),e._currentValue=t}function f0(e,t,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function Lu(e,t){Am=e,C_=Cu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Io=!0),e.firstContext=null)}function wa(e){var t=e._currentValue;if(C_!==e)if(e={context:e,memoizedValue:t,next:null},Cu===null){if(Am===null)throw Error(et(308));Cu=e,Am.dependencies={lanes:0,firstContext:e}}else Cu=Cu.next=e;return t}var sc=null;function A_(e){sc===null?sc=[e]:sc.push(e)}function KE(e,t,i,s){var u=t.interleaved;return u===null?(i.next=i,A_(t)):(i.next=u.next,u.next=i),t.interleaved=i,Os(e,s)}function Os(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var sl=!1;function I_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Is(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vl(e,t,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Wr&2){var u=s.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),s.pending=t,Os(e,i)}return u=s.interleaved,u===null?(t.next=t,A_(s)):(t.next=u.next,u.next=t),s.interleaved=t,Os(e,i)}function Xf(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,m_(e,i)}}function gw(e,t){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var u=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var v={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};p===null?u=p=v:p=p.next=v,i=i.next}while(i!==null);p===null?u=p=t:p=p.next=t}else u=p=t;i={baseState:s.baseState,firstBaseUpdate:u,lastBaseUpdate:p,shared:s.shared,effects:s.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Im(e,t,i,s){var u=e.updateQueue;sl=!1;var p=u.firstBaseUpdate,v=u.lastBaseUpdate,c=u.shared.pending;if(c!==null){u.shared.pending=null;var w=c,T=w.next;w.next=null,v===null?p=T:v.next=T,v=w;var P=e.alternate;P!==null&&(P=P.updateQueue,c=P.lastBaseUpdate,c!==v&&(c===null?P.firstBaseUpdate=T:c.next=T,P.lastBaseUpdate=w))}if(p!==null){var L=u.baseState;v=0,P=T=w=null,c=p;do{var B=c.lane,U=c.eventTime;if((s&B)===B){P!==null&&(P=P.next={eventTime:U,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var O=e,N=c;switch(B=t,U=i,N.tag){case 1:if(O=N.payload,typeof O=="function"){L=O.call(U,L,B);break e}L=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=N.payload,B=typeof O=="function"?O.call(U,L,B):O,B==null)break e;L=Qn({},L,B);break e;case 2:sl=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,B=u.effects,B===null?u.effects=[c]:B.push(c))}else U={eventTime:U,lane:B,tag:c.tag,payload:c.payload,callback:c.callback,next:null},P===null?(T=P=U,w=L):P=P.next=U,v|=B;if(c=c.next,c===null){if(c=u.shared.pending,c===null)break;B=c,c=B.next,B.next=null,u.lastBaseUpdate=B,u.shared.pending=null}}while(1);if(P===null&&(w=L),u.baseState=w,u.firstBaseUpdate=T,u.lastBaseUpdate=P,t=u.shared.interleaved,t!==null){u=t;do v|=u.lane,u=u.next;while(u!==t)}else p===null&&(u.shared.lanes=0);yc|=v,e.lanes=v,e.memoizedState=L}}function yw(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],u=s.callback;if(u!==null){if(s.callback=null,s=i,typeof u!="function")throw Error(et(191,u));u.call(s)}}}var YE=new KS.Component().refs;function m0(e,t,i,s){t=e.memoizedState,i=i(s,t),i=i==null?t:Qn({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var sg={isMounted:function(e){return(e=e._reactInternals)?Sc(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var s=_o(),u=xl(e),p=Is(s,u);p.payload=t,i!=null&&(p.callback=i),t=vl(e,p,u),t!==null&&(Va(t,e,u,s),Xf(t,e,u))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=_o(),u=xl(e),p=Is(s,u);p.tag=1,p.payload=t,i!=null&&(p.callback=i),t=vl(e,p,u),t!==null&&(Va(t,e,u,s),Xf(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=_o(),s=xl(e),u=Is(i,s);u.tag=2,t!=null&&(u.callback=t),t=vl(e,u,s),t!==null&&(Va(t,e,s,i),Xf(t,e,s))}};function vw(e,t,i,s,u,p,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,p,v):t.prototype&&t.prototype.isPureReactComponent?!Zd(i,s)||!Zd(u,p):!0}function JE(e,t,i){var s=!1,u=El,p=t.contextType;return typeof p=="object"&&p!==null?p=wa(p):(u=Ro(t)?fc:so.current,s=t.contextTypes,p=(s=s!=null)?Vu(e,u):El),t=new t(i,p),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sg,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=p),t}function _w(e,t,i,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&sg.enqueueReplaceState(t,t.state,null)}function g0(e,t,i,s){var u=e.stateNode;u.props=i,u.state=e.memoizedState,u.refs=YE,I_(e);var p=t.contextType;typeof p=="object"&&p!==null?u.context=wa(p):(p=Ro(t)?fc:so.current,u.context=Vu(e,p)),u.state=e.memoizedState,p=t.getDerivedStateFromProps,typeof p=="function"&&(m0(e,t,p,i),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&sg.enqueueReplaceState(u,u.state,null),Im(e,i,u,s),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function ud(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(et(309));var s=i.stateNode}if(!s)throw Error(et(147,e));var u=s,p=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===p?t.ref:(t=function(v){var c=u.refs;c===YE&&(c=u.refs={}),v===null?delete c[p]:c[p]=v},t._stringRef=p,t)}if(typeof e!="string")throw Error(et(284));if(!i._owner)throw Error(et(290,e))}return e}function Rf(e,t){throw e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xw(e){var t=e._init;return t(e._payload)}function QE(e){function t(q,W){if(e){var K=q.deletions;K===null?(q.deletions=[W],q.flags|=16):K.push(W)}}function i(q,W){if(!e)return null;for(;W!==null;)t(q,W),W=W.sibling;return null}function s(q,W){for(q=new Map;W!==null;)W.key!==null?q.set(W.key,W):q.set(W.index,W),W=W.sibling;return q}function u(q,W){return q=bl(q,W),q.index=0,q.sibling=null,q}function p(q,W,K){return q.index=K,e?(K=q.alternate,K!==null?(K=K.index,K<W?(q.flags|=2,W):K):(q.flags|=2,W)):(q.flags|=1048576,W)}function v(q){return e&&q.alternate===null&&(q.flags|=2),q}function c(q,W,K,ie){return W===null||W.tag!==6?(W=xv(K,q.mode,ie),W.return=q,W):(W=u(W,K),W.return=q,W)}function w(q,W,K,ie){var _e=K.type;return _e===vu?P(q,W,K.props.children,ie,K.key):W!==null&&(W.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===al&&xw(_e)===W.type)?(ie=u(W,K.props),ie.ref=ud(q,W,K),ie.return=q,ie):(ie=rm(K.type,K.key,K.props,null,q.mode,ie),ie.ref=ud(q,W,K),ie.return=q,ie)}function T(q,W,K,ie){return W===null||W.tag!==4||W.stateNode.containerInfo!==K.containerInfo||W.stateNode.implementation!==K.implementation?(W=bv(K,q.mode,ie),W.return=q,W):(W=u(W,K.children||[]),W.return=q,W)}function P(q,W,K,ie,_e){return W===null||W.tag!==7?(W=dc(K,q.mode,ie,_e),W.return=q,W):(W=u(W,K),W.return=q,W)}function L(q,W,K){if(typeof W=="string"&&W!==""||typeof W=="number")return W=xv(""+W,q.mode,K),W.return=q,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case bf:return K=rm(W.type,W.key,W.props,null,q.mode,K),K.ref=ud(q,null,W),K.return=q,K;case yu:return W=bv(W,q.mode,K),W.return=q,W;case al:var ie=W._init;return L(q,ie(W._payload),K)}if(xd(W)||od(W))return W=dc(W,q.mode,K,null),W.return=q,W;Rf(q,W)}return null}function B(q,W,K,ie){var _e=W!==null?W.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return _e!==null?null:c(q,W,""+K,ie);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case bf:return K.key===_e?w(q,W,K,ie):null;case yu:return K.key===_e?T(q,W,K,ie):null;case al:return _e=K._init,B(q,W,_e(K._payload),ie)}if(xd(K)||od(K))return _e!==null?null:P(q,W,K,ie,null);Rf(q,K)}return null}function U(q,W,K,ie,_e){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return q=q.get(K)||null,c(W,q,""+ie,_e);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case bf:return q=q.get(ie.key===null?K:ie.key)||null,w(W,q,ie,_e);case yu:return q=q.get(ie.key===null?K:ie.key)||null,T(W,q,ie,_e);case al:var Se=ie._init;return U(q,W,K,Se(ie._payload),_e)}if(xd(ie)||od(ie))return q=q.get(K)||null,P(W,q,ie,_e,null);Rf(W,ie)}return null}function O(q,W,K,ie){for(var _e=null,Se=null,xe=W,Me=W=0,Ze=null;xe!==null&&Me<K.length;Me++){xe.index>Me?(Ze=xe,xe=null):Ze=xe.sibling;var Le=B(q,xe,K[Me],ie);if(Le===null){xe===null&&(xe=Ze);break}e&&xe&&Le.alternate===null&&t(q,xe),W=p(Le,W,Me),Se===null?_e=Le:Se.sibling=Le,Se=Le,xe=Ze}if(Me===K.length)return i(q,xe),$n&&rc(q,Me),_e;if(xe===null){for(;Me<K.length;Me++)xe=L(q,K[Me],ie),xe!==null&&(W=p(xe,W,Me),Se===null?_e=xe:Se.sibling=xe,Se=xe);return $n&&rc(q,Me),_e}for(xe=s(q,xe);Me<K.length;Me++)Ze=U(xe,q,Me,K[Me],ie),Ze!==null&&(e&&Ze.alternate!==null&&xe.delete(Ze.key===null?Me:Ze.key),W=p(Ze,W,Me),Se===null?_e=Ze:Se.sibling=Ze,Se=Ze);return e&&xe.forEach(function(Je){return t(q,Je)}),$n&&rc(q,Me),_e}function N(q,W,K,ie){var _e=od(K);if(typeof _e!="function")throw Error(et(150));if(K=_e.call(K),K==null)throw Error(et(151));for(var Se=_e=null,xe=W,Me=W=0,Ze=null,Le=K.next();xe!==null&&!Le.done;Me++,Le=K.next()){xe.index>Me?(Ze=xe,xe=null):Ze=xe.sibling;var Je=B(q,xe,Le.value,ie);if(Je===null){xe===null&&(xe=Ze);break}e&&xe&&Je.alternate===null&&t(q,xe),W=p(Je,W,Me),Se===null?_e=Je:Se.sibling=Je,Se=Je,xe=Ze}if(Le.done)return i(q,xe),$n&&rc(q,Me),_e;if(xe===null){for(;!Le.done;Me++,Le=K.next())Le=L(q,Le.value,ie),Le!==null&&(W=p(Le,W,Me),Se===null?_e=Le:Se.sibling=Le,Se=Le);return $n&&rc(q,Me),_e}for(xe=s(q,xe);!Le.done;Me++,Le=K.next())Le=U(xe,q,Me,Le.value,ie),Le!==null&&(e&&Le.alternate!==null&&xe.delete(Le.key===null?Me:Le.key),W=p(Le,W,Me),Se===null?_e=Le:Se.sibling=Le,Se=Le);return e&&xe.forEach(function(ur){return t(q,ur)}),$n&&rc(q,Me),_e}function ae(q,W,K,ie){if(typeof K=="object"&&K!==null&&K.type===vu&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case bf:e:{for(var _e=K.key,Se=W;Se!==null;){if(Se.key===_e){if(_e=K.type,_e===vu){if(Se.tag===7){i(q,Se.sibling),W=u(Se,K.props.children),W.return=q,q=W;break e}}else if(Se.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===al&&xw(_e)===Se.type){i(q,Se.sibling),W=u(Se,K.props),W.ref=ud(q,Se,K),W.return=q,q=W;break e}i(q,Se);break}else t(q,Se);Se=Se.sibling}K.type===vu?(W=dc(K.props.children,q.mode,ie,K.key),W.return=q,q=W):(ie=rm(K.type,K.key,K.props,null,q.mode,ie),ie.ref=ud(q,W,K),ie.return=q,q=ie)}return v(q);case yu:e:{for(Se=K.key;W!==null;){if(W.key===Se)if(W.tag===4&&W.stateNode.containerInfo===K.containerInfo&&W.stateNode.implementation===K.implementation){i(q,W.sibling),W=u(W,K.children||[]),W.return=q,q=W;break e}else{i(q,W);break}else t(q,W);W=W.sibling}W=bv(K,q.mode,ie),W.return=q,q=W}return v(q);case al:return Se=K._init,ae(q,W,Se(K._payload),ie)}if(xd(K))return O(q,W,K,ie);if(od(K))return N(q,W,K,ie);Rf(q,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,W!==null&&W.tag===6?(i(q,W.sibling),W=u(W,K),W.return=q,q=W):(i(q,W),W=xv(K,q.mode,ie),W.return=q,q=W),v(q)):i(q,W)}return ae}var Gu=QE(!0),eT=QE(!1),yp={},ss=kl(yp),Jd=kl(yp),Qd=kl(yp);function lc(e){if(e===yp)throw Error(et(174));return e}function M_(e,t){switch(Cn(Qd,t),Cn(Jd,e),Cn(ss,yp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Zv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Zv(t,e)}In(ss),Cn(ss,t)}function Hu(){In(ss),In(Jd),In(Qd)}function tT(e){lc(Qd.current);var t=lc(ss.current),i=Zv(t,e.type);t!==i&&(Cn(Jd,e),Cn(ss,i))}function R_(e){Jd.current===e&&(In(ss),In(Jd))}var Yn=kl(0);function Mm(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fv=[];function z_(){for(var e=0;e<fv.length;e++)fv[e]._workInProgressVersionPrimary=null;fv.length=0}var Yf=$s.ReactCurrentDispatcher,mv=$s.ReactCurrentBatchConfig,gc=0,Jn=null,Ci=null,Di=null,Rm=!1,zd=!1,ep=0,YM=0;function ro(){throw Error(et(321))}function L_(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!qa(e[i],t[i]))return!1;return!0}function O_(e,t,i,s,u,p){if(gc=p,Jn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yf.current=e===null||e.memoizedState===null?tR:rR,e=i(s,u),zd){p=0;do{if(zd=!1,ep=0,25<=p)throw Error(et(301));p+=1,Di=Ci=null,t.updateQueue=null,Yf.current=nR,e=i(s,u)}while(zd)}if(Yf.current=zm,t=Ci!==null&&Ci.next!==null,gc=0,Di=Ci=Jn=null,Rm=!1,t)throw Error(et(300));return e}function D_(){var e=ep!==0;return ep=0,e}function ts(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Di===null?Jn.memoizedState=Di=e:Di=Di.next=e,Di}function Sa(){if(Ci===null){var e=Jn.alternate;e=e!==null?e.memoizedState:null}else e=Ci.next;var t=Di===null?Jn.memoizedState:Di.next;if(t!==null)Di=t,Ci=e;else{if(e===null)throw Error(et(310));Ci=e,e={memoizedState:Ci.memoizedState,baseState:Ci.baseState,baseQueue:Ci.baseQueue,queue:Ci.queue,next:null},Di===null?Jn.memoizedState=Di=e:Di=Di.next=e}return Di}function tp(e,t){return typeof t=="function"?t(e):t}function gv(e){var t=Sa(),i=t.queue;if(i===null)throw Error(et(311));i.lastRenderedReducer=e;var s=Ci,u=s.baseQueue,p=i.pending;if(p!==null){if(u!==null){var v=u.next;u.next=p.next,p.next=v}s.baseQueue=u=p,i.pending=null}if(u!==null){p=u.next,s=s.baseState;var c=v=null,w=null,T=p;do{var P=T.lane;if((gc&P)===P)w!==null&&(w=w.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),s=T.hasEagerState?T.eagerState:e(s,T.action);else{var L={lane:P,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};w===null?(c=w=L,v=s):w=w.next=L,Jn.lanes|=P,yc|=P}T=T.next}while(T!==null&&T!==p);w===null?v=s:w.next=c,qa(s,t.memoizedState)||(Io=!0),t.memoizedState=s,t.baseState=v,t.baseQueue=w,i.lastRenderedState=s}if(e=i.interleaved,e!==null){u=e;do p=u.lane,Jn.lanes|=p,yc|=p,u=u.next;while(u!==e)}else u===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function yv(e){var t=Sa(),i=t.queue;if(i===null)throw Error(et(311));i.lastRenderedReducer=e;var s=i.dispatch,u=i.pending,p=t.memoizedState;if(u!==null){i.pending=null;var v=u=u.next;do p=e(p,v.action),v=v.next;while(v!==u);qa(p,t.memoizedState)||(Io=!0),t.memoizedState=p,t.baseQueue===null&&(t.baseState=p),i.lastRenderedState=p}return[p,s]}function rT(){}function nT(e,t){var i=Jn,s=Sa(),u=t(),p=!qa(s.memoizedState,u);if(p&&(s.memoizedState=u,Io=!0),s=s.queue,B_(aT.bind(null,i,s,e),[e]),s.getSnapshot!==t||p||Di!==null&&Di.memoizedState.tag&1){if(i.flags|=2048,rp(9,oT.bind(null,i,s,u,t),void 0,null),Bi===null)throw Error(et(349));gc&30||iT(i,t,u)}return u}function iT(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Jn.updateQueue,t===null?(t={lastEffect:null,stores:null},Jn.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function oT(e,t,i,s){t.value=i,t.getSnapshot=s,sT(t)&&lT(e)}function aT(e,t,i){return i(function(){sT(t)&&lT(e)})}function sT(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!qa(e,i)}catch{return!0}}function lT(e){var t=Os(e,1);t!==null&&Va(t,e,1,-1)}function bw(e){var t=ts();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tp,lastRenderedState:e},t.queue=e,e=e.dispatch=eR.bind(null,Jn,e),[t.memoizedState,e]}function rp(e,t,i,s){return e={tag:e,create:t,destroy:i,deps:s,next:null},t=Jn.updateQueue,t===null?(t={lastEffect:null,stores:null},Jn.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e)),e}function cT(){return Sa().memoizedState}function Jf(e,t,i,s){var u=ts();Jn.flags|=e,u.memoizedState=rp(1|t,i,void 0,s===void 0?null:s)}function lg(e,t,i,s){var u=Sa();s=s===void 0?null:s;var p=void 0;if(Ci!==null){var v=Ci.memoizedState;if(p=v.destroy,s!==null&&L_(s,v.deps)){u.memoizedState=rp(t,i,p,s);return}}Jn.flags|=e,u.memoizedState=rp(1|t,i,p,s)}function ww(e,t){return Jf(8390656,8,e,t)}function B_(e,t){return lg(2048,8,e,t)}function uT(e,t){return lg(4,2,e,t)}function hT(e,t){return lg(4,4,e,t)}function dT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pT(e,t,i){return i=i!=null?i.concat([e]):null,lg(4,4,dT.bind(null,t,e),i)}function F_(){}function fT(e,t){var i=Sa();t=t===void 0?null:t;var s=i.memoizedState;return s!==null&&t!==null&&L_(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function mT(e,t){var i=Sa();t=t===void 0?null:t;var s=i.memoizedState;return s!==null&&t!==null&&L_(t,s[1])?s[0]:(e=e(),i.memoizedState=[e,t],e)}function gT(e,t,i){return gc&21?(qa(i,t)||(i=_E(),Jn.lanes|=i,yc|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Io=!0),e.memoizedState=i)}function JM(e,t){var i=cn;cn=i!==0&&4>i?i:4,e(!0);var s=mv.transition;mv.transition={};try{e(!1),t()}finally{cn=i,mv.transition=s}}function yT(){return Sa().memoizedState}function QM(e,t,i){var s=xl(e);if(i={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null},vT(e))_T(t,i);else if(i=KE(e,t,i,s),i!==null){var u=_o();Va(i,e,s,u),xT(i,t,s)}}function eR(e,t,i){var s=xl(e),u={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null};if(vT(e))_T(t,u);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=t.lastRenderedReducer,p!==null))try{var v=t.lastRenderedState,c=p(v,i);if(u.hasEagerState=!0,u.eagerState=c,qa(c,v)){var w=t.interleaved;w===null?(u.next=u,A_(t)):(u.next=w.next,w.next=u),t.interleaved=u;return}}catch{}finally{}i=KE(e,t,u,s),i!==null&&(u=_o(),Va(i,e,s,u),xT(i,t,s))}}function vT(e){var t=e.alternate;return e===Jn||t!==null&&t===Jn}function _T(e,t){zd=Rm=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function xT(e,t,i){if(i&4194240){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,m_(e,i)}}var zm={readContext:wa,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useInsertionEffect:ro,useLayoutEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useMutableSource:ro,useSyncExternalStore:ro,useId:ro,unstable_isNewReconciler:!1},tR={readContext:wa,useCallback:function(e,t){return ts().memoizedState=[e,t===void 0?null:t],e},useContext:wa,useEffect:ww,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Jf(4194308,4,dT.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Jf(4194308,4,e,t)},useInsertionEffect:function(e,t){return Jf(4,2,e,t)},useMemo:function(e,t){var i=ts();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var s=ts();return t=i!==void 0?i(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=QM.bind(null,Jn,e),[s.memoizedState,e]},useRef:function(e){var t=ts();return e={current:e},t.memoizedState=e},useState:bw,useDebugValue:F_,useDeferredValue:function(e){return ts().memoizedState=e},useTransition:function(){var e=bw(!1),t=e[0];return e=JM.bind(null,e[1]),ts().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var s=Jn,u=ts();if($n){if(i===void 0)throw Error(et(407));i=i()}else{if(i=t(),Bi===null)throw Error(et(349));gc&30||iT(s,t,i)}u.memoizedState=i;var p={value:i,getSnapshot:t};return u.queue=p,ww(aT.bind(null,s,p,e),[e]),s.flags|=2048,rp(9,oT.bind(null,s,p,i,t),void 0,null),i},useId:function(){var e=ts(),t=Bi.identifierPrefix;if($n){var i=As,s=Ps;i=(s&~(1<<32-$a(s)-1)).toString(32)+i,t=":"+t+"R"+i,i=ep++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=YM++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rR={readContext:wa,useCallback:fT,useContext:wa,useEffect:B_,useImperativeHandle:pT,useInsertionEffect:uT,useLayoutEffect:hT,useMemo:mT,useReducer:gv,useRef:cT,useState:function(){return gv(tp)},useDebugValue:F_,useDeferredValue:function(e){var t=Sa();return gT(t,Ci.memoizedState,e)},useTransition:function(){var e=gv(tp)[0],t=Sa().memoizedState;return[e,t]},useMutableSource:rT,useSyncExternalStore:nT,useId:yT,unstable_isNewReconciler:!1},nR={readContext:wa,useCallback:fT,useContext:wa,useEffect:B_,useImperativeHandle:pT,useInsertionEffect:uT,useLayoutEffect:hT,useMemo:mT,useReducer:yv,useRef:cT,useState:function(){return yv(tp)},useDebugValue:F_,useDeferredValue:function(e){var t=Sa();return Ci===null?t.memoizedState=e:gT(t,Ci.memoizedState,e)},useTransition:function(){var e=yv(tp)[0],t=Sa().memoizedState;return[e,t]},useMutableSource:rT,useSyncExternalStore:nT,useId:yT,unstable_isNewReconciler:!1};function Wu(e,t){try{var i="",s=t;do i+=MI(s),s=s.return;while(s);var u=i}catch(p){u=`
Error generating stack: `+p.message+`
`+p.stack}return{value:e,source:t,stack:u,digest:null}}function vv(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function y0(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var iR=typeof WeakMap=="function"?WeakMap:Map;function bT(e,t,i){i=Is(-1,i),i.tag=3,i.payload={element:null};var s=t.value;return i.callback=function(){Om||(Om=!0,k0=s),y0(e,t)},i}function wT(e,t,i){i=Is(-1,i),i.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var u=t.value;i.payload=function(){return s(u)},i.callback=function(){y0(e,t)}}var p=e.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(i.callback=function(){y0(e,t),typeof s!="function"&&(_l===null?_l=new Set([this]):_l.add(this));var v=t.stack;this.componentDidCatch(t.value,{componentStack:v!==null?v:""})}),i}function Sw(e,t,i){var s=e.pingCache;if(s===null){s=e.pingCache=new iR;var u=new Set;s.set(t,u)}else u=s.get(t),u===void 0&&(u=new Set,s.set(t,u));u.has(i)||(u.add(i),e=vR.bind(null,e,t,i),t.then(e,e))}function Ew(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Tw(e,t,i,s,u){return e.mode&1?(e.flags|=65536,e.lanes=u,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Is(-1,1),t.tag=2,vl(i,t,1))),i.lanes|=1),e)}var oR=$s.ReactCurrentOwner,Io=!1;function vo(e,t,i,s){t.child=e===null?eT(t,null,i,s):Gu(t,e.child,i,s)}function Cw(e,t,i,s,u){i=i.render;var p=t.ref;return Lu(t,u),s=O_(e,t,i,s,p,u),i=D_(),e!==null&&!Io?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Ds(e,t,u)):($n&&i&&S_(t),t.flags|=1,vo(e,t,s,u),t.child)}function kw(e,t,i,s,u){if(e===null){var p=i.type;return typeof p=="function"&&!H_(p)&&p.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=p,ST(e,t,p,s,u)):(e=rm(i.type,null,s,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(p=e.child,!(e.lanes&u)){var v=p.memoizedProps;if(i=i.compare,i=i!==null?i:Zd,i(v,s)&&e.ref===t.ref)return Ds(e,t,u)}return t.flags|=1,e=bl(p,s),e.ref=t.ref,e.return=t,t.child=e}function ST(e,t,i,s,u){if(e!==null){var p=e.memoizedProps;if(Zd(p,s)&&e.ref===t.ref)if(Io=!1,t.pendingProps=s=p,(e.lanes&u)!==0)e.flags&131072&&(Io=!0);else return t.lanes=e.lanes,Ds(e,t,u)}return v0(e,t,i,s,u)}function ET(e,t,i){var s=t.pendingProps,u=s.children,p=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cn(Pu,Ho),Ho|=i;else{if(!(i&1073741824))return e=p!==null?p.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cn(Pu,Ho),Ho|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=p!==null?p.baseLanes:i,Cn(Pu,Ho),Ho|=s}else p!==null?(s=p.baseLanes|i,t.memoizedState=null):s=i,Cn(Pu,Ho),Ho|=s;return vo(e,t,u,i),t.child}function TT(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function v0(e,t,i,s,u){var p=Ro(i)?fc:so.current;return p=Vu(t,p),Lu(t,u),i=O_(e,t,i,s,p,u),s=D_(),e!==null&&!Io?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Ds(e,t,u)):($n&&s&&S_(t),t.flags|=1,vo(e,t,i,u),t.child)}function Pw(e,t,i,s,u){if(Ro(i)){var p=!0;Tm(t)}else p=!1;if(Lu(t,u),t.stateNode===null)Qf(e,t),JE(t,i,s),g0(t,i,s,u),s=!0;else if(e===null){var v=t.stateNode,c=t.memoizedProps;v.props=c;var w=v.context,T=i.contextType;typeof T=="object"&&T!==null?T=wa(T):(T=Ro(i)?fc:so.current,T=Vu(t,T));var P=i.getDerivedStateFromProps,L=typeof P=="function"||typeof v.getSnapshotBeforeUpdate=="function";L||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(c!==s||w!==T)&&_w(t,v,s,T),sl=!1;var B=t.memoizedState;v.state=B,Im(t,s,v,u),w=t.memoizedState,c!==s||B!==w||Mo.current||sl?(typeof P=="function"&&(m0(t,i,P,s),w=t.memoizedState),(c=sl||vw(t,i,c,s,B,w,T))?(L||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(t.flags|=4194308)):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=w),v.props=s,v.state=w,v.context=T,s=c):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{v=t.stateNode,XE(e,t),c=t.memoizedProps,T=t.type===t.elementType?c:Da(t.type,c),v.props=T,L=t.pendingProps,B=v.context,w=i.contextType,typeof w=="object"&&w!==null?w=wa(w):(w=Ro(i)?fc:so.current,w=Vu(t,w));var U=i.getDerivedStateFromProps;(P=typeof U=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(c!==L||B!==w)&&_w(t,v,s,w),sl=!1,B=t.memoizedState,v.state=B,Im(t,s,v,u);var O=t.memoizedState;c!==L||B!==O||Mo.current||sl?(typeof U=="function"&&(m0(t,i,U,s),O=t.memoizedState),(T=sl||vw(t,i,T,s,B,O,w)||!1)?(P||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(s,O,w),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(s,O,w)),typeof v.componentDidUpdate=="function"&&(t.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof v.componentDidUpdate!="function"||c===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=O),v.props=s,v.state=O,v.context=w,s=T):(typeof v.componentDidUpdate!="function"||c===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),s=!1)}return _0(e,t,i,s,p,u)}function _0(e,t,i,s,u,p){TT(e,t);var v=(t.flags&128)!==0;if(!s&&!v)return u&&pw(t,i,!1),Ds(e,t,p);s=t.stateNode,oR.current=t;var c=v&&typeof i.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&v?(t.child=Gu(t,e.child,null,p),t.child=Gu(t,null,c,p)):vo(e,t,c,p),t.memoizedState=s.state,u&&pw(t,i,!0),t.child}function CT(e){var t=e.stateNode;t.pendingContext?dw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&dw(e,t.context,!1),M_(e,t.containerInfo)}function Aw(e,t,i,s,u){return qu(),T_(u),t.flags|=256,vo(e,t,i,s),t.child}var x0={dehydrated:null,treeContext:null,retryLane:0};function b0(e){return{baseLanes:e,cachePool:null,transitions:null}}function kT(e,t,i){var s=t.pendingProps,u=Yn.current,p=!1,v=(t.flags&128)!==0,c;if((c=v)||(c=e!==null&&e.memoizedState===null?!1:(u&2)!==0),c?(p=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),Cn(Yn,u&1),e===null)return p0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(v=s.children,e=s.fallback,p?(s=t.mode,p=t.child,v={mode:"hidden",children:v},!(s&1)&&p!==null?(p.childLanes=0,p.pendingProps=v):p=hg(v,s,0,null),e=dc(e,s,i,null),p.return=t,e.return=t,p.sibling=e,t.child=p,t.child.memoizedState=b0(i),t.memoizedState=x0,e):N_(t,v));if(u=e.memoizedState,u!==null&&(c=u.dehydrated,c!==null))return aR(e,t,v,s,c,u,i);if(p){p=s.fallback,v=t.mode,u=e.child,c=u.sibling;var w={mode:"hidden",children:s.children};return!(v&1)&&t.child!==u?(s=t.child,s.childLanes=0,s.pendingProps=w,t.deletions=null):(s=bl(u,w),s.subtreeFlags=u.subtreeFlags&14680064),c!==null?p=bl(c,p):(p=dc(p,v,i,null),p.flags|=2),p.return=t,s.return=t,s.sibling=p,t.child=s,s=p,p=t.child,v=e.child.memoizedState,v=v===null?b0(i):{baseLanes:v.baseLanes|i,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=e.childLanes&~i,t.memoizedState=x0,s}return p=e.child,e=p.sibling,s=bl(p,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=i),s.return=t,s.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=s,t.memoizedState=null,s}function N_(e,t){return t=hg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function zf(e,t,i,s){return s!==null&&T_(s),Gu(t,e.child,null,i),e=N_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function aR(e,t,i,s,u,p,v){if(i)return t.flags&256?(t.flags&=-257,s=vv(Error(et(422))),zf(e,t,v,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(p=s.fallback,u=t.mode,s=hg({mode:"visible",children:s.children},u,0,null),p=dc(p,u,v,null),p.flags|=2,s.return=t,p.return=t,s.sibling=p,t.child=s,t.mode&1&&Gu(t,e.child,null,v),t.child.memoizedState=b0(v),t.memoizedState=x0,p);if(!(t.mode&1))return zf(e,t,v,null);if(u.data==="$!"){if(s=u.nextSibling&&u.nextSibling.dataset,s)var c=s.dgst;return s=c,p=Error(et(419)),s=vv(p,s,void 0),zf(e,t,v,s)}if(c=(v&e.childLanes)!==0,Io||c){if(s=Bi,s!==null){switch(v&-v){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(s.suspendedLanes|v)?0:u,u!==0&&u!==p.retryLane&&(p.retryLane=u,Os(e,u),Va(s,e,u,-1))}return G_(),s=vv(Error(et(421))),zf(e,t,v,s)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=_R.bind(null,e),u._reactRetry=t,null):(e=p.treeContext,Zo=yl(u.nextSibling),Ko=t,$n=!0,Na=null,e!==null&&(ga[ya++]=Ps,ga[ya++]=As,ga[ya++]=mc,Ps=e.id,As=e.overflow,mc=t),t=N_(t,s.children),t.flags|=4096,t)}function Iw(e,t,i){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),f0(e.return,t,i)}function _v(e,t,i,s,u){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:u}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=s,p.tail=i,p.tailMode=u)}function PT(e,t,i){var s=t.pendingProps,u=s.revealOrder,p=s.tail;if(vo(e,t,s.children,i),s=Yn.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Iw(e,i,t);else if(e.tag===19)Iw(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Cn(Yn,s),!(t.mode&1))t.memoizedState=null;else switch(u){case"forwards":for(i=t.child,u=null;i!==null;)e=i.alternate,e!==null&&Mm(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=t.child,t.child=null):(u=i.sibling,i.sibling=null),_v(t,!1,u,i,p);break;case"backwards":for(i=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&Mm(e)===null){t.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}_v(t,!0,i,null,p);break;case"together":_v(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ds(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),yc|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,i=bl(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=bl(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function sR(e,t,i){switch(t.tag){case 3:CT(t),qu();break;case 5:tT(t);break;case 1:Ro(t.type)&&Tm(t);break;case 4:M_(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,u=t.memoizedProps.value;Cn(Pm,s._currentValue),s._currentValue=u;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Cn(Yn,Yn.current&1),t.flags|=128,null):i&t.child.childLanes?kT(e,t,i):(Cn(Yn,Yn.current&1),e=Ds(e,t,i),e!==null?e.sibling:null);Cn(Yn,Yn.current&1);break;case 19:if(s=(i&t.childLanes)!==0,e.flags&128){if(s)return PT(e,t,i);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),Cn(Yn,Yn.current),s)break;return null;case 22:case 23:return t.lanes=0,ET(e,t,i)}return Ds(e,t,i)}var AT,w0,IT,MT;AT=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};w0=function(){};IT=function(e,t,i,s){var u=e.memoizedProps;if(u!==s){e=t.stateNode,lc(ss.current);var p=null;switch(i){case"input":u=qv(e,u),s=qv(e,s),p=[];break;case"select":u=Qn({},u,{value:void 0}),s=Qn({},s,{value:void 0}),p=[];break;case"textarea":u=Wv(e,u),s=Wv(e,s),p=[];break;default:typeof u.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Sm)}Kv(i,s);var v;i=null;for(T in u)if(!s.hasOwnProperty(T)&&u.hasOwnProperty(T)&&u[T]!=null)if(T==="style"){var c=u[T];for(v in c)c.hasOwnProperty(v)&&(i||(i={}),i[v]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(jd.hasOwnProperty(T)?p||(p=[]):(p=p||[]).push(T,null));for(T in s){var w=s[T];if(c=u!=null?u[T]:void 0,s.hasOwnProperty(T)&&w!==c&&(w!=null||c!=null))if(T==="style")if(c){for(v in c)!c.hasOwnProperty(v)||w&&w.hasOwnProperty(v)||(i||(i={}),i[v]="");for(v in w)w.hasOwnProperty(v)&&c[v]!==w[v]&&(i||(i={}),i[v]=w[v])}else i||(p||(p=[]),p.push(T,i)),i=w;else T==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,c=c?c.__html:void 0,w!=null&&c!==w&&(p=p||[]).push(T,w)):T==="children"?typeof w!="string"&&typeof w!="number"||(p=p||[]).push(T,""+w):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(jd.hasOwnProperty(T)?(w!=null&&T==="onScroll"&&An("scroll",e),p||c===w||(p=[])):(p=p||[]).push(T,w))}i&&(p=p||[]).push("style",i);var T=p;(t.updateQueue=T)&&(t.flags|=4)}};MT=function(e,t,i,s){i!==s&&(t.flags|=4)};function hd(e,t){if(!$n)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function no(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(t)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,s|=u.subtreeFlags&14680064,s|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,s|=u.subtreeFlags,s|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function lR(e,t,i){var s=t.pendingProps;switch(E_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return no(t),null;case 1:return Ro(t.type)&&Em(),no(t),null;case 3:return s=t.stateNode,Hu(),In(Mo),In(so),z_(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Mf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Na!==null&&(I0(Na),Na=null))),w0(e,t),no(t),null;case 5:R_(t);var u=lc(Qd.current);if(i=t.type,e!==null&&t.stateNode!=null)IT(e,t,i,s,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(et(166));return no(t),null}if(e=lc(ss.current),Mf(t)){s=t.stateNode,i=t.type;var p=t.memoizedProps;switch(s[is]=t,s[Yd]=p,e=(t.mode&1)!==0,i){case"dialog":An("cancel",s),An("close",s);break;case"iframe":case"object":case"embed":An("load",s);break;case"video":case"audio":for(u=0;u<wd.length;u++)An(wd[u],s);break;case"source":An("error",s);break;case"img":case"image":case"link":An("error",s),An("load",s);break;case"details":An("toggle",s);break;case"input":Nb(s,p),An("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!p.multiple},An("invalid",s);break;case"textarea":jb(s,p),An("invalid",s)}Kv(i,p),u=null;for(var v in p)if(p.hasOwnProperty(v)){var c=p[v];v==="children"?typeof c=="string"?s.textContent!==c&&(p.suppressHydrationWarning!==!0&&If(s.textContent,c,e),u=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(p.suppressHydrationWarning!==!0&&If(s.textContent,c,e),u=["children",""+c]):jd.hasOwnProperty(v)&&c!=null&&v==="onScroll"&&An("scroll",s)}switch(i){case"input":wf(s),Ub(s,p,!0);break;case"textarea":wf(s),$b(s);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(s.onclick=Sm)}s=u,t.updateQueue=s,s!==null&&(t.flags|=4)}else{v=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=iE(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=v.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=v.createElement(i,{is:s.is}):(e=v.createElement(i),i==="select"&&(v=e,s.multiple?v.multiple=!0:s.size&&(v.size=s.size))):e=v.createElementNS(e,i),e[is]=t,e[Yd]=s,AT(e,t,!1,!1),t.stateNode=e;e:{switch(v=Xv(i,s),i){case"dialog":An("cancel",e),An("close",e),u=s;break;case"iframe":case"object":case"embed":An("load",e),u=s;break;case"video":case"audio":for(u=0;u<wd.length;u++)An(wd[u],e);u=s;break;case"source":An("error",e),u=s;break;case"img":case"image":case"link":An("error",e),An("load",e),u=s;break;case"details":An("toggle",e),u=s;break;case"input":Nb(e,s),u=qv(e,s),An("invalid",e);break;case"option":u=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},u=Qn({},s,{value:void 0}),An("invalid",e);break;case"textarea":jb(e,s),u=Wv(e,s),An("invalid",e);break;default:u=s}Kv(i,u),c=u;for(p in c)if(c.hasOwnProperty(p)){var w=c[p];p==="style"?sE(e,w):p==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&oE(e,w)):p==="children"?typeof w=="string"?(i!=="textarea"||w!=="")&&$d(e,w):typeof w=="number"&&$d(e,""+w):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(jd.hasOwnProperty(p)?w!=null&&p==="onScroll"&&An("scroll",e):w!=null&&c_(e,p,w,v))}switch(i){case"input":wf(e),Ub(e,s,!1);break;case"textarea":wf(e),$b(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Sl(s.value));break;case"select":e.multiple=!!s.multiple,p=s.value,p!=null?Iu(e,!!s.multiple,p,!1):s.defaultValue!=null&&Iu(e,!!s.multiple,s.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Sm)}switch(i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return no(t),null;case 6:if(e&&t.stateNode!=null)MT(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(et(166));if(i=lc(Qd.current),lc(ss.current),Mf(t)){if(s=t.stateNode,i=t.memoizedProps,s[is]=t,(p=s.nodeValue!==i)&&(e=Ko,e!==null))switch(e.tag){case 3:If(s.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&If(s.nodeValue,i,(e.mode&1)!==0)}p&&(t.flags|=4)}else s=(i.nodeType===9?i:i.ownerDocument).createTextNode(s),s[is]=t,t.stateNode=s}return no(t),null;case 13:if(In(Yn),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($n&&Zo!==null&&t.mode&1&&!(t.flags&128))ZE(),qu(),t.flags|=98560,p=!1;else if(p=Mf(t),s!==null&&s.dehydrated!==null){if(e===null){if(!p)throw Error(et(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(et(317));p[is]=t}else qu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;no(t),p=!1}else Na!==null&&(I0(Na),Na=null),p=!0;if(!p)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Yn.current&1?Pi===0&&(Pi=3):G_())),t.updateQueue!==null&&(t.flags|=4),no(t),null);case 4:return Hu(),w0(e,t),e===null&&Kd(t.stateNode.containerInfo),no(t),null;case 10:return P_(t.type._context),no(t),null;case 17:return Ro(t.type)&&Em(),no(t),null;case 19:if(In(Yn),p=t.memoizedState,p===null)return no(t),null;if(s=(t.flags&128)!==0,v=p.rendering,v===null)if(s)hd(p,!1);else{if(Pi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(v=Mm(e),v!==null){for(t.flags|=128,hd(p,!1),s=v.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=i,i=t.child;i!==null;)p=i,e=s,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=e,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,e=v.dependencies,p.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Cn(Yn,Yn.current&1|2),t.child}e=e.sibling}p.tail!==null&&di()>Zu&&(t.flags|=128,s=!0,hd(p,!1),t.lanes=4194304)}else{if(!s)if(e=Mm(v),e!==null){if(t.flags|=128,s=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),hd(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!$n)return no(t),null}else 2*di()-p.renderingStartTime>Zu&&i!==1073741824&&(t.flags|=128,s=!0,hd(p,!1),t.lanes=4194304);p.isBackwards?(v.sibling=t.child,t.child=v):(i=p.last,i!==null?i.sibling=v:t.child=v,p.last=v)}return p.tail!==null?(t=p.tail,p.rendering=t,p.tail=t.sibling,p.renderingStartTime=di(),t.sibling=null,i=Yn.current,Cn(Yn,s?i&1|2:i&1),t):(no(t),null);case 22:case 23:return q_(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Ho&1073741824&&(no(t),t.subtreeFlags&6&&(t.flags|=8192)):no(t),null;case 24:return null;case 25:return null}throw Error(et(156,t.tag))}function cR(e,t){switch(E_(t),t.tag){case 1:return Ro(t.type)&&Em(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Hu(),In(Mo),In(so),z_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return R_(t),null;case 13:if(In(Yn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));qu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return In(Yn),null;case 4:return Hu(),null;case 10:return P_(t.type._context),null;case 22:case 23:return q_(),null;case 24:return null;default:return null}}var Lf=!1,ao=!1,uR=typeof WeakSet=="function"?WeakSet:Set,It=null;function ku(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(s){ai(e,t,s)}else i.current=null}function S0(e,t,i){try{i()}catch(s){ai(e,t,s)}}var Mw=!1;function hR(e,t){if(a0=xm,e=OE(),w_(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var u=s.anchorOffset,p=s.focusNode;s=s.focusOffset;try{i.nodeType,p.nodeType}catch{i=null;break e}var v=0,c=-1,w=-1,T=0,P=0,L=e,B=null;t:for(;;){for(var U;L!==i||u!==0&&L.nodeType!==3||(c=v+u),L!==p||s!==0&&L.nodeType!==3||(w=v+s),L.nodeType===3&&(v+=L.nodeValue.length),(U=L.firstChild)!==null;)B=L,L=U;for(;;){if(L===e)break t;if(B===i&&++T===u&&(c=v),B===p&&++P===s&&(w=v),(U=L.nextSibling)!==null)break;L=B,B=L.parentNode}L=U}i=c===-1||w===-1?null:{start:c,end:w}}else i=null}i=i||{start:0,end:0}}else i=null;for(s0={focusedElem:e,selectionRange:i},xm=!1,It=t;It!==null;)if(t=It,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,It=e;else for(;It!==null;){t=It;try{var O=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var N=O.memoizedProps,ae=O.memoizedState,q=t.stateNode,W=q.getSnapshotBeforeUpdate(t.elementType===t.type?N:Da(t.type,N),ae);q.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var K=t.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(ie){ai(t,t.return,ie)}if(e=t.sibling,e!==null){e.return=t.return,It=e;break}It=t.return}return O=Mw,Mw=!1,O}function Ld(e,t,i){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&e)===e){var p=u.destroy;u.destroy=void 0,p!==void 0&&S0(t,i,p)}u=u.next}while(u!==s)}}function cg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var s=i.create;i.destroy=s()}i=i.next}while(i!==t)}}function E0(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function RT(e){var t=e.alternate;t!==null&&(e.alternate=null,RT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[is],delete t[Yd],delete t[u0],delete t[WM],delete t[ZM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zT(e){return e.tag===5||e.tag===3||e.tag===4}function Rw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function T0(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Sm));else if(s!==4&&(e=e.child,e!==null))for(T0(e,t,i),e=e.sibling;e!==null;)T0(e,t,i),e=e.sibling}function C0(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(C0(e,t,i),e=e.sibling;e!==null;)C0(e,t,i),e=e.sibling}var Hi=null,Fa=!1;function nl(e,t,i){for(i=i.child;i!==null;)LT(e,t,i),i=i.sibling}function LT(e,t,i){if(as&&typeof as.onCommitFiberUnmount=="function")try{as.onCommitFiberUnmount(tg,i)}catch{}switch(i.tag){case 5:ao||ku(i,t);case 6:var s=Hi,u=Fa;Hi=null,nl(e,t,i),Hi=s,Fa=u,Hi!==null&&(Fa?(e=Hi,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Hi.removeChild(i.stateNode));break;case 18:Hi!==null&&(Fa?(e=Hi,i=i.stateNode,e.nodeType===8?dv(e.parentNode,i):e.nodeType===1&&dv(e,i),Hd(e)):dv(Hi,i.stateNode));break;case 4:s=Hi,u=Fa,Hi=i.stateNode.containerInfo,Fa=!0,nl(e,t,i),Hi=s,Fa=u;break;case 0:case 11:case 14:case 15:if(!ao&&(s=i.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){u=s=s.next;do{var p=u,v=p.destroy;p=p.tag,v!==void 0&&(p&2||p&4)&&S0(i,t,v),u=u.next}while(u!==s)}nl(e,t,i);break;case 1:if(!ao&&(ku(i,t),s=i.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(c){ai(i,t,c)}nl(e,t,i);break;case 21:nl(e,t,i);break;case 22:i.mode&1?(ao=(s=ao)||i.memoizedState!==null,nl(e,t,i),ao=s):nl(e,t,i);break;default:nl(e,t,i)}}function zw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new uR),t.forEach(function(s){var u=xR.bind(null,e,s);i.has(s)||(i.add(s),s.then(u,u))})}}function Oa(e,t){var i=t.deletions;if(i!==null)for(var s=0;s<i.length;s++){var u=i[s];try{var p=e,v=t,c=v;e:for(;c!==null;){switch(c.tag){case 5:Hi=c.stateNode,Fa=!1;break e;case 3:Hi=c.stateNode.containerInfo,Fa=!0;break e;case 4:Hi=c.stateNode.containerInfo,Fa=!0;break e}c=c.return}if(Hi===null)throw Error(et(160));LT(p,v,u),Hi=null,Fa=!1;var w=u.alternate;w!==null&&(w.return=null),u.return=null}catch(T){ai(u,t,T)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)OT(t,e),t=t.sibling}function OT(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Oa(t,e),es(e),s&4){try{Ld(3,e,e.return),cg(3,e)}catch(N){ai(e,e.return,N)}try{Ld(5,e,e.return)}catch(N){ai(e,e.return,N)}}break;case 1:Oa(t,e),es(e),s&512&&i!==null&&ku(i,i.return);break;case 5:if(Oa(t,e),es(e),s&512&&i!==null&&ku(i,i.return),e.flags&32){var u=e.stateNode;try{$d(u,"")}catch(N){ai(e,e.return,N)}}if(s&4&&(u=e.stateNode,u!=null)){var p=e.memoizedProps,v=i!==null?i.memoizedProps:p,c=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{c==="input"&&p.type==="radio"&&p.name!=null&&rE(u,p),Xv(c,v);var T=Xv(c,p);for(v=0;v<w.length;v+=2){var P=w[v],L=w[v+1];P==="style"?sE(u,L):P==="dangerouslySetInnerHTML"?oE(u,L):P==="children"?$d(u,L):c_(u,P,L,T)}switch(c){case"input":Gv(u,p);break;case"textarea":nE(u,p);break;case"select":var B=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!p.multiple;var U=p.value;U!=null?Iu(u,!!p.multiple,U,!1):B!==!!p.multiple&&(p.defaultValue!=null?Iu(u,!!p.multiple,p.defaultValue,!0):Iu(u,!!p.multiple,p.multiple?[]:"",!1))}u[Yd]=p}catch(N){ai(e,e.return,N)}}break;case 6:if(Oa(t,e),es(e),s&4){if(e.stateNode===null)throw Error(et(162));u=e.stateNode,p=e.memoizedProps;try{u.nodeValue=p}catch(N){ai(e,e.return,N)}}break;case 3:if(Oa(t,e),es(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{Hd(t.containerInfo)}catch(N){ai(e,e.return,N)}break;case 4:Oa(t,e),es(e);break;case 13:Oa(t,e),es(e),u=e.child,u.flags&8192&&(p=u.memoizedState!==null,u.stateNode.isHidden=p,!p||u.alternate!==null&&u.alternate.memoizedState!==null||($_=di())),s&4&&zw(e);break;case 22:if(P=i!==null&&i.memoizedState!==null,e.mode&1?(ao=(T=ao)||P,Oa(t,e),ao=T):Oa(t,e),es(e),s&8192){if(T=e.memoizedState!==null,(e.stateNode.isHidden=T)&&!P&&e.mode&1)for(It=e,P=e.child;P!==null;){for(L=It=P;It!==null;){switch(B=It,U=B.child,B.tag){case 0:case 11:case 14:case 15:Ld(4,B,B.return);break;case 1:ku(B,B.return);var O=B.stateNode;if(typeof O.componentWillUnmount=="function"){s=B,i=B.return;try{t=s,O.props=t.memoizedProps,O.state=t.memoizedState,O.componentWillUnmount()}catch(N){ai(s,i,N)}}break;case 5:ku(B,B.return);break;case 22:if(B.memoizedState!==null){Ow(L);continue}}U!==null?(U.return=B,It=U):Ow(L)}P=P.sibling}e:for(P=null,L=e;;){if(L.tag===5){if(P===null){P=L;try{u=L.stateNode,T?(p=u.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(c=L.stateNode,w=L.memoizedProps.style,v=w!=null&&w.hasOwnProperty("display")?w.display:null,c.style.display=aE("display",v))}catch(N){ai(e,e.return,N)}}}else if(L.tag===6){if(P===null)try{L.stateNode.nodeValue=T?"":L.memoizedProps}catch(N){ai(e,e.return,N)}}else if((L.tag!==22&&L.tag!==23||L.memoizedState===null||L===e)&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===e)break e;for(;L.sibling===null;){if(L.return===null||L.return===e)break e;P===L&&(P=null),L=L.return}P===L&&(P=null),L.sibling.return=L.return,L=L.sibling}}break;case 19:Oa(t,e),es(e),s&4&&zw(e);break;case 21:break;default:Oa(t,e),es(e)}}function es(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(zT(i)){var s=i;break e}i=i.return}throw Error(et(160))}switch(s.tag){case 5:var u=s.stateNode;s.flags&32&&($d(u,""),s.flags&=-33);var p=Rw(e);C0(e,p,u);break;case 3:case 4:var v=s.stateNode.containerInfo,c=Rw(e);T0(e,c,v);break;default:throw Error(et(161))}}catch(w){ai(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dR(e,t,i){It=e,DT(e)}function DT(e,t,i){for(var s=(e.mode&1)!==0;It!==null;){var u=It,p=u.child;if(u.tag===22&&s){var v=u.memoizedState!==null||Lf;if(!v){var c=u.alternate,w=c!==null&&c.memoizedState!==null||ao;c=Lf;var T=ao;if(Lf=v,(ao=w)&&!T)for(It=u;It!==null;)v=It,w=v.child,v.tag===22&&v.memoizedState!==null?Dw(u):w!==null?(w.return=v,It=w):Dw(u);for(;p!==null;)It=p,DT(p),p=p.sibling;It=u,Lf=c,ao=T}Lw(e)}else u.subtreeFlags&8772&&p!==null?(p.return=u,It=p):Lw(e)}}function Lw(e){for(;It!==null;){var t=It;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ao||cg(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!ao)if(i===null)s.componentDidMount();else{var u=t.elementType===t.type?i.memoizedProps:Da(t.type,i.memoizedProps);s.componentDidUpdate(u,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var p=t.updateQueue;p!==null&&yw(t,p,s);break;case 3:var v=t.updateQueue;if(v!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}yw(t,v,i)}break;case 5:var c=t.stateNode;if(i===null&&t.flags&4){i=c;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&i.focus();break;case"img":w.src&&(i.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var T=t.alternate;if(T!==null){var P=T.memoizedState;if(P!==null){var L=P.dehydrated;L!==null&&Hd(L)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}ao||t.flags&512&&E0(t)}catch(B){ai(t,t.return,B)}}if(t===e){It=null;break}if(i=t.sibling,i!==null){i.return=t.return,It=i;break}It=t.return}}function Ow(e){for(;It!==null;){var t=It;if(t===e){It=null;break}var i=t.sibling;if(i!==null){i.return=t.return,It=i;break}It=t.return}}function Dw(e){for(;It!==null;){var t=It;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{cg(4,t)}catch(w){ai(t,i,w)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var u=t.return;try{s.componentDidMount()}catch(w){ai(t,u,w)}}var p=t.return;try{E0(t)}catch(w){ai(t,p,w)}break;case 5:var v=t.return;try{E0(t)}catch(w){ai(t,v,w)}}}catch(w){ai(t,t.return,w)}if(t===e){It=null;break}var c=t.sibling;if(c!==null){c.return=t.return,It=c;break}It=t.return}}var pR=Math.ceil,Lm=$s.ReactCurrentDispatcher,U_=$s.ReactCurrentOwner,_a=$s.ReactCurrentBatchConfig,Wr=0,Bi=null,_i=null,Ki=0,Ho=0,Pu=kl(0),Pi=0,np=null,yc=0,ug=0,j_=0,Od=null,Ao=null,$_=0,Zu=1/0,Cs=null,Om=!1,k0=null,_l=null,Of=!1,hl=null,Dm=0,Dd=0,P0=null,em=-1,tm=0;function _o(){return Wr&6?di():em!==-1?em:em=di()}function xl(e){return e.mode&1?Wr&2&&Ki!==0?Ki&-Ki:XM.transition!==null?(tm===0&&(tm=_E()),tm):(e=cn,e!==0||(e=window.event,e=e===void 0?16:CE(e.type)),e):1}function Va(e,t,i,s){if(50<Dd)throw Dd=0,P0=null,Error(et(185));fp(e,i,s),(!(Wr&2)||e!==Bi)&&(e===Bi&&(!(Wr&2)&&(ug|=i),Pi===4&&cl(e,Ki)),zo(e,s),i===1&&Wr===0&&!(t.mode&1)&&(Zu=di()+500,ag&&Pl()))}function zo(e,t){var i=e.callbackNode;XI(e,t);var s=_m(e,e===Bi?Ki:0);if(s===0)i!==null&&Gb(i),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(i!=null&&Gb(i),t===1)e.tag===0?KM(Bw.bind(null,e)):GE(Bw.bind(null,e)),GM(function(){!(Wr&6)&&Pl()}),i=null;else{switch(xE(s)){case 1:i=f_;break;case 4:i=yE;break;case 16:i=vm;break;case 536870912:i=vE;break;default:i=vm}i=qT(i,BT.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function BT(e,t){if(em=-1,tm=0,Wr&6)throw Error(et(327));var i=e.callbackNode;if(Ou()&&e.callbackNode!==i)return null;var s=_m(e,e===Bi?Ki:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Bm(e,s);else{t=s;var u=Wr;Wr|=2;var p=NT();(Bi!==e||Ki!==t)&&(Cs=null,Zu=di()+500,hc(e,t));do try{gR();break}catch(c){FT(e,c)}while(1);k_(),Lm.current=p,Wr=u,_i!==null?t=0:(Bi=null,Ki=0,t=Pi)}if(t!==0){if(t===2&&(u=t0(e),u!==0&&(s=u,t=A0(e,u))),t===1)throw i=np,hc(e,0),cl(e,s),zo(e,di()),i;if(t===6)cl(e,s);else{if(u=e.current.alternate,!(s&30)&&!fR(u)&&(t=Bm(e,s),t===2&&(p=t0(e),p!==0&&(s=p,t=A0(e,p))),t===1))throw i=np,hc(e,0),cl(e,s),zo(e,di()),i;switch(e.finishedWork=u,e.finishedLanes=s,t){case 0:case 1:throw Error(et(345));case 2:nc(e,Ao,Cs);break;case 3:if(cl(e,s),(s&130023424)===s&&(t=$_+500-di(),10<t)){if(_m(e,0)!==0)break;if(u=e.suspendedLanes,(u&s)!==s){_o(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=c0(nc.bind(null,e,Ao,Cs),t);break}nc(e,Ao,Cs);break;case 4:if(cl(e,s),(s&4194240)===s)break;for(t=e.eventTimes,u=-1;0<s;){var v=31-$a(s);p=1<<v,v=t[v],v>u&&(u=v),s&=~p}if(s=u,s=di()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*pR(s/1960))-s,10<s){e.timeoutHandle=c0(nc.bind(null,e,Ao,Cs),s);break}nc(e,Ao,Cs);break;case 5:nc(e,Ao,Cs);break;default:throw Error(et(329))}}}return zo(e,di()),e.callbackNode===i?BT.bind(null,e):null}function A0(e,t){var i=Od;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),e=Bm(e,t),e!==2&&(t=Ao,Ao=i,t!==null&&I0(t)),e}function I0(e){Ao===null?Ao=e:Ao.push.apply(Ao,e)}function fR(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var s=0;s<i.length;s++){var u=i[s],p=u.getSnapshot;u=u.value;try{if(!qa(p(),u))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cl(e,t){for(t&=~j_,t&=~ug,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-$a(t),s=1<<i;e[i]=-1,t&=~s}}function Bw(e){if(Wr&6)throw Error(et(327));Ou();var t=_m(e,0);if(!(t&1))return zo(e,di()),null;var i=Bm(e,t);if(e.tag!==0&&i===2){var s=t0(e);s!==0&&(t=s,i=A0(e,s))}if(i===1)throw i=np,hc(e,0),cl(e,t),zo(e,di()),i;if(i===6)throw Error(et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,nc(e,Ao,Cs),zo(e,di()),null}function V_(e,t){var i=Wr;Wr|=1;try{return e(t)}finally{Wr=i,Wr===0&&(Zu=di()+500,ag&&Pl())}}function vc(e){hl!==null&&hl.tag===0&&!(Wr&6)&&Ou();var t=Wr;Wr|=1;var i=_a.transition,s=cn;try{if(_a.transition=null,cn=1,e)return e()}finally{cn=s,_a.transition=i,Wr=t,!(Wr&6)&&Pl()}}function q_(){Ho=Pu.current,In(Pu)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,qM(i)),_i!==null)for(i=_i.return;i!==null;){var s=i;switch(E_(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Em();break;case 3:Hu(),In(Mo),In(so),z_();break;case 5:R_(s);break;case 4:Hu();break;case 13:In(Yn);break;case 19:In(Yn);break;case 10:P_(s.type._context);break;case 22:case 23:q_()}i=i.return}if(Bi=e,_i=e=bl(e.current,null),Ki=Ho=t,Pi=0,np=null,j_=ug=yc=0,Ao=Od=null,sc!==null){for(t=0;t<sc.length;t++)if(i=sc[t],s=i.interleaved,s!==null){i.interleaved=null;var u=s.next,p=i.pending;if(p!==null){var v=p.next;p.next=u,s.next=v}i.pending=s}sc=null}return e}function FT(e,t){do{var i=_i;try{if(k_(),Yf.current=zm,Rm){for(var s=Jn.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}Rm=!1}if(gc=0,Di=Ci=Jn=null,zd=!1,ep=0,U_.current=null,i===null||i.return===null){Pi=1,np=t,_i=null;break}e:{var p=e,v=i.return,c=i,w=t;if(t=Ki,c.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var T=w,P=c,L=P.tag;if(!(P.mode&1)&&(L===0||L===11||L===15)){var B=P.alternate;B?(P.updateQueue=B.updateQueue,P.memoizedState=B.memoizedState,P.lanes=B.lanes):(P.updateQueue=null,P.memoizedState=null)}var U=Ew(v);if(U!==null){U.flags&=-257,Tw(U,v,c,p,t),U.mode&1&&Sw(p,T,t),t=U,w=T;var O=t.updateQueue;if(O===null){var N=new Set;N.add(w),t.updateQueue=N}else O.add(w);break e}else{if(!(t&1)){Sw(p,T,t),G_();break e}w=Error(et(426))}}else if($n&&c.mode&1){var ae=Ew(v);if(ae!==null){!(ae.flags&65536)&&(ae.flags|=256),Tw(ae,v,c,p,t),T_(Wu(w,c));break e}}p=w=Wu(w,c),Pi!==4&&(Pi=2),Od===null?Od=[p]:Od.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,t&=-t,p.lanes|=t;var q=bT(p,w,t);gw(p,q);break e;case 1:c=w;var W=p.type,K=p.stateNode;if(!(p.flags&128)&&(typeof W.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(_l===null||!_l.has(K)))){p.flags|=65536,t&=-t,p.lanes|=t;var ie=wT(p,c,t);gw(p,ie);break e}}p=p.return}while(p!==null)}jT(i)}catch(_e){t=_e,_i===i&&i!==null&&(_i=i=i.return);continue}break}while(1)}function NT(){var e=Lm.current;return Lm.current=zm,e===null?zm:e}function G_(){(Pi===0||Pi===3||Pi===2)&&(Pi=4),Bi===null||!(yc&268435455)&&!(ug&268435455)||cl(Bi,Ki)}function Bm(e,t){var i=Wr;Wr|=2;var s=NT();(Bi!==e||Ki!==t)&&(Cs=null,hc(e,t));do try{mR();break}catch(u){FT(e,u)}while(1);if(k_(),Wr=i,Lm.current=s,_i!==null)throw Error(et(261));return Bi=null,Ki=0,Pi}function mR(){for(;_i!==null;)UT(_i)}function gR(){for(;_i!==null&&!jI();)UT(_i)}function UT(e){var t=VT(e.alternate,e,Ho);e.memoizedProps=e.pendingProps,t===null?jT(e):_i=t,U_.current=null}function jT(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=cR(i,t),i!==null){i.flags&=32767,_i=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pi=6,_i=null;return}}else if(i=lR(i,t,Ho),i!==null){_i=i;return}if(t=t.sibling,t!==null){_i=t;return}_i=t=e}while(t!==null);Pi===0&&(Pi=5)}function nc(e,t,i){var s=cn,u=_a.transition;try{_a.transition=null,cn=1,yR(e,t,i,s)}finally{_a.transition=u,cn=s}return null}function yR(e,t,i,s){do Ou();while(hl!==null);if(Wr&6)throw Error(et(327));i=e.finishedWork;var u=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(et(177));e.callbackNode=null,e.callbackPriority=0;var p=i.lanes|i.childLanes;if(YI(e,p),e===Bi&&(_i=Bi=null,Ki=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Of||(Of=!0,qT(vm,function(){return Ou(),null})),p=(i.flags&15990)!==0,i.subtreeFlags&15990||p){p=_a.transition,_a.transition=null;var v=cn;cn=1;var c=Wr;Wr|=4,U_.current=null,hR(e,i),OT(i,e),BM(s0),xm=!!a0,s0=a0=null,e.current=i,dR(i),$I(),Wr=c,cn=v,_a.transition=p}else e.current=i;if(Of&&(Of=!1,hl=e,Dm=u),p=e.pendingLanes,p===0&&(_l=null),GI(i.stateNode),zo(e,di()),t!==null)for(s=e.onRecoverableError,i=0;i<t.length;i++)u=t[i],s(u.value,{componentStack:u.stack,digest:u.digest});if(Om)throw Om=!1,e=k0,k0=null,e;return Dm&1&&e.tag!==0&&Ou(),p=e.pendingLanes,p&1?e===P0?Dd++:(Dd=0,P0=e):Dd=0,Pl(),null}function Ou(){if(hl!==null){var e=xE(Dm),t=_a.transition,i=cn;try{if(_a.transition=null,cn=16>e?16:e,hl===null)var s=!1;else{if(e=hl,hl=null,Dm=0,Wr&6)throw Error(et(331));var u=Wr;for(Wr|=4,It=e.current;It!==null;){var p=It,v=p.child;if(It.flags&16){var c=p.deletions;if(c!==null){for(var w=0;w<c.length;w++){var T=c[w];for(It=T;It!==null;){var P=It;switch(P.tag){case 0:case 11:case 15:Ld(8,P,p)}var L=P.child;if(L!==null)L.return=P,It=L;else for(;It!==null;){P=It;var B=P.sibling,U=P.return;if(RT(P),P===T){It=null;break}if(B!==null){B.return=U,It=B;break}It=U}}}var O=p.alternate;if(O!==null){var N=O.child;if(N!==null){O.child=null;do{var ae=N.sibling;N.sibling=null,N=ae}while(N!==null)}}It=p}}if(p.subtreeFlags&2064&&v!==null)v.return=p,It=v;else e:for(;It!==null;){if(p=It,p.flags&2048)switch(p.tag){case 0:case 11:case 15:Ld(9,p,p.return)}var q=p.sibling;if(q!==null){q.return=p.return,It=q;break e}It=p.return}}var W=e.current;for(It=W;It!==null;){v=It;var K=v.child;if(v.subtreeFlags&2064&&K!==null)K.return=v,It=K;else e:for(v=W;It!==null;){if(c=It,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:cg(9,c)}}catch(_e){ai(c,c.return,_e)}if(c===v){It=null;break e}var ie=c.sibling;if(ie!==null){ie.return=c.return,It=ie;break e}It=c.return}}if(Wr=u,Pl(),as&&typeof as.onPostCommitFiberRoot=="function")try{as.onPostCommitFiberRoot(tg,e)}catch{}s=!0}return s}finally{cn=i,_a.transition=t}}return!1}function Fw(e,t,i){t=Wu(i,t),t=bT(e,t,1),e=vl(e,t,1),t=_o(),e!==null&&(fp(e,1,t),zo(e,t))}function ai(e,t,i){if(e.tag===3)Fw(e,e,i);else for(;t!==null;){if(t.tag===3){Fw(t,e,i);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(_l===null||!_l.has(s))){e=Wu(i,e),e=wT(t,e,1),t=vl(t,e,1),e=_o(),t!==null&&(fp(t,1,e),zo(t,e));break}}t=t.return}}function vR(e,t,i){var s=e.pingCache;s!==null&&s.delete(t),t=_o(),e.pingedLanes|=e.suspendedLanes&i,Bi===e&&(Ki&i)===i&&(Pi===4||Pi===3&&(Ki&130023424)===Ki&&500>di()-$_?hc(e,0):j_|=i),zo(e,t)}function $T(e,t){t===0&&(e.mode&1?(t=Tf,Tf<<=1,!(Tf&130023424)&&(Tf=4194304)):t=1);var i=_o();e=Os(e,t),e!==null&&(fp(e,t,i),zo(e,i))}function _R(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),$T(e,i)}function xR(e,t){var i=0;switch(e.tag){case 13:var s=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(et(314))}s!==null&&s.delete(t),$T(e,i)}var VT;VT=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mo.current)Io=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return Io=!1,sR(e,t,i);Io=!!(e.flags&131072)}else Io=!1,$n&&t.flags&1048576&&HE(t,km,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Qf(e,t),e=t.pendingProps;var u=Vu(t,so.current);Lu(t,i),u=O_(null,t,s,e,u,i);var p=D_();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ro(s)?(p=!0,Tm(t)):p=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,I_(t),u.updater=sg,t.stateNode=u,u._reactInternals=t,g0(t,s,e,i),t=_0(null,t,s,!0,p,i)):(t.tag=0,$n&&p&&S_(t),vo(null,t,u,i),t=t.child),t;case 16:s=t.elementType;e:{switch(Qf(e,t),e=t.pendingProps,u=s._init,s=u(s._payload),t.type=s,u=t.tag=wR(s),e=Da(s,e),u){case 0:t=v0(null,t,s,e,i);break e;case 1:t=Pw(null,t,s,e,i);break e;case 11:t=Cw(null,t,s,e,i);break e;case 14:t=kw(null,t,s,Da(s.type,e),i);break e}throw Error(et(306,s,""))}return t;case 0:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Da(s,u),v0(e,t,s,u,i);case 1:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Da(s,u),Pw(e,t,s,u,i);case 3:e:{if(CT(t),e===null)throw Error(et(387));s=t.pendingProps,p=t.memoizedState,u=p.element,XE(e,t),Im(t,s,null,i);var v=t.memoizedState;if(s=v.element,p.isDehydrated)if(p={element:s,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},t.updateQueue.baseState=p,t.memoizedState=p,t.flags&256){u=Wu(Error(et(423)),t),t=Aw(e,t,s,i,u);break e}else if(s!==u){u=Wu(Error(et(424)),t),t=Aw(e,t,s,i,u);break e}else for(Zo=yl(t.stateNode.containerInfo.firstChild),Ko=t,$n=!0,Na=null,i=eT(t,null,s,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(qu(),s===u){t=Ds(e,t,i);break e}vo(e,t,s,i)}t=t.child}return t;case 5:return tT(t),e===null&&p0(t),s=t.type,u=t.pendingProps,p=e!==null?e.memoizedProps:null,v=u.children,l0(s,u)?v=null:p!==null&&l0(s,p)&&(t.flags|=32),TT(e,t),vo(e,t,v,i),t.child;case 6:return e===null&&p0(t),null;case 13:return kT(e,t,i);case 4:return M_(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Gu(t,null,s,i):vo(e,t,s,i),t.child;case 11:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Da(s,u),Cw(e,t,s,u,i);case 7:return vo(e,t,t.pendingProps,i),t.child;case 8:return vo(e,t,t.pendingProps.children,i),t.child;case 12:return vo(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(s=t.type._context,u=t.pendingProps,p=t.memoizedProps,v=u.value,Cn(Pm,s._currentValue),s._currentValue=v,p!==null)if(qa(p.value,v)){if(p.children===u.children&&!Mo.current){t=Ds(e,t,i);break e}}else for(p=t.child,p!==null&&(p.return=t);p!==null;){var c=p.dependencies;if(c!==null){v=p.child;for(var w=c.firstContext;w!==null;){if(w.context===s){if(p.tag===1){w=Is(-1,i&-i),w.tag=2;var T=p.updateQueue;if(T!==null){T=T.shared;var P=T.pending;P===null?w.next=w:(w.next=P.next,P.next=w),T.pending=w}}p.lanes|=i,w=p.alternate,w!==null&&(w.lanes|=i),f0(p.return,i,t),c.lanes|=i;break}w=w.next}}else if(p.tag===10)v=p.type===t.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(et(341));v.lanes|=i,c=v.alternate,c!==null&&(c.lanes|=i),f0(v,i,t),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===t){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}vo(e,t,u.children,i),t=t.child}return t;case 9:return u=t.type,s=t.pendingProps.children,Lu(t,i),u=wa(u),s=s(u),t.flags|=1,vo(e,t,s,i),t.child;case 14:return s=t.type,u=Da(s,t.pendingProps),u=Da(s.type,u),kw(e,t,s,u,i);case 15:return ST(e,t,t.type,t.pendingProps,i);case 17:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Da(s,u),Qf(e,t),t.tag=1,Ro(s)?(e=!0,Tm(t)):e=!1,Lu(t,i),JE(t,s,u),g0(t,s,u,i),_0(null,t,s,!0,e,i);case 19:return PT(e,t,i);case 22:return ET(e,t,i)}throw Error(et(156,t.tag))};function qT(e,t){return gE(e,t)}function bR(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function va(e,t,i,s){return new bR(e,t,i,s)}function H_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wR(e){if(typeof e=="function")return H_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===h_)return 11;if(e===d_)return 14}return 2}function bl(e,t){var i=e.alternate;return i===null?(i=va(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function rm(e,t,i,s,u,p){var v=2;if(s=e,typeof e=="function")H_(e)&&(v=1);else if(typeof e=="string")v=5;else e:switch(e){case vu:return dc(i.children,u,p,t);case u_:v=8,u|=8;break;case Uv:return e=va(12,i,t,u|2),e.elementType=Uv,e.lanes=p,e;case jv:return e=va(13,i,t,u),e.elementType=jv,e.lanes=p,e;case $v:return e=va(19,i,t,u),e.elementType=$v,e.lanes=p,e;case QS:return hg(i,u,p,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case YS:v=10;break e;case JS:v=9;break e;case h_:v=11;break e;case d_:v=14;break e;case al:v=16,s=null;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=va(v,i,t,u),t.elementType=e,t.type=s,t.lanes=p,t}function dc(e,t,i,s){return e=va(7,e,s,t),e.lanes=i,e}function hg(e,t,i,s){return e=va(22,e,s,t),e.elementType=QS,e.lanes=i,e.stateNode={isHidden:!1},e}function xv(e,t,i){return e=va(6,e,null,t),e.lanes=i,e}function bv(e,t,i){return t=va(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function SR(e,t,i,s,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tv(0),this.expirationTimes=tv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tv(0),this.identifierPrefix=s,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function W_(e,t,i,s,u,p,v,c,w){return e=new SR(e,t,i,c,w),t===1?(t=1,p===!0&&(t|=8)):t=0,p=va(3,null,null,t),e.current=p,p.stateNode=e,p.memoizedState={element:s,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},I_(p),e}function ER(e,t,i){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yu,key:s==null?null:""+s,children:e,containerInfo:t,implementation:i}}function GT(e){if(!e)return El;e=e._reactInternals;e:{if(Sc(e)!==e||e.tag!==1)throw Error(et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ro(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(et(171))}if(e.tag===1){var i=e.type;if(Ro(i))return qE(e,i,t)}return t}function HT(e,t,i,s,u,p,v,c,w){return e=W_(i,s,!0,e,u,p,v,c,w),e.context=GT(null),i=e.current,s=_o(),u=xl(i),p=Is(s,u),p.callback=t??null,vl(i,p,u),e.current.lanes=u,fp(e,u,s),zo(e,s),e}function dg(e,t,i,s){var u=t.current,p=_o(),v=xl(u);return i=GT(i),t.context===null?t.context=i:t.pendingContext=i,t=Is(p,v),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=vl(u,t,v),e!==null&&(Va(e,u,v,p),Xf(e,u,v)),v}function Fm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Nw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Z_(e,t){Nw(e,t),(e=e.alternate)&&Nw(e,t)}function TR(){return null}var WT=typeof reportError=="function"?reportError:function(e){console.error(e)};function K_(e){this._internalRoot=e}pg.prototype.render=K_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));dg(e,t,null,null)};pg.prototype.unmount=K_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vc(function(){dg(null,e,null,null)}),t[Ls]=null}};function pg(e){this._internalRoot=e}pg.prototype.unstable_scheduleHydration=function(e){if(e){var t=SE();e={blockedOn:null,target:e,priority:t};for(var i=0;i<ll.length&&t!==0&&t<ll[i].priority;i++);ll.splice(i,0,e),i===0&&TE(e)}};function X_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Uw(){}function CR(e,t,i,s,u){if(u){if(typeof s=="function"){var p=s;s=function(){var T=Fm(v);p.call(T)}}var v=HT(t,s,e,0,null,!1,!1,"",Uw);return e._reactRootContainer=v,e[Ls]=v.current,Kd(e.nodeType===8?e.parentNode:e),vc(),v}for(;u=e.lastChild;)e.removeChild(u);if(typeof s=="function"){var c=s;s=function(){var T=Fm(w);c.call(T)}}var w=W_(e,0,!1,null,null,!1,!1,"",Uw);return e._reactRootContainer=w,e[Ls]=w.current,Kd(e.nodeType===8?e.parentNode:e),vc(function(){dg(t,w,i,s)}),w}function mg(e,t,i,s,u){var p=i._reactRootContainer;if(p){var v=p;if(typeof u=="function"){var c=u;u=function(){var w=Fm(v);c.call(w)}}dg(t,v,e,u)}else v=CR(i,t,e,u,s);return Fm(v)}bE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=bd(t.pendingLanes);i!==0&&(m_(t,i|1),zo(t,di()),!(Wr&6)&&(Zu=di()+500,Pl()))}break;case 13:vc(function(){var s=Os(e,1);if(s!==null){var u=_o();Va(s,e,1,u)}}),Z_(e,1)}};g_=function(e){if(e.tag===13){var t=Os(e,134217728);if(t!==null){var i=_o();Va(t,e,134217728,i)}Z_(e,134217728)}};wE=function(e){if(e.tag===13){var t=xl(e),i=Os(e,t);if(i!==null){var s=_o();Va(i,e,t,s)}Z_(e,t)}};SE=function(){return cn};EE=function(e,t){var i=cn;try{return cn=e,t()}finally{cn=i}};Jv=function(e,t,i){switch(t){case"input":if(Gv(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var u=og(s);if(!u)throw Error(et(90));tE(s),Gv(s,u)}}}break;case"textarea":nE(e,i);break;case"select":t=i.value,t!=null&&Iu(e,!!i.multiple,t,!1)}};uE=V_;hE=vc;var kR={usingClientEntryPoint:!1,Events:[gp,wu,og,lE,cE,V_]},dd={findFiberByHostInstance:ac,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},PR={bundleType:dd.bundleType,version:dd.version,rendererPackageName:dd.rendererPackageName,rendererConfig:dd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$s.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fE(e),e===null?null:e.stateNode},findFiberByHostInstance:dd.findFiberByHostInstance||TR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Df.isDisabled&&Df.supportsFiber)try{tg=Df.inject(PR),as=Df}catch{}}Qo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kR;Qo.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!X_(t))throw Error(et(200));return ER(e,t,null,i)};Qo.createRoot=function(e,t){if(!X_(e))throw Error(et(299));var i=!1,s="",u=WT;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=W_(e,1,!1,null,null,i,!1,s,u),e[Ls]=t.current,Kd(e.nodeType===8?e.parentNode:e),new K_(t)};Qo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=fE(t),e=e===null?null:e.stateNode,e};Qo.flushSync=function(e){return vc(e)};Qo.hydrate=function(e,t,i){if(!fg(t))throw Error(et(200));return mg(null,e,t,!0,i)};Qo.hydrateRoot=function(e,t,i){if(!X_(e))throw Error(et(405));var s=i!=null&&i.hydratedSources||null,u=!1,p="",v=WT;if(i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),t=HT(t,null,e,1,i??null,u,!1,p,v),e[Ls]=t.current,Kd(e),s)for(e=0;e<s.length;e++)i=s[e],u=i._getVersion,u=u(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,u]:t.mutableSourceEagerHydrationData.push(i,u);return new pg(t)};Qo.render=function(e,t,i){if(!fg(t))throw Error(et(200));return mg(null,e,t,!1,i)};Qo.unmountComponentAtNode=function(e){if(!fg(e))throw Error(et(40));return e._reactRootContainer?(vc(function(){mg(null,null,e,!1,function(){e._reactRootContainer=null,e[Ls]=null})}),!0):!1};Qo.unstable_batchedUpdates=V_;Qo.unstable_renderSubtreeIntoContainer=function(e,t,i,s){if(!fg(i))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return mg(e,t,i,!1,s)};Qo.version="18.2.0-next-9e3b772b8-20220608";function ZT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ZT)}catch(e){console.error(e)}}ZT(),HS.exports=Qo;var Y_=HS.exports;const Bf=Tl(Y_);var jw=Y_;Fv.createRoot=jw.createRoot,Fv.hydrateRoot=jw.hydrateRoot;function wi(e,t){if(e==null)return{};var i={},s=Object.keys(e),u,p;for(p=0;p<s.length;p++)u=s[p],!(t.indexOf(u)>=0)&&(i[u]=e[u]);return i}function st(){return st=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},st.apply(this,arguments)}function KT(e){var t,i,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=KT(e[t]))&&(s&&(s+=" "),s+=i);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function ki(){for(var e,t,i=0,s="";i<arguments.length;)(e=arguments[i++])&&(t=KT(e))&&(s&&(s+=" "),s+=t);return s}function mu(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function XT(e){if(!mu(e))return e;const t={};return Object.keys(e).forEach(i=>{t[i]=XT(e[i])}),t}function Ms(e,t,i={clone:!0}){const s=i.clone?st({},e):e;return mu(e)&&mu(t)&&Object.keys(t).forEach(u=>{u!=="__proto__"&&(mu(t[u])&&u in e&&mu(e[u])?s[u]=Ms(e[u],t[u],i):i.clone?s[u]=mu(t[u])?XT(t[u]):t[u]:s[u]=t[u])}),s}function Ku(e){let t="https://mui.com/production-error/?code="+e;for(let i=1;i<arguments.length;i+=1)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function xo(e){if(typeof e!="string")throw new Error(Ku(7));return e.charAt(0).toUpperCase()+e.slice(1)}function AR(...e){return e.reduce((t,i)=>i==null?t:function(...u){t.apply(this,u),i.apply(this,u)},()=>{})}function IR(e,t=166){let i;function s(...u){const p=()=>{e.apply(this,u)};clearTimeout(i),i=setTimeout(p,t)}return s.clear=()=>{clearTimeout(i)},s}function MR(e,t){return()=>null}function RR(e,t){return ge.isValidElement(e)&&t.indexOf(e.type.muiName)!==-1}function Nm(e){return e&&e.ownerDocument||document}function zR(e){return Nm(e).defaultView||window}function LR(e,t){return()=>null}function Um(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const OR=typeof window<"u"?ge.useLayoutEffect:ge.useEffect,Xu=OR;let $w=0;function DR(e){const[t,i]=ge.useState(e),s=e||t;return ge.useEffect(()=>{t==null&&($w+=1,i(`mui-${$w}`))},[t]),s}const Vw=fm["useId".toString()];function YT(e){if(Vw!==void 0){const t=Vw();return e??t}return DR(e)}function BR(e,t,i,s,u){return null}function JT({controlled:e,default:t,name:i,state:s="value"}){const{current:u}=ge.useRef(e!==void 0),[p,v]=ge.useState(t),c=u?e:p,w=ge.useCallback(T=>{u||v(T)},[]);return[c,w]}function Au(e){const t=ge.useRef(e);return Xu(()=>{t.current=e}),ge.useCallback((...i)=>(0,t.current)(...i),[])}function Bs(...e){return ge.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(i=>{Um(i,t)})},e)}let gg=!0,M0=!1,qw;const FR={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function NR(e){const{type:t,tagName:i}=e;return!!(i==="INPUT"&&FR[t]&&!e.readOnly||i==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function UR(e){e.metaKey||e.altKey||e.ctrlKey||(gg=!0)}function wv(){gg=!1}function jR(){this.visibilityState==="hidden"&&M0&&(gg=!0)}function $R(e){e.addEventListener("keydown",UR,!0),e.addEventListener("mousedown",wv,!0),e.addEventListener("pointerdown",wv,!0),e.addEventListener("touchstart",wv,!0),e.addEventListener("visibilitychange",jR,!0)}function VR(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return gg||NR(t)}function J_(){const e=ge.useCallback(u=>{u!=null&&$R(u.ownerDocument)},[]),t=ge.useRef(!1);function i(){return t.current?(M0=!0,window.clearTimeout(qw),qw=window.setTimeout(()=>{M0=!1},100),t.current=!1,!0):!1}function s(u){return VR(u)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:s,onBlur:i,ref:e}}function QT(e,t){const i=st({},t);return Object.keys(e).forEach(s=>{if(s.toString().match(/^(components|slots)$/))i[s]=st({},e[s],i[s]);else if(s.toString().match(/^(componentsProps|slotProps)$/)){const u=e[s]||{},p=t[s];i[s]={},!p||!Object.keys(p)?i[s]=u:!u||!Object.keys(u)?i[s]=p:(i[s]=st({},p),Object.keys(u).forEach(v=>{i[s][v]=QT(u[v],p[v])}))}else i[s]===void 0&&(i[s]=e[s])}),i}function vp(e,t,i=void 0){const s={};return Object.keys(e).forEach(u=>{s[u]=e[u].reduce((p,v)=>{if(v){const c=t(v);c!==""&&p.push(c),i&&i[v]&&p.push(i[v])}return p},[]).join(" ")}),s}const Gw=e=>e,qR=()=>{let e=Gw;return{configure(t){e=t},generate(t){return e(t)},reset(){e=Gw}}},GR=qR(),eC=GR,HR={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function ch(e,t,i="Mui"){const s=HR[t];return s?`${i}-${s}`:`${eC.generate(e)}-${t}`}function uh(e,t,i="Mui"){const s={};return t.forEach(u=>{s[u]=ch(e,u,i)}),s}function tC(e){var t=Object.create(null);return function(i){return t[i]===void 0&&(t[i]=e(i)),t[i]}}var WR=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,ZR=tC(function(e){return WR.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function KR(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function XR(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var YR=function(){function e(i){var s=this;this._insertTag=function(u){var p;s.tags.length===0?s.insertionPoint?p=s.insertionPoint.nextSibling:s.prepend?p=s.container.firstChild:p=s.before:p=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(u,p),s.tags.push(u)},this.isSpeedy=i.speedy===void 0?!0:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(XR(this));var u=this.tags[this.tags.length-1];if(this.isSpeedy){var p=KR(u);try{p.insertRule(s,p.cssRules.length)}catch{}}else u.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){return s.parentNode&&s.parentNode.removeChild(s)}),this.tags=[],this.ctr=0},e}(),io="-ms-",jm="-moz-",en="-webkit-",rC="comm",Q_="rule",ex="decl",JR="@import",nC="@keyframes",QR="@layer",ez=Math.abs,yg=String.fromCharCode,tz=Object.assign;function rz(e,t){return Zi(e,0)^45?(((t<<2^Zi(e,0))<<2^Zi(e,1))<<2^Zi(e,2))<<2^Zi(e,3):0}function iC(e){return e.trim()}function nz(e,t){return(e=t.exec(e))?e[0]:e}function tn(e,t,i){return e.replace(t,i)}function R0(e,t){return e.indexOf(t)}function Zi(e,t){return e.charCodeAt(t)|0}function ip(e,t,i){return e.slice(t,i)}function rs(e){return e.length}function tx(e){return e.length}function Ff(e,t){return t.push(e),e}function iz(e,t){return e.map(t).join("")}var vg=1,Yu=1,oC=0,Bo=0,vi=0,hh="";function _g(e,t,i,s,u,p,v){return{value:e,root:t,parent:i,type:s,props:u,children:p,line:vg,column:Yu,length:v,return:""}}function pd(e,t){return tz(_g("",null,null,"",null,null,0),e,{length:-e.length},t)}function oz(){return vi}function az(){return vi=Bo>0?Zi(hh,--Bo):0,Yu--,vi===10&&(Yu=1,vg--),vi}function Xo(){return vi=Bo<oC?Zi(hh,Bo++):0,Yu++,vi===10&&(Yu=1,vg++),vi}function ls(){return Zi(hh,Bo)}function nm(){return Bo}function _p(e,t){return ip(hh,e,t)}function op(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function aC(e){return vg=Yu=1,oC=rs(hh=e),Bo=0,[]}function sC(e){return hh="",e}function im(e){return iC(_p(Bo-1,z0(e===91?e+2:e===40?e+1:e)))}function sz(e){for(;(vi=ls())&&vi<33;)Xo();return op(e)>2||op(vi)>3?"":" "}function lz(e,t){for(;--t&&Xo()&&!(vi<48||vi>102||vi>57&&vi<65||vi>70&&vi<97););return _p(e,nm()+(t<6&&ls()==32&&Xo()==32))}function z0(e){for(;Xo();)switch(vi){case e:return Bo;case 34:case 39:e!==34&&e!==39&&z0(vi);break;case 40:e===41&&z0(e);break;case 92:Xo();break}return Bo}function cz(e,t){for(;Xo()&&e+vi!==47+10;)if(e+vi===42+42&&ls()===47)break;return"/*"+_p(t,Bo-1)+"*"+yg(e===47?e:Xo())}function uz(e){for(;!op(ls());)Xo();return _p(e,Bo)}function hz(e){return sC(om("",null,null,null,[""],e=aC(e),0,[0],e))}function om(e,t,i,s,u,p,v,c,w){for(var T=0,P=0,L=v,B=0,U=0,O=0,N=1,ae=1,q=1,W=0,K="",ie=u,_e=p,Se=s,xe=K;ae;)switch(O=W,W=Xo()){case 40:if(O!=108&&Zi(xe,L-1)==58){R0(xe+=tn(im(W),"&","&\f"),"&\f")!=-1&&(q=-1);break}case 34:case 39:case 91:xe+=im(W);break;case 9:case 10:case 13:case 32:xe+=sz(O);break;case 92:xe+=lz(nm()-1,7);continue;case 47:switch(ls()){case 42:case 47:Ff(dz(cz(Xo(),nm()),t,i),w);break;default:xe+="/"}break;case 123*N:c[T++]=rs(xe)*q;case 125*N:case 59:case 0:switch(W){case 0:case 125:ae=0;case 59+P:q==-1&&(xe=tn(xe,/\f/g,"")),U>0&&rs(xe)-L&&Ff(U>32?Ww(xe+";",s,i,L-1):Ww(tn(xe," ","")+";",s,i,L-2),w);break;case 59:xe+=";";default:if(Ff(Se=Hw(xe,t,i,T,P,u,c,K,ie=[],_e=[],L),p),W===123)if(P===0)om(xe,t,Se,Se,ie,p,L,c,_e);else switch(B===99&&Zi(xe,3)===110?100:B){case 100:case 108:case 109:case 115:om(e,Se,Se,s&&Ff(Hw(e,Se,Se,0,0,u,c,K,u,ie=[],L),_e),u,_e,L,c,s?ie:_e);break;default:om(xe,Se,Se,Se,[""],_e,0,c,_e)}}T=P=U=0,N=q=1,K=xe="",L=v;break;case 58:L=1+rs(xe),U=O;default:if(N<1){if(W==123)--N;else if(W==125&&N++==0&&az()==125)continue}switch(xe+=yg(W),W*N){case 38:q=P>0?1:(xe+="\f",-1);break;case 44:c[T++]=(rs(xe)-1)*q,q=1;break;case 64:ls()===45&&(xe+=im(Xo())),B=ls(),P=L=rs(K=xe+=uz(nm())),W++;break;case 45:O===45&&rs(xe)==2&&(N=0)}}return p}function Hw(e,t,i,s,u,p,v,c,w,T,P){for(var L=u-1,B=u===0?p:[""],U=tx(B),O=0,N=0,ae=0;O<s;++O)for(var q=0,W=ip(e,L+1,L=ez(N=v[O])),K=e;q<U;++q)(K=iC(N>0?B[q]+" "+W:tn(W,/&\f/g,B[q])))&&(w[ae++]=K);return _g(e,t,i,u===0?Q_:c,w,T,P)}function dz(e,t,i){return _g(e,t,i,rC,yg(oz()),ip(e,2,-2),0)}function Ww(e,t,i,s){return _g(e,t,i,ex,ip(e,0,s),ip(e,s+1,-1),s)}function Du(e,t){for(var i="",s=tx(e),u=0;u<s;u++)i+=t(e[u],u,e,t)||"";return i}function pz(e,t,i,s){switch(e.type){case QR:if(e.children.length)break;case JR:case ex:return e.return=e.return||e.value;case rC:return"";case nC:return e.return=e.value+"{"+Du(e.children,s)+"}";case Q_:e.value=e.props.join(",")}return rs(i=Du(e.children,s))?e.return=e.value+"{"+i+"}":""}function fz(e){var t=tx(e);return function(i,s,u,p){for(var v="",c=0;c<t;c++)v+=e[c](i,s,u,p)||"";return v}}function mz(e){return function(t){t.root||(t=t.return)&&e(t)}}var gz=function(t,i,s){for(var u=0,p=0;u=p,p=ls(),u===38&&p===12&&(i[s]=1),!op(p);)Xo();return _p(t,Bo)},yz=function(t,i){var s=-1,u=44;do switch(op(u)){case 0:u===38&&ls()===12&&(i[s]=1),t[s]+=gz(Bo-1,i,s);break;case 2:t[s]+=im(u);break;case 4:if(u===44){t[++s]=ls()===58?"&\f":"",i[s]=t[s].length;break}default:t[s]+=yg(u)}while(u=Xo());return t},vz=function(t,i){return sC(yz(aC(t),i))},Zw=new WeakMap,_z=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var i=t.value,s=t.parent,u=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&i.charCodeAt(0)!==58&&!Zw.get(s))&&!u){Zw.set(t,!0);for(var p=[],v=vz(i,p),c=s.props,w=0,T=0;w<v.length;w++)for(var P=0;P<c.length;P++,T++)t.props[T]=p[w]?v[w].replace(/&\f/g,c[P]):c[P]+" "+v[w]}}},xz=function(t){if(t.type==="decl"){var i=t.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(t.return="",t.value="")}};function lC(e,t){switch(rz(e,t)){case 5103:return en+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return en+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return en+e+jm+e+io+e+e;case 6828:case 4268:return en+e+io+e+e;case 6165:return en+e+io+"flex-"+e+e;case 5187:return en+e+tn(e,/(\w+).+(:[^]+)/,en+"box-$1$2"+io+"flex-$1$2")+e;case 5443:return en+e+io+"flex-item-"+tn(e,/flex-|-self/,"")+e;case 4675:return en+e+io+"flex-line-pack"+tn(e,/align-content|flex-|-self/,"")+e;case 5548:return en+e+io+tn(e,"shrink","negative")+e;case 5292:return en+e+io+tn(e,"basis","preferred-size")+e;case 6060:return en+"box-"+tn(e,"-grow","")+en+e+io+tn(e,"grow","positive")+e;case 4554:return en+tn(e,/([^-])(transform)/g,"$1"+en+"$2")+e;case 6187:return tn(tn(tn(e,/(zoom-|grab)/,en+"$1"),/(image-set)/,en+"$1"),e,"")+e;case 5495:case 3959:return tn(e,/(image-set\([^]*)/,en+"$1$`$1");case 4968:return tn(tn(e,/(.+:)(flex-)?(.*)/,en+"box-pack:$3"+io+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+en+e+e;case 4095:case 3583:case 4068:case 2532:return tn(e,/(.+)-inline(.+)/,en+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(rs(e)-1-t>6)switch(Zi(e,t+1)){case 109:if(Zi(e,t+4)!==45)break;case 102:return tn(e,/(.+:)(.+)-([^]+)/,"$1"+en+"$2-$3$1"+jm+(Zi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~R0(e,"stretch")?lC(tn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Zi(e,t+1)!==115)break;case 6444:switch(Zi(e,rs(e)-3-(~R0(e,"!important")&&10))){case 107:return tn(e,":",":"+en)+e;case 101:return tn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+en+(Zi(e,14)===45?"inline-":"")+"box$3$1"+en+"$2$3$1"+io+"$2box$3")+e}break;case 5936:switch(Zi(e,t+11)){case 114:return en+e+io+tn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return en+e+io+tn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return en+e+io+tn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return en+e+io+e+e}return e}var bz=function(t,i,s,u){if(t.length>-1&&!t.return)switch(t.type){case ex:t.return=lC(t.value,t.length);break;case nC:return Du([pd(t,{value:tn(t.value,"@","@"+en)})],u);case Q_:if(t.length)return iz(t.props,function(p){switch(nz(p,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Du([pd(t,{props:[tn(p,/:(read-\w+)/,":"+jm+"$1")]})],u);case"::placeholder":return Du([pd(t,{props:[tn(p,/:(plac\w+)/,":"+en+"input-$1")]}),pd(t,{props:[tn(p,/:(plac\w+)/,":"+jm+"$1")]}),pd(t,{props:[tn(p,/:(plac\w+)/,io+"input-$1")]})],u)}return""})}},wz=[bz],Sz=function(t){var i=t.key;if(i==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(N){var ae=N.getAttribute("data-emotion");ae.indexOf(" ")!==-1&&(document.head.appendChild(N),N.setAttribute("data-s",""))})}var u=t.stylisPlugins||wz,p={},v,c=[];v=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(N){for(var ae=N.getAttribute("data-emotion").split(" "),q=1;q<ae.length;q++)p[ae[q]]=!0;c.push(N)});var w,T=[_z,xz];{var P,L=[pz,mz(function(N){P.insert(N)})],B=fz(T.concat(u,L)),U=function(ae){return Du(hz(ae),B)};w=function(ae,q,W,K){P=W,U(ae?ae+"{"+q.styles+"}":q.styles),K&&(O.inserted[q.name]=!0)}}var O={key:i,sheet:new YR({key:i,container:v,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:p,registered:{},insert:w};return O.sheet.hydrate(c),O},cC={exports:{}},un={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fi=typeof Symbol=="function"&&Symbol.for,rx=Fi?Symbol.for("react.element"):60103,nx=Fi?Symbol.for("react.portal"):60106,xg=Fi?Symbol.for("react.fragment"):60107,bg=Fi?Symbol.for("react.strict_mode"):60108,wg=Fi?Symbol.for("react.profiler"):60114,Sg=Fi?Symbol.for("react.provider"):60109,Eg=Fi?Symbol.for("react.context"):60110,ix=Fi?Symbol.for("react.async_mode"):60111,Tg=Fi?Symbol.for("react.concurrent_mode"):60111,Cg=Fi?Symbol.for("react.forward_ref"):60112,kg=Fi?Symbol.for("react.suspense"):60113,Ez=Fi?Symbol.for("react.suspense_list"):60120,Pg=Fi?Symbol.for("react.memo"):60115,Ag=Fi?Symbol.for("react.lazy"):60116,Tz=Fi?Symbol.for("react.block"):60121,Cz=Fi?Symbol.for("react.fundamental"):60117,kz=Fi?Symbol.for("react.responder"):60118,Pz=Fi?Symbol.for("react.scope"):60119;function ta(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case rx:switch(e=e.type,e){case ix:case Tg:case xg:case wg:case bg:case kg:return e;default:switch(e=e&&e.$$typeof,e){case Eg:case Cg:case Ag:case Pg:case Sg:return e;default:return t}}case nx:return t}}}function uC(e){return ta(e)===Tg}un.AsyncMode=ix;un.ConcurrentMode=Tg;un.ContextConsumer=Eg;un.ContextProvider=Sg;un.Element=rx;un.ForwardRef=Cg;un.Fragment=xg;un.Lazy=Ag;un.Memo=Pg;un.Portal=nx;un.Profiler=wg;un.StrictMode=bg;un.Suspense=kg;un.isAsyncMode=function(e){return uC(e)||ta(e)===ix};un.isConcurrentMode=uC;un.isContextConsumer=function(e){return ta(e)===Eg};un.isContextProvider=function(e){return ta(e)===Sg};un.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===rx};un.isForwardRef=function(e){return ta(e)===Cg};un.isFragment=function(e){return ta(e)===xg};un.isLazy=function(e){return ta(e)===Ag};un.isMemo=function(e){return ta(e)===Pg};un.isPortal=function(e){return ta(e)===nx};un.isProfiler=function(e){return ta(e)===wg};un.isStrictMode=function(e){return ta(e)===bg};un.isSuspense=function(e){return ta(e)===kg};un.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===xg||e===Tg||e===wg||e===bg||e===kg||e===Ez||typeof e=="object"&&e!==null&&(e.$$typeof===Ag||e.$$typeof===Pg||e.$$typeof===Sg||e.$$typeof===Eg||e.$$typeof===Cg||e.$$typeof===Cz||e.$$typeof===kz||e.$$typeof===Pz||e.$$typeof===Tz)};un.typeOf=ta;cC.exports=un;var ox=cC.exports,hC=ox,Az={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Iz={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},dC={};dC[hC.ForwardRef]=Az;dC[hC.Memo]=Iz;var Mz=!0;function Rz(e,t,i){var s="";return i.split(" ").forEach(function(u){e[u]!==void 0?t.push(e[u]+";"):s+=u+" "}),s}var pC=function(t,i,s){var u=t.key+"-"+i.name;(s===!1||Mz===!1)&&t.registered[u]===void 0&&(t.registered[u]=i.styles)},zz=function(t,i,s){pC(t,i,s);var u=t.key+"-"+i.name;if(t.inserted[i.name]===void 0){var p=i;do t.insert(i===p?"."+u:"",p,t.sheet,!0),p=p.next;while(p!==void 0)}};function Lz(e){for(var t=0,i,s=0,u=e.length;u>=4;++s,u-=4)i=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(u){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Oz={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Dz=/[A-Z]|^ms/g,Bz=/_EMO_([^_]+?)_([^]*?)_EMO_/g,fC=function(t){return t.charCodeAt(1)===45},Kw=function(t){return t!=null&&typeof t!="boolean"},Sv=tC(function(e){return fC(e)?e:e.replace(Dz,"-$&").toLowerCase()}),Xw=function(t,i){switch(t){case"animation":case"animationName":if(typeof i=="string")return i.replace(Bz,function(s,u,p){return ns={name:u,styles:p,next:ns},u})}return Oz[t]!==1&&!fC(t)&&typeof i=="number"&&i!==0?i+"px":i};function ap(e,t,i){if(i==null)return"";if(i.__emotion_styles!==void 0)return i;switch(typeof i){case"boolean":return"";case"object":{if(i.anim===1)return ns={name:i.name,styles:i.styles,next:ns},i.name;if(i.styles!==void 0){var s=i.next;if(s!==void 0)for(;s!==void 0;)ns={name:s.name,styles:s.styles,next:ns},s=s.next;var u=i.styles+";";return u}return Fz(e,t,i)}case"function":{if(e!==void 0){var p=ns,v=i(e);return ns=p,ap(e,t,v)}break}}if(t==null)return i;var c=t[i];return c!==void 0?c:i}function Fz(e,t,i){var s="";if(Array.isArray(i))for(var u=0;u<i.length;u++)s+=ap(e,t,i[u])+";";else for(var p in i){var v=i[p];if(typeof v!="object")t!=null&&t[v]!==void 0?s+=p+"{"+t[v]+"}":Kw(v)&&(s+=Sv(p)+":"+Xw(p,v)+";");else if(Array.isArray(v)&&typeof v[0]=="string"&&(t==null||t[v[0]]===void 0))for(var c=0;c<v.length;c++)Kw(v[c])&&(s+=Sv(p)+":"+Xw(p,v[c])+";");else{var w=ap(e,t,v);switch(p){case"animation":case"animationName":{s+=Sv(p)+":"+w+";";break}default:s+=p+"{"+w+"}"}}}return s}var Yw=/label:\s*([^\s;\n{]+)\s*(;|$)/g,ns,mC=function(t,i,s){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var u=!0,p="";ns=void 0;var v=t[0];v==null||v.raw===void 0?(u=!1,p+=ap(s,i,v)):p+=v[0];for(var c=1;c<t.length;c++)p+=ap(s,i,t[c]),u&&(p+=v[c]);Yw.lastIndex=0;for(var w="",T;(T=Yw.exec(p))!==null;)w+="-"+T[1];var P=Lz(p)+w;return{name:P,styles:p,next:ns}},Nz=function(t){return t()},Uz=fm["useInsertionEffect"]?fm["useInsertionEffect"]:!1,jz=Uz||Nz,gC=ge.createContext(typeof HTMLElement<"u"?Sz({key:"css"}):null);gC.Provider;var $z=function(t){return ge.forwardRef(function(i,s){var u=ge.useContext(gC);return t(i,u,s)})},yC=ge.createContext({});function Vz(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return mC(t)}var ax=function(){var t=Vz.apply(void 0,arguments),i="animation-"+t.name;return{name:i,styles:"@keyframes "+i+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},qz=ZR,Gz=function(t){return t!=="theme"},Jw=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?qz:Gz},Qw=function(t,i,s){var u;if(i){var p=i.shouldForwardProp;u=t.__emotion_forwardProp&&p?function(v){return t.__emotion_forwardProp(v)&&p(v)}:p}return typeof u!="function"&&s&&(u=t.__emotion_forwardProp),u},Hz=function(t){var i=t.cache,s=t.serialized,u=t.isStringTag;return pC(i,s,u),jz(function(){return zz(i,s,u)}),null},Wz=function e(t,i){var s=t.__emotion_real===t,u=s&&t.__emotion_base||t,p,v;i!==void 0&&(p=i.label,v=i.target);var c=Qw(t,i,s),w=c||Jw(u),T=!w("as");return function(){var P=arguments,L=s&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(p!==void 0&&L.push("label:"+p+";"),P[0]==null||P[0].raw===void 0)L.push.apply(L,P);else{L.push(P[0][0]);for(var B=P.length,U=1;U<B;U++)L.push(P[U],P[0][U])}var O=$z(function(N,ae,q){var W=T&&N.as||u,K="",ie=[],_e=N;if(N.theme==null){_e={};for(var Se in N)_e[Se]=N[Se];_e.theme=ge.useContext(yC)}typeof N.className=="string"?K=Rz(ae.registered,ie,N.className):N.className!=null&&(K=N.className+" ");var xe=mC(L.concat(ie),ae.registered,_e);K+=ae.key+"-"+xe.name,v!==void 0&&(K+=" "+v);var Me=T&&c===void 0?Jw(W):w,Ze={};for(var Le in N)T&&Le==="as"||Me(Le)&&(Ze[Le]=N[Le]);return Ze.className=K,Ze.ref=q,ge.createElement(ge.Fragment,null,ge.createElement(Hz,{cache:ae,serialized:xe,isStringTag:typeof W=="string"}),ge.createElement(W,Ze))});return O.displayName=p!==void 0?p:"Styled("+(typeof u=="string"?u:u.displayName||u.name||"Component")+")",O.defaultProps=t.defaultProps,O.__emotion_real=O,O.__emotion_base=u,O.__emotion_styles=L,O.__emotion_forwardProp=c,Object.defineProperty(O,"toString",{value:function(){return"."+v}}),O.withComponent=function(N,ae){return e(N,st({},i,ae,{shouldForwardProp:Qw(O,ae,!0)})).apply(void 0,L)},O}},Zz=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],L0=Wz.bind();Zz.forEach(function(e){L0[e]=L0(e)});/**
 * @mui/styled-engine v5.14.10
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Kz(e,t){return L0(e,t)}const Xz=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},Yz=["values","unit","step"],Jz=e=>{const t=Object.keys(e).map(i=>({key:i,val:e[i]}))||[];return t.sort((i,s)=>i.val-s.val),t.reduce((i,s)=>st({},i,{[s.key]:s.val}),{})};function Qz(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:i="px",step:s=5}=e,u=wi(e,Yz),p=Jz(t),v=Object.keys(p);function c(B){return`@media (min-width:${typeof t[B]=="number"?t[B]:B}${i})`}function w(B){return`@media (max-width:${(typeof t[B]=="number"?t[B]:B)-s/100}${i})`}function T(B,U){const O=v.indexOf(U);return`@media (min-width:${typeof t[B]=="number"?t[B]:B}${i}) and (max-width:${(O!==-1&&typeof t[v[O]]=="number"?t[v[O]]:U)-s/100}${i})`}function P(B){return v.indexOf(B)+1<v.length?T(B,v[v.indexOf(B)+1]):c(B)}function L(B){const U=v.indexOf(B);return U===0?c(v[1]):U===v.length-1?w(v[U]):T(B,v[v.indexOf(B)+1]).replace("@media","@media not all and")}return st({keys:v,values:p,up:c,down:w,between:T,only:P,not:L,unit:i},u)}const eL={borderRadius:4},tL=eL;function Bd(e,t){return t?Ms(e,t,{clone:!1}):e}const sx={xs:0,sm:600,md:900,lg:1200,xl:1536},e2={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${sx[e]}px)`};function Fs(e,t,i){const s=e.theme||{};if(Array.isArray(t)){const p=s.breakpoints||e2;return t.reduce((v,c,w)=>(v[p.up(p.keys[w])]=i(t[w]),v),{})}if(typeof t=="object"){const p=s.breakpoints||e2;return Object.keys(t).reduce((v,c)=>{if(Object.keys(p.values||sx).indexOf(c)!==-1){const w=p.up(c);v[w]=i(t[c],c)}else{const w=c;v[w]=t[w]}return v},{})}return i(t)}function rL(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((s,u)=>{const p=e.up(u);return s[p]={},s},{}))||{}}function nL(e,t){return e.reduce((i,s)=>{const u=i[s];return(!u||Object.keys(u).length===0)&&delete i[s],i},t)}function Ig(e,t,i=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&i){const s=`vars.${t}`.split(".").reduce((u,p)=>u&&u[p]?u[p]:null,e);if(s!=null)return s}return t.split(".").reduce((s,u)=>s&&s[u]!=null?s[u]:null,e)}function $m(e,t,i,s=i){let u;return typeof e=="function"?u=e(i):Array.isArray(e)?u=e[i]||s:u=Ig(e,i)||s,t&&(u=t(u,s,e)),u}function an(e){const{prop:t,cssProperty:i=e.prop,themeKey:s,transform:u}=e,p=v=>{if(v[t]==null)return null;const c=v[t],w=v.theme,T=Ig(w,s)||{};return Fs(v,c,L=>{let B=$m(T,u,L);return L===B&&typeof L=="string"&&(B=$m(T,u,`${t}${L==="default"?"":xo(L)}`,L)),i===!1?B:{[i]:B}})};return p.propTypes={},p.filterProps=[t],p}function iL(e){const t={};return i=>(t[i]===void 0&&(t[i]=e(i)),t[i])}const oL={m:"margin",p:"padding"},aL={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},t2={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},sL=iL(e=>{if(e.length>2)if(t2[e])e=t2[e];else return[e];const[t,i]=e.split(""),s=oL[t],u=aL[i]||"";return Array.isArray(u)?u.map(p=>s+p):[s+u]}),lx=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],cx=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...lx,...cx];function xp(e,t,i,s){var u;const p=(u=Ig(e,t,!1))!=null?u:i;return typeof p=="number"?v=>typeof v=="string"?v:p*v:Array.isArray(p)?v=>typeof v=="string"?v:p[v]:typeof p=="function"?p:()=>{}}function vC(e){return xp(e,"spacing",8)}function bp(e,t){if(typeof t=="string"||t==null)return t;const i=Math.abs(t),s=e(i);return t>=0?s:typeof s=="number"?-s:`-${s}`}function lL(e,t){return i=>e.reduce((s,u)=>(s[u]=bp(t,i),s),{})}function cL(e,t,i,s){if(t.indexOf(i)===-1)return null;const u=sL(i),p=lL(u,s),v=e[i];return Fs(e,v,p)}function _C(e,t){const i=vC(e.theme);return Object.keys(e).map(s=>cL(e,t,s,i)).reduce(Bd,{})}function ii(e){return _C(e,lx)}ii.propTypes={};ii.filterProps=lx;function oi(e){return _C(e,cx)}oi.propTypes={};oi.filterProps=cx;function uL(e=8){if(e.mui)return e;const t=vC({spacing:e}),i=(...s)=>(s.length===0?[1]:s).map(p=>{const v=t(p);return typeof v=="number"?`${v}px`:v}).join(" ");return i.mui=!0,i}function Mg(...e){const t=e.reduce((s,u)=>(u.filterProps.forEach(p=>{s[p]=u}),s),{}),i=s=>Object.keys(s).reduce((u,p)=>t[p]?Bd(u,t[p](s)):u,{});return i.propTypes={},i.filterProps=e.reduce((s,u)=>s.concat(u.filterProps),[]),i}function os(e){return typeof e!="number"?e:`${e}px solid`}const hL=an({prop:"border",themeKey:"borders",transform:os}),dL=an({prop:"borderTop",themeKey:"borders",transform:os}),pL=an({prop:"borderRight",themeKey:"borders",transform:os}),fL=an({prop:"borderBottom",themeKey:"borders",transform:os}),mL=an({prop:"borderLeft",themeKey:"borders",transform:os}),gL=an({prop:"borderColor",themeKey:"palette"}),yL=an({prop:"borderTopColor",themeKey:"palette"}),vL=an({prop:"borderRightColor",themeKey:"palette"}),_L=an({prop:"borderBottomColor",themeKey:"palette"}),xL=an({prop:"borderLeftColor",themeKey:"palette"}),Rg=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=xp(e.theme,"shape.borderRadius",4),i=s=>({borderRadius:bp(t,s)});return Fs(e,e.borderRadius,i)}return null};Rg.propTypes={};Rg.filterProps=["borderRadius"];Mg(hL,dL,pL,fL,mL,gL,yL,vL,_L,xL,Rg);const zg=e=>{if(e.gap!==void 0&&e.gap!==null){const t=xp(e.theme,"spacing",8),i=s=>({gap:bp(t,s)});return Fs(e,e.gap,i)}return null};zg.propTypes={};zg.filterProps=["gap"];const Lg=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=xp(e.theme,"spacing",8),i=s=>({columnGap:bp(t,s)});return Fs(e,e.columnGap,i)}return null};Lg.propTypes={};Lg.filterProps=["columnGap"];const Og=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=xp(e.theme,"spacing",8),i=s=>({rowGap:bp(t,s)});return Fs(e,e.rowGap,i)}return null};Og.propTypes={};Og.filterProps=["rowGap"];const bL=an({prop:"gridColumn"}),wL=an({prop:"gridRow"}),SL=an({prop:"gridAutoFlow"}),EL=an({prop:"gridAutoColumns"}),TL=an({prop:"gridAutoRows"}),CL=an({prop:"gridTemplateColumns"}),kL=an({prop:"gridTemplateRows"}),PL=an({prop:"gridTemplateAreas"}),AL=an({prop:"gridArea"});Mg(zg,Lg,Og,bL,wL,SL,EL,TL,CL,kL,PL,AL);function Bu(e,t){return t==="grey"?t:e}const IL=an({prop:"color",themeKey:"palette",transform:Bu}),ML=an({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Bu}),RL=an({prop:"backgroundColor",themeKey:"palette",transform:Bu});Mg(IL,ML,RL);function Wo(e){return e<=1&&e!==0?`${e*100}%`:e}const zL=an({prop:"width",transform:Wo}),ux=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=i=>{var s,u;const p=((s=e.theme)==null||(s=s.breakpoints)==null||(s=s.values)==null?void 0:s[i])||sx[i];return p?((u=e.theme)==null||(u=u.breakpoints)==null?void 0:u.unit)!=="px"?{maxWidth:`${p}${e.theme.breakpoints.unit}`}:{maxWidth:p}:{maxWidth:Wo(i)}};return Fs(e,e.maxWidth,t)}return null};ux.filterProps=["maxWidth"];const LL=an({prop:"minWidth",transform:Wo}),OL=an({prop:"height",transform:Wo}),DL=an({prop:"maxHeight",transform:Wo}),BL=an({prop:"minHeight",transform:Wo});an({prop:"size",cssProperty:"width",transform:Wo});an({prop:"size",cssProperty:"height",transform:Wo});const FL=an({prop:"boxSizing"});Mg(zL,ux,LL,OL,DL,BL,FL);const NL={border:{themeKey:"borders",transform:os},borderTop:{themeKey:"borders",transform:os},borderRight:{themeKey:"borders",transform:os},borderBottom:{themeKey:"borders",transform:os},borderLeft:{themeKey:"borders",transform:os},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Rg},color:{themeKey:"palette",transform:Bu},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Bu},backgroundColor:{themeKey:"palette",transform:Bu},p:{style:oi},pt:{style:oi},pr:{style:oi},pb:{style:oi},pl:{style:oi},px:{style:oi},py:{style:oi},padding:{style:oi},paddingTop:{style:oi},paddingRight:{style:oi},paddingBottom:{style:oi},paddingLeft:{style:oi},paddingX:{style:oi},paddingY:{style:oi},paddingInline:{style:oi},paddingInlineStart:{style:oi},paddingInlineEnd:{style:oi},paddingBlock:{style:oi},paddingBlockStart:{style:oi},paddingBlockEnd:{style:oi},m:{style:ii},mt:{style:ii},mr:{style:ii},mb:{style:ii},ml:{style:ii},mx:{style:ii},my:{style:ii},margin:{style:ii},marginTop:{style:ii},marginRight:{style:ii},marginBottom:{style:ii},marginLeft:{style:ii},marginX:{style:ii},marginY:{style:ii},marginInline:{style:ii},marginInlineStart:{style:ii},marginInlineEnd:{style:ii},marginBlock:{style:ii},marginBlockStart:{style:ii},marginBlockEnd:{style:ii},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:zg},rowGap:{style:Og},columnGap:{style:Lg},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Wo},maxWidth:{style:ux},minWidth:{transform:Wo},height:{transform:Wo},maxHeight:{transform:Wo},minHeight:{transform:Wo},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},hx=NL;function UL(...e){const t=e.reduce((s,u)=>s.concat(Object.keys(u)),[]),i=new Set(t);return e.every(s=>i.size===Object.keys(s).length)}function jL(e,t){return typeof e=="function"?e(t):e}function $L(){function e(i,s,u,p){const v={[i]:s,theme:u},c=p[i];if(!c)return{[i]:s};const{cssProperty:w=i,themeKey:T,transform:P,style:L}=c;if(s==null)return null;if(T==="typography"&&s==="inherit")return{[i]:s};const B=Ig(u,T)||{};return L?L(v):Fs(v,s,O=>{let N=$m(B,P,O);return O===N&&typeof O=="string"&&(N=$m(B,P,`${i}${O==="default"?"":xo(O)}`,O)),w===!1?N:{[w]:N}})}function t(i){var s;const{sx:u,theme:p={}}=i||{};if(!u)return null;const v=(s=p.unstable_sxConfig)!=null?s:hx;function c(w){let T=w;if(typeof w=="function")T=w(p);else if(typeof w!="object")return w;if(!T)return null;const P=rL(p.breakpoints),L=Object.keys(P);let B=P;return Object.keys(T).forEach(U=>{const O=jL(T[U],p);if(O!=null)if(typeof O=="object")if(v[U])B=Bd(B,e(U,O,p,v));else{const N=Fs({theme:p},O,ae=>({[U]:ae}));UL(N,O)?B[U]=t({sx:O,theme:p}):B=Bd(B,N)}else B=Bd(B,e(U,O,p,v))}),nL(L,B)}return Array.isArray(u)?u.map(c):c(u)}return t}const xC=$L();xC.filterProps=["sx"];const dx=xC,VL=["breakpoints","palette","spacing","shape"];function px(e={},...t){const{breakpoints:i={},palette:s={},spacing:u,shape:p={}}=e,v=wi(e,VL),c=Qz(i),w=uL(u);let T=Ms({breakpoints:c,direction:"ltr",components:{},palette:st({mode:"light"},s),spacing:w,shape:st({},tL,p)},v);return T=t.reduce((P,L)=>Ms(P,L),T),T.unstable_sxConfig=st({},hx,v==null?void 0:v.unstable_sxConfig),T.unstable_sx=function(L){return dx({sx:L,theme:this})},T}function qL(e){return Object.keys(e).length===0}function bC(e=null){const t=ge.useContext(yC);return!t||qL(t)?e:t}const GL=px();function wC(e=GL){return bC(e)}const HL=["variant"];function r2(e){return e.length===0}function SC(e){const{variant:t}=e,i=wi(e,HL);let s=t||"";return Object.keys(i).sort().forEach(u=>{u==="color"?s+=r2(s)?e[u]:xo(e[u]):s+=`${r2(s)?u:xo(u)}${xo(e[u].toString())}`}),s}const WL=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function ZL(e){return Object.keys(e).length===0}function KL(e){return typeof e=="string"&&e.charCodeAt(0)>96}const XL=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,YL=(e,t)=>{let i=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(i=t.components[e].variants);const s={};return i.forEach(u=>{const p=SC(u.props);s[p]=u.style}),s},JL=(e,t,i,s)=>{var u;const{ownerState:p={}}=e,v=[],c=i==null||(u=i.components)==null||(u=u[s])==null?void 0:u.variants;return c&&c.forEach(w=>{let T=!0;Object.keys(w.props).forEach(P=>{p[P]!==w.props[P]&&e[P]!==w.props[P]&&(T=!1)}),T&&v.push(t[SC(w.props)])}),v};function am(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const QL=px(),e3=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function fd({defaultTheme:e,theme:t,themeId:i}){return ZL(t)?e:t[i]||t}function t3(e){return e?(t,i)=>i[e]:null}function r3(e={}){const{themeId:t,defaultTheme:i=QL,rootShouldForwardProp:s=am,slotShouldForwardProp:u=am}=e,p=v=>dx(st({},v,{theme:fd(st({},v,{defaultTheme:i,themeId:t}))}));return p.__mui_systemSx=!0,(v,c={})=>{Xz(v,ie=>ie.filter(_e=>!(_e!=null&&_e.__mui_systemSx)));const{name:w,slot:T,skipVariantsResolver:P,skipSx:L,overridesResolver:B=t3(e3(T))}=c,U=wi(c,WL),O=P!==void 0?P:T&&T!=="Root"&&T!=="root"||!1,N=L||!1;let ae,q=am;T==="Root"||T==="root"?q=s:T?q=u:KL(v)&&(q=void 0);const W=Kz(v,st({shouldForwardProp:q,label:ae},U)),K=(ie,..._e)=>{const Se=_e?_e.map(Le=>typeof Le=="function"&&Le.__emotion_real!==Le?Je=>Le(st({},Je,{theme:fd(st({},Je,{defaultTheme:i,themeId:t}))})):Le):[];let xe=ie;w&&B&&Se.push(Le=>{const Je=fd(st({},Le,{defaultTheme:i,themeId:t})),ur=XL(w,Je);if(ur){const Nt={};return Object.entries(ur).forEach(([mr,tt])=>{Nt[mr]=typeof tt=="function"?tt(st({},Le,{theme:Je})):tt}),B(Le,Nt)}return null}),w&&!O&&Se.push(Le=>{const Je=fd(st({},Le,{defaultTheme:i,themeId:t}));return JL(Le,YL(w,Je),Je,w)}),N||Se.push(p);const Me=Se.length-_e.length;if(Array.isArray(ie)&&Me>0){const Le=new Array(Me).fill("");xe=[...ie,...Le],xe.raw=[...ie.raw,...Le]}else typeof ie=="function"&&ie.__emotion_real!==ie&&(xe=Le=>ie(st({},Le,{theme:fd(st({},Le,{defaultTheme:i,themeId:t}))})));const Ze=W(xe,...Se);return v.muiName&&(Ze.muiName=v.muiName),Ze};return W.withConfig&&(K.withConfig=W.withConfig),K}}function n3(e){const{theme:t,name:i,props:s}=e;return!t||!t.components||!t.components[i]||!t.components[i].defaultProps?s:QT(t.components[i].defaultProps,s)}function i3({props:e,name:t,defaultTheme:i,themeId:s}){let u=wC(i);return s&&(u=u[s]||u),n3({theme:u,name:t,props:e})}function fx(e,t=0,i=1){return Math.min(Math.max(t,e),i)}function o3(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let i=e.match(t);return i&&i[0].length===1&&(i=i.map(s=>s+s)),i?`rgb${i.length===4?"a":""}(${i.map((s,u)=>u<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function _c(e){if(e.type)return e;if(e.charAt(0)==="#")return _c(o3(e));const t=e.indexOf("("),i=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(i)===-1)throw new Error(Ku(9,e));let s=e.substring(t+1,e.length-1),u;if(i==="color"){if(s=s.split(" "),u=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(u)===-1)throw new Error(Ku(10,u))}else s=s.split(",");return s=s.map(p=>parseFloat(p)),{type:i,values:s,colorSpace:u}}function Dg(e){const{type:t,colorSpace:i}=e;let{values:s}=e;return t.indexOf("rgb")!==-1?s=s.map((u,p)=>p<3?parseInt(u,10):u):t.indexOf("hsl")!==-1&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),t.indexOf("color")!==-1?s=`${i} ${s.join(" ")}`:s=`${s.join(", ")}`,`${t}(${s})`}function a3(e){e=_c(e);const{values:t}=e,i=t[0],s=t[1]/100,u=t[2]/100,p=s*Math.min(u,1-u),v=(T,P=(T+i/30)%12)=>u-p*Math.max(Math.min(P-3,9-P,1),-1);let c="rgb";const w=[Math.round(v(0)*255),Math.round(v(8)*255),Math.round(v(4)*255)];return e.type==="hsla"&&(c+="a",w.push(t[3])),Dg({type:c,values:w})}function n2(e){e=_c(e);let t=e.type==="hsl"||e.type==="hsla"?_c(a3(e)).values:e.values;return t=t.map(i=>(e.type!=="color"&&(i/=255),i<=.03928?i/12.92:((i+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function s3(e,t){const i=n2(e),s=n2(t);return(Math.max(i,s)+.05)/(Math.min(i,s)+.05)}function EC(e,t){return e=_c(e),t=fx(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Dg(e)}function l3(e,t){if(e=_c(e),t=fx(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let i=0;i<3;i+=1)e.values[i]*=1-t;return Dg(e)}function c3(e,t){if(e=_c(e),t=fx(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let i=0;i<3;i+=1)e.values[i]+=(255-e.values[i])*t;else if(e.type.indexOf("color")!==-1)for(let i=0;i<3;i+=1)e.values[i]+=(1-e.values[i])*t;return Dg(e)}function u3(e,t){return st({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const h3={black:"#000",white:"#fff"},sp=h3,d3={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},p3=d3,f3={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},cu=f3,m3={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},uu=m3,g3={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},md=g3,y3={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},hu=y3,v3={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},du=v3,_3={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},pu=_3,x3=["mode","contrastThreshold","tonalOffset"],i2={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:sp.white,default:sp.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Ev={text:{primary:sp.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:sp.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function o2(e,t,i,s){const u=s.light||s,p=s.dark||s*1.5;e[t]||(e.hasOwnProperty(i)?e[t]=e[i]:t==="light"?e.light=c3(e.main,u):t==="dark"&&(e.dark=l3(e.main,p)))}function b3(e="light"){return e==="dark"?{main:hu[200],light:hu[50],dark:hu[400]}:{main:hu[700],light:hu[400],dark:hu[800]}}function w3(e="light"){return e==="dark"?{main:cu[200],light:cu[50],dark:cu[400]}:{main:cu[500],light:cu[300],dark:cu[700]}}function S3(e="light"){return e==="dark"?{main:uu[500],light:uu[300],dark:uu[700]}:{main:uu[700],light:uu[400],dark:uu[800]}}function E3(e="light"){return e==="dark"?{main:du[400],light:du[300],dark:du[700]}:{main:du[700],light:du[500],dark:du[900]}}function T3(e="light"){return e==="dark"?{main:pu[400],light:pu[300],dark:pu[700]}:{main:pu[800],light:pu[500],dark:pu[900]}}function C3(e="light"){return e==="dark"?{main:md[400],light:md[300],dark:md[700]}:{main:"#ed6c02",light:md[500],dark:md[900]}}function k3(e){const{mode:t="light",contrastThreshold:i=3,tonalOffset:s=.2}=e,u=wi(e,x3),p=e.primary||b3(t),v=e.secondary||w3(t),c=e.error||S3(t),w=e.info||E3(t),T=e.success||T3(t),P=e.warning||C3(t);function L(N){return s3(N,Ev.text.primary)>=i?Ev.text.primary:i2.text.primary}const B=({color:N,name:ae,mainShade:q=500,lightShade:W=300,darkShade:K=700})=>{if(N=st({},N),!N.main&&N[q]&&(N.main=N[q]),!N.hasOwnProperty("main"))throw new Error(Ku(11,ae?` (${ae})`:"",q));if(typeof N.main!="string")throw new Error(Ku(12,ae?` (${ae})`:"",JSON.stringify(N.main)));return o2(N,"light",W,s),o2(N,"dark",K,s),N.contrastText||(N.contrastText=L(N.main)),N},U={dark:Ev,light:i2};return Ms(st({common:st({},sp),mode:t,primary:B({color:p,name:"primary"}),secondary:B({color:v,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:B({color:c,name:"error"}),warning:B({color:P,name:"warning"}),info:B({color:w,name:"info"}),success:B({color:T,name:"success"}),grey:p3,contrastThreshold:i,getContrastText:L,augmentColor:B,tonalOffset:s},U[t]),u)}const P3=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function A3(e){return Math.round(e*1e5)/1e5}const a2={textTransform:"uppercase"},s2='"Roboto", "Helvetica", "Arial", sans-serif';function I3(e,t){const i=typeof t=="function"?t(e):t,{fontFamily:s=s2,fontSize:u=14,fontWeightLight:p=300,fontWeightRegular:v=400,fontWeightMedium:c=500,fontWeightBold:w=700,htmlFontSize:T=16,allVariants:P,pxToRem:L}=i,B=wi(i,P3),U=u/14,O=L||(q=>`${q/T*U}rem`),N=(q,W,K,ie,_e)=>st({fontFamily:s,fontWeight:q,fontSize:O(W),lineHeight:K},s===s2?{letterSpacing:`${A3(ie/W)}em`}:{},_e,P),ae={h1:N(p,96,1.167,-1.5),h2:N(p,60,1.2,-.5),h3:N(v,48,1.167,0),h4:N(v,34,1.235,.25),h5:N(v,24,1.334,0),h6:N(c,20,1.6,.15),subtitle1:N(v,16,1.75,.15),subtitle2:N(c,14,1.57,.1),body1:N(v,16,1.5,.15),body2:N(v,14,1.43,.15),button:N(c,14,1.75,.4,a2),caption:N(v,12,1.66,.4),overline:N(v,12,2.66,1,a2),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ms(st({htmlFontSize:T,pxToRem:O,fontFamily:s,fontSize:u,fontWeightLight:p,fontWeightRegular:v,fontWeightMedium:c,fontWeightBold:w},ae),B,{clone:!1})}const M3=.2,R3=.14,z3=.12;function jn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${M3})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${R3})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${z3})`].join(",")}const L3=["none",jn(0,2,1,-1,0,1,1,0,0,1,3,0),jn(0,3,1,-2,0,2,2,0,0,1,5,0),jn(0,3,3,-2,0,3,4,0,0,1,8,0),jn(0,2,4,-1,0,4,5,0,0,1,10,0),jn(0,3,5,-1,0,5,8,0,0,1,14,0),jn(0,3,5,-1,0,6,10,0,0,1,18,0),jn(0,4,5,-2,0,7,10,1,0,2,16,1),jn(0,5,5,-3,0,8,10,1,0,3,14,2),jn(0,5,6,-3,0,9,12,1,0,3,16,2),jn(0,6,6,-3,0,10,14,1,0,4,18,3),jn(0,6,7,-4,0,11,15,1,0,4,20,3),jn(0,7,8,-4,0,12,17,2,0,5,22,4),jn(0,7,8,-4,0,13,19,2,0,5,24,4),jn(0,7,9,-4,0,14,21,2,0,5,26,4),jn(0,8,9,-5,0,15,22,2,0,6,28,5),jn(0,8,10,-5,0,16,24,2,0,6,30,5),jn(0,8,11,-5,0,17,26,2,0,6,32,5),jn(0,9,11,-5,0,18,28,2,0,7,34,6),jn(0,9,12,-6,0,19,29,2,0,7,36,6),jn(0,10,13,-6,0,20,31,3,0,8,38,7),jn(0,10,13,-6,0,21,33,3,0,8,40,7),jn(0,10,14,-6,0,22,35,3,0,8,42,7),jn(0,11,14,-7,0,23,36,3,0,9,44,8),jn(0,11,15,-7,0,24,38,3,0,9,46,8)],O3=L3,D3=["duration","easing","delay"],B3={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},F3={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function l2(e){return`${Math.round(e)}ms`}function N3(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function U3(e){const t=st({},B3,e.easing),i=st({},F3,e.duration);return st({getAutoHeightDuration:N3,create:(u=["all"],p={})=>{const{duration:v=i.standard,easing:c=t.easeInOut,delay:w=0}=p;return wi(p,D3),(Array.isArray(u)?u:[u]).map(T=>`${T} ${typeof v=="string"?v:l2(v)} ${c} ${typeof w=="string"?w:l2(w)}`).join(",")}},e,{easing:t,duration:i})}const j3={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},$3=j3,V3=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function q3(e={},...t){const{mixins:i={},palette:s={},transitions:u={},typography:p={}}=e,v=wi(e,V3);if(e.vars)throw new Error(Ku(18));const c=k3(s),w=px(e);let T=Ms(w,{mixins:u3(w.breakpoints,i),palette:c,shadows:O3.slice(),typography:I3(c,p),transitions:U3(u),zIndex:st({},$3)});return T=Ms(T,v),T=t.reduce((P,L)=>Ms(P,L),T),T.unstable_sxConfig=st({},hx,v==null?void 0:v.unstable_sxConfig),T.unstable_sx=function(L){return dx({sx:L,theme:this})},T}const G3=q3(),mx=G3,gx="$$material",TC=e=>am(e)&&e!=="classes",H3=r3({themeId:gx,defaultTheme:mx,rootShouldForwardProp:TC}),Vs=H3;function dh({props:e,name:t}){return i3({props:e,name:t,defaultTheme:mx,themeId:gx})}function O0(e,t){return O0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,u){return s.__proto__=u,s},O0(e,t)}function CC(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,O0(e,t)}const c2={disabled:!1},Vm=kn.createContext(null);var W3=function(t){return t.scrollTop},Sd="unmounted",ic="exited",oc="entering",gu="entered",D0="exiting",qs=function(e){CC(t,e);function t(s,u){var p;p=e.call(this,s,u)||this;var v=u,c=v&&!v.isMounting?s.enter:s.appear,w;return p.appearStatus=null,s.in?c?(w=ic,p.appearStatus=oc):w=gu:s.unmountOnExit||s.mountOnEnter?w=Sd:w=ic,p.state={status:w},p.nextCallback=null,p}t.getDerivedStateFromProps=function(u,p){var v=u.in;return v&&p.status===Sd?{status:ic}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(u){var p=null;if(u!==this.props){var v=this.state.status;this.props.in?v!==oc&&v!==gu&&(p=oc):(v===oc||v===gu)&&(p=D0)}this.updateStatus(!1,p)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var u=this.props.timeout,p,v,c;return p=v=c=u,u!=null&&typeof u!="number"&&(p=u.exit,v=u.enter,c=u.appear!==void 0?u.appear:v),{exit:p,enter:v,appear:c}},i.updateStatus=function(u,p){if(u===void 0&&(u=!1),p!==null)if(this.cancelNextCallback(),p===oc){if(this.props.unmountOnExit||this.props.mountOnEnter){var v=this.props.nodeRef?this.props.nodeRef.current:Bf.findDOMNode(this);v&&W3(v)}this.performEnter(u)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ic&&this.setState({status:Sd})},i.performEnter=function(u){var p=this,v=this.props.enter,c=this.context?this.context.isMounting:u,w=this.props.nodeRef?[c]:[Bf.findDOMNode(this),c],T=w[0],P=w[1],L=this.getTimeouts(),B=c?L.appear:L.enter;if(!u&&!v||c2.disabled){this.safeSetState({status:gu},function(){p.props.onEntered(T)});return}this.props.onEnter(T,P),this.safeSetState({status:oc},function(){p.props.onEntering(T,P),p.onTransitionEnd(B,function(){p.safeSetState({status:gu},function(){p.props.onEntered(T,P)})})})},i.performExit=function(){var u=this,p=this.props.exit,v=this.getTimeouts(),c=this.props.nodeRef?void 0:Bf.findDOMNode(this);if(!p||c2.disabled){this.safeSetState({status:ic},function(){u.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:D0},function(){u.props.onExiting(c),u.onTransitionEnd(v.exit,function(){u.safeSetState({status:ic},function(){u.props.onExited(c)})})})},i.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(u,p){p=this.setNextCallback(p),this.setState(u,p)},i.setNextCallback=function(u){var p=this,v=!0;return this.nextCallback=function(c){v&&(v=!1,p.nextCallback=null,u(c))},this.nextCallback.cancel=function(){v=!1},this.nextCallback},i.onTransitionEnd=function(u,p){this.setNextCallback(p);var v=this.props.nodeRef?this.props.nodeRef.current:Bf.findDOMNode(this),c=u==null&&!this.props.addEndListener;if(!v||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var w=this.props.nodeRef?[this.nextCallback]:[v,this.nextCallback],T=w[0],P=w[1];this.props.addEndListener(T,P)}u!=null&&setTimeout(this.nextCallback,u)},i.render=function(){var u=this.state.status;if(u===Sd)return null;var p=this.props,v=p.children;p.in,p.mountOnEnter,p.unmountOnExit,p.appear,p.enter,p.exit,p.timeout,p.addEndListener,p.onEnter,p.onEntering,p.onEntered,p.onExit,p.onExiting,p.onExited,p.nodeRef;var c=wi(p,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return kn.createElement(Vm.Provider,{value:null},typeof v=="function"?v(u,c):kn.cloneElement(kn.Children.only(v),c))},t}(kn.Component);qs.contextType=Vm;qs.propTypes={};function fu(){}qs.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:fu,onEntering:fu,onEntered:fu,onExit:fu,onExiting:fu,onExited:fu};qs.UNMOUNTED=Sd;qs.EXITED=ic;qs.ENTERING=oc;qs.ENTERED=gu;qs.EXITING=D0;const Z3=qs;function K3(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yx(e,t){var i=function(p){return t&&ge.isValidElement(p)?t(p):p},s=Object.create(null);return e&&ge.Children.map(e,function(u){return u}).forEach(function(u){s[u.key]=i(u)}),s}function X3(e,t){e=e||{},t=t||{};function i(P){return P in t?t[P]:e[P]}var s=Object.create(null),u=[];for(var p in e)p in t?u.length&&(s[p]=u,u=[]):u.push(p);var v,c={};for(var w in t){if(s[w])for(v=0;v<s[w].length;v++){var T=s[w][v];c[s[w][v]]=i(T)}c[w]=i(w)}for(v=0;v<u.length;v++)c[u[v]]=i(u[v]);return c}function cc(e,t,i){return i[t]!=null?i[t]:e.props[t]}function Y3(e,t){return yx(e.children,function(i){return ge.cloneElement(i,{onExited:t.bind(null,i),in:!0,appear:cc(i,"appear",e),enter:cc(i,"enter",e),exit:cc(i,"exit",e)})})}function J3(e,t,i){var s=yx(e.children),u=X3(t,s);return Object.keys(u).forEach(function(p){var v=u[p];if(ge.isValidElement(v)){var c=p in t,w=p in s,T=t[p],P=ge.isValidElement(T)&&!T.props.in;w&&(!c||P)?u[p]=ge.cloneElement(v,{onExited:i.bind(null,v),in:!0,exit:cc(v,"exit",e),enter:cc(v,"enter",e)}):!w&&c&&!P?u[p]=ge.cloneElement(v,{in:!1}):w&&c&&ge.isValidElement(T)&&(u[p]=ge.cloneElement(v,{onExited:i.bind(null,v),in:T.props.in,exit:cc(v,"exit",e),enter:cc(v,"enter",e)}))}}),u}var Q3=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},eO={component:"div",childFactory:function(t){return t}},vx=function(e){CC(t,e);function t(s,u){var p;p=e.call(this,s,u)||this;var v=p.handleExited.bind(K3(p));return p.state={contextValue:{isMounting:!0},handleExited:v,firstRender:!0},p}var i=t.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(u,p){var v=p.children,c=p.handleExited,w=p.firstRender;return{children:w?Y3(u,c):J3(u,v,c),firstRender:!1}},i.handleExited=function(u,p){var v=yx(this.props.children);u.key in v||(u.props.onExited&&u.props.onExited(p),this.mounted&&this.setState(function(c){var w=st({},c.children);return delete w[u.key],{children:w}}))},i.render=function(){var u=this.props,p=u.component,v=u.childFactory,c=wi(u,["component","childFactory"]),w=this.state.contextValue,T=Q3(this.state.children).map(v);return delete c.appear,delete c.enter,delete c.exit,p===null?kn.createElement(Vm.Provider,{value:w},T):kn.createElement(Vm.Provider,{value:w},kn.createElement(p,c,T))},t}(kn.Component);vx.propTypes={};vx.defaultProps=eO;const tO=vx;function rO(e){const{className:t,classes:i,pulsate:s=!1,rippleX:u,rippleY:p,rippleSize:v,in:c,onExited:w,timeout:T}=e,[P,L]=ge.useState(!1),B=ki(t,i.ripple,i.rippleVisible,s&&i.ripplePulsate),U={width:v,height:v,top:-(v/2)+p,left:-(v/2)+u},O=ki(i.child,P&&i.childLeaving,s&&i.childPulsate);return!c&&!P&&L(!0),ge.useEffect(()=>{if(!c&&w!=null){const N=setTimeout(w,T);return()=>{clearTimeout(N)}}},[w,c,T]),ke.jsx("span",{className:B,style:U,children:ke.jsx("span",{className:O})})}const nO=uh("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),ma=nO,iO=["center","classes","className"];let Bg=e=>e,u2,h2,d2,p2;const B0=550,oO=80,aO=ax(u2||(u2=Bg`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),sO=ax(h2||(h2=Bg`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),lO=ax(d2||(d2=Bg`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),cO=Vs("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),uO=Vs(rO,{name:"MuiTouchRipple",slot:"Ripple"})(p2||(p2=Bg`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),ma.rippleVisible,aO,B0,({theme:e})=>e.transitions.easing.easeInOut,ma.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,ma.child,ma.childLeaving,sO,B0,({theme:e})=>e.transitions.easing.easeInOut,ma.childPulsate,lO,({theme:e})=>e.transitions.easing.easeInOut),hO=ge.forwardRef(function(t,i){const s=dh({props:t,name:"MuiTouchRipple"}),{center:u=!1,classes:p={},className:v}=s,c=wi(s,iO),[w,T]=ge.useState([]),P=ge.useRef(0),L=ge.useRef(null);ge.useEffect(()=>{L.current&&(L.current(),L.current=null)},[w]);const B=ge.useRef(!1),U=ge.useRef(0),O=ge.useRef(null),N=ge.useRef(null);ge.useEffect(()=>()=>{U.current&&clearTimeout(U.current)},[]);const ae=ge.useCallback(ie=>{const{pulsate:_e,rippleX:Se,rippleY:xe,rippleSize:Me,cb:Ze}=ie;T(Le=>[...Le,ke.jsx(uO,{classes:{ripple:ki(p.ripple,ma.ripple),rippleVisible:ki(p.rippleVisible,ma.rippleVisible),ripplePulsate:ki(p.ripplePulsate,ma.ripplePulsate),child:ki(p.child,ma.child),childLeaving:ki(p.childLeaving,ma.childLeaving),childPulsate:ki(p.childPulsate,ma.childPulsate)},timeout:B0,pulsate:_e,rippleX:Se,rippleY:xe,rippleSize:Me},P.current)]),P.current+=1,L.current=Ze},[p]),q=ge.useCallback((ie={},_e={},Se=()=>{})=>{const{pulsate:xe=!1,center:Me=u||_e.pulsate,fakeElement:Ze=!1}=_e;if((ie==null?void 0:ie.type)==="mousedown"&&B.current){B.current=!1;return}(ie==null?void 0:ie.type)==="touchstart"&&(B.current=!0);const Le=Ze?null:N.current,Je=Le?Le.getBoundingClientRect():{width:0,height:0,left:0,top:0};let ur,Nt,mr;if(Me||ie===void 0||ie.clientX===0&&ie.clientY===0||!ie.clientX&&!ie.touches)ur=Math.round(Je.width/2),Nt=Math.round(Je.height/2);else{const{clientX:tt,clientY:Mt}=ie.touches&&ie.touches.length>0?ie.touches[0]:ie;ur=Math.round(tt-Je.left),Nt=Math.round(Mt-Je.top)}if(Me)mr=Math.sqrt((2*Je.width**2+Je.height**2)/3),mr%2===0&&(mr+=1);else{const tt=Math.max(Math.abs((Le?Le.clientWidth:0)-ur),ur)*2+2,Mt=Math.max(Math.abs((Le?Le.clientHeight:0)-Nt),Nt)*2+2;mr=Math.sqrt(tt**2+Mt**2)}ie!=null&&ie.touches?O.current===null&&(O.current=()=>{ae({pulsate:xe,rippleX:ur,rippleY:Nt,rippleSize:mr,cb:Se})},U.current=setTimeout(()=>{O.current&&(O.current(),O.current=null)},oO)):ae({pulsate:xe,rippleX:ur,rippleY:Nt,rippleSize:mr,cb:Se})},[u,ae]),W=ge.useCallback(()=>{q({},{pulsate:!0})},[q]),K=ge.useCallback((ie,_e)=>{if(clearTimeout(U.current),(ie==null?void 0:ie.type)==="touchend"&&O.current){O.current(),O.current=null,U.current=setTimeout(()=>{K(ie,_e)});return}O.current=null,T(Se=>Se.length>0?Se.slice(1):Se),L.current=_e},[]);return ge.useImperativeHandle(i,()=>({pulsate:W,start:q,stop:K}),[W,q,K]),ke.jsx(cO,st({className:ki(ma.root,p.root,v),ref:N},c,{children:ke.jsx(tO,{component:null,exit:!0,children:w})}))}),dO=hO;function pO(e){return ch("MuiButtonBase",e)}const fO=uh("MuiButtonBase",["root","disabled","focusVisible"]),mO=fO,gO=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],yO=e=>{const{disabled:t,focusVisible:i,focusVisibleClassName:s,classes:u}=e,v=vp({root:["root",t&&"disabled",i&&"focusVisible"]},pO,u);return i&&s&&(v.root+=` ${s}`),v},vO=Vs("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${mO.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),_O=ge.forwardRef(function(t,i){const s=dh({props:t,name:"MuiButtonBase"}),{action:u,centerRipple:p=!1,children:v,className:c,component:w="button",disabled:T=!1,disableRipple:P=!1,disableTouchRipple:L=!1,focusRipple:B=!1,LinkComponent:U="a",onBlur:O,onClick:N,onContextMenu:ae,onDragLeave:q,onFocus:W,onFocusVisible:K,onKeyDown:ie,onKeyUp:_e,onMouseDown:Se,onMouseLeave:xe,onMouseUp:Me,onTouchEnd:Ze,onTouchMove:Le,onTouchStart:Je,tabIndex:ur=0,TouchRippleProps:Nt,touchRippleRef:mr,type:tt}=s,Mt=wi(s,gO),kt=ge.useRef(null),$e=ge.useRef(null),lt=Bs($e,mr),{isFocusVisibleRef:wt,onFocus:rr,onBlur:or,ref:fr}=J_(),[dr,Jt]=ge.useState(!1);T&&dr&&Jt(!1),ge.useImperativeHandle(u,()=>({focusVisible:()=>{Jt(!0),kt.current.focus()}}),[]);const[Ir,zr]=ge.useState(!1);ge.useEffect(()=>{zr(!0)},[]);const Fr=Ir&&!P&&!T;ge.useEffect(()=>{dr&&B&&!P&&Ir&&$e.current.pulsate()},[P,B,dr,Ir]);function sr(Wt,dn,Xe=L){return Au(Rt=>(dn&&dn(Rt),!Xe&&$e.current&&$e.current[Wt](Rt),!0))}const wn=sr("start",Se),kr=sr("stop",ae),Mn=sr("stop",q),hn=sr("stop",Me),Ae=sr("stop",Wt=>{dr&&Wt.preventDefault(),xe&&xe(Wt)}),Pr=sr("start",Je),Rn=sr("stop",Ze),pr=sr("stop",Le),Vt=sr("stop",Wt=>{or(Wt),wt.current===!1&&Jt(!1),O&&O(Wt)},!1),zn=Au(Wt=>{kt.current||(kt.current=Wt.currentTarget),rr(Wt),wt.current===!0&&(Jt(!0),K&&K(Wt)),W&&W(Wt)}),Kr=()=>{const Wt=kt.current;return w&&w!=="button"&&!(Wt.tagName==="A"&&Wt.href)},Ln=ge.useRef(!1),Tr=Au(Wt=>{B&&!Ln.current&&dr&&$e.current&&Wt.key===" "&&(Ln.current=!0,$e.current.stop(Wt,()=>{$e.current.start(Wt)})),Wt.target===Wt.currentTarget&&Kr()&&Wt.key===" "&&Wt.preventDefault(),ie&&ie(Wt),Wt.target===Wt.currentTarget&&Kr()&&Wt.key==="Enter"&&!T&&(Wt.preventDefault(),N&&N(Wt))}),Vn=Au(Wt=>{B&&Wt.key===" "&&$e.current&&dr&&!Wt.defaultPrevented&&(Ln.current=!1,$e.current.stop(Wt,()=>{$e.current.pulsate(Wt)})),_e&&_e(Wt),N&&Wt.target===Wt.currentTarget&&Kr()&&Wt.key===" "&&!Wt.defaultPrevented&&N(Wt)});let yn=w;yn==="button"&&(Mt.href||Mt.to)&&(yn=U);const rn={};yn==="button"?(rn.type=tt===void 0?"button":tt,rn.disabled=T):(!Mt.href&&!Mt.to&&(rn.role="button"),T&&(rn["aria-disabled"]=T));const Ve=Bs(i,fr,kt),Sn=st({},s,{centerRipple:p,component:w,disabled:T,disableRipple:P,disableTouchRipple:L,focusRipple:B,tabIndex:ur,focusVisible:dr}),Xr=yO(Sn);return ke.jsxs(vO,st({as:yn,className:ki(Xr.root,c),ownerState:Sn,onBlur:Vt,onClick:N,onContextMenu:kr,onFocus:zn,onKeyDown:Tr,onKeyUp:Vn,onMouseDown:wn,onMouseLeave:Ae,onMouseUp:hn,onDragLeave:Mn,onTouchEnd:Rn,onTouchMove:pr,onTouchStart:Pr,ref:Ve,tabIndex:T?-1:ur,type:tt},rn,Mt,{children:[v,Fr?ke.jsx(dO,st({ref:lt,center:p},Nt)):null]}))}),xO=_O;function bO(e){return typeof e=="string"}function Ed(e,t,i){return e===void 0||bO(e)?t:st({},t,{ownerState:st({},t.ownerState,i)})}const wO={disableDefaultClasses:!1},SO=ge.createContext(wO);function EO(e){const{disableDefaultClasses:t}=ge.useContext(SO);return i=>t?"":e(i)}function TO(e,t=[]){if(e===void 0)return{};const i={};return Object.keys(e).filter(s=>s.match(/^on[A-Z]/)&&typeof e[s]=="function"&&!t.includes(s)).forEach(s=>{i[s]=e[s]}),i}function CO(e,t,i){return typeof e=="function"?e(t,i):e}function f2(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(i=>!(i.match(/^on[A-Z]/)&&typeof e[i]=="function")).forEach(i=>{t[i]=e[i]}),t}function kO(e){const{getSlotProps:t,additionalProps:i,externalSlotProps:s,externalForwardedProps:u,className:p}=e;if(!t){const U=ki(u==null?void 0:u.className,s==null?void 0:s.className,p,i==null?void 0:i.className),O=st({},i==null?void 0:i.style,u==null?void 0:u.style,s==null?void 0:s.style),N=st({},i,u,s);return U.length>0&&(N.className=U),Object.keys(O).length>0&&(N.style=O),{props:N,internalRef:void 0}}const v=TO(st({},u,s)),c=f2(s),w=f2(u),T=t(v),P=ki(T==null?void 0:T.className,i==null?void 0:i.className,p,u==null?void 0:u.className,s==null?void 0:s.className),L=st({},T==null?void 0:T.style,i==null?void 0:i.style,u==null?void 0:u.style,s==null?void 0:s.style),B=st({},T,i,w,c);return P.length>0&&(B.className=P),Object.keys(L).length>0&&(B.style=L),{props:B,internalRef:T.ref}}const PO=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function AO(e){var t;const{elementType:i,externalSlotProps:s,ownerState:u,skipResolvingSlotProps:p=!1}=e,v=wi(e,PO),c=p?{}:CO(s,u),{props:w,internalRef:T}=kO(st({},v,{externalSlotProps:c})),P=Bs(T,c==null?void 0:c.ref,(t=e.additionalProps)==null?void 0:t.ref);return Ed(i,st({},w,{ref:P}),u)}var Lo="top",Ea="bottom",Ta="right",Oo="left",_x="auto",wp=[Lo,Ea,Ta,Oo],Ju="start",lp="end",IO="clippingParents",kC="viewport",gd="popper",MO="reference",m2=wp.reduce(function(e,t){return e.concat([t+"-"+Ju,t+"-"+lp])},[]),PC=[].concat(wp,[_x]).reduce(function(e,t){return e.concat([t,t+"-"+Ju,t+"-"+lp])},[]),RO="beforeRead",zO="read",LO="afterRead",OO="beforeMain",DO="main",BO="afterMain",FO="beforeWrite",NO="write",UO="afterWrite",jO=[RO,zO,LO,OO,DO,BO,FO,NO,UO];function us(e){return e?(e.nodeName||"").toLowerCase():null}function Jo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function xc(e){var t=Jo(e).Element;return e instanceof t||e instanceof Element}function xa(e){var t=Jo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function xx(e){if(typeof ShadowRoot>"u")return!1;var t=Jo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function $O(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var s=t.styles[i]||{},u=t.attributes[i]||{},p=t.elements[i];!xa(p)||!us(p)||(Object.assign(p.style,s),Object.keys(u).forEach(function(v){var c=u[v];c===!1?p.removeAttribute(v):p.setAttribute(v,c===!0?"":c)}))})}function VO(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(s){var u=t.elements[s],p=t.attributes[s]||{},v=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:i[s]),c=v.reduce(function(w,T){return w[T]="",w},{});!xa(u)||!us(u)||(Object.assign(u.style,c),Object.keys(p).forEach(function(w){u.removeAttribute(w)}))})}}const qO={name:"applyStyles",enabled:!0,phase:"write",fn:$O,effect:VO,requires:["computeStyles"]};function cs(e){return e.split("-")[0]}var pc=Math.max,qm=Math.min,Qu=Math.round;function F0(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function AC(){return!/^((?!chrome|android).)*safari/i.test(F0())}function eh(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var s=e.getBoundingClientRect(),u=1,p=1;t&&xa(e)&&(u=e.offsetWidth>0&&Qu(s.width)/e.offsetWidth||1,p=e.offsetHeight>0&&Qu(s.height)/e.offsetHeight||1);var v=xc(e)?Jo(e):window,c=v.visualViewport,w=!AC()&&i,T=(s.left+(w&&c?c.offsetLeft:0))/u,P=(s.top+(w&&c?c.offsetTop:0))/p,L=s.width/u,B=s.height/p;return{width:L,height:B,top:P,right:T+L,bottom:P+B,left:T,x:T,y:P}}function bx(e){var t=eh(e),i=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:s}}function IC(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&xx(i)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Ns(e){return Jo(e).getComputedStyle(e)}function GO(e){return["table","td","th"].indexOf(us(e))>=0}function Al(e){return((xc(e)?e.ownerDocument:e.document)||window.document).documentElement}function Fg(e){return us(e)==="html"?e:e.assignedSlot||e.parentNode||(xx(e)?e.host:null)||Al(e)}function g2(e){return!xa(e)||Ns(e).position==="fixed"?null:e.offsetParent}function HO(e){var t=/firefox/i.test(F0()),i=/Trident/i.test(F0());if(i&&xa(e)){var s=Ns(e);if(s.position==="fixed")return null}var u=Fg(e);for(xx(u)&&(u=u.host);xa(u)&&["html","body"].indexOf(us(u))<0;){var p=Ns(u);if(p.transform!=="none"||p.perspective!=="none"||p.contain==="paint"||["transform","perspective"].indexOf(p.willChange)!==-1||t&&p.willChange==="filter"||t&&p.filter&&p.filter!=="none")return u;u=u.parentNode}return null}function Sp(e){for(var t=Jo(e),i=g2(e);i&&GO(i)&&Ns(i).position==="static";)i=g2(i);return i&&(us(i)==="html"||us(i)==="body"&&Ns(i).position==="static")?t:i||HO(e)||t}function wx(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Fd(e,t,i){return pc(e,qm(t,i))}function WO(e,t,i){var s=Fd(e,t,i);return s>i?i:s}function MC(){return{top:0,right:0,bottom:0,left:0}}function RC(e){return Object.assign({},MC(),e)}function zC(e,t){return t.reduce(function(i,s){return i[s]=e,i},{})}var ZO=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,RC(typeof t!="number"?t:zC(t,wp))};function KO(e){var t,i=e.state,s=e.name,u=e.options,p=i.elements.arrow,v=i.modifiersData.popperOffsets,c=cs(i.placement),w=wx(c),T=[Oo,Ta].indexOf(c)>=0,P=T?"height":"width";if(!(!p||!v)){var L=ZO(u.padding,i),B=bx(p),U=w==="y"?Lo:Oo,O=w==="y"?Ea:Ta,N=i.rects.reference[P]+i.rects.reference[w]-v[w]-i.rects.popper[P],ae=v[w]-i.rects.reference[w],q=Sp(p),W=q?w==="y"?q.clientHeight||0:q.clientWidth||0:0,K=N/2-ae/2,ie=L[U],_e=W-B[P]-L[O],Se=W/2-B[P]/2+K,xe=Fd(ie,Se,_e),Me=w;i.modifiersData[s]=(t={},t[Me]=xe,t.centerOffset=xe-Se,t)}}function XO(e){var t=e.state,i=e.options,s=i.element,u=s===void 0?"[data-popper-arrow]":s;u!=null&&(typeof u=="string"&&(u=t.elements.popper.querySelector(u),!u)||IC(t.elements.popper,u)&&(t.elements.arrow=u))}const YO={name:"arrow",enabled:!0,phase:"main",fn:KO,effect:XO,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function th(e){return e.split("-")[1]}var JO={top:"auto",right:"auto",bottom:"auto",left:"auto"};function QO(e,t){var i=e.x,s=e.y,u=t.devicePixelRatio||1;return{x:Qu(i*u)/u||0,y:Qu(s*u)/u||0}}function y2(e){var t,i=e.popper,s=e.popperRect,u=e.placement,p=e.variation,v=e.offsets,c=e.position,w=e.gpuAcceleration,T=e.adaptive,P=e.roundOffsets,L=e.isFixed,B=v.x,U=B===void 0?0:B,O=v.y,N=O===void 0?0:O,ae=typeof P=="function"?P({x:U,y:N}):{x:U,y:N};U=ae.x,N=ae.y;var q=v.hasOwnProperty("x"),W=v.hasOwnProperty("y"),K=Oo,ie=Lo,_e=window;if(T){var Se=Sp(i),xe="clientHeight",Me="clientWidth";if(Se===Jo(i)&&(Se=Al(i),Ns(Se).position!=="static"&&c==="absolute"&&(xe="scrollHeight",Me="scrollWidth")),Se=Se,u===Lo||(u===Oo||u===Ta)&&p===lp){ie=Ea;var Ze=L&&Se===_e&&_e.visualViewport?_e.visualViewport.height:Se[xe];N-=Ze-s.height,N*=w?1:-1}if(u===Oo||(u===Lo||u===Ea)&&p===lp){K=Ta;var Le=L&&Se===_e&&_e.visualViewport?_e.visualViewport.width:Se[Me];U-=Le-s.width,U*=w?1:-1}}var Je=Object.assign({position:c},T&&JO),ur=P===!0?QO({x:U,y:N},Jo(i)):{x:U,y:N};if(U=ur.x,N=ur.y,w){var Nt;return Object.assign({},Je,(Nt={},Nt[ie]=W?"0":"",Nt[K]=q?"0":"",Nt.transform=(_e.devicePixelRatio||1)<=1?"translate("+U+"px, "+N+"px)":"translate3d("+U+"px, "+N+"px, 0)",Nt))}return Object.assign({},Je,(t={},t[ie]=W?N+"px":"",t[K]=q?U+"px":"",t.transform="",t))}function e4(e){var t=e.state,i=e.options,s=i.gpuAcceleration,u=s===void 0?!0:s,p=i.adaptive,v=p===void 0?!0:p,c=i.roundOffsets,w=c===void 0?!0:c,T={placement:cs(t.placement),variation:th(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:u,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,y2(Object.assign({},T,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:v,roundOffsets:w})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,y2(Object.assign({},T,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:w})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const t4={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:e4,data:{}};var Nf={passive:!0};function r4(e){var t=e.state,i=e.instance,s=e.options,u=s.scroll,p=u===void 0?!0:u,v=s.resize,c=v===void 0?!0:v,w=Jo(t.elements.popper),T=[].concat(t.scrollParents.reference,t.scrollParents.popper);return p&&T.forEach(function(P){P.addEventListener("scroll",i.update,Nf)}),c&&w.addEventListener("resize",i.update,Nf),function(){p&&T.forEach(function(P){P.removeEventListener("scroll",i.update,Nf)}),c&&w.removeEventListener("resize",i.update,Nf)}}const n4={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:r4,data:{}};var i4={left:"right",right:"left",bottom:"top",top:"bottom"};function sm(e){return e.replace(/left|right|bottom|top/g,function(t){return i4[t]})}var o4={start:"end",end:"start"};function v2(e){return e.replace(/start|end/g,function(t){return o4[t]})}function Sx(e){var t=Jo(e),i=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:i,scrollTop:s}}function Ex(e){return eh(Al(e)).left+Sx(e).scrollLeft}function a4(e,t){var i=Jo(e),s=Al(e),u=i.visualViewport,p=s.clientWidth,v=s.clientHeight,c=0,w=0;if(u){p=u.width,v=u.height;var T=AC();(T||!T&&t==="fixed")&&(c=u.offsetLeft,w=u.offsetTop)}return{width:p,height:v,x:c+Ex(e),y:w}}function s4(e){var t,i=Al(e),s=Sx(e),u=(t=e.ownerDocument)==null?void 0:t.body,p=pc(i.scrollWidth,i.clientWidth,u?u.scrollWidth:0,u?u.clientWidth:0),v=pc(i.scrollHeight,i.clientHeight,u?u.scrollHeight:0,u?u.clientHeight:0),c=-s.scrollLeft+Ex(e),w=-s.scrollTop;return Ns(u||i).direction==="rtl"&&(c+=pc(i.clientWidth,u?u.clientWidth:0)-p),{width:p,height:v,x:c,y:w}}function Tx(e){var t=Ns(e),i=t.overflow,s=t.overflowX,u=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+u+s)}function LC(e){return["html","body","#document"].indexOf(us(e))>=0?e.ownerDocument.body:xa(e)&&Tx(e)?e:LC(Fg(e))}function Nd(e,t){var i;t===void 0&&(t=[]);var s=LC(e),u=s===((i=e.ownerDocument)==null?void 0:i.body),p=Jo(s),v=u?[p].concat(p.visualViewport||[],Tx(s)?s:[]):s,c=t.concat(v);return u?c:c.concat(Nd(Fg(v)))}function N0(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function l4(e,t){var i=eh(e,!1,t==="fixed");return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}function _2(e,t,i){return t===kC?N0(a4(e,i)):xc(t)?l4(t,i):N0(s4(Al(e)))}function c4(e){var t=Nd(Fg(e)),i=["absolute","fixed"].indexOf(Ns(e).position)>=0,s=i&&xa(e)?Sp(e):e;return xc(s)?t.filter(function(u){return xc(u)&&IC(u,s)&&us(u)!=="body"}):[]}function u4(e,t,i,s){var u=t==="clippingParents"?c4(e):[].concat(t),p=[].concat(u,[i]),v=p[0],c=p.reduce(function(w,T){var P=_2(e,T,s);return w.top=pc(P.top,w.top),w.right=qm(P.right,w.right),w.bottom=qm(P.bottom,w.bottom),w.left=pc(P.left,w.left),w},_2(e,v,s));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function OC(e){var t=e.reference,i=e.element,s=e.placement,u=s?cs(s):null,p=s?th(s):null,v=t.x+t.width/2-i.width/2,c=t.y+t.height/2-i.height/2,w;switch(u){case Lo:w={x:v,y:t.y-i.height};break;case Ea:w={x:v,y:t.y+t.height};break;case Ta:w={x:t.x+t.width,y:c};break;case Oo:w={x:t.x-i.width,y:c};break;default:w={x:t.x,y:t.y}}var T=u?wx(u):null;if(T!=null){var P=T==="y"?"height":"width";switch(p){case Ju:w[T]=w[T]-(t[P]/2-i[P]/2);break;case lp:w[T]=w[T]+(t[P]/2-i[P]/2);break}}return w}function cp(e,t){t===void 0&&(t={});var i=t,s=i.placement,u=s===void 0?e.placement:s,p=i.strategy,v=p===void 0?e.strategy:p,c=i.boundary,w=c===void 0?IO:c,T=i.rootBoundary,P=T===void 0?kC:T,L=i.elementContext,B=L===void 0?gd:L,U=i.altBoundary,O=U===void 0?!1:U,N=i.padding,ae=N===void 0?0:N,q=RC(typeof ae!="number"?ae:zC(ae,wp)),W=B===gd?MO:gd,K=e.rects.popper,ie=e.elements[O?W:B],_e=u4(xc(ie)?ie:ie.contextElement||Al(e.elements.popper),w,P,v),Se=eh(e.elements.reference),xe=OC({reference:Se,element:K,strategy:"absolute",placement:u}),Me=N0(Object.assign({},K,xe)),Ze=B===gd?Me:Se,Le={top:_e.top-Ze.top+q.top,bottom:Ze.bottom-_e.bottom+q.bottom,left:_e.left-Ze.left+q.left,right:Ze.right-_e.right+q.right},Je=e.modifiersData.offset;if(B===gd&&Je){var ur=Je[u];Object.keys(Le).forEach(function(Nt){var mr=[Ta,Ea].indexOf(Nt)>=0?1:-1,tt=[Lo,Ea].indexOf(Nt)>=0?"y":"x";Le[Nt]+=ur[tt]*mr})}return Le}function h4(e,t){t===void 0&&(t={});var i=t,s=i.placement,u=i.boundary,p=i.rootBoundary,v=i.padding,c=i.flipVariations,w=i.allowedAutoPlacements,T=w===void 0?PC:w,P=th(s),L=P?c?m2:m2.filter(function(O){return th(O)===P}):wp,B=L.filter(function(O){return T.indexOf(O)>=0});B.length===0&&(B=L);var U=B.reduce(function(O,N){return O[N]=cp(e,{placement:N,boundary:u,rootBoundary:p,padding:v})[cs(N)],O},{});return Object.keys(U).sort(function(O,N){return U[O]-U[N]})}function d4(e){if(cs(e)===_x)return[];var t=sm(e);return[v2(e),t,v2(t)]}function p4(e){var t=e.state,i=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var u=i.mainAxis,p=u===void 0?!0:u,v=i.altAxis,c=v===void 0?!0:v,w=i.fallbackPlacements,T=i.padding,P=i.boundary,L=i.rootBoundary,B=i.altBoundary,U=i.flipVariations,O=U===void 0?!0:U,N=i.allowedAutoPlacements,ae=t.options.placement,q=cs(ae),W=q===ae,K=w||(W||!O?[sm(ae)]:d4(ae)),ie=[ae].concat(K).reduce(function(dr,Jt){return dr.concat(cs(Jt)===_x?h4(t,{placement:Jt,boundary:P,rootBoundary:L,padding:T,flipVariations:O,allowedAutoPlacements:N}):Jt)},[]),_e=t.rects.reference,Se=t.rects.popper,xe=new Map,Me=!0,Ze=ie[0],Le=0;Le<ie.length;Le++){var Je=ie[Le],ur=cs(Je),Nt=th(Je)===Ju,mr=[Lo,Ea].indexOf(ur)>=0,tt=mr?"width":"height",Mt=cp(t,{placement:Je,boundary:P,rootBoundary:L,altBoundary:B,padding:T}),kt=mr?Nt?Ta:Oo:Nt?Ea:Lo;_e[tt]>Se[tt]&&(kt=sm(kt));var $e=sm(kt),lt=[];if(p&&lt.push(Mt[ur]<=0),c&&lt.push(Mt[kt]<=0,Mt[$e]<=0),lt.every(function(dr){return dr})){Ze=Je,Me=!1;break}xe.set(Je,lt)}if(Me)for(var wt=O?3:1,rr=function(Jt){var Ir=ie.find(function(zr){var Fr=xe.get(zr);if(Fr)return Fr.slice(0,Jt).every(function(sr){return sr})});if(Ir)return Ze=Ir,"break"},or=wt;or>0;or--){var fr=rr(or);if(fr==="break")break}t.placement!==Ze&&(t.modifiersData[s]._skip=!0,t.placement=Ze,t.reset=!0)}}const f4={name:"flip",enabled:!0,phase:"main",fn:p4,requiresIfExists:["offset"],data:{_skip:!1}};function x2(e,t,i){return i===void 0&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function b2(e){return[Lo,Ta,Ea,Oo].some(function(t){return e[t]>=0})}function m4(e){var t=e.state,i=e.name,s=t.rects.reference,u=t.rects.popper,p=t.modifiersData.preventOverflow,v=cp(t,{elementContext:"reference"}),c=cp(t,{altBoundary:!0}),w=x2(v,s),T=x2(c,u,p),P=b2(w),L=b2(T);t.modifiersData[i]={referenceClippingOffsets:w,popperEscapeOffsets:T,isReferenceHidden:P,hasPopperEscaped:L},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":P,"data-popper-escaped":L})}const g4={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:m4};function y4(e,t,i){var s=cs(e),u=[Oo,Lo].indexOf(s)>=0?-1:1,p=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,v=p[0],c=p[1];return v=v||0,c=(c||0)*u,[Oo,Ta].indexOf(s)>=0?{x:c,y:v}:{x:v,y:c}}function v4(e){var t=e.state,i=e.options,s=e.name,u=i.offset,p=u===void 0?[0,0]:u,v=PC.reduce(function(P,L){return P[L]=y4(L,t.rects,p),P},{}),c=v[t.placement],w=c.x,T=c.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=w,t.modifiersData.popperOffsets.y+=T),t.modifiersData[s]=v}const _4={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:v4};function x4(e){var t=e.state,i=e.name;t.modifiersData[i]=OC({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const b4={name:"popperOffsets",enabled:!0,phase:"read",fn:x4,data:{}};function w4(e){return e==="x"?"y":"x"}function S4(e){var t=e.state,i=e.options,s=e.name,u=i.mainAxis,p=u===void 0?!0:u,v=i.altAxis,c=v===void 0?!1:v,w=i.boundary,T=i.rootBoundary,P=i.altBoundary,L=i.padding,B=i.tether,U=B===void 0?!0:B,O=i.tetherOffset,N=O===void 0?0:O,ae=cp(t,{boundary:w,rootBoundary:T,padding:L,altBoundary:P}),q=cs(t.placement),W=th(t.placement),K=!W,ie=wx(q),_e=w4(ie),Se=t.modifiersData.popperOffsets,xe=t.rects.reference,Me=t.rects.popper,Ze=typeof N=="function"?N(Object.assign({},t.rects,{placement:t.placement})):N,Le=typeof Ze=="number"?{mainAxis:Ze,altAxis:Ze}:Object.assign({mainAxis:0,altAxis:0},Ze),Je=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,ur={x:0,y:0};if(Se){if(p){var Nt,mr=ie==="y"?Lo:Oo,tt=ie==="y"?Ea:Ta,Mt=ie==="y"?"height":"width",kt=Se[ie],$e=kt+ae[mr],lt=kt-ae[tt],wt=U?-Me[Mt]/2:0,rr=W===Ju?xe[Mt]:Me[Mt],or=W===Ju?-Me[Mt]:-xe[Mt],fr=t.elements.arrow,dr=U&&fr?bx(fr):{width:0,height:0},Jt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:MC(),Ir=Jt[mr],zr=Jt[tt],Fr=Fd(0,xe[Mt],dr[Mt]),sr=K?xe[Mt]/2-wt-Fr-Ir-Le.mainAxis:rr-Fr-Ir-Le.mainAxis,wn=K?-xe[Mt]/2+wt+Fr+zr+Le.mainAxis:or+Fr+zr+Le.mainAxis,kr=t.elements.arrow&&Sp(t.elements.arrow),Mn=kr?ie==="y"?kr.clientTop||0:kr.clientLeft||0:0,hn=(Nt=Je==null?void 0:Je[ie])!=null?Nt:0,Ae=kt+sr-hn-Mn,Pr=kt+wn-hn,Rn=Fd(U?qm($e,Ae):$e,kt,U?pc(lt,Pr):lt);Se[ie]=Rn,ur[ie]=Rn-kt}if(c){var pr,Vt=ie==="x"?Lo:Oo,zn=ie==="x"?Ea:Ta,Kr=Se[_e],Ln=_e==="y"?"height":"width",Tr=Kr+ae[Vt],Vn=Kr-ae[zn],yn=[Lo,Oo].indexOf(q)!==-1,rn=(pr=Je==null?void 0:Je[_e])!=null?pr:0,Ve=yn?Tr:Kr-xe[Ln]-Me[Ln]-rn+Le.altAxis,Sn=yn?Kr+xe[Ln]+Me[Ln]-rn-Le.altAxis:Vn,Xr=U&&yn?WO(Ve,Kr,Sn):Fd(U?Ve:Tr,Kr,U?Sn:Vn);Se[_e]=Xr,ur[_e]=Xr-Kr}t.modifiersData[s]=ur}}const E4={name:"preventOverflow",enabled:!0,phase:"main",fn:S4,requiresIfExists:["offset"]};function T4(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function C4(e){return e===Jo(e)||!xa(e)?Sx(e):T4(e)}function k4(e){var t=e.getBoundingClientRect(),i=Qu(t.width)/e.offsetWidth||1,s=Qu(t.height)/e.offsetHeight||1;return i!==1||s!==1}function P4(e,t,i){i===void 0&&(i=!1);var s=xa(t),u=xa(t)&&k4(t),p=Al(t),v=eh(e,u,i),c={scrollLeft:0,scrollTop:0},w={x:0,y:0};return(s||!s&&!i)&&((us(t)!=="body"||Tx(p))&&(c=C4(t)),xa(t)?(w=eh(t,!0),w.x+=t.clientLeft,w.y+=t.clientTop):p&&(w.x=Ex(p))),{x:v.left+c.scrollLeft-w.x,y:v.top+c.scrollTop-w.y,width:v.width,height:v.height}}function A4(e){var t=new Map,i=new Set,s=[];e.forEach(function(p){t.set(p.name,p)});function u(p){i.add(p.name);var v=[].concat(p.requires||[],p.requiresIfExists||[]);v.forEach(function(c){if(!i.has(c)){var w=t.get(c);w&&u(w)}}),s.push(p)}return e.forEach(function(p){i.has(p.name)||u(p)}),s}function I4(e){var t=A4(e);return jO.reduce(function(i,s){return i.concat(t.filter(function(u){return u.phase===s}))},[])}function M4(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function R4(e){var t=e.reduce(function(i,s){var u=i[s.name];return i[s.name]=u?Object.assign({},u,s,{options:Object.assign({},u.options,s.options),data:Object.assign({},u.data,s.data)}):s,i},{});return Object.keys(t).map(function(i){return t[i]})}var w2={placement:"bottom",modifiers:[],strategy:"absolute"};function S2(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function z4(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,s=i===void 0?[]:i,u=t.defaultOptions,p=u===void 0?w2:u;return function(c,w,T){T===void 0&&(T=p);var P={placement:"bottom",orderedModifiers:[],options:Object.assign({},w2,p),modifiersData:{},elements:{reference:c,popper:w},attributes:{},styles:{}},L=[],B=!1,U={state:P,setOptions:function(q){var W=typeof q=="function"?q(P.options):q;N(),P.options=Object.assign({},p,P.options,W),P.scrollParents={reference:xc(c)?Nd(c):c.contextElement?Nd(c.contextElement):[],popper:Nd(w)};var K=I4(R4([].concat(s,P.options.modifiers)));return P.orderedModifiers=K.filter(function(ie){return ie.enabled}),O(),U.update()},forceUpdate:function(){if(!B){var q=P.elements,W=q.reference,K=q.popper;if(S2(W,K)){P.rects={reference:P4(W,Sp(K),P.options.strategy==="fixed"),popper:bx(K)},P.reset=!1,P.placement=P.options.placement,P.orderedModifiers.forEach(function(Le){return P.modifiersData[Le.name]=Object.assign({},Le.data)});for(var ie=0;ie<P.orderedModifiers.length;ie++){if(P.reset===!0){P.reset=!1,ie=-1;continue}var _e=P.orderedModifiers[ie],Se=_e.fn,xe=_e.options,Me=xe===void 0?{}:xe,Ze=_e.name;typeof Se=="function"&&(P=Se({state:P,options:Me,name:Ze,instance:U})||P)}}}},update:M4(function(){return new Promise(function(ae){U.forceUpdate(),ae(P)})}),destroy:function(){N(),B=!0}};if(!S2(c,w))return U;U.setOptions(T).then(function(ae){!B&&T.onFirstUpdate&&T.onFirstUpdate(ae)});function O(){P.orderedModifiers.forEach(function(ae){var q=ae.name,W=ae.options,K=W===void 0?{}:W,ie=ae.effect;if(typeof ie=="function"){var _e=ie({state:P,name:q,instance:U,options:K}),Se=function(){};L.push(_e||Se)}})}function N(){L.forEach(function(ae){return ae()}),L=[]}return U}}var L4=[n4,b4,t4,qO,_4,f4,E4,YO,g4],O4=z4({defaultModifiers:L4});function D4(e){return typeof e=="function"?e():e}const B4=ge.forwardRef(function(t,i){const{children:s,container:u,disablePortal:p=!1}=t,[v,c]=ge.useState(null),w=Bs(ge.isValidElement(s)?s.ref:null,i);if(Xu(()=>{p||c(D4(u)||document.body)},[u,p]),Xu(()=>{if(v&&!p)return Um(i,v),()=>{Um(i,null)}},[i,v,p]),p){if(ge.isValidElement(s)){const T={ref:w};return ge.cloneElement(s,T)}return ke.jsx(ge.Fragment,{children:s})}return ke.jsx(ge.Fragment,{children:v&&Y_.createPortal(s,v)})});function F4(e){return ch("MuiPopper",e)}uh("MuiPopper",["root"]);const N4=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],U4=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function j4(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function U0(e){return typeof e=="function"?e():e}function $4(e){return e.nodeType!==void 0}const V4=()=>vp({root:["root"]},EO(F4)),q4={},G4=ge.forwardRef(function(t,i){var s;const{anchorEl:u,children:p,direction:v,disablePortal:c,modifiers:w,open:T,placement:P,popperOptions:L,popperRef:B,slotProps:U={},slots:O={},TransitionProps:N}=t,ae=wi(t,N4),q=ge.useRef(null),W=Bs(q,i),K=ge.useRef(null),ie=Bs(K,B),_e=ge.useRef(ie);Xu(()=>{_e.current=ie},[ie]),ge.useImperativeHandle(B,()=>K.current,[]);const Se=j4(P,v),[xe,Me]=ge.useState(Se),[Ze,Le]=ge.useState(U0(u));ge.useEffect(()=>{K.current&&K.current.forceUpdate()}),ge.useEffect(()=>{u&&Le(U0(u))},[u]),Xu(()=>{if(!Ze||!T)return;const tt=$e=>{Me($e.placement)};let Mt=[{name:"preventOverflow",options:{altBoundary:c}},{name:"flip",options:{altBoundary:c}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:$e})=>{tt($e)}}];w!=null&&(Mt=Mt.concat(w)),L&&L.modifiers!=null&&(Mt=Mt.concat(L.modifiers));const kt=O4(Ze,q.current,st({placement:Se},L,{modifiers:Mt}));return _e.current(kt),()=>{kt.destroy(),_e.current(null)}},[Ze,c,w,T,L,Se]);const Je={placement:xe};N!==null&&(Je.TransitionProps=N);const ur=V4(),Nt=(s=O.root)!=null?s:"div",mr=AO({elementType:Nt,externalSlotProps:U.root,externalForwardedProps:ae,additionalProps:{role:"tooltip",ref:W},ownerState:t,className:ur.root});return ke.jsx(Nt,st({},mr,{children:typeof p=="function"?p(Je):p}))}),H4=ge.forwardRef(function(t,i){const{anchorEl:s,children:u,container:p,direction:v="ltr",disablePortal:c=!1,keepMounted:w=!1,modifiers:T,open:P,placement:L="bottom",popperOptions:B=q4,popperRef:U,style:O,transition:N=!1,slotProps:ae={},slots:q={}}=t,W=wi(t,U4),[K,ie]=ge.useState(!0),_e=()=>{ie(!1)},Se=()=>{ie(!0)};if(!w&&!P&&(!N||K))return null;let xe;if(p)xe=p;else if(s){const Le=U0(s);xe=Le&&$4(Le)?Nm(Le).body:Nm(null).body}const Me=!P&&w&&(!N||K)?"none":void 0,Ze=N?{in:P,onEnter:_e,onExited:Se}:void 0;return ke.jsx(B4,{disablePortal:c,container:xe,children:ke.jsx(G4,st({anchorEl:s,direction:v,disablePortal:c,modifiers:T,ref:i,open:N?!K:P,placement:L,popperOptions:B,popperRef:U,slotProps:ae,slots:q},W,{style:st({position:"fixed",top:0,left:0,display:Me},O),TransitionProps:Ze,children:u}))})});function DC(){const e=wC(mx);return e[gx]||e}const W4=e=>e.scrollTop;function E2(e,t){var i,s;const{timeout:u,easing:p,style:v={}}=e;return{duration:(i=v.transitionDuration)!=null?i:typeof u=="number"?u:u[t.mode]||0,easing:(s=v.transitionTimingFunction)!=null?s:typeof p=="object"?p[t.mode]:p,delay:v.transitionDelay}}const Z4=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function j0(e){return`scale(${e}, ${e**2})`}const K4={entering:{opacity:1,transform:j0(1)},entered:{opacity:1,transform:"none"}},Tv=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),BC=ge.forwardRef(function(t,i){const{addEndListener:s,appear:u=!0,children:p,easing:v,in:c,onEnter:w,onEntered:T,onEntering:P,onExit:L,onExited:B,onExiting:U,style:O,timeout:N="auto",TransitionComponent:ae=Z3}=t,q=wi(t,Z4),W=ge.useRef(),K=ge.useRef(),ie=DC(),_e=ge.useRef(null),Se=Bs(_e,p.ref,i),xe=tt=>Mt=>{if(tt){const kt=_e.current;Mt===void 0?tt(kt):tt(kt,Mt)}},Me=xe(P),Ze=xe((tt,Mt)=>{W4(tt);const{duration:kt,delay:$e,easing:lt}=E2({style:O,timeout:N,easing:v},{mode:"enter"});let wt;N==="auto"?(wt=ie.transitions.getAutoHeightDuration(tt.clientHeight),K.current=wt):wt=kt,tt.style.transition=[ie.transitions.create("opacity",{duration:wt,delay:$e}),ie.transitions.create("transform",{duration:Tv?wt:wt*.666,delay:$e,easing:lt})].join(","),w&&w(tt,Mt)}),Le=xe(T),Je=xe(U),ur=xe(tt=>{const{duration:Mt,delay:kt,easing:$e}=E2({style:O,timeout:N,easing:v},{mode:"exit"});let lt;N==="auto"?(lt=ie.transitions.getAutoHeightDuration(tt.clientHeight),K.current=lt):lt=Mt,tt.style.transition=[ie.transitions.create("opacity",{duration:lt,delay:kt}),ie.transitions.create("transform",{duration:Tv?lt:lt*.666,delay:Tv?kt:kt||lt*.333,easing:$e})].join(","),tt.style.opacity=0,tt.style.transform=j0(.75),L&&L(tt)}),Nt=xe(B),mr=tt=>{N==="auto"&&(W.current=setTimeout(tt,K.current||0)),s&&s(_e.current,tt)};return ge.useEffect(()=>()=>{clearTimeout(W.current)},[]),ke.jsx(ae,st({appear:u,in:c,nodeRef:_e,onEnter:Ze,onEntered:Le,onEntering:Me,onExit:ur,onExited:Nt,onExiting:Je,addEndListener:mr,timeout:N==="auto"?null:N},q,{children:(tt,Mt)=>ge.cloneElement(p,st({style:st({opacity:0,transform:j0(.75),visibility:tt==="exited"&&!c?"hidden":void 0},K4[tt],O,p.props.style),ref:Se},Mt))}))});BC.muiSupportAuto=!0;const T2=BC;function X4(e){return ch("MuiSvgIcon",e)}uh("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Y4=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],J4=e=>{const{color:t,fontSize:i,classes:s}=e,u={root:["root",t!=="inherit"&&`color${xo(t)}`,`fontSize${xo(i)}`]};return vp(u,X4,s)},Q4=Vs("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.color!=="inherit"&&t[`color${xo(i.color)}`],t[`fontSize${xo(i.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var i,s,u,p,v,c,w,T,P,L,B,U,O;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(i=e.transitions)==null||(s=i.create)==null?void 0:s.call(i,"fill",{duration:(u=e.transitions)==null||(u=u.duration)==null?void 0:u.shorter}),fontSize:{inherit:"inherit",small:((p=e.typography)==null||(v=p.pxToRem)==null?void 0:v.call(p,20))||"1.25rem",medium:((c=e.typography)==null||(w=c.pxToRem)==null?void 0:w.call(c,24))||"1.5rem",large:((T=e.typography)==null||(P=T.pxToRem)==null?void 0:P.call(T,35))||"2.1875rem"}[t.fontSize],color:(L=(B=(e.vars||e).palette)==null||(B=B[t.color])==null?void 0:B.main)!=null?L:{action:(U=(e.vars||e).palette)==null||(U=U.action)==null?void 0:U.active,disabled:(O=(e.vars||e).palette)==null||(O=O.action)==null?void 0:O.disabled,inherit:void 0}[t.color]}}),FC=ge.forwardRef(function(t,i){const s=dh({props:t,name:"MuiSvgIcon"}),{children:u,className:p,color:v="inherit",component:c="svg",fontSize:w="medium",htmlColor:T,inheritViewBox:P=!1,titleAccess:L,viewBox:B="0 0 24 24"}=s,U=wi(s,Y4),O=ge.isValidElement(u)&&u.type==="svg",N=st({},s,{color:v,component:c,fontSize:w,instanceFontSize:t.fontSize,inheritViewBox:P,viewBox:B,hasSvgAsChild:O}),ae={};P||(ae.viewBox=B);const q=J4(N);return ke.jsxs(Q4,st({as:c,className:ki(q.root,p),focusable:"false",color:T,"aria-hidden":L?void 0:!0,role:L?"img":void 0,ref:i},ae,U,O&&u.props,{ownerState:N,children:[O?u.props.children:u,L?ke.jsx("title",{children:L}):null]}))});FC.muiName="SvgIcon";const C2=FC;function ds(e,t){function i(s,u){return ke.jsx(C2,st({"data-testid":`${t}Icon`,ref:u},s,{children:e}))}return i.muiName=C2.muiName,ge.memo(ge.forwardRef(i))}/**
 * @remix-run/router v1.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function up(){return up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},up.apply(this,arguments)}var dl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(dl||(dl={}));const k2="popstate";function e5(e){e===void 0&&(e={});function t(s,u){let{pathname:p,search:v,hash:c}=s.location;return $0("",{pathname:p,search:v,hash:c},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function i(s,u){return typeof u=="string"?u:Gm(u)}return r5(t,i,null,e)}function xi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Cx(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function t5(){return Math.random().toString(36).substr(2,8)}function P2(e,t){return{usr:e.state,key:e.key,idx:t}}function $0(e,t,i,s){return i===void 0&&(i=null),up({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ph(t):t,{state:i,key:t&&t.key||s||t5()})}function Gm(e){let{pathname:t="/",search:i="",hash:s=""}=e;return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function ph(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function r5(e,t,i,s){s===void 0&&(s={});let{window:u=document.defaultView,v5Compat:p=!1}=s,v=u.history,c=dl.Pop,w=null,T=P();T==null&&(T=0,v.replaceState(up({},v.state,{idx:T}),""));function P(){return(v.state||{idx:null}).idx}function L(){c=dl.Pop;let ae=P(),q=ae==null?null:ae-T;T=ae,w&&w({action:c,location:N.location,delta:q})}function B(ae,q){c=dl.Push;let W=$0(N.location,ae,q);i&&i(W,ae),T=P()+1;let K=P2(W,T),ie=N.createHref(W);try{v.pushState(K,"",ie)}catch(_e){if(_e instanceof DOMException&&_e.name==="DataCloneError")throw _e;u.location.assign(ie)}p&&w&&w({action:c,location:N.location,delta:1})}function U(ae,q){c=dl.Replace;let W=$0(N.location,ae,q);i&&i(W,ae),T=P();let K=P2(W,T),ie=N.createHref(W);v.replaceState(K,"",ie),p&&w&&w({action:c,location:N.location,delta:0})}function O(ae){let q=u.location.origin!=="null"?u.location.origin:u.location.href,W=typeof ae=="string"?ae:Gm(ae);return xi(q,"No window.location.(origin|href) available to create URL for href: "+W),new URL(W,q)}let N={get action(){return c},get location(){return e(u,v)},listen(ae){if(w)throw new Error("A history only accepts one active listener");return u.addEventListener(k2,L),w=ae,()=>{u.removeEventListener(k2,L),w=null}},createHref(ae){return t(u,ae)},createURL:O,encodeLocation(ae){let q=O(ae);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:B,replace:U,go(ae){return v.go(ae)}};return N}var A2;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(A2||(A2={}));function n5(e,t,i){i===void 0&&(i="/");let s=typeof t=="string"?ph(t):t,u=kx(s.pathname||"/",i);if(u==null)return null;let p=NC(e);i5(p);let v=null;for(let c=0;v==null&&c<p.length;++c)v=p5(p[c],g5(u));return v}function NC(e,t,i,s){t===void 0&&(t=[]),i===void 0&&(i=[]),s===void 0&&(s="");let u=(p,v,c)=>{let w={relativePath:c===void 0?p.path||"":c,caseSensitive:p.caseSensitive===!0,childrenIndex:v,route:p};w.relativePath.startsWith("/")&&(xi(w.relativePath.startsWith(s),'Absolute route path "'+w.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),w.relativePath=w.relativePath.slice(s.length));let T=wl([s,w.relativePath]),P=i.concat(w);p.children&&p.children.length>0&&(xi(p.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+T+'".')),NC(p.children,t,P,T)),!(p.path==null&&!p.index)&&t.push({path:T,score:h5(T,p.index),routesMeta:P})};return e.forEach((p,v)=>{var c;if(p.path===""||!((c=p.path)!=null&&c.includes("?")))u(p,v);else for(let w of UC(p.path))u(p,v,w)}),t}function UC(e){let t=e.split("/");if(t.length===0)return[];let[i,...s]=t,u=i.endsWith("?"),p=i.replace(/\?$/,"");if(s.length===0)return u?[p,""]:[p];let v=UC(s.join("/")),c=[];return c.push(...v.map(w=>w===""?p:[p,w].join("/"))),u&&c.push(...v),c.map(w=>e.startsWith("/")&&w===""?"/":w)}function i5(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:d5(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}const o5=/^:\w+$/,a5=3,s5=2,l5=1,c5=10,u5=-2,I2=e=>e==="*";function h5(e,t){let i=e.split("/"),s=i.length;return i.some(I2)&&(s+=u5),t&&(s+=s5),i.filter(u=>!I2(u)).reduce((u,p)=>u+(o5.test(p)?a5:p===""?l5:c5),s)}function d5(e,t){return e.length===t.length&&e.slice(0,-1).every((s,u)=>s===t[u])?e[e.length-1]-t[t.length-1]:0}function p5(e,t){let{routesMeta:i}=e,s={},u="/",p=[];for(let v=0;v<i.length;++v){let c=i[v],w=v===i.length-1,T=u==="/"?t:t.slice(u.length)||"/",P=f5({path:c.relativePath,caseSensitive:c.caseSensitive,end:w},T);if(!P)return null;Object.assign(s,P.params);let L=c.route;p.push({params:s,pathname:wl([u,P.pathname]),pathnameBase:x5(wl([u,P.pathnameBase])),route:L}),P.pathnameBase!=="/"&&(u=wl([u,P.pathnameBase]))}return p}function f5(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,s]=m5(e.path,e.caseSensitive,e.end),u=t.match(i);if(!u)return null;let p=u[0],v=p.replace(/(.)\/+$/,"$1"),c=u.slice(1);return{params:s.reduce((T,P,L)=>{if(P==="*"){let B=c[L]||"";v=p.slice(0,p.length-B.length).replace(/(.)\/+$/,"$1")}return T[P]=y5(c[L]||"",P),T},{}),pathname:p,pathnameBase:v,pattern:e}}function m5(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!0),Cx(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(v,c)=>(s.push(c),"/([^\\/]+)"));return e.endsWith("*")?(s.push("*"),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),s]}function g5(e){try{return decodeURI(e)}catch(t){return Cx(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function y5(e,t){try{return decodeURIComponent(e)}catch(i){return Cx(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+i+").")),e}}function kx(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=e.charAt(i);return s&&s!=="/"?null:e.slice(i)||"/"}function v5(e,t){t===void 0&&(t="/");let{pathname:i,search:s="",hash:u=""}=typeof e=="string"?ph(e):e;return{pathname:i?i.startsWith("/")?i:_5(i,t):t,search:b5(s),hash:w5(u)}}function _5(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(u=>{u===".."?i.length>1&&i.pop():u!=="."&&i.push(u)}),i.length>1?i.join("/"):"/"}function Cv(e,t,i,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jC(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function $C(e,t,i,s){s===void 0&&(s=!1);let u;typeof e=="string"?u=ph(e):(u=up({},e),xi(!u.pathname||!u.pathname.includes("?"),Cv("?","pathname","search",u)),xi(!u.pathname||!u.pathname.includes("#"),Cv("#","pathname","hash",u)),xi(!u.search||!u.search.includes("#"),Cv("#","search","hash",u)));let p=e===""||u.pathname==="",v=p?"/":u.pathname,c;if(s||v==null)c=i;else{let L=t.length-1;if(v.startsWith("..")){let B=v.split("/");for(;B[0]==="..";)B.shift(),L-=1;u.pathname=B.join("/")}c=L>=0?t[L]:"/"}let w=v5(u,c),T=v&&v!=="/"&&v.endsWith("/"),P=(p||v===".")&&i.endsWith("/");return!w.pathname.endsWith("/")&&(T||P)&&(w.pathname+="/"),w}const wl=e=>e.join("/").replace(/\/\/+/g,"/"),x5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),b5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,w5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function S5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const VC=["post","put","patch","delete"];new Set(VC);const E5=["get",...VC];new Set(E5);/**
 * React Router v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hm(){return Hm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Hm.apply(this,arguments)}const Px=ge.createContext(null),T5=ge.createContext(null),fh=ge.createContext(null),Ng=ge.createContext(null),Ec=ge.createContext({outlet:null,matches:[],isDataRoute:!1}),qC=ge.createContext(null);function C5(e,t){let{relative:i}=t===void 0?{}:t;Ep()||xi(!1);let{basename:s,navigator:u}=ge.useContext(fh),{hash:p,pathname:v,search:c}=HC(e,{relative:i}),w=v;return s!=="/"&&(w=v==="/"?s:wl([s,v])),u.createHref({pathname:w,search:c,hash:p})}function Ep(){return ge.useContext(Ng)!=null}function Ug(){return Ep()||xi(!1),ge.useContext(Ng).location}function GC(e){ge.useContext(fh).static||ge.useLayoutEffect(e)}function k5(){let{isDataRoute:e}=ge.useContext(Ec);return e?U5():P5()}function P5(){Ep()||xi(!1);let e=ge.useContext(Px),{basename:t,navigator:i}=ge.useContext(fh),{matches:s}=ge.useContext(Ec),{pathname:u}=Ug(),p=JSON.stringify(jC(s).map(w=>w.pathnameBase)),v=ge.useRef(!1);return GC(()=>{v.current=!0}),ge.useCallback(function(w,T){if(T===void 0&&(T={}),!v.current)return;if(typeof w=="number"){i.go(w);return}let P=$C(w,JSON.parse(p),u,T.relative==="path");e==null&&t!=="/"&&(P.pathname=P.pathname==="/"?t:wl([t,P.pathname])),(T.replace?i.replace:i.push)(P,T.state,T)},[t,i,p,u,e])}function HC(e,t){let{relative:i}=t===void 0?{}:t,{matches:s}=ge.useContext(Ec),{pathname:u}=Ug(),p=JSON.stringify(jC(s).map(v=>v.pathnameBase));return ge.useMemo(()=>$C(e,JSON.parse(p),u,i==="path"),[e,p,u,i])}function A5(e,t){return I5(e,t)}function I5(e,t,i){Ep()||xi(!1);let{navigator:s}=ge.useContext(fh),{matches:u}=ge.useContext(Ec),p=u[u.length-1],v=p?p.params:{};p&&p.pathname;let c=p?p.pathnameBase:"/";p&&p.route;let w=Ug(),T;if(t){var P;let N=typeof t=="string"?ph(t):t;c==="/"||(P=N.pathname)!=null&&P.startsWith(c)||xi(!1),T=N}else T=w;let L=T.pathname||"/",B=c==="/"?L:L.slice(c.length)||"/",U=n5(e,{pathname:B}),O=O5(U&&U.map(N=>Object.assign({},N,{params:Object.assign({},v,N.params),pathname:wl([c,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?c:wl([c,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),u,i);return t&&O?ge.createElement(Ng.Provider,{value:{location:Hm({pathname:"/",search:"",hash:"",state:null,key:"default"},T),navigationType:dl.Pop}},O):O}function M5(){let e=N5(),t=S5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},p=null;return ge.createElement(ge.Fragment,null,ge.createElement("h2",null,"Unexpected Application Error!"),ge.createElement("h3",{style:{fontStyle:"italic"}},t),i?ge.createElement("pre",{style:u},i):null,p)}const R5=ge.createElement(M5,null);class z5 extends ge.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error?ge.createElement(Ec.Provider,{value:this.props.routeContext},ge.createElement(qC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function L5(e){let{routeContext:t,match:i,children:s}=e,u=ge.useContext(Px);return u&&u.static&&u.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=i.route.id),ge.createElement(Ec.Provider,{value:t},s)}function O5(e,t,i){var s;if(t===void 0&&(t=[]),i===void 0&&(i=null),e==null){var u;if((u=i)!=null&&u.errors)e=i.matches;else return null}let p=e,v=(s=i)==null?void 0:s.errors;if(v!=null){let c=p.findIndex(w=>w.route.id&&(v==null?void 0:v[w.route.id]));c>=0||xi(!1),p=p.slice(0,Math.min(p.length,c+1))}return p.reduceRight((c,w,T)=>{let P=w.route.id?v==null?void 0:v[w.route.id]:null,L=null;i&&(L=w.route.errorElement||R5);let B=t.concat(p.slice(0,T+1)),U=()=>{let O;return P?O=L:w.route.Component?O=ge.createElement(w.route.Component,null):w.route.element?O=w.route.element:O=c,ge.createElement(L5,{match:w,routeContext:{outlet:c,matches:B,isDataRoute:i!=null},children:O})};return i&&(w.route.ErrorBoundary||w.route.errorElement||T===0)?ge.createElement(z5,{location:i.location,revalidation:i.revalidation,component:L,error:P,children:U(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):U()},null)}var WC=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(WC||{}),Wm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Wm||{});function D5(e){let t=ge.useContext(Px);return t||xi(!1),t}function B5(e){let t=ge.useContext(T5);return t||xi(!1),t}function F5(e){let t=ge.useContext(Ec);return t||xi(!1),t}function ZC(e){let t=F5(),i=t.matches[t.matches.length-1];return i.route.id||xi(!1),i.route.id}function N5(){var e;let t=ge.useContext(qC),i=B5(Wm.UseRouteError),s=ZC(Wm.UseRouteError);return t||((e=i.errors)==null?void 0:e[s])}function U5(){let{router:e}=D5(WC.UseNavigateStable),t=ZC(Wm.UseNavigateStable),i=ge.useRef(!1);return GC(()=>{i.current=!0}),ge.useCallback(function(u,p){p===void 0&&(p={}),i.current&&(typeof u=="number"?e.navigate(u):e.navigate(u,Hm({fromRouteId:t},p)))},[e,t])}function Td(e){xi(!1)}function j5(e){let{basename:t="/",children:i=null,location:s,navigationType:u=dl.Pop,navigator:p,static:v=!1}=e;Ep()&&xi(!1);let c=t.replace(/^\/*/,"/"),w=ge.useMemo(()=>({basename:c,navigator:p,static:v}),[c,p,v]);typeof s=="string"&&(s=ph(s));let{pathname:T="/",search:P="",hash:L="",state:B=null,key:U="default"}=s,O=ge.useMemo(()=>{let N=kx(T,c);return N==null?null:{location:{pathname:N,search:P,hash:L,state:B,key:U},navigationType:u}},[c,T,P,L,B,U,u]);return O==null?null:ge.createElement(fh.Provider,{value:w},ge.createElement(Ng.Provider,{children:i,value:O}))}function $5(e){let{children:t,location:i}=e;return A5(V0(t),i)}new Promise(()=>{});function V0(e,t){t===void 0&&(t=[]);let i=[];return ge.Children.forEach(e,(s,u)=>{if(!ge.isValidElement(s))return;let p=[...t,u];if(s.type===ge.Fragment){i.push.apply(i,V0(s.props.children,p));return}s.type!==Td&&xi(!1),!s.props.index||!s.props.children||xi(!1);let v={id:s.props.id||p.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(v.children=V0(s.props.children,p)),i.push(v)}),i}/**
 * React Router DOM v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function q0(){return q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},q0.apply(this,arguments)}function V5(e,t){if(e==null)return{};var i={},s=Object.keys(e),u,p;for(p=0;p<s.length;p++)u=s[p],!(t.indexOf(u)>=0)&&(i[u]=e[u]);return i}function q5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function G5(e,t){return e.button===0&&(!t||t==="_self")&&!q5(e)}const H5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],W5="startTransition",M2=fm[W5];function Z5(e){let{basename:t,children:i,future:s,window:u}=e,p=ge.useRef();p.current==null&&(p.current=e5({window:u,v5Compat:!0}));let v=p.current,[c,w]=ge.useState({action:v.action,location:v.location}),{v7_startTransition:T}=s||{},P=ge.useCallback(L=>{T&&M2?M2(()=>w(L)):w(L)},[w,T]);return ge.useLayoutEffect(()=>v.listen(P),[v,P]),ge.createElement(j5,{basename:t,children:i,location:c.location,navigationType:c.action,navigator:v})}const K5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",X5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,R2=ge.forwardRef(function(t,i){let{onClick:s,relative:u,reloadDocument:p,replace:v,state:c,target:w,to:T,preventScrollReset:P}=t,L=V5(t,H5),{basename:B}=ge.useContext(fh),U,O=!1;if(typeof T=="string"&&X5.test(T)&&(U=T,K5))try{let W=new URL(window.location.href),K=T.startsWith("//")?new URL(W.protocol+T):new URL(T),ie=kx(K.pathname,B);K.origin===W.origin&&ie!=null?T=ie+K.search+K.hash:O=!0}catch{}let N=C5(T,{relative:u}),ae=Y5(T,{replace:v,state:c,target:w,preventScrollReset:P,relative:u});function q(W){s&&s(W),W.defaultPrevented||ae(W)}return ge.createElement("a",q0({},L,{href:U||N,onClick:O||p?s:q,ref:i,target:w}))});var z2;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(z2||(z2={}));var L2;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(L2||(L2={}));function Y5(e,t){let{target:i,replace:s,state:u,preventScrollReset:p,relative:v}=t===void 0?{}:t,c=k5(),w=Ug(),T=HC(e,{relative:v});return ge.useCallback(P=>{if(G5(P,i)){P.preventDefault();let L=s!==void 0?s:Gm(w)===Gm(T);c(e,{replace:L,state:u,preventScrollReset:p,relative:v})}},[w,c,T,s,u,i,e,p,v])}const KC=kn.createContext();function J5({children:e}){const[t,i]=ge.useState(!1),[s,u]=ge.useState("");function p(T){u(T),i(!0)}function v(){u(""),i(!1)}const c={state:t,name:s,setOptions:p,closeCamera:v},w=()=>{new google.translate.TranslateElement({pageLanguage:"en",layout:google.translate.TranslateElement.InlineLayout.SIMPLE},"google-translator")};return ge.useEffect(()=>{w()}),ke.jsx(KC.Provider,{value:c,children:e})}const jg=()=>ge.useContext(KC);function Q5(){return ge.useState("en"),ke.jsxs("nav",{children:[ke.jsx("h2",{className:"navbar-title",children:"PlantSense"}),ke.jsxs("div",{className:"navbar-items",children:[ke.jsx(R2,{className:"navbar-item",to:"/maps",children:"Maps"}),ke.jsx(R2,{className:"navbar-item",to:"/med-plants",children:"Med Plants"}),ke.jsx("div",{id:"google-translator",children:" "})]})]})}function eD(e){return ch("MuiFab",e)}const tD=uh("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),O2=tD,rD=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],nD=e=>{const{color:t,variant:i,classes:s,size:u}=e,p={root:["root",i,`size${xo(u)}`,t==="inherit"?"colorInherit":t]},v=vp(p,eD,s);return st({},s,v)},iD=Vs(xO,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>TC(e)||e==="classes",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],t[`size${xo(i.size)}`],i.color==="inherit"&&t.colorInherit,t[xo(i.size)],t[i.color]]}})(({theme:e,ownerState:t})=>{var i,s;return st({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:(i=(s=e.palette).getContrastText)==null?void 0:i.call(s,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${O2.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]}},t.size==="small"&&{width:40,height:40},t.size==="medium"&&{width:48,height:48},t.variant==="extended"&&{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},t.variant==="extended"&&t.size==="small"&&{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34},t.variant==="extended"&&t.size==="medium"&&{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40},t.color==="inherit"&&{color:"inherit"})},({theme:e,ownerState:t})=>st({},t.color!=="inherit"&&t.color!=="default"&&(e.vars||e).palette[t.color]!=null&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}}),({theme:e})=>({[`&.${O2.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}})),oD=ge.forwardRef(function(t,i){const s=dh({props:t,name:"MuiFab"}),{children:u,className:p,color:v="default",component:c="button",disabled:w=!1,disableFocusRipple:T=!1,focusVisibleClassName:P,size:L="large",variant:B="circular"}=s,U=wi(s,rD),O=st({},s,{color:v,component:c,disabled:w,disableFocusRipple:T,size:L,variant:B}),N=nD(O);return ke.jsx(iD,st({className:ki(N.root,p),component:c,disabled:w,focusRipple:!T,focusVisibleClassName:ki(N.focusVisible,P),ownerState:O,ref:i},U,{classes:N,children:u}))}),oo=oD;var Ax={},XC={exports:{}};(function(e){function t(i){return i&&i.__esModule?i:{default:i}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(XC);var aD=XC.exports,kv={};const sD={configure:e=>{eC.configure(e)}},lD=Object.freeze(Object.defineProperty({__proto__:null,capitalize:xo,createChainedFunction:AR,createSvgIcon:ds,debounce:IR,deprecatedPropType:MR,isMuiElement:RR,ownerDocument:Nm,ownerWindow:zR,requirePropFactory:LR,setRef:Um,unstable_ClassNameGenerator:sD,unstable_useEnhancedEffect:Xu,unstable_useId:YT,unsupportedProp:BR,useControlled:JT,useEventCallback:Au,useForkRef:Bs,useIsFocusVisible:J_},Symbol.toStringTag,{value:"Module"})),cD=OS(lD);var D2;function uD(){return D2||(D2=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=cD}(kv)),kv}var hD=aD;Object.defineProperty(Ax,"__esModule",{value:!0});var YC=Ax.default=void 0,dD=hD(uD()),pD=ke,fD=(0,dD.default)((0,pD.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");YC=Ax.default=fD;const mD=ds(ke.jsx("path",{d:"m9.4 10.5 4.77-8.26C13.47 2.09 12.75 2 12 2c-2.4 0-4.6.85-6.32 2.25l3.66 6.35.06-.1zM21.54 9c-.92-2.92-3.15-5.26-6-6.34L11.88 9h9.66zm.26 1h-7.49l.29.5 4.76 8.25C21 16.97 22 14.61 22 12c0-.69-.07-1.35-.2-2zM8.54 12l-3.9-6.75C3.01 7.03 2 9.39 2 12c0 .69.07 1.35.2 2h7.49l-1.15-2zm-6.08 3c.92 2.92 3.15 5.26 6 6.34L12.12 15H2.46zm11.27 0-3.9 6.76c.7.15 1.42.24 2.17.24 2.4 0 4.6-.85 6.32-2.25l-3.66-6.35-.93 1.6z"}),"Camera"),gD=ds([ke.jsx("circle",{cx:"12",cy:"12",r:"3.2"},"0"),ke.jsx("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},"1")],"CameraAlt"),yD=ds([ke.jsx("path",{d:"M16 7h-1l-1-1h-4L9 7H8c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm-4 7c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},"0"),ke.jsx("path",{d:"m8.57.51 4.48 4.48V2.04c4.72.47 8.48 4.23 8.95 8.95h2C23.34 3.02 15.49-1.59 8.57.51zm2.38 21.45c-4.72-.47-8.48-4.23-8.95-8.95H0c.66 7.97 8.51 12.58 15.43 10.48l-4.48-4.48v2.95z"},"1")],"Cameraswitch"),rh=ds(ke.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),vD=ds(ke.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}),"CloudUpload"),JC=ds(ke.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"}),"Error"),QC=ds(ke.jsx("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"}),"Replay"),ek=ds(ke.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search"),_D=ds(ke.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"}),"UploadFile");var tk={exports:{}};(function(e,t){(function(s,u){e.exports=u(ge)})(r_,function(i){return function(s){var u={};function p(v){if(u[v])return u[v].exports;var c=u[v]={i:v,l:!1,exports:{}};return s[v].call(c.exports,c,c.exports,p),c.l=!0,c.exports}return p.m=s,p.c=u,p.d=function(v,c,w){p.o(v,c)||Object.defineProperty(v,c,{enumerable:!0,get:w})},p.r=function(v){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(v,"__esModule",{value:!0})},p.t=function(v,c){if(c&1&&(v=p(v)),c&8||c&4&&typeof v=="object"&&v&&v.__esModule)return v;var w=Object.create(null);if(p.r(w),Object.defineProperty(w,"default",{enumerable:!0,value:v}),c&2&&typeof v!="string")for(var T in v)p.d(w,T,(function(P){return v[P]}).bind(null,T));return w},p.n=function(v){var c=v&&v.__esModule?function(){return v.default}:function(){return v};return p.d(c,"a",c),c},p.o=function(v,c){return Object.prototype.hasOwnProperty.call(v,c)},p.p="",p(p.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(s,u,p){p.r(u);var v=p("react"),c=function(){var B=function(U,O){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,ae){N.__proto__=ae}||function(N,ae){for(var q in ae)ae.hasOwnProperty(q)&&(N[q]=ae[q])},B(U,O)};return function(U,O){B(U,O);function N(){this.constructor=U}U.prototype=O===null?Object.create(O):(N.prototype=O.prototype,new N)}}(),w=function(){return w=Object.assign||function(B){for(var U,O=1,N=arguments.length;O<N;O++){U=arguments[O];for(var ae in U)Object.prototype.hasOwnProperty.call(U,ae)&&(B[ae]=U[ae])}return B},w.apply(this,arguments)},T=function(B,U){var O={};for(var N in B)Object.prototype.hasOwnProperty.call(B,N)&&U.indexOf(N)<0&&(O[N]=B[N]);if(B!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ae=0,N=Object.getOwnPropertySymbols(B);ae<N.length;ae++)U.indexOf(N[ae])<0&&Object.prototype.propertyIsEnumerable.call(B,N[ae])&&(O[N[ae]]=B[N[ae]]);return O};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(U){var O=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return O?new Promise(function(N,ae){O.call(navigator,U,N,ae)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function P(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var L=function(B){c(U,B);function U(O){var N=B.call(this,O)||this;return N.canvas=null,N.ctx=null,N.requestUserMediaId=0,N.unmounted=!1,N.state={hasUserMedia:!1},N}return U.prototype.componentDidMount=function(){var O=this,N=O.state,ae=O.props;if(this.unmounted=!1,!P()){ae.onUserMediaError("getUserMedia not supported");return}N.hasUserMedia||this.requestUserMedia(),ae.children&&typeof ae.children!="function"&&console.warn("children must be a function")},U.prototype.componentDidUpdate=function(O){var N=this.props;if(!P()){N.onUserMediaError("getUserMedia not supported");return}var ae=JSON.stringify(O.audioConstraints)!==JSON.stringify(N.audioConstraints),q=JSON.stringify(O.videoConstraints)!==JSON.stringify(N.videoConstraints),W=O.minScreenshotWidth!==N.minScreenshotWidth,K=O.minScreenshotHeight!==N.minScreenshotHeight;(q||W||K)&&(this.canvas=null,this.ctx=null),(ae||q)&&(this.stopAndCleanup(),this.requestUserMedia())},U.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},U.stopMediaStream=function(O){O&&(O.getVideoTracks&&O.getAudioTracks?(O.getVideoTracks().map(function(N){O.removeTrack(N),N.stop()}),O.getAudioTracks().map(function(N){O.removeTrack(N),N.stop()})):O.stop())},U.prototype.stopAndCleanup=function(){var O=this.state;O.hasUserMedia&&(U.stopMediaStream(this.stream),O.src&&window.URL.revokeObjectURL(O.src))},U.prototype.getScreenshot=function(O){var N=this,ae=N.state,q=N.props;if(!ae.hasUserMedia)return null;var W=this.getCanvas(O);return W&&W.toDataURL(q.screenshotFormat,q.screenshotQuality)},U.prototype.getCanvas=function(O){var N=this,ae=N.state,q=N.props;if(!this.video||!ae.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var W=this.video.videoWidth,K=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var ie=W/K;W=q.minScreenshotWidth||this.video.clientWidth,K=W/ie,q.minScreenshotHeight&&K<q.minScreenshotHeight&&(K=q.minScreenshotHeight,W=K*ie)}this.canvas=document.createElement("canvas"),this.canvas.width=(O==null?void 0:O.width)||W,this.canvas.height=(O==null?void 0:O.height)||K,this.ctx=this.canvas.getContext("2d")}var _e=this,Se=_e.ctx,xe=_e.canvas;return Se&&xe&&(xe.width=(O==null?void 0:O.width)||xe.width,xe.height=(O==null?void 0:O.height)||xe.height,q.mirrored&&(Se.translate(xe.width,0),Se.scale(-1,1)),Se.imageSmoothingEnabled=q.imageSmoothing,Se.drawImage(this.video,0,0,(O==null?void 0:O.width)||xe.width,(O==null?void 0:O.height)||xe.height),q.mirrored&&(Se.scale(-1,1),Se.translate(-xe.width,0))),xe},U.prototype.requestUserMedia=function(){var O=this,N=this.props,ae=function(K,ie){var _e={video:typeof ie<"u"?ie:!0};N.audio&&(_e.audio=typeof K<"u"?K:!0),O.requestUserMediaId++;var Se=O.requestUserMediaId;navigator.mediaDevices.getUserMedia(_e).then(function(xe){O.unmounted||Se!==O.requestUserMediaId?U.stopMediaStream(xe):O.handleUserMedia(null,xe)}).catch(function(xe){O.handleUserMedia(xe)})};if("mediaDevices"in navigator)ae(N.audioConstraints,N.videoConstraints);else{var q=function(K){return{optional:[{sourceId:K}]}},W=function(K){var ie=K.deviceId;return typeof ie=="string"?ie:Array.isArray(ie)&&ie.length>0?ie[0]:typeof ie=="object"&&ie.ideal?ie.ideal:null};MediaStreamTrack.getSources(function(K){var ie=null,_e=null;K.forEach(function(Me){Me.kind==="audio"?ie=Me.id:Me.kind==="video"&&(_e=Me.id)});var Se=W(N.audioConstraints);Se&&(ie=Se);var xe=W(N.videoConstraints);xe&&(_e=xe),ae(q(ie),q(_e))})}},U.prototype.handleUserMedia=function(O,N){var ae=this.props;if(O||!N){this.setState({hasUserMedia:!1}),ae.onUserMediaError(O);return}this.stream=N;try{this.video&&(this.video.srcObject=N),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(N)})}ae.onUserMedia(N)},U.prototype.render=function(){var O=this,N=this,ae=N.state,q=N.props,W=q.audio;q.forceScreenshotSourceSize,q.onUserMedia,q.onUserMediaError,q.screenshotFormat,q.screenshotQuality,q.minScreenshotWidth,q.minScreenshotHeight,q.audioConstraints,q.videoConstraints,q.imageSmoothing;var K=q.mirrored,ie=q.style,_e=ie===void 0?{}:ie,Se=q.children,xe=T(q,["audio","forceScreenshotSourceSize","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),Me=K?w(w({},_e),{transform:(_e.transform||"")+" scaleX(-1)"}):_e,Ze={getScreenshot:this.getScreenshot.bind(this)};return v.createElement(v.Fragment,null,v.createElement("video",w({autoPlay:!0,src:ae.src,muted:!W,playsInline:!0,ref:function(Le){O.video=Le},style:Me},xe)),Se&&Se(Ze))},U.defaultProps={audio:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},U}(v.Component);u.default=L},react:function(s,u){s.exports=i}}).default})})(tk);var xD=tk.exports;const bD=Tl(xD),wD=()=>{const{closeCamera:e}=jg(),[t,i]=ge.useState(""),[s,u]=ge.useState(null),[p,v]=ge.useState("environment"),[c,w]=ge.useState(!1),T=ge.useRef(null),P="user",L="environment",B=()=>{const q=T.current.getScreenshot();i(q),w(!0)},U=()=>{v(p===L?P:L)},O=async()=>{console.log(t);for(var q=t.split(","),W=q[0].match(/:(.*?);/)[1],K=atob(q[q.length-1]),ie=K.length,_e=new Uint8Array(ie);ie--;)_e[ie]=K.charCodeAt(ie);const Se=new File([_e],"filename",{type:W});console.log(Se);const xe=new FormData;xe.append("image",Se);const Ze=await(await fetch("http://localhost:5000/predict",{method:"POST",body:xe})).json();console.log(Ze),u(Ze.prediction)},N={facingMode:p},ae=async()=>{for(var q=t.split(","),W=q[0].match(/:(.*?);/)[1],K=atob(q[q.length-1]),ie=K.length,_e=new Uint8Array(ie);ie--;)_e[ie]=K.charCodeAt(ie);const Se=new File([_e],"filename",{type:W});console.log(Se);const xe=new FormData;xe.append("image",Se);const Ze=await(await fetch("http://localhost:5000/suspect",{method:"POST",body:xe})).json();console.log(Ze),u(Ze.prediction)};return ke.jsxs("div",{className:"camera",children:[!c&&ke.jsxs(ke.Fragment,{children:[ke.jsx(oo,{onClick:U,className:"camera-controls",children:ke.jsx(yD,{})}),ke.jsx(bD,{ref:T,screenshotFormat:"image/jpeg",videoConstraints:N,width:"60%",height:"100%"}),ke.jsx(oo,{onClick:e,children:ke.jsx(rh,{})}),ke.jsx(oo,{onClick:B,className:"camera-controls",children:ke.jsx(mD,{})})]}),c&&ke.jsxs("div",{className:`final-result ${s!=null&&s["Plant Name"]===""&&"alert alert-danger"}`,children:[ke.jsxs("section",{className:"img-section",children:[ke.jsx("img",{src:t,style:{width:"100%",height:"80%"}}),ke.jsxs("div",{className:"upload-files-controllers",children:[ke.jsxs(oo,{variant:"extended",onClick:O,children:[ke.jsx(ek,{}),"Predict"]}),ke.jsxs(oo,{variant:"extended",onClick:ae,children:[ke.jsx(JC,{}),"Suspect"]}),ke.jsxs(oo,{variant:"extended",onClick:()=>{u(null),w(!1)},children:[ke.jsx(QC,{}),"Retry"]}),ke.jsx(oo,{variant:"extended",onClick:e,children:ke.jsx(rh,{})})]})]}),s!=null&&s["Plant Name"]!=""&&ke.jsxs("div",{className:"plant-details",children:[ke.jsxs("h1",{className:"plant-title",children:["Plant : ",s["Plant Name"]]}),ke.jsxs("p",{className:"plant-biology",children:["Biological Name : ",s["Biological Name"]]}),ke.jsx("label",{htmlFor:"",children:"Uses:"}),ke.jsx("ul",{children:s["Medicinal Uses"].split("*").map(q=>q.trim().length!=0&&ke.jsx("li",{children:q}))})]}),s!=null&&s["Plant Name"]===""&&ke.jsx("div",{className:"no-plant",children:ke.jsx("h1",{className:"alert alert-danger",children:"Not Plant"})})]})]})};function SD(){const[e,t]=ge.useState(),[i,s]=ge.useState(null),{closeCamera:u}=jg();console.log(e);const p=async()=>{const c=new FormData;c.append("image",e);const T=await(await fetch("http://localhost:5000/predict",{method:"POST",body:c})).json();console.log(T),s(T.prediction)},v=async()=>{const c=new FormData;c.append("image",e);const T=await(await fetch("http://localhost:5000/suspect",{method:"POST",body:c})).json();console.log(T),s(T.prediction)};return ke.jsxs("div",{className:`file-upload ${i!=null&&i["Plant Name"]===""&&"alert alert-danger"} ${i!=null&&i.type&&(i.type==="TOXIC"?"alert alert-danger":"alert alert-success ")}`,children:[e===void 0&&ke.jsxs("div",{className:"file-upload-section",children:[ke.jsxs("div",{className:"upload-input-details",children:[ke.jsx(_D,{className:"upload-icon",fontSize:"40px"}),ke.jsx("label",{className:"upload-input-title",children:"Choose your file from device"})]}),ke.jsx("input",{className:"form-control upload-img",type:"file",onChange:c=>{t(c.target.files[0])}}),ke.jsx(oo,{variant:"extended",onClick:u,style:{marginTop:"5%"},children:ke.jsx(rh,{})})]}),e!=null&&ke.jsxs("div",{className:"final-result",children:[ke.jsxs("section",{className:"img-section",children:[ke.jsx("img",{src:e!=null&&URL.createObjectURL(e),style:{width:"100%",height:"80%",borderRadius:"12px",boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px"}}),ke.jsxs("div",{className:"upload-files-controllers",children:[ke.jsxs(oo,{variant:"extended",onClick:p,children:[ke.jsx(ek,{}),"Predict"]}),ke.jsxs(oo,{variant:"extended",onClick:v,children:[ke.jsx(JC,{}),"Suspect"]}),ke.jsxs(oo,{variant:"extended",onClick:()=>{t(void 0),s(null)},children:[ke.jsx(QC,{}),"Retry"]}),ke.jsx(oo,{variant:"extended",onClick:u,children:ke.jsx(rh,{})})]})]}),i!=null&&i.type&&ke.jsx("div",{className:"no-plant",children:ke.jsx("h1",{children:i.type})}),i!=null&&i["Plant Name"]===""&&ke.jsx("div",{className:"no-plant",children:ke.jsx("h1",{children:"Not Plant"})}),i!=null&&i["Plant Name"]!=""&&i.type===void 0&&ke.jsxs("div",{className:"plant-details",children:[ke.jsxs("h1",{className:"plant-title",children:["Plant : ",i["Plant Name"]]}),ke.jsxs("p",{className:"plant-biology",children:["Biological Name : ",i["Biological Name"]]}),ke.jsx("label",{htmlFor:"",children:"Uses:"}),ke.jsx("ul",{children:i["Medicinal Uses"].split("*").map(c=>c.trim().length!=0&&ke.jsx("li",{children:c}))})]})]})]})}const ED=e=>{const t=ge.useRef();return ke.jsx("div",{className:"explore-features",children:ke.jsx("div",{className:"explore-contents",ref:t,children:e.type==="camera"?ke.jsx(wD,{}):ke.jsx(SD,{})})})},TD=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],CD=Vs(H4,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),kD=ge.forwardRef(function(t,i){var s;const u=bC(),p=dh({props:t,name:"MuiPopper"}),{anchorEl:v,component:c,components:w,componentsProps:T,container:P,disablePortal:L,keepMounted:B,modifiers:U,open:O,placement:N,popperOptions:ae,popperRef:q,transition:W,slots:K,slotProps:ie}=p,_e=wi(p,TD),Se=(s=K==null?void 0:K.root)!=null?s:w==null?void 0:w.Root,xe=st({anchorEl:v,container:P,disablePortal:L,keepMounted:B,modifiers:U,open:O,placement:N,popperOptions:ae,popperRef:q,transition:W},_e);return ke.jsx(CD,st({as:c,direction:u==null?void 0:u.direction,slots:{root:Se},slotProps:ie??T},xe,{ref:i}))}),rk=kD;function PD(e){return ch("MuiTooltip",e)}const AD=uh("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),pl=AD,ID=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function MD(e){return Math.round(e*1e5)/1e5}const RD=e=>{const{classes:t,disableInteractive:i,arrow:s,touch:u,placement:p}=e,v={popper:["popper",!i&&"popperInteractive",s&&"popperArrow"],tooltip:["tooltip",s&&"tooltipArrow",u&&"touch",`tooltipPlacement${xo(p.split("-")[0])}`],arrow:["arrow"]};return vp(v,PD,t)},zD=Vs(rk,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.popper,!i.disableInteractive&&t.popperInteractive,i.arrow&&t.popperArrow,!i.open&&t.popperClose]}})(({theme:e,ownerState:t,open:i})=>st({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none"},!t.disableInteractive&&{pointerEvents:"auto"},!i&&{pointerEvents:"none"},t.arrow&&{[`&[data-popper-placement*="bottom"] .${pl.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${pl.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${pl.arrow}`]:st({},t.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${pl.arrow}`]:st({},t.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),LD=Vs("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.tooltip,i.touch&&t.touch,i.arrow&&t.tooltipArrow,t[`tooltipPlacement${xo(i.placement.split("-")[0])}`]]}})(({theme:e,ownerState:t})=>st({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:EC(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},t.arrow&&{position:"relative",margin:0},t.touch&&{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${MD(16/14)}em`,fontWeight:e.typography.fontWeightRegular},{[`.${pl.popper}[data-popper-placement*="left"] &`]:st({transformOrigin:"right center"},t.isRtl?st({marginLeft:"14px"},t.touch&&{marginLeft:"24px"}):st({marginRight:"14px"},t.touch&&{marginRight:"24px"})),[`.${pl.popper}[data-popper-placement*="right"] &`]:st({transformOrigin:"left center"},t.isRtl?st({marginRight:"14px"},t.touch&&{marginRight:"24px"}):st({marginLeft:"14px"},t.touch&&{marginLeft:"24px"})),[`.${pl.popper}[data-popper-placement*="top"] &`]:st({transformOrigin:"center bottom",marginBottom:"14px"},t.touch&&{marginBottom:"24px"}),[`.${pl.popper}[data-popper-placement*="bottom"] &`]:st({transformOrigin:"center top",marginTop:"14px"},t.touch&&{marginTop:"24px"})})),OD=Vs("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:EC(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let Uf=!1,Pv=null,yd={x:0,y:0};function jf(e,t){return i=>{t&&t(i),e(i)}}const DD=ge.forwardRef(function(t,i){var s,u,p,v,c,w,T,P,L,B,U,O,N,ae,q,W,K,ie,_e;const Se=dh({props:t,name:"MuiTooltip"}),{arrow:xe=!1,children:Me,components:Ze={},componentsProps:Le={},describeChild:Je=!1,disableFocusListener:ur=!1,disableHoverListener:Nt=!1,disableInteractive:mr=!1,disableTouchListener:tt=!1,enterDelay:Mt=100,enterNextDelay:kt=0,enterTouchDelay:$e=700,followCursor:lt=!1,id:wt,leaveDelay:rr=0,leaveTouchDelay:or=1500,onClose:fr,onOpen:dr,open:Jt,placement:Ir="bottom",PopperComponent:zr,PopperProps:Fr={},slotProps:sr={},slots:wn={},title:kr,TransitionComponent:Mn=T2,TransitionProps:hn}=Se,Ae=wi(Se,ID),Pr=ge.isValidElement(Me)?Me:ke.jsx("span",{children:Me}),Rn=DC(),pr=Rn.direction==="rtl",[Vt,zn]=ge.useState(),[Kr,Ln]=ge.useState(null),Tr=ge.useRef(!1),Vn=mr||lt,yn=ge.useRef(),rn=ge.useRef(),Ve=ge.useRef(),Sn=ge.useRef(),[Xr,Wt]=JT({controlled:Jt,default:!1,name:"Tooltip",state:"open"});let dn=Xr;const Xe=YT(wt),Rt=ge.useRef(),Ut=ge.useCallback(()=>{Rt.current!==void 0&&(document.body.style.WebkitUserSelect=Rt.current,Rt.current=void 0),clearTimeout(Sn.current)},[]);ge.useEffect(()=>()=>{clearTimeout(yn.current),clearTimeout(rn.current),clearTimeout(Ve.current),Ut()},[Ut]);const $r=De=>{clearTimeout(Pv),Uf=!0,Wt(!0),dr&&!dn&&dr(De)},Mr=Au(De=>{clearTimeout(Pv),Pv=setTimeout(()=>{Uf=!1},800+rr),Wt(!1),fr&&dn&&fr(De),clearTimeout(yn.current),yn.current=setTimeout(()=>{Tr.current=!1},Rn.transitions.duration.shortest)}),zt=De=>{Tr.current&&De.type!=="touchstart"||(Vt&&Vt.removeAttribute("title"),clearTimeout(rn.current),clearTimeout(Ve.current),Mt||Uf&&kt?rn.current=setTimeout(()=>{$r(De)},Uf?kt:Mt):$r(De))},vn=De=>{clearTimeout(rn.current),clearTimeout(Ve.current),Ve.current=setTimeout(()=>{Mr(De)},rr)},{isFocusVisibleRef:pn,onBlur:si,onFocus:Ai,ref:Yr}=J_(),[,Cr]=ge.useState(!1),Ni=De=>{si(De),pn.current===!1&&(Cr(!1),vn(De))},li=De=>{Vt||zn(De.currentTarget),Ai(De),pn.current===!0&&(Cr(!0),zt(De))},J=De=>{Tr.current=!0;const Qe=Pr.props;Qe.onTouchStart&&Qe.onTouchStart(De)},F=zt,$=vn,X=De=>{J(De),clearTimeout(Ve.current),clearTimeout(yn.current),Ut(),Rt.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Sn.current=setTimeout(()=>{document.body.style.WebkitUserSelect=Rt.current,zt(De)},$e)},se=De=>{Pr.props.onTouchEnd&&Pr.props.onTouchEnd(De),Ut(),clearTimeout(Ve.current),Ve.current=setTimeout(()=>{Mr(De)},or)};ge.useEffect(()=>{if(!dn)return;function De(Qe){(Qe.key==="Escape"||Qe.key==="Esc")&&Mr(Qe)}return document.addEventListener("keydown",De),()=>{document.removeEventListener("keydown",De)}},[Mr,dn]);const ue=Bs(Pr.ref,Yr,zn,i);!kr&&kr!==0&&(dn=!1);const me=ge.useRef(),he=De=>{const Qe=Pr.props;Qe.onMouseMove&&Qe.onMouseMove(De),yd={x:De.clientX,y:De.clientY},me.current&&me.current.update()},ce={},ye=typeof kr=="string";Je?(ce.title=!dn&&ye&&!Nt?kr:null,ce["aria-describedby"]=dn?Xe:null):(ce["aria-label"]=ye?kr:null,ce["aria-labelledby"]=dn&&!ye?Xe:null);const ze=st({},ce,Ae,Pr.props,{className:ki(Ae.className,Pr.props.className),onTouchStart:J,ref:ue},lt?{onMouseMove:he}:{}),Oe={};tt||(ze.onTouchStart=X,ze.onTouchEnd=se),Nt||(ze.onMouseOver=jf(F,ze.onMouseOver),ze.onMouseLeave=jf($,ze.onMouseLeave),Vn||(Oe.onMouseOver=F,Oe.onMouseLeave=$)),ur||(ze.onFocus=jf(li,ze.onFocus),ze.onBlur=jf(Ni,ze.onBlur),Vn||(Oe.onFocus=li,Oe.onBlur=Ni));const Be=ge.useMemo(()=>{var De;let Qe=[{name:"arrow",enabled:!!Kr,options:{element:Kr,padding:4}}];return(De=Fr.popperOptions)!=null&&De.modifiers&&(Qe=Qe.concat(Fr.popperOptions.modifiers)),st({},Fr.popperOptions,{modifiers:Qe})},[Kr,Fr]),bt=st({},Se,{isRtl:pr,arrow:xe,disableInteractive:Vn,placement:Ir,PopperComponentProp:zr,touch:Tr.current}),jt=RD(bt),mt=(s=(u=wn.popper)!=null?u:Ze.Popper)!=null?s:zD,St=(p=(v=(c=wn.transition)!=null?c:Ze.Transition)!=null?v:Mn)!=null?p:T2,Lt=(w=(T=wn.tooltip)!=null?T:Ze.Tooltip)!=null?w:LD,lr=(P=(L=wn.arrow)!=null?L:Ze.Arrow)!=null?P:OD,Kt=Ed(mt,st({},Fr,(B=sr.popper)!=null?B:Le.popper,{className:ki(jt.popper,Fr==null?void 0:Fr.className,(U=(O=sr.popper)!=null?O:Le.popper)==null?void 0:U.className)}),bt),gr=Ed(St,st({},hn,(N=sr.transition)!=null?N:Le.transition),bt),Ar=Ed(Lt,st({},(ae=sr.tooltip)!=null?ae:Le.tooltip,{className:ki(jt.tooltip,(q=(W=sr.tooltip)!=null?W:Le.tooltip)==null?void 0:q.className)}),bt),qr=Ed(lr,st({},(K=sr.arrow)!=null?K:Le.arrow,{className:ki(jt.arrow,(ie=(_e=sr.arrow)!=null?_e:Le.arrow)==null?void 0:ie.className)}),bt);return ke.jsxs(ge.Fragment,{children:[ge.cloneElement(Pr,ze),ke.jsx(mt,st({as:zr??rk,placement:Ir,anchorEl:lt?{getBoundingClientRect:()=>({top:yd.y,left:yd.x,right:yd.x,bottom:yd.y,width:0,height:0})}:Vt,popperRef:me,open:Vt?dn:!1,id:Xe,transition:!0},Oe,Kt,{popperOptions:Be,children:({TransitionProps:De})=>ke.jsx(St,st({timeout:Rn.transitions.duration.shorter},De,gr,{children:ke.jsxs(Lt,st({},Ar,{children:[kr,xe?ke.jsx(lr,st({},qr,{ref:Ln})):null]}))}))}))]})}),B2=DD;function BD(){const{setOptions:e}=jg(),[t,i]=ge.useState(!1);return ke.jsxs(ke.Fragment,{children:[t&&ke.jsx(B2,{title:"Camera",arrow:!0,children:ke.jsx(oo,{style:{backgroundColor:"aquamarine",position:"fixed",right:"10%",bottom:"2%"},onClick:()=>{e("camera")},children:ke.jsx(gD,{})})}),ke.jsxs(oo,{style:{backgroundColor:"aquamarine",position:"fixed",right:"1%",bottom:"2%",padding:"1.5%"},variant:"extended",onClick:()=>{i(!t)},children:[t===!1?ke.jsx(YC,{fontSize:"large",style:{paddingRight:"10px"}}):ke.jsx(rh,{fontSize:"large",style:{paddingRight:"10px"}}),t===!1?"Explore":"Close"]}),t&&ke.jsx(B2,{title:"Upload",arrow:!0,children:ke.jsx(oo,{style:{backgroundColor:"aquamarine",position:"fixed",right:"1%",bottom:"13%"},onClick:()=>{e("upload")},children:ke.jsx(vD,{})})})]})}const FD="/assets/preload-bg-41664e00.jpg";function ND(){return ke.jsxs("div",{className:"about",children:[ke.jsxs("div",{className:"about-contents",children:[ke.jsx("h5",{children:"Home > Explore > Capture"}),ke.jsx("h2",{className:"about-contents-title",children:"Find your Plant:"}),ke.jsx("p",{className:"about-contents-details",children:"Upload your plant image to identify and explore more details. PlantSense is designed specifically for plant identification, allowing users to identify plants quickly by snapping a photo and receiving information about the plant."})]}),ke.jsx("div",{className:"about-image",children:ke.jsx("img",{src:FD,alt:"",style:{width:"100%",height:"100%",borderRadius:"12px"}})})]})}var nk={exports:{}},ik={exports:{}};(function(e,t){(function(i){e.exports=i(null)})(function i(s){var u=/^\0+/g,p=/[\0\r\f]/g,v=/: */g,c=/zoo|gra/,w=/([,: ])(transform)/g,T=/,+\s*(?![^(]*[)])/g,P=/ +\s*(?![^(]*[)])/g,L=/ *[\0] */g,B=/,\r+?/g,U=/([\t\r\n ])*\f?&/g,O=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,N=/\W+/g,ae=/@(k\w+)\s*(\S*)\s*/,q=/::(place)/g,W=/:(read-only)/g,K=/\s+(?=[{\];=:>])/g,ie=/([[}=:>])\s+/g,_e=/(\{[^{]+?);(?=\})/g,Se=/\s{2,}/g,xe=/([^\(])(:+) */g,Me=/[svh]\w+-[tblr]{2}/,Ze=/\(\s*(.*)\s*\)/g,Le=/([\s\S]*?);/g,Je=/-self|flex-/g,ur=/[^]*?(:[rp][el]a[\w-]+)[^]*/,Nt=/stretch|:\s*\w+\-(?:conte|avail)/,mr=/([^-])(image-set\()/,tt="-webkit-",Mt="-moz-",kt="-ms-",$e=59,lt=125,wt=123,rr=40,or=41,fr=91,dr=93,Jt=10,Ir=13,zr=9,Fr=64,sr=32,wn=38,kr=45,Mn=95,hn=42,Ae=44,Pr=58,Rn=39,pr=34,Vt=47,zn=62,Kr=43,Ln=126,Tr=0,Vn=12,yn=11,rn=107,Ve=109,Sn=115,Xr=112,Wt=111,dn=105,Xe=99,Rt=100,Ut=112,$r=1,Mr=1,zt=0,vn=1,pn=1,si=1,Ai=0,Yr=0,Cr=0,Ni=[],li=[],J=0,F=null,$=-2,X=-1,se=0,ue=1,me=2,he=3,ce=0,ye=1,ze="",Oe="",Be="";function bt(De,Qe,Et,Ot,it){for(var cr,Re,yr=0,$t=0,Zr=0,Qt=0,hr=0,Nr=0,er=0,On=0,Lr=0,Yi=0,qn=0,Dn=0,xr=0,Gn=0,vr=0,_n=0,So=0,Fo=0,Ur=0,Yt=Et.length,Gr=Yt-1,Bn="",nr="",Z="",Q="",ve="",He="";vr<Yt;){if(er=Et.charCodeAt(vr),vr===Gr&&$t+Qt+Zr+yr!==0&&($t!==0&&(er=$t===Vt?Jt:Vt),Qt=Zr=yr=0,Yt++,Gr++),$t+Qt+Zr+yr===0){if(vr===Gr&&(_n>0&&(nr=nr.replace(p,"")),nr.trim().length>0)){switch(er){case sr:case zr:case $e:case Ir:case Jt:break;default:nr+=Et.charAt(vr)}er=$e}if(So===1)switch(er){case wt:case lt:case $e:case pr:case Rn:case rr:case or:case Ae:So=0;case zr:case Ir:case Jt:case sr:break;default:for(So=0,Ur=vr,hr=er,vr--,er=$e;Ur<Yt;)switch(Et.charCodeAt(Ur++)){case Jt:case Ir:case $e:++vr,er=hr,Ur=Yt;break;case Pr:_n>0&&(++vr,er=hr);case wt:Ur=Yt}}switch(er){case wt:for(hr=(nr=nr.trim()).charCodeAt(0),qn=1,Ur=++vr;vr<Yt;){switch(er=Et.charCodeAt(vr)){case wt:qn++;break;case lt:qn--;break;case Vt:switch(Nr=Et.charCodeAt(vr+1)){case hn:case Vt:vr=gr(Nr,vr,Gr,Et)}break;case fr:er++;case rr:er++;case pr:case Rn:for(;vr++<Gr&&Et.charCodeAt(vr)!==er;);}if(qn===0)break;vr++}switch(Z=Et.substring(Ur,vr),hr===Tr&&(hr=(nr=nr.replace(u,"").trim()).charCodeAt(0)),hr){case Fr:switch(_n>0&&(nr=nr.replace(p,"")),Nr=nr.charCodeAt(1)){case Rt:case Ve:case Sn:case kr:cr=Qe;break;default:cr=Ni}if(Ur=(Z=bt(Qe,cr,Z,Nr,it+1)).length,Cr>0&&Ur===0&&(Ur=nr.length),J>0&&(cr=jt(Ni,nr,Fo),Re=Kt(he,Z,cr,Qe,Mr,$r,Ur,Nr,it,Ot),nr=cr.join(""),Re!==void 0&&(Ur=(Z=Re.trim()).length)===0&&(Nr=0,Z="")),Ur>0)switch(Nr){case Sn:nr=nr.replace(Ze,lr);case Rt:case Ve:case kr:Z=nr+"{"+Z+"}";break;case rn:Z=(nr=nr.replace(ae,"$1 $2"+(ye>0?ze:"")))+"{"+Z+"}",pn===1||pn===2&&Lt("@"+Z,3)?Z="@"+tt+Z+"@"+Z:Z="@"+Z;break;default:Z=nr+Z,Ot===Ut&&(Q+=Z,Z="")}else Z="";break;default:Z=bt(Qe,jt(Qe,nr,Fo),Z,Ot,it+1)}ve+=Z,Dn=0,So=0,Gn=0,_n=0,Fo=0,xr=0,nr="",Z="",er=Et.charCodeAt(++vr);break;case lt:case $e:if((Ur=(nr=(_n>0?nr.replace(p,""):nr).trim()).length)>1)switch(Gn===0&&((hr=nr.charCodeAt(0))===kr||hr>96&&hr<123)&&(Ur=(nr=nr.replace(" ",":")).length),J>0&&(Re=Kt(ue,nr,Qe,De,Mr,$r,Q.length,Ot,it,Ot))!==void 0&&(Ur=(nr=Re.trim()).length)===0&&(nr="\0\0"),hr=nr.charCodeAt(0),Nr=nr.charCodeAt(1),hr){case Tr:break;case Fr:if(Nr===dn||Nr===Xe){He+=nr+Et.charAt(vr);break}default:if(nr.charCodeAt(Ur-1)===Pr)break;Q+=St(nr,hr,Nr,nr.charCodeAt(2))}Dn=0,So=0,Gn=0,_n=0,Fo=0,nr="",er=Et.charCodeAt(++vr)}}switch(er){case Ir:case Jt:if($t+Qt+Zr+yr+Yr===0)switch(Yi){case or:case Rn:case pr:case Fr:case Ln:case zn:case hn:case Kr:case Vt:case kr:case Pr:case Ae:case $e:case wt:case lt:break;default:Gn>0&&(So=1)}$t===Vt?$t=0:vn+Dn===0&&Ot!==rn&&nr.length>0&&(_n=1,nr+="\0"),J*ce>0&&Kt(se,nr,Qe,De,Mr,$r,Q.length,Ot,it,Ot),$r=1,Mr++;break;case $e:case lt:if($t+Qt+Zr+yr===0){$r++;break}default:switch($r++,Bn=Et.charAt(vr),er){case zr:case sr:if(Qt+yr+$t===0)switch(On){case Ae:case Pr:case zr:case sr:Bn="";break;default:er!==sr&&(Bn=" ")}break;case Tr:Bn="\\0";break;case Vn:Bn="\\f";break;case yn:Bn="\\v";break;case wn:Qt+$t+yr===0&&vn>0&&(Fo=1,_n=1,Bn="\f"+Bn);break;case 108:if(Qt+$t+yr+zt===0&&Gn>0)switch(vr-Gn){case 2:On===Xr&&Et.charCodeAt(vr-3)===Pr&&(zt=On);case 8:Lr===Wt&&(zt=Lr)}break;case Pr:Qt+$t+yr===0&&(Gn=vr);break;case Ae:$t+Zr+Qt+yr===0&&(_n=1,Bn+="\r");break;case pr:case Rn:$t===0&&(Qt=Qt===er?0:Qt===0?er:Qt);break;case fr:Qt+$t+Zr===0&&yr++;break;case dr:Qt+$t+Zr===0&&yr--;break;case or:Qt+$t+yr===0&&Zr--;break;case rr:if(Qt+$t+yr===0){if(Dn===0)switch(2*On+3*Lr){case 533:break;default:qn=0,Dn=1}Zr++}break;case Fr:$t+Zr+Qt+yr+Gn+xr===0&&(xr=1);break;case hn:case Vt:if(Qt+yr+Zr>0)break;switch($t){case 0:switch(2*er+3*Et.charCodeAt(vr+1)){case 235:$t=Vt;break;case 220:Ur=vr,$t=hn}break;case hn:er===Vt&&On===hn&&Ur+2!==vr&&(Et.charCodeAt(Ur+2)===33&&(Q+=Et.substring(Ur,vr+1)),Bn="",$t=0)}}if($t===0){if(vn+Qt+yr+xr===0&&Ot!==rn&&er!==$e)switch(er){case Ae:case Ln:case zn:case Kr:case or:case rr:if(Dn===0){switch(On){case zr:case sr:case Jt:case Ir:Bn+="\0";break;default:Bn="\0"+Bn+(er===Ae?"":"\0")}_n=1}else switch(er){case rr:Gn+7===vr&&On===108&&(Gn=0),Dn=++qn;break;case or:(Dn=--qn)==0&&(_n=1,Bn+="\0")}break;case zr:case sr:switch(On){case Tr:case wt:case lt:case $e:case Ae:case Vn:case zr:case sr:case Jt:case Ir:break;default:Dn===0&&(_n=1,Bn+="\0")}}nr+=Bn,er!==sr&&er!==zr&&(Yi=er)}}Lr=On,On=er,vr++}if(Ur=Q.length,Cr>0&&Ur===0&&ve.length===0&&Qe[0].length!==0&&(Ot!==Ve||Qe.length===1&&(vn>0?Oe:Be)===Qe[0])&&(Ur=Qe.join(",").length+2),Ur>0){if(cr=vn===0&&Ot!==rn?function(gt){for(var Ue,we,Tt=0,qt=gt.length,qe=Array(qt);Tt<qt;++Tt){for(var nt=gt[Tt].split(L),ut="",yt=0,Ft=0,Xt=0,Gt=0,nn=nt.length;yt<nn;++yt)if(!((Ft=(we=nt[yt]).length)===0&&nn>1)){if(Xt=ut.charCodeAt(ut.length-1),Gt=we.charCodeAt(0),Ue="",yt!==0)switch(Xt){case hn:case Ln:case zn:case Kr:case sr:case rr:break;default:Ue=" "}switch(Gt){case wn:we=Ue+Oe;case Ln:case zn:case Kr:case sr:case or:case rr:break;case fr:we=Ue+we+Oe;break;case Pr:switch(2*we.charCodeAt(1)+3*we.charCodeAt(2)){case 530:if(si>0){we=Ue+we.substring(8,Ft-1);break}default:(yt<1||nt[yt-1].length<1)&&(we=Ue+Oe+we)}break;case Ae:Ue="";default:Ft>1&&we.indexOf(":")>0?we=Ue+we.replace(xe,"$1"+Oe+"$2"):we=Ue+we+Oe}ut+=we}qe[Tt]=ut.replace(p,"").trim()}return qe}(Qe):Qe,J>0&&(Re=Kt(me,Q,cr,De,Mr,$r,Ur,Ot,it,Ot))!==void 0&&(Q=Re).length===0)return He+Q+ve;if(Q=cr.join(",")+"{"+Q+"}",pn*zt!=0){switch(pn===2&&!Lt(Q,2)&&(zt=0),zt){case Wt:Q=Q.replace(W,":"+Mt+"$1")+Q;break;case Xr:Q=Q.replace(q,"::"+tt+"input-$1")+Q.replace(q,"::"+Mt+"$1")+Q.replace(q,":"+kt+"input-$1")+Q}zt=0}}return He+Q+ve}function jt(De,Qe,Et){var Ot=Qe.trim().split(B),it=Ot,cr=Ot.length,Re=De.length;switch(Re){case 0:case 1:for(var yr=0,$t=Re===0?"":De[0]+" ";yr<cr;++yr)it[yr]=mt($t,it[yr],Et,Re).trim();break;default:yr=0;var Zr=0;for(it=[];yr<cr;++yr)for(var Qt=0;Qt<Re;++Qt)it[Zr++]=mt(De[Qt]+" ",Ot[yr],Et,Re).trim()}return it}function mt(De,Qe,Et,Ot){var it=Qe,cr=it.charCodeAt(0);switch(cr<33&&(cr=(it=it.trim()).charCodeAt(0)),cr){case wn:switch(vn+Ot){case 0:case 1:if(De.trim().length===0)break;default:return it.replace(U,"$1"+De.trim())}break;case Pr:switch(it.charCodeAt(1)){case 103:if(si>0&&vn>0)return it.replace(O,"$1").replace(U,"$1"+Be);break;default:return De.trim()+it.replace(U,"$1"+De.trim())}default:if(Et*vn>0&&it.indexOf("\f")>0)return it.replace(U,(De.charCodeAt(0)===Pr?"":"$1")+De.trim())}return De+it}function St(De,Qe,Et,Ot){var it,cr=0,Re=De+";",yr=2*Qe+3*Et+4*Ot;if(yr===944)return function($t){var Zr=$t.length,Qt=$t.indexOf(":",9)+1,hr=$t.substring(0,Qt).trim(),Nr=$t.substring(Qt,Zr-1).trim();switch($t.charCodeAt(9)*ye){case 0:break;case kr:if($t.charCodeAt(10)!==110)break;default:for(var er=Nr.split((Nr="",T)),On=0,Qt=0,Zr=er.length;On<Zr;Qt=0,++On){for(var Lr=er[On],Yi=Lr.split(P);Lr=Yi[Qt];){var qn=Lr.charCodeAt(0);if(ye===1&&(qn>Fr&&qn<90||qn>96&&qn<123||qn===Mn||qn===kr&&Lr.charCodeAt(1)!==kr))switch(isNaN(parseFloat(Lr))+(Lr.indexOf("(")!==-1)){case 1:switch(Lr){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:Lr+=ze}}Yi[Qt++]=Lr}Nr+=(On===0?"":",")+Yi.join(" ")}}return Nr=hr+Nr+";",pn===1||pn===2&&Lt(Nr,1)?tt+Nr+Nr:Nr}(Re);if(pn===0||pn===2&&!Lt(Re,1))return Re;switch(yr){case 1015:return Re.charCodeAt(10)===97?tt+Re+Re:Re;case 951:return Re.charCodeAt(3)===116?tt+Re+Re:Re;case 963:return Re.charCodeAt(5)===110?tt+Re+Re:Re;case 1009:if(Re.charCodeAt(4)!==100)break;case 969:case 942:return tt+Re+Re;case 978:return tt+Re+Mt+Re+Re;case 1019:case 983:return tt+Re+Mt+Re+kt+Re+Re;case 883:return Re.charCodeAt(8)===kr?tt+Re+Re:Re.indexOf("image-set(",11)>0?Re.replace(mr,"$1"+tt+"$2")+Re:Re;case 932:if(Re.charCodeAt(4)===kr)switch(Re.charCodeAt(5)){case 103:return tt+"box-"+Re.replace("-grow","")+tt+Re+kt+Re.replace("grow","positive")+Re;case 115:return tt+Re+kt+Re.replace("shrink","negative")+Re;case 98:return tt+Re+kt+Re.replace("basis","preferred-size")+Re}return tt+Re+kt+Re+Re;case 964:return tt+Re+kt+"flex-"+Re+Re;case 1023:if(Re.charCodeAt(8)!==99)break;return it=Re.substring(Re.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),tt+"box-pack"+it+tt+Re+kt+"flex-pack"+it+Re;case 1005:return c.test(Re)?Re.replace(v,":"+tt)+Re.replace(v,":"+Mt)+Re:Re;case 1e3:switch(cr=(it=Re.substring(13).trim()).indexOf("-")+1,it.charCodeAt(0)+it.charCodeAt(cr)){case 226:it=Re.replace(Me,"tb");break;case 232:it=Re.replace(Me,"tb-rl");break;case 220:it=Re.replace(Me,"lr");break;default:return Re}return tt+Re+kt+it+Re;case 1017:if(Re.indexOf("sticky",9)===-1)return Re;case 975:switch(cr=(Re=De).length-10,yr=(it=(Re.charCodeAt(cr)===33?Re.substring(0,cr):Re).substring(De.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|it.charCodeAt(7))){case 203:if(it.charCodeAt(8)<111)break;case 115:Re=Re.replace(it,tt+it)+";"+Re;break;case 207:case 102:Re=Re.replace(it,tt+(yr>102?"inline-":"")+"box")+";"+Re.replace(it,tt+it)+";"+Re.replace(it,kt+it+"box")+";"+Re}return Re+";";case 938:if(Re.charCodeAt(5)===kr)switch(Re.charCodeAt(6)){case 105:return it=Re.replace("-items",""),tt+Re+tt+"box-"+it+kt+"flex-"+it+Re;case 115:return tt+Re+kt+"flex-item-"+Re.replace(Je,"")+Re;default:return tt+Re+kt+"flex-line-pack"+Re.replace("align-content","").replace(Je,"")+Re}break;case 973:case 989:if(Re.charCodeAt(3)!==kr||Re.charCodeAt(4)===122)break;case 931:case 953:if(Nt.test(De)===!0)return(it=De.substring(De.indexOf(":")+1)).charCodeAt(0)===115?St(De.replace("stretch","fill-available"),Qe,Et,Ot).replace(":fill-available",":stretch"):Re.replace(it,tt+it)+Re.replace(it,Mt+it.replace("fill-",""))+Re;break;case 962:if(Re=tt+Re+(Re.charCodeAt(5)===102?kt+Re:"")+Re,Et+Ot===211&&Re.charCodeAt(13)===105&&Re.indexOf("transform",10)>0)return Re.substring(0,Re.indexOf(";",27)+1).replace(w,"$1"+tt+"$2")+Re}return Re}function Lt(De,Qe){var Et=De.indexOf(Qe===1?":":"{"),Ot=De.substring(0,Qe!==3?Et:10),it=De.substring(Et+1,De.length-1);return F(Qe!==2?Ot:Ot.replace(ur,"$1"),it,Qe)}function lr(De,Qe){var Et=St(Qe,Qe.charCodeAt(0),Qe.charCodeAt(1),Qe.charCodeAt(2));return Et!==Qe+";"?Et.replace(Le," or ($1)").substring(4):"("+Qe+")"}function Kt(De,Qe,Et,Ot,it,cr,Re,yr,$t,Zr){for(var Qt,hr=0,Nr=Qe;hr<J;++hr)switch(Qt=li[hr].call(qr,De,Nr,Et,Ot,it,cr,Re,yr,$t,Zr)){case void 0:case!1:case!0:case null:break;default:Nr=Qt}if(Nr!==Qe)return Nr}function gr(De,Qe,Et,Ot){for(var it=Qe+1;it<Et;++it)switch(Ot.charCodeAt(it)){case Vt:if(De===hn&&Ot.charCodeAt(it-1)===hn&&Qe+2!==it)return it+1;break;case Jt:if(De===Vt)return it+1}return it}function Ar(De){for(var Qe in De){var Et=De[Qe];switch(Qe){case"keyframe":ye=0|Et;break;case"global":si=0|Et;break;case"cascade":vn=0|Et;break;case"compress":Ai=0|Et;break;case"semicolon":Yr=0|Et;break;case"preserve":Cr=0|Et;break;case"prefix":F=null,Et?typeof Et!="function"?pn=1:(pn=2,F=Et):pn=0}}return Ar}function qr(De,Qe){if(this!==void 0&&this.constructor===qr)return i(De);var Et=De,Ot=Et.charCodeAt(0);Ot<33&&(Ot=(Et=Et.trim()).charCodeAt(0)),ye>0&&(ze=Et.replace(N,Ot===fr?"":"-")),Ot=1,vn===1?Be=Et:Oe=Et;var it,cr=[Be];J>0&&(it=Kt(X,Qe,cr,cr,Mr,$r,0,0,0,0))!==void 0&&typeof it=="string"&&(Qe=it);var Re=bt(Ni,cr,Qe,0,0);return J>0&&(it=Kt($,Re,cr,cr,Mr,$r,Re.length,0,0,0))!==void 0&&typeof(Re=it)!="string"&&(Ot=0),ze="",Be="",Oe="",zt=0,Mr=1,$r=1,Ai*Ot==0?Re:Re.replace(p,"").replace(K,"").replace(ie,"$1").replace(_e,"$1").replace(Se," ")}return qr.use=function De(Qe){switch(Qe){case void 0:case null:J=li.length=0;break;default:if(typeof Qe=="function")li[J++]=Qe;else if(typeof Qe=="object")for(var Et=0,Ot=Qe.length;Et<Ot;++Et)De(Qe[Et]);else ce=0|!!Qe}return De},qr.set=Ar,s!==void 0&&Ar(s),qr})})(ik);var UD=ik.exports;const ok=Tl(UD);var ak={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(i){var s="/*|*/",u=s+"}";function p(v){if(v)try{i(v+"}")}catch{}}return function(c,w,T,P,L,B,U,O,N,ae){switch(c){case 1:if(N===0&&w.charCodeAt(0)===64)return i(w+";"),"";break;case 2:if(O===0)return w+s;break;case 3:switch(O){case 102:case 112:return i(T[0]+w),"";default:return w+(ae===0?s:"")}case-2:w.split(u).forEach(p)}}}})})(ak);var jD=ak.exports;const $D=Tl(jD);var VD={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},F2=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function qD(e,t){return!!(e===t||F2(e)&&F2(t))}function GD(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!qD(e[i],t[i]))return!1;return!0}function sk(e,t){t===void 0&&(t=GD);var i,s=[],u,p=!1;function v(){for(var c=[],w=0;w<arguments.length;w++)c[w]=arguments[w];return p&&i===this&&t(c,s)||(u=e.apply(this,c),p=!0,i=this,s=c),u}return v}function HD(e){var t={};return function(i){return t[i]===void 0&&(t[i]=e(i)),t[i]}}var WD=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,ZD=HD(function(e){return WD.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function Ix(e){return Object.prototype.toString.call(e).slice(8,-1)}function Cd(e){return Ix(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function N2(e){return Ix(e)==="Array"}function U2(e){return Ix(e)==="Symbol"}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function j2(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var s=Array(e),u=0,t=0;t<i;t++)for(var p=arguments[t],v=0,c=p.length;v<c;v++,u++)s[u]=p[v];return s}function $2(e,t,i,s){var u=s.propertyIsEnumerable(t)?"enumerable":"nonenumerable";u==="enumerable"&&(e[t]=i),u==="nonenumerable"&&Object.defineProperty(e,t,{value:i,enumerable:!1,writable:!0,configurable:!0})}function lk(e,t,i){if(!Cd(t))return i&&N2(i)&&i.forEach(function(T){t=T(e,t)}),t;var s={};if(Cd(e)){var u=Object.getOwnPropertyNames(e),p=Object.getOwnPropertySymbols(e);s=j2(u,p).reduce(function(T,P){var L=e[P];return(!U2(P)&&!Object.getOwnPropertyNames(t).includes(P)||U2(P)&&!Object.getOwnPropertySymbols(t).includes(P))&&$2(T,P,L,e),T},{})}var v=Object.getOwnPropertyNames(t),c=Object.getOwnPropertySymbols(t),w=j2(v,c).reduce(function(T,P){var L=t[P],B=Cd(e)?e[P]:void 0;return i&&N2(i)&&i.forEach(function(U){L=U(B,L)}),B!==void 0&&Cd(L)&&(L=lk(B,L,i)),$2(T,P,L,t),T},s);return w}function KD(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var s=null,u=e;return Cd(e)&&e.extensions&&Object.keys(e).length===1&&(u={},s=e.extensions),t.reduce(function(p,v){return lk(p,v,s)},u)}var V2=function(e,t){for(var i=[e[0]],s=0,u=t.length;s<u;s+=1)i.push(t[s],e[s+1]);return i},ck=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ps=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},XD=function(){function e(t,i){for(var s=0;s<i.length;s++){var u=i[s];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),Do=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Tp=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},YD=function(e,t){var i={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=e[s]);return i},nh=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},Mx=function(e){return(typeof e>"u"?"undefined":ck(e))==="object"&&e.constructor===Object},Zm=Object.freeze([]),Ud=Object.freeze({});function Us(e){return typeof e=="function"}function Rx(e){return e.displayName||e.name||"Component"}function JD(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)}function Cp(e){return e&&typeof e.styledComponentId=="string"}var hp=typeof process<"u"&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",$g="data-styled-version",QD="data-styled-streamed",bc=typeof window<"u"&&"HTMLElement"in window,uk=typeof SC_DISABLE_SPEEDY=="boolean"&&SC_DISABLE_SPEEDY||typeof process<"u"&&({}.REACT_APP_SC_DISABLE_SPEEDY||{}.SC_DISABLE_SPEEDY)||!1,eB={},hs=function(e){Tp(t,e);function t(i){ps(this,t);for(var s=arguments.length,u=Array(s>1?s-1:0),p=1;p<s;p++)u[p-1]=arguments[p];var v,v=nh(this,e.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/utils/errors.md#"+i+" for more information."+(u.length>0?" Additional arguments: "+u.join(", "):"")));return nh(v)}return t}(Error),tB=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,rB=function(e){var t=""+(e||""),i=[];return t.replace(tB,function(s,u,p){return i.push({componentId:u,matchIndex:p}),s}),i.map(function(s,u){var p=s.componentId,v=s.matchIndex,c=i[u+1],w=c?t.slice(v,c.matchIndex):t.slice(v);return{componentId:p,cssFromDOM:w}})},nB=/^\s*\/\/.*$/gm,hk=new ok({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),dk=new ok({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),G0=[],pk=function(t){if(t===-2){var i=G0;return G0=[],i}},fk=$D(function(e){G0.push(e)}),mk=void 0,Fu=void 0,gk=void 0,iB=function(t,i,s){return i>0&&s.slice(0,i).indexOf(Fu)!==-1&&s.slice(i-Fu.length,i)!==Fu?"."+mk:t},oB=function(t,i,s){t===2&&s.length&&s[0].lastIndexOf(Fu)>0&&(s[0]=s[0].replace(gk,iB))};dk.use([oB,fk,pk]);hk.use([fk,pk]);var aB=function(t){return hk("",t)};function zx(e,t,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"&",u=e.join("").replace(nB,""),p=t&&i?i+" "+t+" { "+u+" }":u;return mk=s,Fu=t,gk=new RegExp("\\"+Fu+"\\b","g"),dk(i||!t?"":t,p)}var Lx=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},Ox=function(t,i,s){if(s){var u=t[i]||(t[i]=Object.create(null));u[s]=!0}},Km=function(t,i){t[i]=Object.create(null)},Dx=function(t){return function(i,s){return t[i]!==void 0&&t[i][s]}},yk=function(t){var i="";for(var s in t)i+=Object.keys(t[s]).join(" ")+" ";return i.trim()},sB=function(t){var i=Object.create(null);for(var s in t)i[s]=Do({},t[s]);return i},Av=function(t){if(t.sheet)return t.sheet;for(var i=t.ownerDocument.styleSheets.length,s=0;s<i;s+=1){var u=t.ownerDocument.styleSheets[s];if(u.ownerNode===t)return u}throw new hs(10)},lB=function(t,i,s){if(!i)return!1;var u=t.cssRules.length;try{t.insertRule(i,s<=u?s:u)}catch{return!1}return!0},cB=function(t,i,s){for(var u=i-s,p=i;p>u;p-=1)t.deleteRule(p)},Bx=function(t){return`
/* sc-component-id: `+t+` */
`},Iv=function(t,i){for(var s=0,u=0;u<=i;u+=1)s+=t[u];return s},uB=function(t,i,s){var u=document;t?u=t.ownerDocument:i&&(u=i.ownerDocument);var p=u.createElement("style");p.setAttribute(hp,""),p.setAttribute($g,"4.4.1");var v=Lx();if(v&&p.setAttribute("nonce",v),p.appendChild(u.createTextNode("")),t&&!i)t.appendChild(p);else{if(!i||!t||!i.parentNode)throw new hs(6);i.parentNode.insertBefore(p,s?i:i.nextSibling)}return p},Fx=function(t,i){return function(s){var u=Lx(),p=[u&&'nonce="'+u+'"',hp+'="'+yk(i)+'"',$g+'="4.4.1"',s],v=p.filter(Boolean).join(" ");return"<style "+v+">"+t()+"</style>"}},Nx=function(t,i){return function(){var s,u=(s={},s[hp]=yk(i),s[$g]="4.4.1",s),p=Lx();return p&&(u.nonce=p),kn.createElement("style",Do({},u,{dangerouslySetInnerHTML:{__html:t()}}))}},Ux=function(t){return function(){return Object.keys(t)}},hB=function(t,i){var s=Object.create(null),u=Object.create(null),p=[],v=i!==void 0,c=!1,w=function(U){var O=u[U];return O!==void 0?O:(u[U]=p.length,p.push(0),Km(s,U),u[U])},T=function(U,O,N){for(var ae=w(U),q=Av(t),W=Iv(p,ae),K=0,ie=[],_e=O.length,Se=0;Se<_e;Se+=1){var xe=O[Se],Me=v;Me&&xe.indexOf("@import")!==-1?ie.push(xe):lB(q,xe,W+K)&&(Me=!1,K+=1)}v&&ie.length>0&&(c=!0,i().insertRules(U+"-import",ie)),p[ae]+=K,Ox(s,U,N)},P=function(U){var O=u[U];if(O!==void 0&&t.isConnected!==!1){var N=p[O],ae=Av(t),q=Iv(p,O)-1;cB(ae,q,N),p[O]=0,Km(s,U),v&&c&&i().removeRules(U+"-import")}},L=function(){var U=Av(t),O=U.cssRules,N="";for(var ae in u){N+=Bx(ae);for(var q=u[ae],W=Iv(p,q),K=p[q],ie=W-K;ie<W;ie+=1){var _e=O[ie];_e!==void 0&&(N+=_e.cssText)}}return N};return{clone:function(){throw new hs(5)},css:L,getIds:Ux(u),hasNameForId:Dx(s),insertMarker:w,insertRules:T,removeRules:P,sealed:!1,styleTag:t,toElement:Nx(L,s),toHTML:Fx(L,s)}},q2=function(t,i){return t.createTextNode(Bx(i))},dB=function(t,i){var s=Object.create(null),u=Object.create(null),p=i!==void 0,v=!1,c=function(B){var U=u[B];return U!==void 0?U:(u[B]=q2(t.ownerDocument,B),t.appendChild(u[B]),s[B]=Object.create(null),u[B])},w=function(B,U,O){for(var N=c(B),ae=[],q=U.length,W=0;W<q;W+=1){var K=U[W],ie=p;if(ie&&K.indexOf("@import")!==-1)ae.push(K);else{ie=!1;var _e=W===q-1?"":" ";N.appendData(""+K+_e)}}Ox(s,B,O),p&&ae.length>0&&(v=!0,i().insertRules(B+"-import",ae))},T=function(B){var U=u[B];if(U!==void 0){var O=q2(t.ownerDocument,B);t.replaceChild(O,U),u[B]=O,Km(s,B),p&&v&&i().removeRules(B+"-import")}},P=function(){var B="";for(var U in u)B+=u[U].data;return B};return{clone:function(){throw new hs(5)},css:P,getIds:Ux(u),hasNameForId:Dx(s),insertMarker:c,insertRules:w,removeRules:T,sealed:!1,styleTag:t,toElement:Nx(P,s),toHTML:Fx(P,s)}},pB=function e(t,i){var s=t===void 0?Object.create(null):t,u=i===void 0?Object.create(null):i,p=function(B){var U=u[B];return U!==void 0?U:u[B]=[""]},v=function(B,U,O){var N=p(B);N[0]+=U.join(" "),Ox(s,B,O)},c=function(B){var U=u[B];U!==void 0&&(U[0]="",Km(s,B))},w=function(){var B="";for(var U in u){var O=u[U][0];O&&(B+=Bx(U)+O)}return B},T=function(){var B=sB(s),U=Object.create(null);for(var O in u)U[O]=[u[O][0]];return e(B,U)},P={clone:T,css:w,getIds:Ux(u),hasNameForId:Dx(s),insertMarker:p,insertRules:v,removeRules:c,sealed:!1,styleTag:null,toElement:Nx(w,s),toHTML:Fx(w,s)};return P},G2=function(t,i,s,u,p){if(bc&&!s){var v=uB(t,i,u);return uk?dB(v,p):hB(v,p)}return pB()},fB=function(t,i,s){for(var u=0,p=s.length;u<p;u+=1){var v=s[u],c=v.componentId,w=v.cssFromDOM,T=aB(w);t.insertRules(c,T)}for(var P=0,L=i.length;P<L;P+=1){var B=i[P];B.parentNode&&B.parentNode.removeChild(B)}},mB=/\s+/,Xm=void 0;bc?Xm=uk?40:1e3:Xm=-1;var H2=0,Mv=void 0,js=function(){function e(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:bc?document.head:null,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;ps(this,e),this.getImportRuleTag=function(){var u=t.importRuleTag;if(u!==void 0)return u;var p=t.tags[0],v=!0;return t.importRuleTag=G2(t.target,p?p.styleTag:null,t.forceServer,v)},H2+=1,this.id=H2,this.forceServer=s,this.target=s?null:i,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return e.prototype.rehydrate=function(){if(!bc||this.forceServer)return this;var i=[],s=[],u=!1,p=document.querySelectorAll("style["+hp+"]["+$g+'="4.4.1"]'),v=p.length;if(!v)return this;for(var c=0;c<v;c+=1){var w=p[c];u||(u=!!w.getAttribute(QD));for(var T=(w.getAttribute(hp)||"").trim().split(mB),P=T.length,L=0,B;L<P;L+=1)B=T[L],this.rehydratedNames[B]=!0;s.push.apply(s,rB(w.textContent)),i.push(w)}var U=s.length;if(!U)return this;var O=this.makeTag(null);fB(O,i,s),this.capacity=Math.max(1,Xm-U),this.tags.push(O);for(var N=0;N<U;N+=1)this.tagMap[s[N].componentId]=O;return this},e.reset=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Mv=new e(void 0,i).rehydrate()},e.prototype.clone=function(){var i=new e(this.target,this.forceServer);return this.clones.push(i),i.tags=this.tags.map(function(s){for(var u=s.getIds(),p=s.clone(),v=0;v<u.length;v+=1)i.tagMap[u[v]]=p;return p}),i.rehydratedNames=Do({},this.rehydratedNames),i.deferred=Do({},this.deferred),i},e.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach(function(i){i.sealed=!0})},e.prototype.makeTag=function(i){var s=i?i.styleTag:null,u=!1;return G2(this.target,s,this.forceServer,u,this.getImportRuleTag)},e.prototype.getTagForId=function(i){var s=this.tagMap[i];if(s!==void 0&&!s.sealed)return s;var u=this.tags[this.tags.length-1];return this.capacity-=1,this.capacity===0&&(this.capacity=Xm,u=this.makeTag(u),this.tags.push(u)),this.tagMap[i]=u},e.prototype.hasId=function(i){return this.tagMap[i]!==void 0},e.prototype.hasNameForId=function(i,s){if(this.ignoreRehydratedNames[i]===void 0&&this.rehydratedNames[s])return!0;var u=this.tagMap[i];return u!==void 0&&u.hasNameForId(i,s)},e.prototype.deferredInject=function(i,s){if(this.tagMap[i]===void 0){for(var u=this.clones,p=0;p<u.length;p+=1)u[p].deferredInject(i,s);this.getTagForId(i).insertMarker(i),this.deferred[i]=s}},e.prototype.inject=function(i,s,u){for(var p=this.clones,v=0;v<p.length;v+=1)p[v].inject(i,s,u);var c=this.getTagForId(i);if(this.deferred[i]!==void 0){var w=this.deferred[i].concat(s);c.insertRules(i,w,u),this.deferred[i]=void 0}else c.insertRules(i,s,u)},e.prototype.remove=function(i){var s=this.tagMap[i];if(s!==void 0){for(var u=this.clones,p=0;p<u.length;p+=1)u[p].remove(i);s.removeRules(i),this.ignoreRehydratedNames[i]=!0,this.deferred[i]=void 0}},e.prototype.toHTML=function(){return this.tags.map(function(i){return i.toHTML()}).join("")},e.prototype.toReactElements=function(){var i=this.id;return this.tags.map(function(s,u){var p="sc-"+i+"-"+u;return ge.cloneElement(s.toElement(),{key:p})})},XD(e,null,[{key:"master",get:function(){return Mv||(Mv=new e().rehydrate())}},{key:"instance",get:function(){return e.master}}]),e}(),vk=function(){function e(t,i){var s=this;ps(this,e),this.inject=function(u){u.hasNameForId(s.id,s.name)||u.inject(s.id,s.rules,s.name)},this.toString=function(){throw new hs(12,String(s.name))},this.name=t,this.rules=i,this.id="sc-keyframes-"+t}return e.prototype.getName=function(){return this.name},e}(),gB=/([A-Z])/g,yB=/^ms-/;function W2(e){return e.replace(gB,"-$1").toLowerCase().replace(yB,"-ms-")}function vB(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!(e in VD)?t+"px":String(t).trim()}var _k=function(t){return t==null||t===!1||t===""},_B=function e(t,i){var s=[],u=Object.keys(t);return u.forEach(function(p){if(!_k(t[p])){if(Mx(t[p]))return s.push.apply(s,e(t[p],p)),s;if(Us(t[p]))return s.push(W2(p)+":",t[p],";"),s;s.push(W2(p)+": "+vB(p,t[p])+";")}return s}),i?[i+" {"].concat(s,["}"]):s};function ih(e,t,i){if(Array.isArray(e)){for(var s=[],u=0,p=e.length,v;u<p;u+=1)v=ih(e[u],t,i),v!==null&&(Array.isArray(v)?s.push.apply(s,v):s.push(v));return s}if(_k(e))return null;if(Cp(e))return"."+e.styledComponentId;if(Us(e))if(JD(e)&&t){var c=e(t);return ih(c,t,i)}else return e;return e instanceof vk?i?(e.inject(i),e.getName()):e:Mx(e)?_B(e):e.toString()}function Vg(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return Us(e)||Mx(e)?ih(V2(Zm,[e].concat(i))):ih(V2(e,i))}function H0(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ud;if(!ox.isValidElementType(t))throw new hs(1,String(t));var s=function(){return e(t,i,Vg.apply(void 0,arguments))};return s.withConfig=function(u){return H0(e,t,Do({},i,u))},s.attrs=function(u){return H0(e,t,Do({},i,{attrs:Array.prototype.concat(i.attrs,u).filter(Boolean)}))},s}function jx(e){for(var t=e.length|0,i=t|0,s=0,u;t>=4;)u=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,u=1540483477*(u&65535)+((1540483477*(u>>>16)&65535)<<16),u^=u>>>24,u=1540483477*(u&65535)+((1540483477*(u>>>16)&65535)<<16),i=1540483477*(i&65535)+((1540483477*(i>>>16)&65535)<<16)^u,t-=4,++s;switch(t){case 3:i^=(e.charCodeAt(s+2)&255)<<16;case 2:i^=(e.charCodeAt(s+1)&255)<<8;case 1:i^=e.charCodeAt(s)&255,i=1540483477*(i&65535)+((1540483477*(i>>>16)&65535)<<16)}return i^=i>>>13,i=1540483477*(i&65535)+((1540483477*(i>>>16)&65535)<<16),(i^i>>>15)>>>0}var $f=52,Z2=function(t){return String.fromCharCode(t+(t>25?39:97))};function xk(e){var t="",i=void 0;for(i=e;i>$f;i=Math.floor(i/$f))t=Z2(i%$f)+t;return Z2(i%$f)+t}function xB(e){for(var t in e)if(Us(e[t]))return!0;return!1}function $x(e,t){for(var i=0;i<e.length;i+=1){var s=e[i];if(Array.isArray(s)&&!$x(s,t))return!1;if(Us(s)&&!Cp(s))return!1}return!t.some(function(u){return Us(u)||xB(u)})}var K2=function(t){return xk(jx(t))},X2=function(){function e(t,i,s){ps(this,e),this.rules=t,this.isStatic=$x(t,i),this.componentId=s,js.master.hasId(s)||js.master.deferredInject(s,[])}return e.prototype.generateAndInjectStyles=function(i,s){var u=this.isStatic,p=this.componentId,v=this.lastClassName;if(bc&&u&&typeof v=="string"&&s.hasNameForId(p,v))return v;var c=ih(this.rules,i,s),w=K2(this.componentId+c.join(""));return s.hasNameForId(p,w)||s.inject(this.componentId,zx(c,"."+w,void 0,p),w),this.lastClassName=w,w},e.generateName=function(i){return K2(i)},e}(),Vx=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ud,s=i?e.theme===i.theme:!1,u=e.theme&&!s?e.theme:t||i.theme;return u},bB=/[[\].#*$><+~=|^:(),"'`-]+/g,wB=/(^-|-$)/g;function W0(e){return e.replace(bB,"-").replace(wB,"")}function Ym(e){return typeof e=="string"&&!0}function SB(e){return Ym(e)?"styled."+e:"Styled("+Rx(e)+")"}var Rv,Y2={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDerivedStateFromProps:!0,propTypes:!0,type:!0},EB={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},J2=(Rv={},Rv[ox.ForwardRef]={$$typeof:!0,render:!0},Rv),TB=Object.defineProperty,CB=Object.getOwnPropertyNames,Q2=Object.getOwnPropertySymbols,kB=Q2===void 0?function(){return[]}:Q2,PB=Object.getOwnPropertyDescriptor,AB=Object.getPrototypeOf,IB=Object.prototype,MB=Array.prototype;function qx(e,t,i){if(typeof t!="string"){var s=AB(t);s&&s!==IB&&qx(e,s,i);for(var u=MB.concat(CB(t),kB(t)),p=J2[e.$$typeof]||Y2,v=J2[t.$$typeof]||Y2,c=u.length,w=void 0,T=void 0;c--;)if(T=u[c],!EB[T]&&!(i&&i[T])&&!(v&&v[T])&&!(p&&p[T])&&(w=PB(t,T),w))try{TB(e,T,w)}catch{}return e}return e}function RB(e){return!!(e&&e.prototype&&e.prototype.isReactComponent)}var Jm=ge.createContext(),qg=Jm.Consumer,bk=function(e){Tp(t,e);function t(i){ps(this,t);var s=nh(this,e.call(this,i));return s.getContext=sk(s.getContext.bind(s)),s.renderInner=s.renderInner.bind(s),s}return t.prototype.render=function(){return this.props.children?kn.createElement(Jm.Consumer,null,this.renderInner):null},t.prototype.renderInner=function(s){var u=this.getContext(this.props.theme,s);return kn.createElement(Jm.Provider,{value:u},this.props.children)},t.prototype.getTheme=function(s,u){if(Us(s)){var p=s(u);return p}if(s===null||Array.isArray(s)||(typeof s>"u"?"undefined":ck(s))!=="object")throw new hs(8);return Do({},u,s)},t.prototype.getContext=function(s,u){return this.getTheme(s,u)},t}(ge.Component),zB=function(){function e(){ps(this,e),this.masterSheet=js.master,this.instance=this.masterSheet.clone(),this.sealed=!1}return e.prototype.seal=function(){if(!this.sealed){var i=this.masterSheet.clones.indexOf(this.instance);this.masterSheet.clones.splice(i,1),this.sealed=!0}},e.prototype.collectStyles=function(i){if(this.sealed)throw new hs(2);return kn.createElement(wk,{sheet:this.instance},i)},e.prototype.getStyleTags=function(){return this.seal(),this.instance.toHTML()},e.prototype.getStyleElement=function(){return this.seal(),this.instance.toReactElements()},e.prototype.interleaveWithNodeStream=function(i){throw new hs(3)},e}(),Gx=ge.createContext(),Hx=Gx.Consumer,wk=function(e){Tp(t,e);function t(i){ps(this,t);var s=nh(this,e.call(this,i));return s.getContext=sk(s.getContext),s}return t.prototype.getContext=function(s,u){if(s)return s;if(u)return new js(u);throw new hs(4)},t.prototype.render=function(){var s=this.props,u=s.children,p=s.sheet,v=s.target;return kn.createElement(Gx.Provider,{value:this.getContext(p,v)},u)},t}(ge.Component),eS={};function LB(e,t,i){var s=typeof t!="string"?"sc":W0(t),u=(eS[s]||0)+1;eS[s]=u;var p=s+"-"+e.generateName(s+u);return i?i+"-"+p:p}var OB=function(e){Tp(t,e);function t(){ps(this,t);var i=nh(this,e.call(this));return i.attrs={},i.renderOuter=i.renderOuter.bind(i),i.renderInner=i.renderInner.bind(i),i}return t.prototype.render=function(){return kn.createElement(Hx,null,this.renderOuter)},t.prototype.renderOuter=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:js.master;return this.styleSheet=s,this.props.forwardedComponent.componentStyle.isStatic?this.renderInner():kn.createElement(qg,null,this.renderInner)},t.prototype.renderInner=function(s){var u=this.props.forwardedComponent,p=u.componentStyle,v=u.defaultProps;u.displayName;var c=u.foldedComponentIds,w=u.styledComponentId,T=u.target,P=void 0;p.isStatic?P=this.generateAndInjectStyles(Ud,this.props):P=this.generateAndInjectStyles(Vx(this.props,s,v)||Ud,this.props);var L=this.props.as||this.attrs.as||T,B=Ym(L),U={},O=Do({},this.props,this.attrs),N=void 0;for(N in O)N==="forwardedComponent"||N==="as"||(N==="forwardedRef"?U.ref=O[N]:N==="forwardedAs"?U.as=O[N]:(!B||ZD(N))&&(U[N]=O[N]));return this.props.style&&this.attrs.style&&(U.style=Do({},this.attrs.style,this.props.style)),U.className=Array.prototype.concat(c,w,P!==w?P:null,this.props.className,this.attrs.className).filter(Boolean).join(" "),ge.createElement(L,U)},t.prototype.buildExecutionContext=function(s,u,p){var v=this,c=Do({},u,{theme:s});return p.length&&(this.attrs={},p.forEach(function(w){var T=w,P=!1,L=void 0,B=void 0;Us(T)&&(T=T(c),P=!0);for(B in T)L=T[B],P||Us(L)&&!RB(L)&&!Cp(L)&&(L=L(c)),v.attrs[B]=L,c[B]=L})),c},t.prototype.generateAndInjectStyles=function(s,u){var p=u.forwardedComponent,v=p.attrs,c=p.componentStyle;if(p.warnTooManyClasses,c.isStatic&&!v.length)return c.generateAndInjectStyles(Ud,this.styleSheet);var w=c.generateAndInjectStyles(this.buildExecutionContext(s,u,v),this.styleSheet);return w},t}(ge.Component);function Sk(e,t,i){var s=Cp(e),u=!Ym(e),p=t.displayName,v=p===void 0?SB(e):p,c=t.componentId,w=c===void 0?LB(X2,t.displayName,t.parentComponentId):c,T=t.ParentComponent,P=T===void 0?OB:T,L=t.attrs,B=L===void 0?Zm:L,U=t.displayName&&t.componentId?W0(t.displayName)+"-"+t.componentId:t.componentId||w,O=s&&e.attrs?Array.prototype.concat(e.attrs,B).filter(Boolean):B,N=new X2(s?e.componentStyle.rules.concat(i):i,O,U),ae=void 0,q=function(K,ie){return kn.createElement(P,Do({},K,{forwardedComponent:ae,forwardedRef:ie}))};return q.displayName=v,ae=kn.forwardRef(q),ae.displayName=v,ae.attrs=O,ae.componentStyle=N,ae.foldedComponentIds=s?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):Zm,ae.styledComponentId=U,ae.target=s?e.target:e,ae.withComponent=function(K){var ie=t.componentId,_e=YD(t,["componentId"]),Se=ie&&ie+"-"+(Ym(K)?K:W0(Rx(K))),xe=Do({},_e,{attrs:O,componentId:Se,ParentComponent:P});return Sk(K,xe,i)},Object.defineProperty(ae,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(K){this._foldedDefaultProps=s?KD(e.defaultProps,K):K}}),ae.toString=function(){return"."+ae.styledComponentId},u&&qx(ae,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,styledComponentId:!0,target:!0,withComponent:!0}),ae}var DB=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Z0=function(t){return H0(Sk,t)};DB.forEach(function(e){Z0[e]=Z0(e)});var BB=function(){function e(t,i){ps(this,e),this.rules=t,this.componentId=i,this.isStatic=$x(t,Zm),js.master.hasId(i)||js.master.deferredInject(i,[])}return e.prototype.createStyles=function(i,s){var u=ih(this.rules,i,s),p=zx(u,"");s.inject(this.componentId,p)},e.prototype.removeStyles=function(i){var s=this.componentId;i.hasId(s)&&i.remove(s)},e.prototype.renderStyles=function(i,s){this.removeStyles(s),this.createStyles(i,s)},e}();bc&&(window.scCGSHMRCache={});function FB(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];var u=Vg.apply(void 0,[e].concat(i)),p="sc-global-"+jx(JSON.stringify(u)),v=new BB(u,p),c=function(w){Tp(T,w);function T(P){ps(this,T);var L=nh(this,w.call(this,P)),B=L.constructor,U=B.globalStyle,O=B.styledComponentId;return bc&&(window.scCGSHMRCache[O]=(window.scCGSHMRCache[O]||0)+1),L.state={globalStyle:U,styledComponentId:O},L}return T.prototype.componentWillUnmount=function(){window.scCGSHMRCache[this.state.styledComponentId]&&(window.scCGSHMRCache[this.state.styledComponentId]-=1),window.scCGSHMRCache[this.state.styledComponentId]===0&&this.state.globalStyle.removeStyles(this.styleSheet)},T.prototype.render=function(){var L=this;return kn.createElement(Hx,null,function(B){L.styleSheet=B||js.master;var U=L.state.globalStyle;return U.isStatic?(U.renderStyles(eB,L.styleSheet),null):kn.createElement(qg,null,function(O){var N=L.constructor.defaultProps,ae=Do({},L.props);return typeof O<"u"&&(ae.theme=Vx(L.props,O,N)),U.renderStyles(ae,L.styleSheet),null})})},T}(kn.Component);return c.globalStyle=v,c.styledComponentId=p,c}var NB=function(t){return t.replace(/\s|\\n/g,"")};function UB(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];var u=Vg.apply(void 0,[e].concat(i)),p=xk(jx(NB(JSON.stringify(u))));return new vk(p,zx(u,p,"@keyframes"))}var jB=function(e){var t=kn.forwardRef(function(i,s){return kn.createElement(qg,null,function(u){var p=e.defaultProps,v=Vx(i,u,p);return kn.createElement(e,Do({},i,{theme:v,ref:s}))})});return qx(t,e),t.displayName="WithTheme("+Rx(e)+")",t},$B={StyleSheet:js};const VB=Object.freeze(Object.defineProperty({__proto__:null,ServerStyleSheet:zB,StyleSheetConsumer:Hx,StyleSheetContext:Gx,StyleSheetManager:wk,ThemeConsumer:qg,ThemeContext:Jm,ThemeProvider:bk,__DO_NOT_USE_OR_YOU_WILL_BE_HAUNTED_BY_SPOOKY_GHOSTS:$B,createGlobalStyle:FB,css:Vg,default:Z0,isStyledComponent:Cp,keyframes:UB,withTheme:jB},Symbol.toStringTag,{value:"Module"})),qB=OS(VB);(function(e,t){(function(i,s){e.exports=s(ge,qB)})(typeof self<"u"?self:r_,function(i,s){return function(u){var p={};function v(c){if(p[c])return p[c].exports;var w=p[c]={i:c,l:!1,exports:{}};return u[c].call(w.exports,w,w.exports,v),w.l=!0,w.exports}return v.m=u,v.c=p,v.d=function(c,w,T){v.o(c,w)||Object.defineProperty(c,w,{enumerable:!0,get:T})},v.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},v.t=function(c,w){if(1&w&&(c=v(c)),8&w||4&w&&typeof c=="object"&&c&&c.__esModule)return c;var T=Object.create(null);if(v.r(T),Object.defineProperty(T,"default",{enumerable:!0,value:c}),2&w&&typeof c!="string")for(var P in c)v.d(T,P,(function(L){return c[L]}).bind(null,P));return T},v.n=function(c){var w=c&&c.__esModule?function(){return c.default}:function(){return c};return v.d(w,"a",w),w},v.o=function(c,w){return Object.prototype.hasOwnProperty.call(c,w)},v.p="dist/",v(v.s=9)}([function(u,p,v){u.exports=v(5)()},function(u,p){u.exports=i},function(u,p){u.exports=s},function(u,p){var v=function(c,w){return{parse:function(U,O){var N=JSON.parse(U,B).map(L),ae=N[0],q=O||T,W=typeof ae=="object"&&ae?function K(ie,_e,Se,xe){return Object.keys(Se).reduce(function(Me,Ze){var Le=Me[Ze];if(Le instanceof c){var Je=ie[Le];typeof Je!="object"||_e.has(Je)?Me[Ze]=xe.call(Me,Ze,Je):(_e.add(Je),Me[Ze]=xe.call(Me,Ze,K(ie,_e,Je,xe)))}else Me[Ze]=xe.call(Me,Ze,Le);return Me},Se)}(N,new Set,ae,q):ae;return q.call({"":W},"",W)},stringify:function(U,O,N){for(var ae,q=new Map,W=[],K=[],ie=O&&typeof O==typeof W?function(xe,Me){if(xe===""||-1<O.indexOf(xe))return Me}:O||T,_e=+P(q,W,ie.call({"":U},"",U)),Se=function(xe,Me){if(ae)return ae=!ae,Me;var Ze=ie.call(this,xe,Me);switch(typeof Ze){case"object":if(Ze===null)return Ze;case w:return q.get(Ze)||P(q,W,Ze)}return Ze};_e<W.length;_e++)ae=!0,K[_e]=JSON.stringify(W[_e],Se,N);return"["+K.join(",")+"]"}};function T(U,O){return O}function P(U,O,N){var ae=c(O.push(N)-1);return U.set(N,ae),ae}function L(U){return U instanceof c?c(U):U}function B(U,O){return typeof O===w?new c(O):O}}(String,"string");u.exports=v},function(u,p,v){u.exports=function(c,w){var T=["abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ","0123456789","~!@#$%^&()_+-={}[];',"],P="";(w=w||"aA0").split("").forEach(function(B){isNaN(parseInt(B))?/[a-z]/.test(B)?P+=T[0]:/[A-Z]/.test(B)?P+=T[1]:P+=T[3]:P+=T[2]}),c=c||30;for(var L="";c--;)L+=P.charAt(Math.floor(Math.random()*P.length));return L}},function(u,p,v){var c=v(6),w=v(7),T=v(8);u.exports=function(){function P(U,O,N,ae,q,W){W!==T&&w(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function L(){return P}P.isRequired=P;var B={array:P,bool:P,func:P,number:P,object:P,string:P,symbol:P,any:P,arrayOf:L,element:P,instanceOf:L,node:P,objectOf:L,oneOf:L,oneOfType:L,shape:L,exact:L};return B.checkPropTypes=c,B.PropTypes=B,B}},function(u,p,v){function c(T){return function(){return T}}var w=function(){};w.thatReturns=c,w.thatReturnsFalse=c(!1),w.thatReturnsTrue=c(!0),w.thatReturnsNull=c(null),w.thatReturnsThis=function(){return this},w.thatReturnsArgument=function(T){return T},u.exports=w},function(u,p,v){u.exports=function(c,w,T,P,L,B,U,O){if(!c){var N;if(w===void 0)N=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var ae=[T,P,L,B,U,O],q=0;(N=new Error(w.replace(/%s/g,function(){return ae[q++]}))).name="Invariant Violation"}throw N.framesToPop=1,N}}},function(u,p,v){u.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(u,p,v){v.r(p);var c=v(1),w=v.n(c),T=v(0),P=v.n(T),L=v(4),B=v.n(L),U=v(2),O=v.n(U),N=function(Z){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,ve=function(He){He=He.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(Ue,we,Tt,qt){return we+we+Tt+Tt+qt+qt});var gt=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(He);return gt?{r:parseInt(gt[1],16),g:parseInt(gt[2],16),b:parseInt(gt[3],16)}:null}(Z);return"rgba(".concat(ve.r,", ").concat(ve.g,", ").concat(ve.b,", ").concat(Q,")")};function ae(){var Z=ie([`
  0% { box-shadow: 0 0 0 0 `,`; }
  70% { box-shadow: 0 0 0 10px `,`; }
  100% { box-shadow: 0 0 0 0 `,`; }
`]);return ae=function(){return Z},Z}function q(){var Z=ie([`
  25% { transform: rotate(-1deg); }
  100% { transform: rotate(1deg); }
`]);return q=function(){return Z},Z}function W(){var Z=ie([`
  100% { transform: scale(1); }
`]);return W=function(){return Z},Z}function K(){var Z=ie([`
  0% { opacity: .2; }
  20% { opacity: 1; }
  100% { opacity: .2; }
`]);return K=function(){return Z},Z}function ie(Z,Q){return Q||(Q=Z.slice(0)),Object.freeze(Object.defineProperties(Z,{raw:{value:Object.freeze(Q)}}))}var _e=Object(U.keyframes)(K()),Se=Object(U.keyframes)(W()),xe=Object(U.keyframes)(q());function Me(){var Z=function(Q,ve){return ve||(ve=Q.slice(0)),Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(ve)}}))}([`
  animation: `,` 1.4s infinite both;
  animation-delay: `,`;
`]);return Me=function(){return Z},Z}var Ze=O.a.span(Me(),_e,function(Z){return Z.delay}),Le=function(){return w.a.createElement("span",{className:"rsc-loading"},w.a.createElement(Ze,{delay:"0s"},"."),w.a.createElement(Ze,{delay:".2s"},"."),w.a.createElement(Ze,{delay:".4s"},"."))};function Je(){var Z=function(Q,ve){return ve||(ve=Q.slice(0)),Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(ve)}}))}([`
  background: #fff;
  border-radius: 5px;
  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;
  display: flex;
  justify-content: center;
  margin: 0 6px 10px 6px;
  padding: 16px;
`]);return Je=function(){return Z},Z}var ur=O.a.div(Je());function Nt(Z){return(Nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q})(Z)}function mr(Z,Q){for(var ve=0;ve<Q.length;ve++){var He=Q[ve];He.enumerable=He.enumerable||!1,He.configurable=!0,"value"in He&&(He.writable=!0),Object.defineProperty(Z,He.key,He)}}function tt(Z){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(Q){return Q.__proto__||Object.getPrototypeOf(Q)})(Z)}function Mt(Z,Q){return(Mt=Object.setPrototypeOf||function(ve,He){return ve.__proto__=He,ve})(Z,Q)}function kt(Z){if(Z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z}function $e(Z,Q,ve){return Q in Z?Object.defineProperty(Z,Q,{value:ve,enumerable:!0,configurable:!0,writable:!0}):Z[Q]=ve,Z}var lt=function(Z){function Q(){var gt,Ue,we,Tt;(function(ut,yt){if(!(ut instanceof yt))throw new TypeError("Cannot call a class as a function")})(this,Q);for(var qt=arguments.length,qe=new Array(qt),nt=0;nt<qt;nt++)qe[nt]=arguments[nt];return we=this,Tt=(gt=tt(Q)).call.apply(gt,[this].concat(qe)),Ue=!Tt||Nt(Tt)!=="object"&&typeof Tt!="function"?kt(we):Tt,$e(kt(kt(Ue)),"state",{loading:!0}),$e(kt(kt(Ue)),"renderComponent",function(){var ut=Ue.props,yt=ut.step,Ft=ut.steps,Xt=ut.previousStep,Gt=ut.triggerNextStep,nn=yt.component;return w.a.cloneElement(nn,{step:yt,steps:Ft,previousStep:Xt,triggerNextStep:Gt})}),Ue}var ve,He;return function(gt,Ue){if(typeof Ue!="function"&&Ue!==null)throw new TypeError("Super expression must either be null or a function");gt.prototype=Object.create(Ue&&Ue.prototype,{constructor:{value:gt,writable:!0,configurable:!0}}),Ue&&Mt(gt,Ue)}(Q,c.Component),ve=Q,(He=[{key:"componentDidMount",value:function(){var gt=this,Ue=this.props,we=Ue.speak,Tt=Ue.step,qt=Ue.previousValue,qe=Ue.triggerNextStep,nt=Tt.delay,ut=Tt.waitAction;setTimeout(function(){gt.setState({loading:!1},function(){ut||Tt.rendered||qe(),we(Tt,qt)})},nt)}},{key:"render",value:function(){var gt=this.state.loading,Ue=this.props.style;return w.a.createElement(ur,{className:"rsc-cs",style:Ue},gt?w.a.createElement(Le,null):this.renderComponent())}}])&&mr(ve.prototype,He),Q}();lt.propTypes={previousStep:P.a.objectOf(P.a.any).isRequired,previousValue:P.a.oneOfType([P.a.string,P.a.bool,P.a.number,P.a.object,P.a.array]),speak:P.a.func,step:P.a.objectOf(P.a.any).isRequired,steps:P.a.objectOf(P.a.any).isRequired,style:P.a.objectOf(P.a.any).isRequired,triggerNextStep:P.a.func.isRequired},lt.defaultProps={previousValue:"",speak:function(){}};var wt=lt;function rr(){var Z=function(Q,ve){return ve||(ve=Q.slice(0)),Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(ve)}}))}([`
  animation: `,` 0.3s ease forwards;
  cursor: pointer;
  display: inline-block;
  margin: 2px;
  transform: scale(0);
`]);return rr=function(){return Z},Z}var or=O.a.li(rr(),Se),fr={background:"#f5f8fb",fontFamily:"monospace",headerBgColor:"#6e48aa",headerFontColor:"#fff",headerFontSize:"16px",botBubbleColor:"#6E48AA",botFontColor:"#fff",userBubbleColor:"#fff",userFontColor:"#4a4a4a"};function dr(){var Z=function(Q,ve){return ve||(ve=Q.slice(0)),Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(ve)}}))}([`
  background: `,`;
  border: 0;
  border-radius: 22px;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);
  color: `,`;
  display: inline-block;
  font-size: 14px;
  padding: 12px;

  &:hover {
    opacity: 0.7;
  }
  &:active,
  &:hover:focus {
    outline:none;
  }
`]);return dr=function(){return Z},Z}var Jt=O.a.button(dr(),function(Z){return Z.theme.botBubbleColor},function(Z){return Z.theme.botFontColor});Jt.defaultProps={theme:fr};var Ir=Jt;function zr(){var Z=function(Q,ve){return ve||(ve=Q.slice(0)),Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(ve)}}))}([`
  margin: 2px 0 12px 0;
  padding: 0 6px;
`]);return zr=function(){return Z},Z}var Fr=O.a.ul(zr());function sr(){var Z=function(Q,ve){return ve||(ve=Q.slice(0)),Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(ve)}}))}([""]);return sr=function(){return Z},Z}var wn=O.a.div(sr());function kr(Z){return(kr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q})(Z)}function Mn(Z,Q){for(var ve=0;ve<Q.length;ve++){var He=Q[ve];He.enumerable=He.enumerable||!1,He.configurable=!0,"value"in He&&(He.writable=!0),Object.defineProperty(Z,He.key,He)}}function hn(Z){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(Q){return Q.__proto__||Object.getPrototypeOf(Q)})(Z)}function Ae(Z,Q){return(Ae=Object.setPrototypeOf||function(ve,He){return ve.__proto__=He,ve})(Z,Q)}function Pr(Z){if(Z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z}function Rn(Z,Q,ve){return Q in Z?Object.defineProperty(Z,Q,{value:ve,enumerable:!0,configurable:!0,writable:!0}):Z[Q]=ve,Z}var pr=function(Z){function Q(){var gt,Ue,we,Tt;(function(ut,yt){if(!(ut instanceof yt))throw new TypeError("Cannot call a class as a function")})(this,Q);for(var qt=arguments.length,qe=new Array(qt),nt=0;nt<qt;nt++)qe[nt]=arguments[nt];return we=this,Tt=(gt=hn(Q)).call.apply(gt,[this].concat(qe)),Ue=!Tt||kr(Tt)!=="object"&&typeof Tt!="function"?Pr(we):Tt,Rn(Pr(Pr(Ue)),"onOptionClick",function(ut){var yt=ut.value;(0,Ue.props.triggerNextStep)({value:yt})}),Rn(Pr(Pr(Ue)),"renderOption",function(ut){var yt=Ue.props,Ft=yt.bubbleOptionStyle,Xt=yt.step.user,Gt=ut.value,nn=ut.label;return w.a.createElement(or,{key:Gt,className:"rsc-os-option"},w.a.createElement(Ir,{className:"rsc-os-option-element",style:Ft,user:Xt,onClick:function(){return Ue.onOptionClick({value:Gt})}},nn))}),Ue}var ve,He;return function(gt,Ue){if(typeof Ue!="function"&&Ue!==null)throw new TypeError("Super expression must either be null or a function");gt.prototype=Object.create(Ue&&Ue.prototype,{constructor:{value:gt,writable:!0,configurable:!0}}),Ue&&Ae(gt,Ue)}(Q,c.Component),ve=Q,(He=[{key:"render",value:function(){var gt=this.props.step.options;return w.a.createElement(wn,{className:"rsc-os"},w.a.createElement(Fr,{className:"rsc-os-options"},Object.keys(gt).map(function(Ue){return gt[Ue]}).map(this.renderOption)))}}])&&Mn(ve.prototype,He),Q}();pr.propTypes={bubbleOptionStyle:P.a.objectOf(P.a.any).isRequired,step:P.a.objectOf(P.a.any).isRequired,triggerNextStep:P.a.func.isRequired};var Vt=pr;function zn(){var Z=function(Q,ve){return ve||(ve=Q.slice(0)),Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(ve)}}))}([`
  animation: `,` 0.3s ease forwards;
  background: `,`;
  border-radius: `,`;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);
  color: `,`;
  display: inline-block;
  font-size: 14px;
  max-width: 50%;
  margin: `,`;
  overflow: hidden;
  position: relative;
  padding: 12px;
  transform: scale(0);
  transform-origin: `,`;
`]);return zn=function(){return Z},Z}var Kr=O.a.div(zn(),Se,function(Z){return Z.user?Z.theme.userBubbleColor:Z.theme.botBubbleColor},function(Z){var Q=Z.isFirst,ve=Z.isLast,He=Z.user;return Q||ve?!Q&&ve?He?"18px 0 18px 18px":"0 18px 18px 18px":Z.user?"18px 18px 0 18px":"18px 18px 18px 0":He?"18px 0 0 18px":"0 18px 18px 0px"},function(Z){return Z.user?Z.theme.userFontColor:Z.theme.botFontColor},function(Z){var Q=Z.isFirst,ve=Z.showAvatar,He=Z.user;return!Q&&ve?He?"-8px 46px 10px 0":"-8px 0 10px 46px":Q||ve?"0 0 10px 0":He?"-8px 0px 10px 0":"-8px 0 10px 0px"},function(Z){var Q=Z.isFirst,ve=Z.user;return Q?ve?"bottom right":"bottom left":ve?"top right":"top left"});Kr.defaultProps={theme:fr};var Ln=Kr;function Tr(){var Z=function(Q,ve){return ve||(ve=Q.slice(0)),Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(ve)}}))}([`
  animation: `,` 0.3s ease forwards;
  border-radius: `,`;
  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;
  height: 40px;
  min-width: 40px;
  padding: 3px;
  transform: scale(0);
  transform-origin: `,`;
  width: 40;
`]);return Tr=function(){return Z},Z}var Vn=O.a.img(Tr(),Se,function(Z){return Z.user?"50% 50% 50% 0":"50% 50% 0 50%"},function(Z){return Z.user?"bottom left":"bottom right"});function yn(){var Z=function(Q,ve){return ve||(ve=Q.slice(0)),Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(ve)}}))}([`
  display: inline-block;
  order: `,`;
  padding: 6px;
`]);return yn=function(){return Z},Z}var rn=O.a.div(yn(),function(Z){return Z.user?"1":"0"});function Ve(){var Z=function(Q,ve){return ve||(ve=Q.slice(0)),Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(ve)}}))}([`
  align-items: flex-end;
  display: flex;
  justify-content: `,`;
`]);return Ve=function(){return Z},Z}var Sn=O.a.div(Ve(),function(Z){return Z.user?"flex-end":"flex-start"});function Xr(Z){return(Xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q})(Z)}function Wt(Z,Q){for(var ve=0;ve<Q.length;ve++){var He=Q[ve];He.enumerable=He.enumerable||!1,He.configurable=!0,"value"in He&&(He.writable=!0),Object.defineProperty(Z,He.key,He)}}function dn(Z){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(Q){return Q.__proto__||Object.getPrototypeOf(Q)})(Z)}function Xe(Z,Q){return(Xe=Object.setPrototypeOf||function(ve,He){return ve.__proto__=He,ve})(Z,Q)}function Rt(Z){if(Z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z}function Ut(Z,Q,ve){return Q in Z?Object.defineProperty(Z,Q,{value:ve,enumerable:!0,configurable:!0,writable:!0}):Z[Q]=ve,Z}var $r=function(Z){function Q(){var gt,Ue,we,Tt;(function(ut,yt){if(!(ut instanceof yt))throw new TypeError("Cannot call a class as a function")})(this,Q);for(var qt=arguments.length,qe=new Array(qt),nt=0;nt<qt;nt++)qe[nt]=arguments[nt];return we=this,Tt=(gt=dn(Q)).call.apply(gt,[this].concat(qe)),Ue=!Tt||Xr(Tt)!=="object"&&typeof Tt!="function"?Rt(we):Tt,Ut(Rt(Rt(Ue)),"state",{loading:!0}),Ut(Rt(Rt(Ue)),"getMessage",function(){var ut=Ue.props,yt=ut.previousValue,Ft=ut.step.message;return Ft?Ft.replace(/{previousValue}/g,yt):""}),Ut(Rt(Rt(Ue)),"renderMessage",function(){var ut=Ue.props,yt=ut.step,Ft=ut.steps,Xt=ut.previousStep,Gt=ut.triggerNextStep,nn=yt.component;return nn?w.a.cloneElement(nn,{step:yt,steps:Ft,previousStep:Xt,triggerNextStep:Gt}):Ue.getMessage()}),Ue}var ve,He;return function(gt,Ue){if(typeof Ue!="function"&&Ue!==null)throw new TypeError("Super expression must either be null or a function");gt.prototype=Object.create(Ue&&Ue.prototype,{constructor:{value:gt,writable:!0,configurable:!0}}),Ue&&Xe(gt,Ue)}(Q,c.Component),ve=Q,(He=[{key:"componentDidMount",value:function(){var gt=this,Ue=this.props,we=Ue.step,Tt=Ue.speak,qt=Ue.previousValue,qe=Ue.triggerNextStep,nt=we.component,ut=we.delay,yt=we.waitAction,Ft=nt&&yt;setTimeout(function(){gt.setState({loading:!1},function(){Ft||we.rendered||qe(),Tt(we,qt)})},ut)}},{key:"render",value:function(){var gt=this.props,Ue=gt.step,we=gt.isFirst,Tt=gt.isLast,qt=gt.avatarStyle,qe=gt.bubbleStyle,nt=gt.hideBotAvatar,ut=gt.hideUserAvatar,yt=this.state.loading,Ft=Ue.avatar,Xt=Ue.user,Gt=Xt?!ut:!nt;return w.a.createElement(Sn,{className:"rsc-ts ".concat(Xt?"rsc-ts-user":"rsc-ts-bot"),user:Xt},w.a.createElement(rn,{className:"rsc-ts-image-container",user:Xt},we&&Gt&&w.a.createElement(Vn,{className:"rsc-ts-image",style:qt,showAvatar:Gt,user:Xt,src:Ft,alt:"avatar"})),w.a.createElement(Ln,{className:"rsc-ts-bubble",style:qe,user:Xt,showAvatar:Gt,isFirst:we,isLast:Tt},yt?w.a.createElement(Le,null):this.renderMessage()))}}])&&Wt(ve.prototype,He),Q}();$r.propTypes={avatarStyle:P.a.objectOf(P.a.any).isRequired,isFirst:P.a.bool.isRequired,isLast:P.a.bool.isRequired,bubbleStyle:P.a.objectOf(P.a.any).isRequired,hideBotAvatar:P.a.bool.isRequired,hideUserAvatar:P.a.bool.isRequired,previousStep:P.a.objectOf(P.a.any),previousValue:P.a.oneOfType([P.a.string,P.a.bool,P.a.number,P.a.object,P.a.array]),speak:P.a.func,step:P.a.objectOf(P.a.any).isRequired,steps:P.a.objectOf(P.a.any),triggerNextStep:P.a.func.isRequired},$r.defaultProps={previousStep:{},previousValue:"",speak:function(){},steps:{}};var Mr=$r,zt=[{key:"id",types:["string","number"],required:!0},{key:"user",types:["boolean"],required:!0},{key:"trigger",types:["string","number","function"],required:!1},{key:"validator",types:["function"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],vn=[{key:"id",types:["string","number"],required:!0},{key:"message",types:["string","function"],required:!0},{key:"avatar",types:["string"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"delay",types:["number"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],pn=[{key:"id",types:["string","number"],required:!0},{key:"options",types:["object"],required:!0},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],si=[{key:"id",types:["string","number"],required:!0},{key:"component",types:["any"],required:!0},{key:"avatar",types:["string"],required:!1},{key:"replace",types:["boolean"],required:!1},{key:"waitAction",types:["boolean"],required:!1},{key:"asMessage",types:["boolean"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"delay",types:["number"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Ai=[{key:"id",types:["string","number"],required:!0},{key:"update",types:["string","number"],required:!0},{key:"trigger",types:["string","number","function"],required:!0},{key:"placeholder",types:["string"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Yr=v(3);function Cr(Z){return(Cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q})(Z)}var Ni={parse:function(Z){var Q=[];if(Z.user)Q=zt;else if(Z.message)Q=vn;else if(Z.options)Q=pn;else if(Z.component)Q=si;else{if(!Z.update)throw new Error("The step ".concat(Object(Yr.stringify)(Z)," is invalid"));Q=Ai}for(var ve=0,He=Q.length;ve<He;ve+=1){var gt=Q[ve],Ue=gt.key,we=gt.types,Tt=gt.required;if(!Z[Ue]&&Tt)throw new Error("Key '".concat(Ue,"' is required in step ").concat(Object(Yr.stringify)(Z)));if(Z[Ue]&&we[0]!=="any"&&we.indexOf(Cr(Z[Ue]))<0)throw new Error("The type of '".concat(Ue,"' value must be ").concat(we.join(" or ")," instead of ").concat(Cr(Z[Ue])))}var qt=Q.map(function(qe){return qe.key});for(var Ue in Z)qt.indexOf(Ue)<0&&(console.error("Invalid key '".concat(Ue,"' in step '").concat(Z.id,"'")),delete Z[Ue]);return Z},checkInvalidIds:function(Z){for(var Q in Z){var ve=Z[Q],He=Z[Q].trigger;if(typeof He!="function"){if(ve.options)for(var gt=ve.options.filter(function(qt){return typeof qt.trigger!="function"}).map(function(qt){return qt.trigger}),Ue=0,we=gt.length;Ue<we;Ue+=1){var Tt=gt[Ue];if(Tt&&!Z[Tt])throw new Error("The id '".concat(Tt,"' triggered by option ").concat(Ue+1," in step '").concat(Z[Q].id,"' does not exist"))}else if(He&&!Z[He])throw new Error("The id '".concat(He,"' triggered by step '").concat(Z[Q].id,"' does not exist"))}}}},li=function(Z,Q){var ve=Object(Yr.parse)(Object(Yr.stringify)(Q));for(var He in ve)for(var gt=0,Ue=ve[He].length;gt<Ue;gt+=1)ve[He][gt].component&&(ve[He][gt].component=ve[He][gt].id);localStorage.setItem(Z,Object(Yr.stringify)(ve))};function J(){var Z=function(Q,ve){return ve||(ve=Q.slice(0)),Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(ve)}}))}([`
  background: `,`;
  border-radius: 10px;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);
  font-family: `,`;
  overflow: hidden;
  position: `,`;
  bottom: `,`;
  top: `,`;
  right: `,`;
  left: `,`;
  width: `,`;
  height: `,`;
  z-index: 999;
  transform: `,`;
  transform-origin: `,`;
  transition: transform 0.3s ease;

  @media screen and (max-width: 568px) {
    border-radius: `,`;
    bottom: 0 !important;
    left: initial !important;
    height: 100%;
    right: 0 !important;
    top: initial !important;
    width: 100%;
  }
`]);return J=function(){return Z},Z}var F=O.a.div(J(),function(Z){return Z.theme.background},function(Z){return Z.theme.fontFamily},function(Z){return Z.floating?"fixed":"relative"},function(Z){var Q=Z.floating,ve=Z.floatingStyle;return Q?ve.bottom||"32px":"initial"},function(Z){var Q=Z.floating,ve=Z.floatingStyle;return Q&&ve.top||"initial"},function(Z){var Q=Z.floating,ve=Z.floatingStyle;return Q?ve.right||"32px":"initial"},function(Z){var Q=Z.floating,ve=Z.floatingStyle;return Q&&ve.left||"initial"},function(Z){return Z.width},function(Z){return Z.height},function(Z){return Z.opened?"scale(1)":"scale(0)"},function(Z){return Z.floatingStyle.transformOrigin||"bottom right"},function(Z){return Z.floating?"0":""});F.defaultProps={theme:fr};var $=F;function X(){var Z=function(Q,ve){return ve||(ve=Q.slice(0)),Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(ve)}}))}([`
  height: calc(`," - ",`);
  overflow-y: scroll;
  margin-top: 2px;
  padding-top: 6px;

  @media screen and (max-width: 568px) {
    height: `,`;
  }
`]);return X=function(){return Z},Z}var se=O.a.div(X(),function(Z){return Z.height},function(Z){return Z.hideInput?"56px":"112px"},function(Z){return Z.floating?"calc(100% - 112px)":""});function ue(){var Z=function(Q,ve){return ve||(ve=Q.slice(0)),Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(ve)}}))}([`
  align-items: center;
  background: `,`;
  color: `,`;
  display: flex;
  fill: `,`;
  height: 56px;
  justify-content: space-between;
  padding: 0 10px;
`]);return ue=function(){return Z},Z}var me=O.a.div(ue(),function(Z){return Z.theme.headerBgColor},function(Z){return Z.theme.headerFontColor},function(Z){return Z.theme.headerFontColor});me.defaultProps={theme:fr};var he=me;function ce(){var Z=function(Q,ve){return ve||(ve=Q.slice(0)),Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(ve)}}))}([`
  margin: 0;
  font-size: `,`;
`]);return ce=function(){return Z},Z}var ye=O.a.h2(ce(),function(Z){return Z.theme.headerFontSize});ye.defaultProps={theme:fr};var ze=ye;function Oe(){var Z=function(Q,ve){return ve||(ve=Q.slice(0)),Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(ve)}}))}([`
  cursor: pointer;
`]);return Oe=function(){return Z},Z}var Be=O.a.a(Oe());function bt(){var Z=function(Q,ve){return ve||(ve=Q.slice(0)),Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(ve)}}))}([`
  align-items: center;
  cursor: pointer;
  background: `,`;
  bottom: 32px;
  border-radius: 100%;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);
  display: flex;
  fill: `,`;
  height: 56px;
  justify-content: center;
  position: fixed;
  right: 32px;
  transform: `,`;
  transition: transform 0.3s ease;
  width: 56px;
  z-index: 999;
`]);return bt=function(){return Z},Z}var jt=O.a.a(bt(),function(Z){return Z.theme.headerBgColor},function(Z){return Z.theme.headerFontColor},function(Z){return Z.opened?"scale(0)":"scale(1)"});jt.defaultProps={theme:{headerBgColor:"#6e48aa",headerFontColor:"#fff"}};var mt=jt;function St(){var Z=function(Q,ve){return ve||(ve=Q.slice(0)),Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(ve)}}))}([`
  height: 24px;
  width: 24px;
`]);return St=function(){return Z},Z}var Lt=O.a.img(St());function lr(){var Z=function(Q,ve){return ve||(ve=Q.slice(0)),Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(ve)}}))}([`
  position: relative;
`]);return lr=function(){return Z},Z}var Kt=O.a.div(lr());function gr(){var Z=qr([`
          `,` .2s ease
        `]);return gr=function(){return Z},Z}function Ar(){var Z=qr([`
  animation: `,`;
  border: 0;
  border-radius: 0;
  border-bottom-left-radius: 10px;
  border-bottom-right-radius: 10px;
  border-top: `,`;
  box-shadow: `,`;
  box-sizing: border-box;
  color: `,`;
  font-size: 16px;
  opacity: `,`;
  outline: none;
  padding: `,`;
  width: 100%;
  -webkit-appearance: none;

  &:disabled {
    background: #fff;
  }

  @media screen and (max-width: 568px) {
    border-bottom-left-radius: `,`;
    border-bottom-right-radius: `,`;
  }
`]);return Ar=function(){return Z},Z}function qr(Z,Q){return Q||(Q=Z.slice(0)),Object.freeze(Object.defineProperties(Z,{raw:{value:Object.freeze(Q)}}))}var De=O.a.input(Ar(),function(Z){return Z.invalid?Object(U.css)(gr(),xe):""},function(Z){return Z.invalid?"0":"1px solid #eee"},function(Z){return Z.invalid?"inset 0 0 2px #E53935":"none"},function(Z){return Z.invalid?"#E53935":""},function(Z){return Z.disabled&&!Z.invalid?".5":"1"},function(Z){return Z.hasButton?"16px 52px 16px 10px":"16px 10px"},function(Z){return Z.floating?"0":"10px"},function(Z){return Z.floating?"0":"10px"});function Qe(){var Z=Ot([`
            `,` 2s ease infinite
          `]);return Qe=function(){return Z},Z}function Et(){var Z=Ot([`
  background-color: transparent;
  border: 0;
  border-bottom-right-radius: 10px;
  box-shadow: none;
  cursor: `,`;
  fill: `,`;
  opacity: `,`;
  outline: none;
  padding: 14px 16px 12px 16px;
  position: absolute;
  right: 0;
  top: 0;
  &:before {
    content: '';
    position: absolute;
    width: 23px;
    height: 23px;
    border-radius: 50%;
    animation: `,`;
  }
  &:not(:disabled):hover {
    opacity: 0.7;
  }
`]);return Et=function(){return Z},Z}function Ot(Z,Q){return Q||(Q=Z.slice(0)),Object.freeze(Object.defineProperties(Z,{raw:{value:Object.freeze(Q)}}))}var it=O.a.button(Et(),function(Z){return Z.disabled?"default":"pointer"},function(Z){var Q=Z.speaking,ve=Z.invalid,He=Z.theme;return Q?He.headerBgColor:ve?"#E53935":"#4a4a4a"},function(Z){return Z.disabled&&!Z.invalid?".5":"1"},function(Z){var Q,ve=Z.theme;return Z.speaking?Object(U.css)(Qe(),(Q=ve.headerBgColor,Object(U.keyframes)(ae(),N(Q,.4),N(Q,0),N(Q,0)))):""});it.defaultProps={theme:fr};var cr=it;function Re(){return(Re=Object.assign||function(Z){for(var Q=1;Q<arguments.length;Q++){var ve=arguments[Q];for(var He in ve)Object.prototype.hasOwnProperty.call(ve,He)&&(Z[He]=ve[He])}return Z}).apply(this,arguments)}function yr(Z,Q){for(var ve=0;ve<Q.length;ve++){var He=Q[ve];He.enumerable=He.enumerable||!1,He.configurable=!0,"value"in He&&(He.writable=!0),Object.defineProperty(Z,He.key,He)}}function $t(Z,Q,ve){return Q&&yr(Z.prototype,Q),ve&&yr(Z,ve),Z}var Zr=null,Qt=function(){},hr=function(){function Z(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qt,ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qt,He=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Qt,gt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"en";return function(Ue,we){if(!(Ue instanceof we))throw new TypeError("Cannot call a class as a function")}(this,Z),Zr||(Zr=this),this.state={inputValue:"",lang:gt,onChange:Q,onEnd:ve,onStop:He},this.onResult=this.onResult.bind(this),this.onEnd=this.onEnd.bind(this),this.setup(),Zr}return $t(Z,null,[{key:"isSupported",value:function(){return"webkitSpeechRecognition"in window}}]),$t(Z,[{key:"onChange",value:function(Q){var ve=this.state.onChange;this.setState({inputValue:Q}),ve(Q)}},{key:"onFinal",value:function(Q){this.setState({inputValue:Q}),this.recognition.stop()}},{key:"onEnd",value:function(){var Q=this.state,ve=Q.onStop,He=Q.onEnd,gt=Q.force;this.setState({speaking:!1}),gt?ve():He()}},{key:"onResult",value:function(Q){for(var ve="",He="",gt=Q.resultIndex;gt<Q.results.length;gt+=1)Q.results[gt].isFinal?(He+=Q.results[gt][0].transcript,this.onFinal(He)):(ve+=Q.results[gt][0].transcript,this.onChange(ve))}},{key:"setState",value:function(Q){this.state=Re({},this.state,Q)}},{key:"setup",value:function(){if(!Z.isSupported())return this;var Q=window.webkitSpeechRecognition;return this.recognition=new Q,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang=this.state.lang,this.recognition.onresult=this.onResult,this.recognition.onend=this.onEnd,this}},{key:"setLang",value:function(Q){return this.setState({lang:Q}),this.setup(),this}},{key:"speak",value:function(){return Z.isSupported()?(this.state.speaking?(this.setState({force:!0}),this.recognition.stop()):(this.recognition.start(),this.setState({speaking:!0,inputValue:""})),this):this}}]),Z}(),Nr=function(){return w.a.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},w.a.createElement("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"}),w.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},er=function(){return w.a.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},w.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),w.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},On=function(Z){var Q=Z.size;return w.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:Q,height:Q,viewBox:"0 0 500 500"},w.a.createElement("g",null,w.a.createElement("g",null,w.a.createElement("polygon",{points:"0,497.25 535.5,267.75 0,38.25 0,216.75 382.5,267.75 0,318.75"}))))};On.propTypes={size:P.a.number},On.defaultProps={size:20};var Lr=On,Yi=function(Z){var Q=Z.size;return w.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:Q,height:Q,viewBox:"0 0 400 400"},w.a.createElement("g",null,w.a.createElement("path",{d:"M290.991,240.991c0,26.392-21.602,47.999-48.002,47.999h-11.529c-26.4,0-48.002-21.607-48.002-47.999V104.002   c0-26.4,21.602-48.004,48.002-48.004h11.529c26.4,0,48.002,21.604,48.002,48.004V240.991z"}),w.a.createElement("path",{d:"M342.381,209.85h-8.961c-4.932,0-8.961,4.034-8.961,8.961v8.008c0,50.26-37.109,91.001-87.361,91.001   c-50.26,0-87.109-40.741-87.109-91.001v-8.008c0-4.927-4.029-8.961-8.961-8.961h-8.961c-4.924,0-8.961,4.034-8.961,8.961v8.008   c0,58.862,40.229,107.625,96.07,116.362v36.966h-34.412c-4.932,0-8.961,4.039-8.961,8.971v17.922c0,4.923,4.029,8.961,8.961,8.961   h104.688c4.926,0,8.961-4.038,8.961-8.961v-17.922c0-4.932-4.035-8.971-8.961-8.971h-34.43v-36.966   c55.889-8.729,96.32-57.5,96.32-116.362v-8.008C351.342,213.884,347.303,209.85,342.381,209.85z"})))};Yi.propTypes={size:P.a.number},Yi.defaultProps={size:20};var qn=Yi,Dn=function(){return/iphone|ipod|android|ie|blackberry|fennec/i.test(navigator.userAgent)},xr=function(Z){return typeof Z=="string"},Gn=function(Z){return function(Q,ve){var He=Z.lang,gt=Z.voice,Ue=Z.enable,we=Q.user;if(window.SpeechSynthesisUtterance&&window.speechSynthesis&&!we&&Ue){var Tt=function(qe){var nt=qe.message,ut=qe.metadata,yt=ut===void 0?{}:ut;return xr(yt.speak)?yt.speak:xr(nt)?nt:""}(Q),qt=new window.SpeechSynthesisUtterance;qt.text=Tt.replace(/{previousValue}/g,ve),qt.lang=He,qt.voice=gt,window.speechSynthesis.speak(qt)}}};function vr(Z){return(vr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q})(Z)}function _n(){return(_n=Object.assign||function(Z){for(var Q=1;Q<arguments.length;Q++){var ve=arguments[Q];for(var He in ve)Object.prototype.hasOwnProperty.call(ve,He)&&(Z[He]=ve[He])}return Z}).apply(this,arguments)}function So(Z,Q){for(var ve=0;ve<Q.length;ve++){var He=Q[ve];He.enumerable=He.enumerable||!1,He.configurable=!0,"value"in He&&(He.writable=!0),Object.defineProperty(Z,He.key,He)}}function Fo(Z){return(Fo=Object.setPrototypeOf?Object.getPrototypeOf:function(Q){return Q.__proto__||Object.getPrototypeOf(Q)})(Z)}function Ur(Z,Q){return(Ur=Object.setPrototypeOf||function(ve,He){return ve.__proto__=He,ve})(Z,Q)}function Yt(Z){if(Z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z}function Gr(Z,Q,ve){return Q in Z?Object.defineProperty(Z,Q,{value:ve,enumerable:!0,configurable:!0,writable:!0}):Z[Q]=ve,Z}var Bn=function(Z){function Q(Ue){var we,Tt,qt;return function(qe,nt){if(!(qe instanceof nt))throw new TypeError("Cannot call a class as a function")}(this,Q),Tt=this,qt=Fo(Q).call(this,Ue),we=!qt||vr(qt)!=="object"&&typeof qt!="function"?Yt(Tt):qt,Gr(Yt(Yt(we)),"onNodeInserted",function(qe){var nt=qe.currentTarget;we.props.enableSmoothScroll&&we.supportsScrollBehavior?nt.scroll({top:nt.scrollHeight,left:0,behavior:"smooth"}):nt.scrollTop=nt.scrollHeight}),Gr(Yt(Yt(we)),"onResize",function(){we.content.scrollTop=we.content.scrollHeight}),Gr(Yt(Yt(we)),"onRecognitionChange",function(qe){we.setState({inputValue:qe})}),Gr(Yt(Yt(we)),"onRecognitionEnd",function(){we.setState({speaking:!1}),we.handleSubmitButton()}),Gr(Yt(Yt(we)),"onRecognitionStop",function(){we.setState({speaking:!1})}),Gr(Yt(Yt(we)),"onValueChange",function(qe){we.setState({inputValue:qe.target.value})}),Gr(Yt(Yt(we)),"getTriggeredStep",function(qe,nt){var ut=we.generateRenderedStepsById();return typeof qe=="function"?qe({value:nt,steps:ut}):qe}),Gr(Yt(Yt(we)),"getStepMessage",function(qe){var nt=we.state.previousSteps,ut=nt.length>0?nt.length-1:0,yt=we.generateRenderedStepsById(),Ft=nt[ut].value;return typeof qe=="function"?qe({previousValue:Ft,steps:yt}):qe}),Gr(Yt(Yt(we)),"generateRenderedStepsById",function(){for(var qe=we.state.previousSteps,nt={},ut=0,yt=qe.length;ut<yt;ut+=1){var Ft=qe[ut],Xt=Ft.id,Gt=Ft.message,nn=Ft.value,ar=Ft.metadata;nt[Xt]={id:Xt,message:Gt,value:nn,metadata:ar}}return nt}),Gr(Yt(Yt(we)),"triggerNextStep",function(qe){var nt=we.props.enableMobileAutoFocus,ut=we.state,yt=ut.defaultUserSettings,Ft=ut.previousSteps,Xt=ut.renderedSteps,Gt=ut.steps,nn=we.state,ar=nn.currentStep,Jr=nn.previousStep,Si=ar.end;if(qe&&qe.value&&(ar.value=qe.value),qe&&qe.hideInput&&(ar.hideInput=qe.hideInput),qe&&qe.trigger&&(ar.trigger=we.getTriggeredStep(qe.trigger,qe.value)),Si)we.handleEnd();else if(ar.options&&qe){var En=ar.options.filter(function(Ha){return Ha.value===qe.value})[0],Ei=we.getTriggeredStep(En.trigger,ar.value);delete ar.options,ar=_n({},ar,En,yt,{user:!0,message:En.label,trigger:Ei}),Xt.pop(),Ft.pop(),Xt.push(ar),Ft.push(ar),we.setState({currentStep:ar,renderedSteps:Xt,previousSteps:Ft})}else if(ar.trigger){ar.replace&&Xt.pop();var sn=_n({},Gt[we.getTriggeredStep(ar.trigger,ar.value)]);if(sn.message)sn.message=we.getStepMessage(sn.message);else if(sn.update){var Hn=sn;if((sn=_n({},Gt[Hn.update])).options)for(var Pn=0,_r=sn.options.length;Pn<_r;Pn+=1)sn.options[Pn].trigger=Hn.trigger;else sn.trigger=Hn.trigger}sn.key=B()(24),Jr=ar,ar=sn,we.setState({renderedSteps:Xt,currentStep:ar,previousStep:Jr},function(){sn.user?we.setState({disabled:!1},function(){!nt&&Dn()||we.input&&we.input.focus()}):(Xt.push(sn),Ft.push(sn),we.setState({renderedSteps:Xt,previousSteps:Ft}))})}var ra=we.props,lo=ra.cache,Ga=ra.cacheName;lo&&setTimeout(function(){li(Ga,{currentStep:ar,previousStep:Jr,previousSteps:Ft,renderedSteps:Xt})},300)}),Gr(Yt(Yt(we)),"handleEnd",function(){var qe=we.props.handleEnd;if(qe){for(var nt=we.state.previousSteps,ut=nt.map(function(En){return{id:En.id,message:En.message,value:En.value,metadata:En.metadata}}),yt=[],Ft=0,Xt=nt.length;Ft<Xt;Ft+=1){var Gt=nt[Ft],nn=Gt.id,ar=Gt.message,Jr=Gt.value,Si=Gt.metadata;yt[nn]={id:nn,message:ar,value:Jr,metadata:Si}}qe({renderedSteps:ut,steps:yt,values:nt.filter(function(En){return En.value}).map(function(En){return En.value})})}}),Gr(Yt(Yt(we)),"isInputValueEmpty",function(){var qe=we.state.inputValue;return!qe||qe.length===0}),Gr(Yt(Yt(we)),"isLastPosition",function(qe){var nt=we.state.renderedSteps,ut=nt.length,yt=nt.map(function(Xt){return Xt.key}).indexOf(qe.key);if(ut<=1||yt+1===ut)return!0;var Ft=nt[yt+1];return!Ft.message&&!Ft.asMessage||qe.user!==Ft.user}),Gr(Yt(Yt(we)),"isFirstPosition",function(qe){var nt=we.state.renderedSteps,ut=nt.map(function(Ft){return Ft.key}).indexOf(qe.key);if(ut===0)return!0;var yt=nt[ut-1];return!yt.message&&!yt.asMessage||qe.user!==yt.user}),Gr(Yt(Yt(we)),"handleKeyPress",function(qe){qe.key==="Enter"&&we.submitUserMessage()}),Gr(Yt(Yt(we)),"handleSubmitButton",function(){var qe=we.state,nt=qe.speaking,ut=qe.recognitionEnable;if((we.isInputValueEmpty()||nt)&&ut)return we.recognition.speak(),void(nt||we.setState({speaking:!0}));we.submitUserMessage()}),Gr(Yt(Yt(we)),"submitUserMessage",function(){var qe=we.state,nt=qe.defaultUserSettings,ut=qe.inputValue,yt=qe.previousSteps,Ft=qe.renderedSteps,Xt=we.state.currentStep;Xt.validator&&we.checkInvalidInput()||(Xt=_n({},nt,Xt,{message:ut,value:ut}),Ft.push(Xt),yt.push(Xt),we.setState({currentStep:Xt,renderedSteps:Ft,previousSteps:yt,disabled:!0,inputValue:""},function(){we.input&&we.input.blur()}))}),Gr(Yt(Yt(we)),"checkInvalidInput",function(){var qe=we.props.enableMobileAutoFocus,nt=we.state,ut=nt.currentStep,yt=nt.inputValue,Ft=ut.validator(yt),Xt=yt;return(typeof Ft!="boolean"||!Ft)&&(we.setState({inputValue:Ft.toString(),inputInvalid:!0,disabled:!0},function(){setTimeout(function(){we.setState({inputValue:Xt,inputInvalid:!1,disabled:!1},function(){!qe&&Dn()||we.input&&we.input.focus()})},2e3)}),!0)}),Gr(Yt(Yt(we)),"toggleChatBot",function(qe){var nt=we.props.toggleFloating;nt?nt({opened:qe}):we.setState({opened:qe})}),Gr(Yt(Yt(we)),"renderStep",function(qe,nt){var ut=we.state.renderedSteps,yt=we.props,Ft=yt.avatarStyle,Xt=yt.bubbleStyle,Gt=yt.bubbleOptionStyle,nn=yt.customStyle,ar=yt.hideBotAvatar,Jr=yt.hideUserAvatar,Si=yt.speechSynthesis,En=qe.options,Ei=qe.component,sn=qe.asMessage,Hn=we.generateRenderedStepsById(),Pn=nt>0?ut[nt-1]:{};return Ei&&!sn?w.a.createElement(wt,{key:nt,speak:we.speak,step:qe,steps:Hn,style:nn,previousStep:Pn,previousValue:Pn.value,triggerNextStep:we.triggerNextStep}):En?w.a.createElement(Vt,{key:nt,step:qe,speak:we.speak,previousValue:Pn.value,triggerNextStep:we.triggerNextStep,bubbleOptionStyle:Gt}):w.a.createElement(Mr,{key:nt,step:qe,steps:Hn,speak:we.speak,previousStep:Pn,previousValue:Pn.value,triggerNextStep:we.triggerNextStep,avatarStyle:Ft,bubbleStyle:Xt,hideBotAvatar:ar,hideUserAvatar:Jr,speechSynthesis:Si,isFirst:we.isFirstPosition(qe),isLast:we.isLastPosition(qe)})}),we.content=null,we.input=null,we.supportsScrollBehavior=!1,we.setContentRef=function(qe){we.content=qe},we.setInputRef=function(qe){we.input=qe},we.state={renderedSteps:[],previousSteps:[],currentStep:{},previousStep:{},steps:{},disabled:!0,opened:Ue.opened||!Ue.floating,inputValue:"",inputInvalid:!1,speaking:!1,recognitionEnable:Ue.recognitionEnable&&hr.isSupported(),defaultUserSettings:{}},we.speak=Gn(Ue.speechSynthesis),we}var ve,He,gt;return function(Ue,we){if(typeof we!="function"&&we!==null)throw new TypeError("Super expression must either be null or a function");Ue.prototype=Object.create(we&&we.prototype,{constructor:{value:Ue,writable:!0,configurable:!0}}),we&&Ur(Ue,we)}(Q,c.Component),ve=Q,gt=[{key:"getDerivedStateFromProps",value:function(Ue,we){var Tt=Ue.opened;return Ue.toggleFloating!==void 0&&Tt!==void 0&&Tt!==we.opened?function(qt){for(var qe=1;qe<arguments.length;qe++){var nt=arguments[qe]!=null?arguments[qe]:{},ut=Object.keys(nt);typeof Object.getOwnPropertySymbols=="function"&&(ut=ut.concat(Object.getOwnPropertySymbols(nt).filter(function(yt){return Object.getOwnPropertyDescriptor(nt,yt).enumerable}))),ut.forEach(function(yt){Gr(qt,yt,nt[yt])})}return qt}({},we,{opened:Tt}):we}}],(He=[{key:"componentDidMount",value:function(){for(var Ue=this,we=this.props.steps,Tt=this.props,qt=Tt.botDelay,qe=Tt.botAvatar,nt=Tt.cache,ut=Tt.cacheName,yt=Tt.customDelay,Ft=Tt.enableMobileAutoFocus,Xt=Tt.userAvatar,Gt={},nn={delay:qt,avatar:qe},ar={delay:Tt.userDelay,avatar:Xt,hideInput:!1},Jr={delay:yt},Si=0,En=we.length;Si<En;Si+=1){var Ei=we[Si],sn={};Ei.user?sn=ar:Ei.message||Ei.asMessage?sn=nn:Ei.component&&(sn=Jr),Gt[Ei.id]=_n({},sn,Ni.parse(Ei))}Ni.checkInvalidIds(Gt);var Hn=we[0];if(Hn.message){var Pn=Hn.message;Hn.message=typeof Pn=="function"?Pn():Pn,Gt[Hn.id].message=Hn.message}var _r=this.state.recognitionEnable,ra=this.props.recognitionLang;_r&&(this.recognition=new hr(this.onRecognitionChange,this.onRecognitionEnd,this.onRecognitionStop,ra)),this.supportsScrollBehavior="scrollBehavior"in document.documentElement.style,this.content&&(this.content.addEventListener("DOMNodeInserted",this.onNodeInserted),window.addEventListener("resize",this.onResize));var lo=function(Wa,Gs){var ms=Wa.cacheName,Ml=Wa.cache,Rl=Wa.firstStep,No=Wa.steps,Za=Rl,zl=[No[Za.id]],Ll=[No[Za.id]],Ca=localStorage.getItem(ms);if(Ml&&Ca)try{var Ti=Object(Yr.parse)(Ca),Ol=Ti.renderedSteps[Ti.renderedSteps.length-1];if(!Ol||!Ol.end){for(var ia=0,ka=Ti.renderedSteps.length;ia<ka;ia+=1){var Dl=Ti.renderedSteps[ia];if(Ti.renderedSteps[ia].delay=0,Ti.renderedSteps[ia].rendered=!0,Dl.component){var Ka=Dl.id;Ti.renderedSteps[ia].component=No[Ka].component}}var oa=Ti.currentStep,Tc=oa.trigger,Bl=oa.end,Rr=oa.options,gs=Ti.currentStep.id;if(Rr&&delete Ti.currentStep.rendered,!Tc&&!Bl)if(Rr)for(var Hs=0;Hs<Rr.length;Hs+=1)Ti.currentStep.options[Hs].trigger=No[gs].options[Hs].trigger;else Ti.currentStep.trigger=No[gs].trigger;return Ti.currentStep.user&&Gs(),Ti}localStorage.removeItem(ms)}catch(Cc){console.info("Unable to parse cache named:".concat(ms,`. 
The cache where probably created with an older version of react-simple-chatbot.
`),Cc)}return{currentStep:Za,previousStep:{},previousSteps:Ll,renderedSteps:zl}}({cacheName:ut,cache:nt,firstStep:Hn,steps:Gt},function(){Ue.setState({disabled:!1},function(){!Ft&&Dn()||Ue.input&&Ue.input.focus()})}),Ga=lo.currentStep,Ha=lo.previousStep,na=lo.previousSteps,Il=lo.renderedSteps;this.setState({currentStep:Ga,defaultUserSettings:ar,previousStep:Ha,previousSteps:na,renderedSteps:Il,steps:Gt})}},{key:"componentWillUnmount",value:function(){this.content&&(this.content.removeEventListener("DOMNodeInserted",this.onNodeInserted),window.removeEventListener("resize",this.onResize))}},{key:"render",value:function(){var Ue=this,we=this.state,Tt=we.currentStep,qt=we.disabled,qe=we.inputInvalid,nt=we.inputValue,ut=we.opened,yt=we.renderedSteps,Ft=we.speaking,Xt=we.recognitionEnable,Gt=this.props,nn=Gt.className,ar=Gt.contentStyle,Jr=Gt.floating,Si=Gt.floatingIcon,En=Gt.floatingStyle,Ei=Gt.footerStyle,sn=Gt.headerComponent,Hn=Gt.headerTitle,Pn=Gt.hideHeader,_r=Gt.hideSubmitButton,ra=Gt.inputStyle,lo=Gt.placeholder,Ga=Gt.inputAttributes,Ha=Gt.recognitionPlaceholder,na=Gt.style,Il=Gt.submitButtonStyle,Wa=Gt.width,Gs=Gt.height,ms=sn||w.a.createElement(he,{className:"rsc-header"},w.a.createElement(ze,{className:"rsc-header-title"},Hn),Jr&&w.a.createElement(Be,{className:"rsc-header-close-button",onClick:function(){return Ue.toggleChatBot(!1)}},w.a.createElement(er,null))),Ml=(this.isInputValueEmpty()||Ft)&&Xt?w.a.createElement(qn,null):w.a.createElement(Lr,null),Rl=Ft?Ha:Tt.placeholder||lo,No=Tt.inputAttributes||Ga;return w.a.createElement("div",{className:"rsc ".concat(nn)},Jr&&w.a.createElement(mt,{className:"rsc-float-button",style:En,opened:ut,onClick:function(){return Ue.toggleChatBot(!0)}},typeof Si=="string"?w.a.createElement(Lt,{src:Si}):Si),w.a.createElement($,{className:"rsc-container",floating:Jr,floatingStyle:En,opened:ut,style:na,width:Wa,height:Gs},!Pn&&ms,w.a.createElement(se,{className:"rsc-content",ref:this.setContentRef,floating:Jr,style:ar,height:Gs,hideInput:Tt.hideInput},yt.map(this.renderStep)),w.a.createElement(Kt,{className:"rsc-footer",style:Ei},!Tt.hideInput&&w.a.createElement(De,_n({type:"textarea",style:ra,ref:this.setInputRef,className:"rsc-input",placeholder:qe?"":Rl,onKeyPress:this.handleKeyPress,onChange:this.onValueChange,value:nt,floating:Jr,invalid:qe,disabled:qt,hasButton:!_r},No)),!Tt.hideInput&&!_r&&w.a.createElement(cr,{className:"rsc-submit-button",style:Il,onClick:this.handleSubmitButton,invalid:qe,disabled:qt,speaking:Ft},Ml))))}}])&&So(ve.prototype,He),gt&&So(ve,gt),Q}();Bn.propTypes={avatarStyle:P.a.objectOf(P.a.any),botAvatar:P.a.string,botDelay:P.a.number,bubbleOptionStyle:P.a.objectOf(P.a.any),bubbleStyle:P.a.objectOf(P.a.any),cache:P.a.bool,cacheName:P.a.string,className:P.a.string,contentStyle:P.a.objectOf(P.a.any),customDelay:P.a.number,customStyle:P.a.objectOf(P.a.any),enableMobileAutoFocus:P.a.bool,enableSmoothScroll:P.a.bool,floating:P.a.bool,floatingIcon:P.a.oneOfType([P.a.string,P.a.element]),floatingStyle:P.a.objectOf(P.a.any),footerStyle:P.a.objectOf(P.a.any),handleEnd:P.a.func,headerComponent:P.a.element,headerTitle:P.a.string,height:P.a.string,hideBotAvatar:P.a.bool,hideHeader:P.a.bool,hideSubmitButton:P.a.bool,hideUserAvatar:P.a.bool,inputAttributes:P.a.objectOf(P.a.any),inputStyle:P.a.objectOf(P.a.any),opened:P.a.bool,toggleFloating:P.a.func,placeholder:P.a.string,recognitionEnable:P.a.bool,recognitionLang:P.a.string,recognitionPlaceholder:P.a.string,speechSynthesis:P.a.shape({enable:P.a.bool,lang:P.a.string,voice:typeof window<"u"?P.a.instanceOf(window.SpeechSynthesisVoice):P.a.any}),steps:P.a.arrayOf(P.a.object).isRequired,style:P.a.objectOf(P.a.any),submitButtonStyle:P.a.objectOf(P.a.any),userAvatar:P.a.string,userDelay:P.a.number,width:P.a.string},Bn.defaultProps={avatarStyle:{},botDelay:1e3,bubbleOptionStyle:{},bubbleStyle:{},cache:!1,cacheName:"rsc_cache",className:"",contentStyle:{},customStyle:{},customDelay:1e3,enableMobileAutoFocus:!1,enableSmoothScroll:!1,floating:!1,floatingIcon:w.a.createElement(Nr,null),floatingStyle:{},footerStyle:{},handleEnd:void 0,headerComponent:void 0,headerTitle:"Chat",height:"520px",hideBotAvatar:!1,hideHeader:!1,hideSubmitButton:!1,hideUserAvatar:!1,inputStyle:{},opened:void 0,placeholder:"Type the message ...",inputAttributes:{},recognitionEnable:!1,recognitionLang:"en",recognitionPlaceholder:"Listening ...",speechSynthesis:{enable:!1,lang:"en",voice:null},style:{},submitButtonStyle:{},toggleFloating:void 0,userDelay:1e3,width:"350px",botAvatar:"data:image/svg+xml,%3csvg version='1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3e%3cpath d='M303 70a47 47 0 1 0-70 40v84h46v-84c14-8 24-23 24-40z' fill='%2393c7ef'/%3e%3cpath d='M256 23v171h23v-84a47 47 0 0 0-23-87z' fill='%235a8bb0'/%3e%3cpath fill='%2393c7ef' d='M0 240h248v124H0z'/%3e%3cpath fill='%235a8bb0' d='M264 240h248v124H264z'/%3e%3cpath fill='%2393c7ef' d='M186 365h140v124H186z'/%3e%3cpath fill='%235a8bb0' d='M256 365h70v124h-70z'/%3e%3cpath fill='%23cce9f9' d='M47 163h419v279H47z'/%3e%3cpath fill='%2393c7ef' d='M256 163h209v279H256z'/%3e%3cpath d='M194 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%233c5d76'/%3e%3cpath d='M380 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%231e2e3b'/%3e%3cpath d='M186 349a70 70 0 1 0 140 0H186z' fill='%233c5d76'/%3e%3cpath d='M256 349v70c39 0 70-31 70-70h-70z' fill='%231e2e3b'/%3e%3c/svg%3e",userAvatar:"data:image/svg+xml,%3csvg viewBox='-208.5 21 100 100' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ccircle cx='-158.5' cy='71' fill='%23F5EEE5' r='50'/%3e%3cdefs%3e%3ccircle cx='-158.5' cy='71' id='a' r='50'/%3e%3c/defs%3e%3cclipPath id='b'%3e%3cuse overflow='visible' xlink:href='%23a'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23b)' d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' fill='%23E6C19C'/%3e%3cg clip-path='url(%23b)'%3e%3cdefs%3e%3cpath d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' id='c'/%3e%3c/defs%3e%3cclipPath id='d'%3e%3cuse overflow='visible' xlink:href='%23c'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23d)' d='M-158.5 100.1c12.7 0 23-18.6 23-34.4 0-16.2-10.3-24.7-23-24.7s-23 8.5-23 24.7c0 15.8 10.3 34.4 23 34.4z' fill='%23D4B08C'/%3e%3c/g%3e%3cpath d='M-158.5 96c12.7 0 23-16.3 23-31 0-15.1-10.3-23-23-23s-23 7.9-23 23c0 14.7 10.3 31 23 31z' fill='%23F2CEA5'/%3e%3c/svg%3e"};var nr=Bn;v.d(p,"Loading",function(){return Le}),p.default=nr}])})})(nk);var GB=nk.exports;const HB=Tl(GB),Ek="/assets/bot-c2649fad.jpg",WB="/assets/user-7bf99f84.jpg",ZB={background:"white",headerBgColor:"#237518",headerFontColor:"white",headerFontSize:"25px",botBubbleColor:"#386150",botFontColor:"white",userBubbleColor:"#778f45",userFontColor:"white"};function Tk(){return ge.useEffect(()=>{console.log("Chatbot")}),ke.jsx("div",{style:{width:"auto",padding:"14px",height:"auto",position:"fixed",bottom:"75px",left:"1px"},children:ke.jsx(bk,{theme:ZB,children:ke.jsx(HB,{headerTitle:"PlantSense bot",recognitionEnable:!0,speechSynthesis:{enable:!0,lang:"hi"},botAvatar:Ek,userAvatar:WB,recognitionPlaceholder:"Listening",enableMobileAutoFocus:!0,enableSmoothScroll:!0,width:"400px",opened:!0,steps:[{id:"1",message:"Whats your name?",trigger:"2"},{id:"2",placeholder:"Type your name",user:!0,trigger:"3"},{id:"3",message:"Hello {previousValue},Welcome to PlantSense",trigger:"4"},{id:"4",placeholder:"choose an option",options:[{value:1,label:"How can i identify the plant?",trigger:"5"},{value:2,label:"Do you want to know about medicinal plants?",trigger:"7"}]},{id:"5",message:"Explore-->Upload image-->Predict-->Get result",trigger:"6"},{id:"6",options:[{value:1,label:"Is tulasi a medicinal plant?",trigger:"11"},{value:2,label:"Benefits of tulasi",trigger:"7"}],placeholder:"choose an option"},{id:"7",options:[{label:"Can tulasi be grown at home?",trigger:"9"}],placeholder:"choose an option"},{id:"8",message:"It cures headaches,cold,cough etc..",trigger:"10"},{id:"9",message:"Yes it can be grown at home",trigger:"10"},{id:"10",message:"Hope you find it useful",end:!0},{id:"11",message:"yes tulasi is a medicinal plants",trigger:"7"}]})})})}function KB(){const{name:e,state:t}=jg(),[i,s]=ge.useState(!1);return ke.jsxs("div",{className:"home",children:[t&&ke.jsx(ED,{type:e}),!t&&ke.jsxs(ke.Fragment,{children:[ke.jsx(Q5,{}),ke.jsx(ND,{}),ke.jsx(BD,{}),i&&ke.jsx(Tk,{}),ke.jsx(oo,{onClick:()=>{s(!i)},style:{position:"fixed",bottom:"10px",left:"10px",backgroundImage:`url(${Ek})`,backgroundSize:"cover"},children:i?ke.jsx(rh,{}):""})]})]})}function XB(){return ke.jsx("div",{className:"preloader",children:ke.jsx("h1",{className:"preloader-title",children:"PLANTSENSE"})})}function YB(){const e=[{name:"Alovera",img:"https://media.istockphoto.com/id/1345935119/photo/aloe-or-aloe-vera-fresh-leaves-and-slices-on-white-background.jpg?s=612x612&w=0&k=20&c=eIDRIhnKA8MaNQ9YZz4y2klBwFCuigIoCMH7vwQjaKg="},{name:"Eucalyptus",img:"https://cdn-prod.medicalnewstoday.com/content/images/articles/266/266580/eucalyptus-leaves.jpg"},{name:"Thulasi",img:"https://media.istockphoto.com/id/1253676637/photo/holy-basil.jpg?s=612x612&w=0&k=20&c=4kZxa85rXwQ1yBZIgxKy8q3gHRrH796dTsZrVCUOoIs="},{name:"Mango",img:"https://www.greendna.in/cdn/shop/products/mango1_538x.jpg?v=1600280357"},{name:"Avaram",img:"https://m.media-amazon.com/images/I/51TgsFv4IVL._AC_UF1000,1000_QL80_.jpg"}];return ke.jsxs("div",{className:"medicinal-plants",children:[ke.jsx("h1",{className:"med-title",children:"Medicinal Plants in Bharat"}),ke.jsx("div",{className:"plants",children:e.map(t=>ke.jsxs("div",{className:"medicinal-card",children:[ke.jsx("img",{className:"med-card-img",src:t.img,alt:"",srcset:""}),ke.jsx("h4",{className:"med-card-name",children:t.name})]}))})]})}var Ck={exports:{}};(function(e,t){(function(i,s){e.exports=s()})(r_,function(){var i,s,u;function p(c,w){if(!i)i=w;else if(!s)s=w;else{var T="var sharedChunk = {}; ("+i+")(sharedChunk); ("+s+")(sharedChunk);",P={};i(P),u=w(P),typeof window<"u"&&(u.workerUrl=window.URL.createObjectURL(new Blob([T],{type:"text/javascript"})))}}p(["exports"],function(c){function w(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var T=P;function P(o,r){this.x=o,this.y=r}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,a=o.y-this.y;return r*r+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),a=Math.sin(o),h=a*this.x+r*this.y;return this.x=r*this.x-a*this.y,this.y=h,this},_rotateAround:function(o,r){var a=Math.cos(o),h=Math.sin(o),m=r.y+h*(this.x-r.x)+a*(this.y-r.y);return this.x=r.x+a*(this.x-r.x)-h*(this.y-r.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},P.convert=function(o){return o instanceof P?o:Array.isArray(o)?new P(o[0],o[1]):o};var L=w(T),B=U;function U(o,r,a,h){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=a,this.p2y=h}U.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var a=o,h=0;h<8;h++){var m=this.sampleCurveX(a)-o;if(Math.abs(m)<r)return a;var y=this.sampleCurveDerivativeX(a);if(Math.abs(y)<1e-6)break;a-=m/y}var _=0,b=1;for(a=o,h=0;h<20&&(m=this.sampleCurveX(a),!(Math.abs(m-o)<r));h++)o>m?_=a:b=a,a=.5*(b-_)+_;return a},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var O=w(B);function N(o,r,a,h){const m=new O(o,r,a,h);return function(y){return m.solve(y)}}const ae=N(.25,.1,.25,1);function q(o,r,a){return Math.min(a,Math.max(r,o))}function W(o,r,a){const h=a-r,m=((o-r)%h+h)%h+r;return m===r?a:m}function K(o,...r){for(const a of r)for(const h in a)o[h]=a[h];return o}let ie=1;function _e(o,r){o.forEach(a=>{r[a]&&(r[a]=r[a].bind(r))})}function Se(o,r,a){const h={};for(const m in o)h[m]=r.call(a||this,o[m],m,o);return h}function xe(o,r,a){const h={};for(const m in o)r.call(a||this,o[m],m,o)&&(h[m]=o[m]);return h}function Me(o){return Array.isArray(o)?o.map(Me):typeof o=="object"&&o?Se(o,Me):o}const Ze={};function Le(o){Ze[o]||(typeof console<"u"&&console.warn(o),Ze[o]=!0)}function Je(o,r,a){return(a.y-o.y)*(r.x-o.x)>(r.y-o.y)*(a.x-o.x)}function ur(o){let r=0;for(let a,h,m=0,y=o.length,_=y-1;m<y;_=m++)a=o[m],h=o[_],r+=(h.x-a.x)*(a.y+h.y);return r}function Nt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let mr=null;function tt(o){if(mr==null){const r=o.navigator?o.navigator.userAgent:null;mr=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return mr}function Mt(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const kt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let $e,lt;const wt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const r=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(o,r=0){return this.getImageCanvasContext(o).getImageData(-r,-r,o.width+2*r,o.height+2*r)},getImageCanvasContext(o){const r=window.document.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return r.width=o.width,r.height=o.height,a.drawImage(o,0,0,o.width,o.height),a},resolveURL:o=>($e||($e=document.createElement("a")),$e.href=o,$e.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(lt==null&&(lt=matchMedia("(prefers-reduced-motion: reduce)")),lt.matches)}},rr={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class or extends Error{constructor(r,a,h,m){super(`AJAXError: ${a} (${r}): ${h}`),this.status=r,this.statusText=a,this.url=h,this.body=m}}const fr=Nt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,dr=o=>rr.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function Jt(o,r){const a=new AbortController,h=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:fr(),signal:a.signal});let m=!1,y=!1;return o.type==="json"&&h.headers.set("Accept","application/json"),y||fetch(h).then(_=>_.ok?(b=>{(o.type==="arrayBuffer"||o.type==="image"?b.arrayBuffer():o.type==="json"?b.json():b.text()).then(E=>{y||(m=!0,r(null,E,b.headers.get("Cache-Control"),b.headers.get("Expires")))}).catch(E=>{y||r(new Error(E.message))})})(_):_.blob().then(b=>r(new or(_.status,_.statusText,o.url,b)))).catch(_=>{_.code!==20&&r(new Error(_.message))}),{cancel:()=>{y=!0,m||a.abort()}}}const Ir=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(Nt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r);if(!Nt())return(dr(o.url)||Jt)(o,r)}if(!(/^file:/.test(a=o.url)||/^file:/.test(fr())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Jt(o,r);if(Nt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r,void 0,!0)}var a;return function(h,m){const y=new XMLHttpRequest;y.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(y.responseType="arraybuffer");for(const _ in h.headers)y.setRequestHeader(_,h.headers[_]);return h.type==="json"&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials=h.credentials==="include",y.onerror=()=>{m(new Error(y.statusText))},y.onload=()=>{if((y.status>=200&&y.status<300||y.status===0)&&y.response!==null){let _=y.response;if(h.type==="json")try{_=JSON.parse(y.response)}catch(b){return m(b)}m(null,_,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else{const _=new Blob([y.response],{type:y.getResponseHeader("Content-Type")});m(new or(y.status,y.statusText,h.url,_))}},y.send(h.body),{cancel:()=>y.abort()}}(o,r)},zr=function(o,r){return Ir(K(o,{type:"arrayBuffer"}),r)};function Fr(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),a=window.location;return r.protocol===a.protocol&&r.host===a.host}function sr(o,r,a){a[o]&&a[o].indexOf(r)!==-1||(a[o]=a[o]||[],a[o].push(r))}function wn(o,r,a){if(a&&a[o]){const h=a[o].indexOf(r);h!==-1&&a[o].splice(h,1)}}class kr{constructor(r,a={}){K(this,a),this.type=r}}class Mn extends kr{constructor(r,a={}){super("error",K({error:r},a))}}class hn{on(r,a){return this._listeners=this._listeners||{},sr(r,a,this._listeners),this}off(r,a){return wn(r,a,this._listeners),wn(r,a,this._oneTimeListeners),this}once(r,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},sr(r,a,this._oneTimeListeners),this):new Promise(h=>this.once(r,h))}fire(r,a){typeof r=="string"&&(r=new kr(r,a||{}));const h=r.type;if(this.listens(h)){r.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const b of m)b.call(this,r);const y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const b of y)wn(h,b,this._oneTimeListeners),b.call(this,r);const _=this._eventedParent;_&&(K(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(r))}else r instanceof Mn&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,a){return this._eventedParent=r,this._eventedParentData=a,this}}var Ae={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Pr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Rn(o,r){const a={};for(const h in o)h!=="ref"&&(a[h]=o[h]);return Pr.forEach(h=>{h in r&&(a[h]=r[h])}),a}function pr(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let a=0;a<o.length;a++)if(!pr(o[a],r[a]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const a in o)if(!pr(o[a],r[a]))return!1;return!0}return o===r}const Vt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function zn(o,r,a){a.push({command:Vt.addSource,args:[o,r[o]]})}function Kr(o,r,a){r.push({command:Vt.removeSource,args:[o]}),a[o]=!0}function Ln(o,r,a,h){Kr(o,a,h),zn(o,r,a)}function Tr(o,r,a){let h;for(h in o[a])if(Object.prototype.hasOwnProperty.call(o[a],h)&&h!=="data"&&!pr(o[a][h],r[a][h]))return!1;for(h in r[a])if(Object.prototype.hasOwnProperty.call(r[a],h)&&h!=="data"&&!pr(o[a][h],r[a][h]))return!1;return!0}function Vn(o,r,a,h,m,y){let _;for(_ in r=r||{},o=o||{})Object.prototype.hasOwnProperty.call(o,_)&&(pr(o[_],r[_])||a.push({command:y,args:[h,_,r[_],m]}));for(_ in r)Object.prototype.hasOwnProperty.call(r,_)&&!Object.prototype.hasOwnProperty.call(o,_)&&(pr(o[_],r[_])||a.push({command:y,args:[h,_,r[_],m]}))}function yn(o){return o.id}function rn(o,r){return o[r.id]=r,o}class Ve{constructor(r,a,h,m){this.message=(r?`${r}: `:"")+h,m&&(this.identifier=m),a!=null&&a.__line__&&(this.line=a.__line__)}}function Sn(o,...r){for(const a of r)for(const h in a)o[h]=a[h];return o}class Xr extends Error{constructor(r,a){super(a),this.message=a,this.key=r}}class Wt{constructor(r,a=[]){this.parent=r,this.bindings={};for(const[h,m]of a)this.bindings[h]=m}concat(r){return new Wt(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const dn={kind:"null"},Xe={kind:"number"},Rt={kind:"string"},Ut={kind:"boolean"},$r={kind:"color"},Mr={kind:"object"},zt={kind:"value"},vn={kind:"collator"},pn={kind:"formatted"},si={kind:"padding"},Ai={kind:"resolvedImage"};function Yr(o,r){return{kind:"array",itemType:o,N:r}}function Cr(o){if(o.kind==="array"){const r=Cr(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const Ni=[dn,Xe,Rt,Ut,$r,pn,Mr,Yr(zt),si,Ai];function li(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!li(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const a of Ni)if(!li(a,r))return null}}return`Expected ${Cr(o)} but found ${Cr(r)} instead.`}function J(o,r){return r.some(a=>a.kind===o.kind)}function F(o,r){return r.some(a=>a==="null"?o===null:a==="array"?Array.isArray(o):a==="object"?o&&!Array.isArray(o)&&typeof o=="object":a===typeof o)}function $(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const X=.96422,se=.82521,ue=4/29,me=6/29,he=3*me*me,ce=me*me*me,ye=Math.PI/180,ze=180/Math.PI;function Oe(o){return(o%=360)<0&&(o+=360),o}function Be([o,r,a,h]){let m,y;const _=jt((.2225045*(o=bt(o))+.7168786*(r=bt(r))+.0606169*(a=bt(a)))/1);o===r&&r===a?m=y=_:(m=jt((.4360747*o+.3850649*r+.1430804*a)/X),y=jt((.0139322*o+.0971045*r+.7141733*a)/se));const b=116*_-16;return[b<0?0:b,500*(m-_),200*(_-y),h]}function bt(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function jt(o){return o>ce?Math.pow(o,1/3):o/he+ue}function mt([o,r,a,h]){let m=(o+16)/116,y=isNaN(r)?m:m+r/500,_=isNaN(a)?m:m-a/200;return m=1*Lt(m),y=X*Lt(y),_=se*Lt(_),[St(3.1338561*y-1.6168667*m-.4906146*_),St(-.9787684*y+1.9161415*m+.033454*_),St(.0719453*y-.2289914*m+1.4052427*_),h]}function St(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Lt(o){return o>me?o*o*o:he*(o-ue)}function lr(o){return parseInt(o.padEnd(2,o),16)/255}function Kt(o,r){return gr(r?o/100:o,0,1)}function gr(o,r,a){return Math.min(Math.max(r,o),a)}function Ar(o){return!o.some(Number.isNaN)}const qr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class De{constructor(r,a,h,m=1,y=!0){this.r=r,this.g=a,this.b=h,this.a=m,y||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[r,a,h,m]))}static parse(r){if(r instanceof De)return r;if(typeof r!="string")return;const a=function(h){if((h=h.toLowerCase())==="transparent")return[0,0,0,0];const m=qr[h];if(m){const[_,b,E]=m;return[_/255,b/255,E/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const _=h.length<6?1:2;let b=1;return[lr(h.slice(b,b+=_)),lr(h.slice(b,b+=_)),lr(h.slice(b,b+=_)),lr(h.slice(b,b+_)||"ff")]}if(h.startsWith("rgb")){const _=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[b,E,I,M,D,j,V,H,ne,te,fe,be]=_,de=[M||" ",V||" ",te].join("");if(de==="  "||de==="  /"||de===",,"||de===",,,"){const Te=[I,j,ne].join(""),Pe=Te==="%%%"?100:Te===""?255:0;if(Pe){const Fe=[gr(+E/Pe,0,1),gr(+D/Pe,0,1),gr(+H/Pe,0,1),fe?Kt(+fe,be):1];if(Ar(Fe))return Fe}}return}}const y=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){const[_,b,E,I,M,D,j,V,H]=y,ne=[E||" ",M||" ",j].join("");if(ne==="  "||ne==="  /"||ne===",,"||ne===",,,"){const te=[+b,gr(+I,0,100),gr(+D,0,100),V?Kt(+V,H):1];if(Ar(te))return function([fe,be,de,Te]){function Pe(Fe){const _t=(Fe+fe/30)%12,Ct=be*Math.min(de,1-de);return de-Ct*Math.max(-1,Math.min(_t-3,9-_t,1))}return fe=Oe(fe),be/=100,de/=100,[Pe(0),Pe(8),Pe(4),Te]}(te)}}}(r);return a?new De(...a,!1):void 0}get rgb(){const{r,g:a,b:h,a:m}=this,y=m||1/0;return this.overwriteGetter("rgb",[r/y,a/y,h/y,m])}get hcl(){return this.overwriteGetter("hcl",function(r){const[a,h,m,y]=Be(r),_=Math.sqrt(h*h+m*m);return[Math.round(1e4*_)?Oe(Math.atan2(m,h)*ze):NaN,_,a,y]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Be(this.rgb))}overwriteGetter(r,a){return Object.defineProperty(this,r,{value:a}),a}toString(){const[r,a,h,m]=this.rgb;return`rgba(${[r,a,h].map(y=>Math.round(255*y)).join(",")},${m})`}}De.black=new De(0,0,0,1),De.white=new De(1,1,1,1),De.transparent=new De(0,0,0,0),De.red=new De(1,0,0,1);class Qe{constructor(r,a,h){this.sensitivity=r?a?"variant":"case":a?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,a){return this.collator.compare(r,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Et{constructor(r,a,h,m,y){this.text=r,this.image=a,this.scale=h,this.fontStack=m,this.textColor=y}}class Ot{constructor(r){this.sections=r}static fromString(r){return new Ot([new Et(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Ot?r:Ot.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class it{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof it)return r;if(typeof r=="number")return new it([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const a of r)if(typeof a!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new it(r)}}toString(){return JSON.stringify(this.values)}}class cr{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new cr({name:r,available:!1}):null}}function Re(o,r,a,h){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof a=="number"&&a>=0&&a<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,r,a,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,r,a,h]:[o,r,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function yr(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof De||o instanceof Qe||o instanceof Ot||o instanceof it||o instanceof cr)return!0;if(Array.isArray(o)){for(const r of o)if(!yr(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!yr(o[r]))return!1;return!0}return!1}function $t(o){if(o===null)return dn;if(typeof o=="string")return Rt;if(typeof o=="boolean")return Ut;if(typeof o=="number")return Xe;if(o instanceof De)return $r;if(o instanceof Qe)return vn;if(o instanceof Ot)return pn;if(o instanceof it)return si;if(o instanceof cr)return Ai;if(Array.isArray(o)){const r=o.length;let a;for(const h of o){const m=$t(h);if(a){if(a===m)continue;a=zt;break}a=m}return Yr(a||zt,r)}return Mr}function Zr(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof De||o instanceof Ot||o instanceof it||o instanceof cr?o.toString():JSON.stringify(o)}class Qt{constructor(r,a){this.type=r,this.value=a}static parse(r,a){if(r.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!yr(r[1]))return a.error("invalid value");const h=r[1];let m=$t(h);const y=a.expectedType;return m.kind!=="array"||m.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(m=y),new Qt(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class hr{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const Nr={string:Rt,number:Xe,boolean:Ut,object:Mr};class er{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");let h,m=1;const y=r[0];if(y==="array"){let b,E;if(r.length>2){const I=r[1];if(typeof I!="string"||!(I in Nr)||I==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);b=Nr[I],m++}else b=zt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return a.error('The length argument to "array" must be a positive integer literal',2);E=r[2],m++}h=Yr(b,E)}else{if(!Nr[y])throw new Error(`Types doesn't contain name = ${y}`);h=Nr[y]}const _=[];for(;m<r.length;m++){const b=a.parse(r[m],m,zt);if(!b)return null;_.push(b)}return new er(h,_)}evaluate(r){for(let a=0;a<this.args.length;a++){const h=this.args[a].evaluate(r);if(!li(this.type,$t(h)))return h;if(a===this.args.length-1)throw new hr(`Expected value to be of type ${Cr(this.type)}, but found ${Cr($t(h))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const On={"to-boolean":Ut,"to-color":$r,"to-number":Xe,"to-string":Rt};class Lr{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");const h=r[0];if(!On[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&r.length!==2)return a.error("Expected one argument.");const m=On[h],y=[];for(let _=1;_<r.length;_++){const b=a.parse(r[_],_,zt);if(!b)return null;y.push(b)}return new Lr(m,y)}evaluate(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){let a,h;for(const m of this.args){if(a=m.evaluate(r),h=null,a instanceof De)return a;if(typeof a=="string"){const y=r.parseColor(a);if(y)return y}else if(Array.isArray(a)&&(h=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Re(a[0],a[1],a[2],a[3]),!h))return new De(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new hr(h||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}if(this.type.kind==="padding"){let a;for(const h of this.args){a=h.evaluate(r);const m=it.parse(a);if(m)return m}throw new hr(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}if(this.type.kind==="number"){let a=null;for(const h of this.args){if(a=h.evaluate(r),a===null)return 0;const m=Number(a);if(!isNaN(m))return m}throw new hr(`Could not convert ${JSON.stringify(a)} to number.`)}return this.type.kind==="formatted"?Ot.fromString(Zr(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?cr.fromString(Zr(this.args[0].evaluate(r))):Zr(this.args[0].evaluate(r))}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Yi=["Unknown","Point","LineString","Polygon"];class qn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Yi[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let a=this._parseColorCache[r];return a||(a=this._parseColorCache[r]=De.parse(r)),a}}class Dn{constructor(r,a,h=[],m,y=new Wt,_=[]){this.registry=r,this.path=h,this.key=h.map(b=>`[${b}]`).join(""),this.scope=y,this.errors=_,this.expectedType=m,this._isConstant=a}parse(r,a,h,m,y={}){return a?this.concat(a,h,m)._parse(r,y):this._parse(r,y)}_parse(r,a){function h(m,y,_){return _==="assert"?new er(y,[m]):_==="coerce"?new Lr(y,[m]):m}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=r[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[m];if(y){let _=y.parse(r,this);if(!_)return null;if(this.expectedType){const b=this.expectedType,E=_.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||E.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string")if(b.kind!=="padding"||E.kind!=="value"&&E.kind!=="number"&&E.kind!=="array"){if(this.checkSubtype(b,E))return null}else _=h(_,b,a.typeAnnotation||"coerce");else _=h(_,b,a.typeAnnotation||"coerce");else _=h(_,b,a.typeAnnotation||"assert")}if(!(_ instanceof Qt)&&_.type.kind!=="resolvedImage"&&this._isConstant(_)){const b=new qn;try{_=new Qt(_.type,_.evaluate(b))}catch(E){return this.error(E.message),null}}return _}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,a,h){const m=typeof r=="number"?this.path.concat(r):this.path,y=h?this.scope.concat(h):this.scope;return new Dn(this.registry,this._isConstant,m,a||null,y,this.errors)}error(r,...a){const h=`${this.key}${a.map(m=>`[${m}]`).join("")}`;this.errors.push(new Xr(h,r))}checkSubtype(r,a){const h=li(r,a);return h&&this.error(h),h}}class xr{constructor(r,a,h){this.type=vn,this.locale=h,this.caseSensitive=r,this.diacriticSensitive=a}static parse(r,a){if(r.length!==2)return a.error("Expected one argument.");const h=r[1];if(typeof h!="object"||Array.isArray(h))return a.error("Collator options argument must be an object.");const m=a.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Ut);if(!m)return null;const y=a.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Ut);if(!y)return null;let _=null;return h.locale&&(_=a.parse(h.locale,1,Rt),!_)?null:new xr(m,y,_)}evaluate(r){return new Qe(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const Gn=8192;function vr(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function _n(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function So(o,r){const a=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,m=Math.pow(2,r.z);return[Math.round(a*m*Gn),Math.round(h*m*Gn)]}function Fo(o,r,a){const h=o[0]-r[0],m=o[1]-r[1],y=o[0]-a[0],_=o[1]-a[1];return h*_-y*m==0&&h*y<=0&&m*_<=0}function Ur(o,r){let a=!1;for(let _=0,b=r.length;_<b;_++){const E=r[_];for(let I=0,M=E.length;I<M-1;I++){if(Fo(o,E[I],E[I+1]))return!1;(m=E[I])[1]>(h=o)[1]!=(y=E[I+1])[1]>h[1]&&h[0]<(y[0]-m[0])*(h[1]-m[1])/(y[1]-m[1])+m[0]&&(a=!a)}}var h,m,y;return a}function Yt(o,r){for(let a=0;a<r.length;a++)if(Ur(o,r[a]))return!0;return!1}function Gr(o,r,a,h){const m=h[0]-a[0],y=h[1]-a[1],_=(o[0]-a[0])*y-m*(o[1]-a[1]),b=(r[0]-a[0])*y-m*(r[1]-a[1]);return _>0&&b<0||_<0&&b>0}function Bn(o,r,a){for(const I of a)for(let M=0;M<I.length-1;++M)if((b=[(_=I[M+1])[0]-(y=I[M])[0],_[1]-y[1]])[0]*(E=[(m=r)[0]-(h=o)[0],m[1]-h[1]])[1]-b[1]*E[0]!=0&&Gr(h,m,y,_)&&Gr(y,_,h,m))return!0;var h,m,y,_,b,E;return!1}function nr(o,r){for(let a=0;a<o.length;++a)if(!Ur(o[a],r))return!1;for(let a=0;a<o.length-1;++a)if(Bn(o[a],o[a+1],r))return!1;return!0}function Z(o,r){for(let a=0;a<r.length;a++)if(nr(o,r[a]))return!0;return!1}function Q(o,r,a){const h=[];for(let m=0;m<o.length;m++){const y=[];for(let _=0;_<o[m].length;_++){const b=So(o[m][_],a);vr(r,b),y.push(b)}h.push(y)}return h}function ve(o,r,a){const h=[];for(let m=0;m<o.length;m++){const y=Q(o[m],r,a);h.push(y)}return h}function He(o,r,a,h){if(o[0]<a[0]||o[0]>a[2]){const m=.5*h;let y=o[0]-a[0]>m?-h:a[0]-o[0]>m?h:0;y===0&&(y=o[0]-a[2]>m?-h:a[2]-o[0]>m?h:0),o[0]+=y}vr(r,o)}function gt(o,r,a,h){const m=Math.pow(2,h.z)*Gn,y=[h.x*Gn,h.y*Gn],_=[];for(const b of o)for(const E of b){const I=[E.x+y[0],E.y+y[1]];He(I,r,a,m),_.push(I)}return _}function Ue(o,r,a,h){const m=Math.pow(2,h.z)*Gn,y=[h.x*Gn,h.y*Gn],_=[];for(const E of o){const I=[];for(const M of E){const D=[M.x+y[0],M.y+y[1]];vr(r,D),I.push(D)}_.push(I)}if(r[2]-r[0]<=m/2){(b=r)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const E of _)for(const I of E)He(I,r,a,m)}var b;return _}class we{constructor(r,a){this.type=Ut,this.geojson=r,this.geometries=a}static parse(r,a){if(r.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(yr(r[1])){const h=r[1];if(h.type==="FeatureCollection")for(let m=0;m<h.features.length;++m){const y=h.features[m].geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new we(h,h.features[m].geometry)}else if(h.type==="Feature"){const m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new we(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new we(h,h)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(a,h){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],_=a.canonicalID();if(h.type==="Polygon"){const b=Q(h.coordinates,y,_),E=gt(a.geometry(),m,y,_);if(!_n(m,y))return!1;for(const I of E)if(!Ur(I,b))return!1}if(h.type==="MultiPolygon"){const b=ve(h.coordinates,y,_),E=gt(a.geometry(),m,y,_);if(!_n(m,y))return!1;for(const I of E)if(!Yt(I,b))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(a,h){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],_=a.canonicalID();if(h.type==="Polygon"){const b=Q(h.coordinates,y,_),E=Ue(a.geometry(),m,y,_);if(!_n(m,y))return!1;for(const I of E)if(!nr(I,b))return!1}if(h.type==="MultiPolygon"){const b=ve(h.coordinates,y,_),E=Ue(a.geometry(),m,y,_);if(!_n(m,y))return!1;for(const I of E)if(!Z(I,b))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Tt{constructor(r,a){this.type=a.type,this.name=r,this.boundExpression=a}static parse(r,a){if(r.length!==2||typeof r[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const h=r[1];return a.scope.has(h)?new Tt(h,a.scope.get(h)):a.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class qt{constructor(r,a,h,m){this.name=r,this.type=a,this._evaluate=h,this.args=m}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,a){const h=r[0],m=qt.definitions[h];if(!m)return a.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(m)?m[0]:m.type,_=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,b=_.filter(([I])=>!Array.isArray(I)||I.length===r.length-1);let E=null;for(const[I,M]of b){E=new Dn(a.registry,qe,a.path,null,a.scope);const D=[];let j=!1;for(let V=1;V<r.length;V++){const H=r[V],ne=Array.isArray(I)?I[V-1]:I.type,te=E.parse(H,1+D.length,ne);if(!te){j=!0;break}D.push(te)}if(!j)if(Array.isArray(I)&&I.length!==D.length)E.error(`Expected ${I.length} arguments, but found ${D.length} instead.`);else{for(let V=0;V<D.length;V++){const H=Array.isArray(I)?I[V]:I.type,ne=D[V];E.concat(V+1).checkSubtype(H,ne.type)}if(E.errors.length===0)return new qt(h,y,M,D)}}if(b.length===1)a.errors.push(...E.errors);else{const I=(b.length?b:_).map(([D])=>{return j=D,Array.isArray(j)?`(${j.map(Cr).join(", ")})`:`(${Cr(j.type)}...)`;var j}).join(" | "),M=[];for(let D=1;D<r.length;D++){const j=a.parse(r[D],1+M.length);if(!j)return null;M.push(Cr(j.type))}a.error(`Expected arguments of type ${I}, but found (${M.join(", ")}) instead.`)}return null}static register(r,a){qt.definitions=a;for(const h in a)r[h]=qt}}function qe(o){if(o instanceof Tt)return qe(o.boundExpression);if(o instanceof qt&&o.name==="error"||o instanceof xr||o instanceof we)return!1;const r=o instanceof Lr||o instanceof er;let a=!0;return o.eachChild(h=>{a=r?a&&qe(h):a&&h instanceof Qt}),!!a&&nt(o)&&yt(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function nt(o){if(o instanceof qt&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof we)return!1;let r=!0;return o.eachChild(a=>{r&&!nt(a)&&(r=!1)}),r}function ut(o){if(o instanceof qt&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(a=>{r&&!ut(a)&&(r=!1)}),r}function yt(o,r){if(o instanceof qt&&r.indexOf(o.name)>=0)return!1;let a=!0;return o.eachChild(h=>{a&&!yt(h,r)&&(a=!1)}),a}function Ft(o,r){const a=o.length-1;let h,m,y=0,_=a,b=0;for(;y<=_;)if(b=Math.floor((y+_)/2),h=o[b],m=o[b+1],h<=r){if(b===a||r<m)return b;y=b+1}else{if(!(h>r))throw new hr("Input is not a number.");_=b-1}return 0}class Xt{constructor(r,a,h){this.type=r,this.input=a,this.labels=[],this.outputs=[];for(const[m,y]of h)this.labels.push(m),this.outputs.push(y)}static parse(r,a){if(r.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return a.error("Expected an even number of arguments.");const h=a.parse(r[1],1,Xe);if(!h)return null;const m=[];let y=null;a.expectedType&&a.expectedType.kind!=="value"&&(y=a.expectedType);for(let _=1;_<r.length;_+=2){const b=_===1?-1/0:r[_],E=r[_+1],I=_,M=_+1;if(typeof b!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(m.length&&m[m.length-1][0]>=b)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);const D=a.parse(E,M,y);if(!D)return null;y=y||D.type,m.push([b,D])}return new Xt(y,h,m)}evaluate(r){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(r);const m=this.input.evaluate(r);if(m<=a[0])return h[0].evaluate(r);const y=a.length;return m>=a[y-1]?h[y-1].evaluate(r):h[Ft(a,m)].evaluate(r)}eachChild(r){r(this.input);for(const a of this.outputs)r(a)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Gt(o,r,a){return o+a*(r-o)}function nn(o,r,a){return o.map((h,m)=>Gt(h,r[m],a))}const ar={number:Gt,color:function(o,r,a,h="rgb"){switch(h){case"rgb":{const[m,y,_,b]=nn(o.rgb,r.rgb,a);return new De(m,y,_,b,!1)}case"hcl":{const[m,y,_,b]=o.hcl,[E,I,M,D]=r.hcl;let j,V;if(isNaN(m)||isNaN(E))isNaN(m)?isNaN(E)?j=NaN:(j=E,_!==1&&_!==0||(V=I)):(j=m,M!==1&&M!==0||(V=y));else{let be=E-m;E>m&&be>180?be-=360:E<m&&m-E>180&&(be+=360),j=m+a*be}const[H,ne,te,fe]=function([be,de,Te,Pe]){return be=isNaN(be)?0:be*ye,mt([Te,Math.cos(be)*de,Math.sin(be)*de,Pe])}([j,V??Gt(y,I,a),Gt(_,M,a),Gt(b,D,a)]);return new De(H,ne,te,fe,!1)}case"lab":{const[m,y,_,b]=mt(nn(o.lab,r.lab,a));return new De(m,y,_,b,!1)}}},array:nn,padding:function(o,r,a){return new it(nn(o.values,r.values,a))}};class Jr{constructor(r,a,h,m,y){this.type=r,this.operator=a,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[_,b]of y)this.labels.push(_),this.outputs.push(b)}static interpolationFactor(r,a,h,m){let y=0;if(r.name==="exponential")y=Si(a,r.base,h,m);else if(r.name==="linear")y=Si(a,1,h,m);else if(r.name==="cubic-bezier"){const _=r.controlPoints;y=new O(_[0],_[1],_[2],_[3]).solve(Si(a,1,h,m))}return y}static parse(r,a){let[h,m,y,..._]=r;if(!Array.isArray(m)||m.length===0)return a.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const I=m[1];if(typeof I!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:I}}else{if(m[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const I=m.slice(1);if(I.length!==4||I.some(M=>typeof M!="number"||M<0||M>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:I}}}if(r.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(y=a.parse(y,2,Xe),!y)return null;const b=[];let E=null;h==="interpolate-hcl"||h==="interpolate-lab"?E=$r:a.expectedType&&a.expectedType.kind!=="value"&&(E=a.expectedType);for(let I=0;I<_.length;I+=2){const M=_[I],D=_[I+1],j=I+3,V=I+4;if(typeof M!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(b.length&&b[b.length-1][0]>=M)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',j);const H=a.parse(D,V,E);if(!H)return null;E=E||H.type,b.push([M,H])}return $(E,Xe)||$(E,$r)||$(E,si)||$(E,Yr(Xe))?new Jr(E,h,m,y,b):a.error(`Type ${Cr(E)} is not interpolatable.`)}evaluate(r){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(r);const m=this.input.evaluate(r);if(m<=a[0])return h[0].evaluate(r);const y=a.length;if(m>=a[y-1])return h[y-1].evaluate(r);const _=Ft(a,m),b=Jr.interpolationFactor(this.interpolation,m,a[_],a[_+1]),E=h[_].evaluate(r),I=h[_+1].evaluate(r);switch(this.operator){case"interpolate":return ar[this.type.kind](E,I,b);case"interpolate-hcl":return ar.color(E,I,b,"hcl");case"interpolate-lab":return ar.color(E,I,b,"lab")}}eachChild(r){r(this.input);for(const a of this.outputs)r(a)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Si(o,r,a,h){const m=h-a,y=o-a;return m===0?0:r===1?y/m:(Math.pow(r,y)-1)/(Math.pow(r,m)-1)}class En{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expectected at least one argument.");let h=null;const m=a.expectedType;m&&m.kind!=="value"&&(h=m);const y=[];for(const b of r.slice(1)){const E=a.parse(b,1+y.length,h,void 0,{typeAnnotation:"omit"});if(!E)return null;h=h||E.type,y.push(E)}if(!h)throw new Error("No output type");const _=m&&y.some(b=>li(m,b.type));return new En(_?zt:h,y)}evaluate(r){let a,h=null,m=0;for(const y of this.args)if(m++,h=y.evaluate(r),h&&h instanceof cr&&!h.available&&(a||(a=h.name),h=null,m===this.args.length&&(h=a)),h!==null)break;return h}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class Ei{constructor(r,a){this.type=a.type,this.bindings=[].concat(r),this.result=a}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const a of this.bindings)r(a[1]);r(this.result)}static parse(r,a){if(r.length<4)return a.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const h=[];for(let y=1;y<r.length-1;y+=2){const _=r[y];if(typeof _!="string")return a.error(`Expected string, but found ${typeof _} instead.`,y);if(/[^a-zA-Z0-9_]/.test(_))return a.error("Variable names must contain only alphanumeric characters or '_'.",y);const b=a.parse(r[y+1],y+1);if(!b)return null;h.push([_,b])}const m=a.parse(r[r.length-1],r.length-1,a.expectedType,h);return m?new Ei(h,m):null}outputDefined(){return this.result.outputDefined()}}class sn{constructor(r,a,h){this.type=r,this.index=a,this.input=h}static parse(r,a){if(r.length!==3)return a.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=a.parse(r[1],1,Xe),m=a.parse(r[2],2,Yr(a.expectedType||zt));return h&&m?new sn(m.type.itemType,h,m):null}evaluate(r){const a=this.index.evaluate(r),h=this.input.evaluate(r);if(a<0)throw new hr(`Array index out of bounds: ${a} < 0.`);if(a>=h.length)throw new hr(`Array index out of bounds: ${a} > ${h.length-1}.`);if(a!==Math.floor(a))throw new hr(`Array index must be an integer, but found ${a} instead.`);return h[a]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Hn{constructor(r,a){this.type=Ut,this.needle=r,this.haystack=a}static parse(r,a){if(r.length!==3)return a.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=a.parse(r[1],1,zt),m=a.parse(r[2],2,zt);return h&&m?J(h.type,[Ut,Rt,Xe,dn,zt])?new Hn(h,m):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Cr(h.type)} instead`):null}evaluate(r){const a=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!h)return!1;if(!F(a,["boolean","string","number","null"]))throw new hr(`Expected first argument to be of type boolean, string, number or null, but found ${Cr($t(a))} instead.`);if(!F(h,["string","array"]))throw new hr(`Expected second argument to be of type array or string, but found ${Cr($t(h))} instead.`);return h.indexOf(a)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Pn{constructor(r,a,h){this.type=Xe,this.needle=r,this.haystack=a,this.fromIndex=h}static parse(r,a){if(r.length<=2||r.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=a.parse(r[1],1,zt),m=a.parse(r[2],2,zt);if(!h||!m)return null;if(!J(h.type,[Ut,Rt,Xe,dn,zt]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Cr(h.type)} instead`);if(r.length===4){const y=a.parse(r[3],3,Xe);return y?new Pn(h,m,y):null}return new Pn(h,m)}evaluate(r){const a=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!F(a,["boolean","string","number","null"]))throw new hr(`Expected first argument to be of type boolean, string, number or null, but found ${Cr($t(a))} instead.`);if(!F(h,["string","array"]))throw new hr(`Expected second argument to be of type array or string, but found ${Cr($t(h))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(r);return h.indexOf(a,m)}return h.indexOf(a)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class _r{constructor(r,a,h,m,y,_){this.inputType=r,this.type=a,this.input=h,this.cases=m,this.outputs=y,this.otherwise=_}static parse(r,a){if(r.length<5)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return a.error("Expected an even number of arguments.");let h,m;a.expectedType&&a.expectedType.kind!=="value"&&(m=a.expectedType);const y={},_=[];for(let I=2;I<r.length-1;I+=2){let M=r[I];const D=r[I+1];Array.isArray(M)||(M=[M]);const j=a.concat(I);if(M.length===0)return j.error("Expected at least one branch label.");for(const H of M){if(typeof H!="number"&&typeof H!="string")return j.error("Branch labels must be numbers or strings.");if(typeof H=="number"&&Math.abs(H)>Number.MAX_SAFE_INTEGER)return j.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof H=="number"&&Math.floor(H)!==H)return j.error("Numeric branch labels must be integer values.");if(h){if(j.checkSubtype(h,$t(H)))return null}else h=$t(H);if(y[String(H)]!==void 0)return j.error("Branch labels must be unique.");y[String(H)]=_.length}const V=a.parse(D,I,m);if(!V)return null;m=m||V.type,_.push(V)}const b=a.parse(r[1],1,zt);if(!b)return null;const E=a.parse(r[r.length-1],r.length-1,m);return E?b.type.kind!=="value"&&a.concat(1).checkSubtype(h,b.type)?null:new _r(h,m,b,y,_,E):null}evaluate(r){const a=this.input.evaluate(r);return($t(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class ra{constructor(r,a,h){this.type=r,this.branches=a,this.otherwise=h}static parse(r,a){if(r.length<4)return a.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return a.error("Expected an odd number of arguments.");let h;a.expectedType&&a.expectedType.kind!=="value"&&(h=a.expectedType);const m=[];for(let _=1;_<r.length-1;_+=2){const b=a.parse(r[_],_,Ut);if(!b)return null;const E=a.parse(r[_+1],_+1,h);if(!E)return null;m.push([b,E]),h=h||E.type}const y=a.parse(r[r.length-1],r.length-1,h);if(!y)return null;if(!h)throw new Error("Can't infer output type");return new ra(h,m,y)}evaluate(r){for(const[a,h]of this.branches)if(a.evaluate(r))return h.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[a,h]of this.branches)r(a),r(h);r(this.otherwise)}outputDefined(){return this.branches.every(([r,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class lo{constructor(r,a,h,m){this.type=r,this.input=a,this.beginIndex=h,this.endIndex=m}static parse(r,a){if(r.length<=2||r.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=a.parse(r[1],1,zt),m=a.parse(r[2],2,Xe);if(!h||!m)return null;if(!J(h.type,[Yr(zt),Rt,zt]))return a.error(`Expected first argument to be of type array or string, but found ${Cr(h.type)} instead`);if(r.length===4){const y=a.parse(r[3],3,Xe);return y?new lo(h.type,h,m,y):null}return new lo(h.type,h,m)}evaluate(r){const a=this.input.evaluate(r),h=this.beginIndex.evaluate(r);if(!F(a,["string","array"]))throw new hr(`Expected first argument to be of type array or string, but found ${Cr($t(a))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(r);return a.slice(h,m)}return a.slice(h)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function Ga(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Ha(o,r,a,h){return h.compare(r,a)===0}function na(o,r,a){const h=o!=="=="&&o!=="!=";return class kk{constructor(y,_,b){this.type=Ut,this.lhs=y,this.rhs=_,this.collator=b,this.hasUntypedArgument=y.type.kind==="value"||_.type.kind==="value"}static parse(y,_){if(y.length!==3&&y.length!==4)return _.error("Expected two or three arguments.");const b=y[0];let E=_.parse(y[1],1,zt);if(!E)return null;if(!Ga(b,E.type))return _.concat(1).error(`"${b}" comparisons are not supported for type '${Cr(E.type)}'.`);let I=_.parse(y[2],2,zt);if(!I)return null;if(!Ga(b,I.type))return _.concat(2).error(`"${b}" comparisons are not supported for type '${Cr(I.type)}'.`);if(E.type.kind!==I.type.kind&&E.type.kind!=="value"&&I.type.kind!=="value")return _.error(`Cannot compare types '${Cr(E.type)}' and '${Cr(I.type)}'.`);h&&(E.type.kind==="value"&&I.type.kind!=="value"?E=new er(I.type,[E]):E.type.kind!=="value"&&I.type.kind==="value"&&(I=new er(E.type,[I])));let M=null;if(y.length===4){if(E.type.kind!=="string"&&I.type.kind!=="string"&&E.type.kind!=="value"&&I.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(M=_.parse(y[3],3,vn),!M)return null}return new kk(E,I,M)}evaluate(y){const _=this.lhs.evaluate(y),b=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){const E=$t(_),I=$t(b);if(E.kind!==I.kind||E.kind!=="string"&&E.kind!=="number")throw new hr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${E.kind}, ${I.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const E=$t(_),I=$t(b);if(E.kind!=="string"||I.kind!=="string")return r(y,_,b)}return this.collator?a(y,_,b,this.collator.evaluate(y)):r(y,_,b)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}}}const Il=na("==",function(o,r,a){return r===a},Ha),Wa=na("!=",function(o,r,a){return r!==a},function(o,r,a,h){return!Ha(0,r,a,h)}),Gs=na("<",function(o,r,a){return r<a},function(o,r,a,h){return h.compare(r,a)<0}),ms=na(">",function(o,r,a){return r>a},function(o,r,a,h){return h.compare(r,a)>0}),Ml=na("<=",function(o,r,a){return r<=a},function(o,r,a,h){return h.compare(r,a)<=0}),Rl=na(">=",function(o,r,a){return r>=a},function(o,r,a,h){return h.compare(r,a)>=0});class No{constructor(r,a,h,m,y){this.type=Rt,this.number=r,this.locale=a,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=y}static parse(r,a){if(r.length!==3)return a.error("Expected two arguments.");const h=a.parse(r[1],1,Xe);if(!h)return null;const m=r[2];if(typeof m!="object"||Array.isArray(m))return a.error("NumberFormat options argument must be an object.");let y=null;if(m.locale&&(y=a.parse(m.locale,1,Rt),!y))return null;let _=null;if(m.currency&&(_=a.parse(m.currency,1,Rt),!_))return null;let b=null;if(m["min-fraction-digits"]&&(b=a.parse(m["min-fraction-digits"],1,Xe),!b))return null;let E=null;return m["max-fraction-digits"]&&(E=a.parse(m["max-fraction-digits"],1,Xe),!E)?null:new No(h,y,_,b,E)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Za{constructor(r){this.type=pn,this.sections=r}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");const h=r[1];if(!Array.isArray(h)&&typeof h=="object")return a.error("First argument must be an image or text section.");const m=[];let y=!1;for(let _=1;_<=r.length-1;++_){const b=r[_];if(y&&typeof b=="object"&&!Array.isArray(b)){y=!1;let E=null;if(b["font-scale"]&&(E=a.parse(b["font-scale"],1,Xe),!E))return null;let I=null;if(b["text-font"]&&(I=a.parse(b["text-font"],1,Yr(Rt)),!I))return null;let M=null;if(b["text-color"]&&(M=a.parse(b["text-color"],1,$r),!M))return null;const D=m[m.length-1];D.scale=E,D.font=I,D.textColor=M}else{const E=a.parse(r[_],1,zt);if(!E)return null;const I=E.type.kind;if(I!=="string"&&I!=="value"&&I!=="null"&&I!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,m.push({content:E,scale:null,font:null,textColor:null})}}return new Za(m)}evaluate(r){return new Ot(this.sections.map(a=>{const h=a.content.evaluate(r);return $t(h)===Ai?new Et("",h,null,null,null):new Et(Zr(h),null,a.scale?a.scale.evaluate(r):null,a.font?a.font.evaluate(r).join(","):null,a.textColor?a.textColor.evaluate(r):null)}))}eachChild(r){for(const a of this.sections)r(a.content),a.scale&&r(a.scale),a.font&&r(a.font),a.textColor&&r(a.textColor)}outputDefined(){return!1}}class zl{constructor(r){this.type=Ai,this.input=r}static parse(r,a){if(r.length!==2)return a.error("Expected two arguments.");const h=a.parse(r[1],1,Rt);return h?new zl(h):a.error("No image name provided.")}evaluate(r){const a=this.input.evaluate(r),h=cr.fromString(a);return h&&r.availableImages&&(h.available=r.availableImages.indexOf(a)>-1),h}eachChild(r){r(this.input)}outputDefined(){return!1}}class Ll{constructor(r){this.type=Xe,this.input=r}static parse(r,a){if(r.length!==2)return a.error(`Expected 1 argument, but found ${r.length-1} instead.`);const h=a.parse(r[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${Cr(h.type)} instead.`):new Ll(h):null}evaluate(r){const a=this.input.evaluate(r);if(typeof a=="string"||Array.isArray(a))return a.length;throw new hr(`Expected value to be of type string or array, but found ${Cr($t(a))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const Ca={"==":Il,"!=":Wa,">":ms,"<":Gs,">=":Rl,"<=":Ml,array:er,at:sn,boolean:er,case:ra,coalesce:En,collator:xr,format:Za,image:zl,in:Hn,"index-of":Pn,interpolate:Jr,"interpolate-hcl":Jr,"interpolate-lab":Jr,length:Ll,let:Ei,literal:Qt,match:_r,number:er,"number-format":No,object:er,slice:lo,step:Xt,string:er,"to-boolean":Lr,"to-color":Lr,"to-number":Lr,"to-string":Lr,var:Tt,within:we};function Ti(o,[r,a,h,m]){r=r.evaluate(o),a=a.evaluate(o),h=h.evaluate(o);const y=m?m.evaluate(o):1,_=Re(r,a,h,y);if(_)throw new hr(_);return new De(r/255,a/255,h/255,y,!1)}function Ol(o,r){return o in r}function ia(o,r){const a=r[o];return a===void 0?null:a}function ka(o){return{type:o}}function Dl(o){return{result:"success",value:o}}function Ka(o){return{result:"error",value:o}}function oa(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Tc(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Bl(o){return!!o.expression&&o.expression.interpolated}function Rr(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function gs(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Hs(o){return o}function Cc(o,r){const a=r.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",m=h||!(h||o.property!==void 0),y=o.type||(Bl(r)?"exponential":"interval");if(a||r.type==="padding"){const M=a?De.parse:it.parse;(o=Sn({},o)).stops&&(o.stops=o.stops.map(D=>[D[0],M(D[1])])),o.default=M(o.default?o.default:r.default)}if(o.colorSpace&&(_=o.colorSpace)!=="rgb"&&_!=="hcl"&&_!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var _;let b,E,I;if(y==="exponential")b=Ap;else if(y==="interval")b=yh;else if(y==="categorical"){b=Yg,E=Object.create(null);for(const M of o.stops)E[M[0]]=M[1];I=typeof o.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);b=Jg}if(h){const M={},D=[];for(let H=0;H<o.stops.length;H++){const ne=o.stops[H],te=ne[0].zoom;M[te]===void 0&&(M[te]={zoom:te,type:o.type,property:o.property,default:o.default,stops:[]},D.push(te)),M[te].stops.push([ne[0].value,ne[1]])}const j=[];for(const H of D)j.push([M[H].zoom,Cc(M[H],r)]);const V={name:"linear"};return{kind:"composite",interpolationType:V,interpolationFactor:Jr.interpolationFactor.bind(void 0,V),zoomStops:j.map(H=>H[0]),evaluate:({zoom:H},ne)=>Ap({stops:j,base:o.base},r,H).evaluate(H,ne)}}if(m){const M=y==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:Jr.interpolationFactor.bind(void 0,M),zoomStops:o.stops.map(D=>D[0]),evaluate:({zoom:D})=>b(o,r,D,E,I)}}return{kind:"source",evaluate(M,D){const j=D&&D.properties?D.properties[o.property]:void 0;return j===void 0?Fl(o.default,r.default):b(o,r,j,E,I)}}}function Fl(o,r,a){return o!==void 0?o:r!==void 0?r:a!==void 0?a:void 0}function Yg(o,r,a,h,m){return Fl(typeof a===m?h[a]:void 0,o.default,r.default)}function yh(o,r,a){if(Rr(a)!=="number")return Fl(o.default,r.default);const h=o.stops.length;if(h===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[h-1][0])return o.stops[h-1][1];const m=Ft(o.stops.map(y=>y[0]),a);return o.stops[m][1]}function Ap(o,r,a){const h=o.base!==void 0?o.base:1;if(Rr(a)!=="number")return Fl(o.default,r.default);const m=o.stops.length;if(m===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[m-1][0])return o.stops[m-1][1];const y=Ft(o.stops.map(M=>M[0]),a),_=function(M,D,j,V){const H=V-j,ne=M-j;return H===0?0:D===1?ne/H:(Math.pow(D,ne)-1)/(Math.pow(D,H)-1)}(a,h,o.stops[y][0],o.stops[y+1][0]),b=o.stops[y][1],E=o.stops[y+1][1],I=ar[r.type]||Hs;return typeof b.evaluate=="function"?{evaluate(...M){const D=b.evaluate.apply(void 0,M),j=E.evaluate.apply(void 0,M);if(D!==void 0&&j!==void 0)return I(D,j,_,o.colorSpace)}}:I(b,E,_,o.colorSpace)}function Jg(o,r,a){switch(r.type){case"color":a=De.parse(a);break;case"formatted":a=Ot.fromString(a.toString());break;case"resolvedImage":a=cr.fromString(a.toString());break;case"padding":a=it.parse(a);break;default:Rr(a)===r.type||r.type==="enum"&&r.values[a]||(a=void 0)}return Fl(a,o.default,r.default)}qt.register(Ca,{error:[{kind:"error"},[Rt],(o,[r])=>{throw new hr(r.evaluate(o))}],typeof:[Rt,[zt],(o,[r])=>Cr($t(r.evaluate(o)))],"to-rgba":[Yr(Xe,4),[$r],(o,[r])=>{const[a,h,m,y]=r.evaluate(o).rgb;return[255*a,255*h,255*m,y]}],rgb:[$r,[Xe,Xe,Xe],Ti],rgba:[$r,[Xe,Xe,Xe,Xe],Ti],has:{type:Ut,overloads:[[[Rt],(o,[r])=>Ol(r.evaluate(o),o.properties())],[[Rt,Mr],(o,[r,a])=>Ol(r.evaluate(o),a.evaluate(o))]]},get:{type:zt,overloads:[[[Rt],(o,[r])=>ia(r.evaluate(o),o.properties())],[[Rt,Mr],(o,[r,a])=>ia(r.evaluate(o),a.evaluate(o))]]},"feature-state":[zt,[Rt],(o,[r])=>ia(r.evaluate(o),o.featureState||{})],properties:[Mr,[],o=>o.properties()],"geometry-type":[Rt,[],o=>o.geometryType()],id:[zt,[],o=>o.id()],zoom:[Xe,[],o=>o.globals.zoom],"heatmap-density":[Xe,[],o=>o.globals.heatmapDensity||0],"line-progress":[Xe,[],o=>o.globals.lineProgress||0],accumulated:[zt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Xe,ka(Xe),(o,r)=>{let a=0;for(const h of r)a+=h.evaluate(o);return a}],"*":[Xe,ka(Xe),(o,r)=>{let a=1;for(const h of r)a*=h.evaluate(o);return a}],"-":{type:Xe,overloads:[[[Xe,Xe],(o,[r,a])=>r.evaluate(o)-a.evaluate(o)],[[Xe],(o,[r])=>-r.evaluate(o)]]},"/":[Xe,[Xe,Xe],(o,[r,a])=>r.evaluate(o)/a.evaluate(o)],"%":[Xe,[Xe,Xe],(o,[r,a])=>r.evaluate(o)%a.evaluate(o)],ln2:[Xe,[],()=>Math.LN2],pi:[Xe,[],()=>Math.PI],e:[Xe,[],()=>Math.E],"^":[Xe,[Xe,Xe],(o,[r,a])=>Math.pow(r.evaluate(o),a.evaluate(o))],sqrt:[Xe,[Xe],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[Xe,[Xe],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[Xe,[Xe],(o,[r])=>Math.log(r.evaluate(o))],log2:[Xe,[Xe],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[Xe,[Xe],(o,[r])=>Math.sin(r.evaluate(o))],cos:[Xe,[Xe],(o,[r])=>Math.cos(r.evaluate(o))],tan:[Xe,[Xe],(o,[r])=>Math.tan(r.evaluate(o))],asin:[Xe,[Xe],(o,[r])=>Math.asin(r.evaluate(o))],acos:[Xe,[Xe],(o,[r])=>Math.acos(r.evaluate(o))],atan:[Xe,[Xe],(o,[r])=>Math.atan(r.evaluate(o))],min:[Xe,ka(Xe),(o,r)=>Math.min(...r.map(a=>a.evaluate(o)))],max:[Xe,ka(Xe),(o,r)=>Math.max(...r.map(a=>a.evaluate(o)))],abs:[Xe,[Xe],(o,[r])=>Math.abs(r.evaluate(o))],round:[Xe,[Xe],(o,[r])=>{const a=r.evaluate(o);return a<0?-Math.round(-a):Math.round(a)}],floor:[Xe,[Xe],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[Xe,[Xe],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[Ut,[Rt,zt],(o,[r,a])=>o.properties()[r.value]===a.value],"filter-id-==":[Ut,[zt],(o,[r])=>o.id()===r.value],"filter-type-==":[Ut,[Rt],(o,[r])=>o.geometryType()===r.value],"filter-<":[Ut,[Rt,zt],(o,[r,a])=>{const h=o.properties()[r.value],m=a.value;return typeof h==typeof m&&h<m}],"filter-id-<":[Ut,[zt],(o,[r])=>{const a=o.id(),h=r.value;return typeof a==typeof h&&a<h}],"filter->":[Ut,[Rt,zt],(o,[r,a])=>{const h=o.properties()[r.value],m=a.value;return typeof h==typeof m&&h>m}],"filter-id->":[Ut,[zt],(o,[r])=>{const a=o.id(),h=r.value;return typeof a==typeof h&&a>h}],"filter-<=":[Ut,[Rt,zt],(o,[r,a])=>{const h=o.properties()[r.value],m=a.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[Ut,[zt],(o,[r])=>{const a=o.id(),h=r.value;return typeof a==typeof h&&a<=h}],"filter->=":[Ut,[Rt,zt],(o,[r,a])=>{const h=o.properties()[r.value],m=a.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[Ut,[zt],(o,[r])=>{const a=o.id(),h=r.value;return typeof a==typeof h&&a>=h}],"filter-has":[Ut,[zt],(o,[r])=>r.value in o.properties()],"filter-has-id":[Ut,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[Ut,[Yr(Rt)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[Ut,[Yr(zt)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[Ut,[Rt,Yr(zt)],(o,[r,a])=>a.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[Ut,[Rt,Yr(zt)],(o,[r,a])=>function(h,m,y,_){for(;y<=_;){const b=y+_>>1;if(m[b]===h)return!0;m[b]>h?_=b-1:y=b+1}return!1}(o.properties()[r.value],a.value,0,a.value.length-1)],all:{type:Ut,overloads:[[[Ut,Ut],(o,[r,a])=>r.evaluate(o)&&a.evaluate(o)],[ka(Ut),(o,r)=>{for(const a of r)if(!a.evaluate(o))return!1;return!0}]]},any:{type:Ut,overloads:[[[Ut,Ut],(o,[r,a])=>r.evaluate(o)||a.evaluate(o)],[ka(Ut),(o,r)=>{for(const a of r)if(a.evaluate(o))return!0;return!1}]]},"!":[Ut,[Ut],(o,[r])=>!r.evaluate(o)],"is-supported-script":[Ut,[Rt],(o,[r])=>{const a=o.globals&&o.globals.isSupportedScript;return!a||a(r.evaluate(o))}],upcase:[Rt,[Rt],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[Rt,[Rt],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[Rt,ka(zt),(o,r)=>r.map(a=>Zr(a.evaluate(o))).join("")],"resolved-locale":[Rt,[vn],(o,[r])=>r.evaluate(o).resolvedLocale()]});class vh{constructor(r,a){var h;this.expression=r,this._warningHistory={},this._evaluator=new qn,this._defaultValue=a?(h=a).type==="color"&&gs(h.default)?new De(0,0,0,0):h.type==="color"?De.parse(h.default)||null:h.type==="padding"?it.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(r,a,h,m,y,_){return this._evaluator.globals=r,this._evaluator.feature=a,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(r,a,h,m,y,_){this._evaluator.globals=r,this._evaluator.feature=a||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=_||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new hr(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}}}function kc(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Ca}function Tn(o,r){const a=new Dn(Ca,qe,[],r?function(m){const y={color:$r,string:Rt,number:Xe,enum:Rt,boolean:Ut,formatted:pn,padding:si,resolvedImage:Ai};return m.type==="array"?Yr(y[m.value]||zt,m.length):y[m.type]}(r):void 0),h=a.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Dl(new vh(h,r)):Ka(a.errors)}class _h{constructor(r,a){this.kind=r,this._styleExpression=a,this.isStateDependent=r!=="constant"&&!ut(a.expression)}evaluateWithoutErrorHandling(r,a,h,m,y,_){return this._styleExpression.evaluateWithoutErrorHandling(r,a,h,m,y,_)}evaluate(r,a,h,m,y,_){return this._styleExpression.evaluate(r,a,h,m,y,_)}}class Sr{constructor(r,a,h,m){this.kind=r,this.zoomStops=h,this._styleExpression=a,this.isStateDependent=r!=="camera"&&!ut(a.expression),this.interpolationType=m}evaluateWithoutErrorHandling(r,a,h,m,y,_){return this._styleExpression.evaluateWithoutErrorHandling(r,a,h,m,y,_)}evaluate(r,a,h,m,y,_){return this._styleExpression.evaluate(r,a,h,m,y,_)}interpolationFactor(r,a,h){return this.interpolationType?Jr.interpolationFactor(this.interpolationType,r,a,h):0}}function Pc(o,r){const a=Tn(o,r);if(a.result==="error")return a;const h=a.value.expression,m=nt(h);if(!m&&!oa(r))return Ka([new Xr("","data expressions not supported")]);const y=yt(h,["zoom"]);if(!y&&!Tc(r))return Ka([new Xr("","zoom expressions not supported")]);const _=on(h);return _||y?_ instanceof Xr?Ka([_]):_ instanceof Jr&&!Bl(r)?Ka([new Xr("",'"interpolate" expressions cannot be used with this property')]):Dl(_?new Sr(m?"camera":"composite",a.value,_.labels,_ instanceof Jr?_.interpolation:void 0):new _h(m?"constant":"source",a.value)):Ka([new Xr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ln{constructor(r,a){this._parameters=r,this._specification=a,Sn(this,Cc(this._parameters,this._specification))}static deserialize(r){return new ln(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function on(o){let r=null;if(o instanceof Ei)r=on(o.result);else if(o instanceof En){for(const a of o.args)if(r=on(a),r)break}else(o instanceof Xt||o instanceof Jr)&&o.input instanceof qt&&o.input.name==="zoom"&&(r=o);return r instanceof Xr||o.eachChild(a=>{const h=on(a);h instanceof Xr?r=h:!r&&h?r=new Xr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&h&&r!==h&&(r=new Xr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Ws(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!Ws(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Ip={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function xh(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Ws(o)||(o=Ac(o));const r=Tn(o,Ip);if(r.result==="error")throw new Error(r.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,h,m)=>r.value.evaluate(a,h,{},m),needGeometry:Mp(o)}}function Qg(o,r){return o<r?-1:o>r?1:0}function Mp(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let r=1;r<o.length;r++)if(Mp(o[r]))return!0;return!1}function Ac(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?Ic(o[1],o[2],"=="):r==="!="?Nl(Ic(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Ic(o[1],o[2],r):r==="any"?(a=o.slice(1),["any"].concat(a.map(Ac))):r==="all"?["all"].concat(o.slice(1).map(Ac)):r==="none"?["all"].concat(o.slice(1).map(Ac).map(Nl)):r==="in"?bh(o[1],o.slice(2)):r==="!in"?Nl(bh(o[1],o.slice(2))):r==="has"?wh(o[1]):r==="!has"?Nl(wh(o[1])):r!=="within"||o;var a}function Ic(o,r,a){switch(o){case"$type":return[`filter-type-${a}`,r];case"$id":return[`filter-id-${a}`,r];default:return[`filter-${a}`,o,r]}}function bh(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(a=>typeof a!=typeof r[0])?["filter-in-large",o,["literal",r.sort(Qg)]]:["filter-in-small",o,["literal",r]]}}function wh(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Nl(o){return["!",o]}function Ul(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let m="[";for(const y of o)m+=`${Ul(y)},`;return`${m}]`}const a=Object.keys(o).sort();let h="{";for(let m=0;m<a.length;m++)h+=`${JSON.stringify(a[m])}:${Ul(o[a[m]])},`;return`${h}}`}function ey(o){let r="";for(const a of Pr)r+=`/${Ul(o[a])}`;return r}function Rp(o){const r=o.value;return r?[new Ve(o.key,r,"constants have been deprecated as of v8")]:[]}function Wn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function ys(o){if(Array.isArray(o))return o.map(ys);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const a in o)r[a]=ys(o[a]);return r}return Wn(o)}function Eo(o){const r=o.key,a=o.value,h=o.valueSpec||{},m=o.objectElementValidators||{},y=o.style,_=o.styleSpec,b=o.validateSpec;let E=[];const I=Rr(a);if(I!=="object")return[new Ve(r,a,`object expected, ${I} found`)];for(const M in a){const D=M.split(".")[0],j=h[D]||h["*"];let V;if(m[D])V=m[D];else if(h[D])V=b;else if(m["*"])V=m["*"];else{if(!h["*"]){E.push(new Ve(r,a[M],`unknown property "${M}"`));continue}V=b}E=E.concat(V({key:(r&&`${r}.`)+M,value:a[M],valueSpec:j,style:y,styleSpec:_,object:a,objectKey:M,validateSpec:b},a))}for(const M in h)m[M]||h[M].required&&h[M].default===void 0&&a[M]===void 0&&E.push(new Ve(r,a,`missing required property "${M}"`));return E}function zp(o){const r=o.value,a=o.valueSpec,h=o.style,m=o.styleSpec,y=o.key,_=o.arrayElementValidator||o.validateSpec;if(Rr(r)!=="array")return[new Ve(y,r,`array expected, ${Rr(r)} found`)];if(a.length&&r.length!==a.length)return[new Ve(y,r,`array length ${a.length} expected, length ${r.length} found`)];if(a["min-length"]&&r.length<a["min-length"])return[new Ve(y,r,`array length at least ${a["min-length"]} expected, length ${r.length} found`)];let b={type:a.value,values:a.values};m.$version<7&&(b.function=a.function),Rr(a.value)==="object"&&(b=a.value);let E=[];for(let I=0;I<r.length;I++)E=E.concat(_({array:r,arrayIndex:I,value:r[I],valueSpec:b,validateSpec:o.validateSpec,style:h,styleSpec:m,key:`${y}[${I}]`}));return E}function Sh(o){const r=o.key,a=o.value,h=o.valueSpec;let m=Rr(a);return m==="number"&&a!=a&&(m="NaN"),m!=="number"?[new Ve(r,a,`number expected, ${m} found`)]:"minimum"in h&&a<h.minimum?[new Ve(r,a,`${a} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&a>h.maximum?[new Ve(r,a,`${a} is greater than the maximum value ${h.maximum}`)]:[]}function Lp(o){const r=o.valueSpec,a=Wn(o.value.type);let h,m,y,_={};const b=a!=="categorical"&&o.value.property===void 0,E=!b,I=Rr(o.value.stops)==="array"&&Rr(o.value.stops[0])==="array"&&Rr(o.value.stops[0][0])==="object",M=Eo({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(V){if(a==="identity")return[new Ve(V.key,V.value,'identity function may not have a "stops" property')];let H=[];const ne=V.value;return H=H.concat(zp({key:V.key,value:ne,valueSpec:V.valueSpec,validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec,arrayElementValidator:D})),Rr(ne)==="array"&&ne.length===0&&H.push(new Ve(V.key,ne,"array must have at least one stop")),H},default:function(V){return V.validateSpec({key:V.key,value:V.value,valueSpec:r,validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec})}}});return a==="identity"&&b&&M.push(new Ve(o.key,o.value,'missing required property "property"')),a==="identity"||o.value.stops||M.push(new Ve(o.key,o.value,'missing required property "stops"')),a==="exponential"&&o.valueSpec.expression&&!Bl(o.valueSpec)&&M.push(new Ve(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(E&&!oa(o.valueSpec)?M.push(new Ve(o.key,o.value,"property functions not supported")):b&&!Tc(o.valueSpec)&&M.push(new Ve(o.key,o.value,"zoom functions not supported"))),a!=="categorical"&&!I||o.value.property!==void 0||M.push(new Ve(o.key,o.value,'"property" property is required')),M;function D(V){let H=[];const ne=V.value,te=V.key;if(Rr(ne)!=="array")return[new Ve(te,ne,`array expected, ${Rr(ne)} found`)];if(ne.length!==2)return[new Ve(te,ne,`array length 2 expected, length ${ne.length} found`)];if(I){if(Rr(ne[0])!=="object")return[new Ve(te,ne,`object expected, ${Rr(ne[0])} found`)];if(ne[0].zoom===void 0)return[new Ve(te,ne,"object stop key must have zoom")];if(ne[0].value===void 0)return[new Ve(te,ne,"object stop key must have value")];if(y&&y>Wn(ne[0].zoom))return[new Ve(te,ne[0].zoom,"stop zoom values must appear in ascending order")];Wn(ne[0].zoom)!==y&&(y=Wn(ne[0].zoom),m=void 0,_={}),H=H.concat(Eo({key:`${te}[0]`,value:ne[0],valueSpec:{zoom:{}},validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec,objectElementValidators:{zoom:Sh,value:j}}))}else H=H.concat(j({key:`${te}[0]`,value:ne[0],valueSpec:{},validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec},ne));return kc(ys(ne[1]))?H.concat([new Ve(`${te}[1]`,ne[1],"expressions are not allowed in function stops.")]):H.concat(V.validateSpec({key:`${te}[1]`,value:ne[1],valueSpec:r,validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec}))}function j(V,H){const ne=Rr(V.value),te=Wn(V.value),fe=V.value!==null?V.value:H;if(h){if(ne!==h)return[new Ve(V.key,fe,`${ne} stop domain type must match previous stop domain type ${h}`)]}else h=ne;if(ne!=="number"&&ne!=="string"&&ne!=="boolean")return[new Ve(V.key,fe,"stop domain value must be a number, string, or boolean")];if(ne!=="number"&&a!=="categorical"){let be=`number expected, ${ne} found`;return oa(r)&&a===void 0&&(be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ve(V.key,fe,be)]}return a!=="categorical"||ne!=="number"||isFinite(te)&&Math.floor(te)===te?a!=="categorical"&&ne==="number"&&m!==void 0&&te<m?[new Ve(V.key,fe,"stop domain values must appear in ascending order")]:(m=te,a==="categorical"&&te in _?[new Ve(V.key,fe,"stop domain values must be unique")]:(_[te]=!0,[])):[new Ve(V.key,fe,`integer expected, found ${te}`)]}}function vs(o){const r=(o.expressionContext==="property"?Pc:Tn)(ys(o.value),o.valueSpec);if(r.result==="error")return r.value.map(h=>new Ve(`${o.key}${h.key}`,o.value,h.message));const a=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!a.outputDefined())return[new Ve(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!ut(a))return[new Ve(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!ut(a))return[new Ve(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!yt(a,["zoom","feature-state"]))return[new Ve(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!nt(a))return[new Ve(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function jl(o){const r=o.key,a=o.value,h=o.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(Wn(a))===-1&&m.push(new Ve(r,a,`expected one of [${h.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(h.values).indexOf(Wn(a))===-1&&m.push(new Ve(r,a,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(a)} found`)),m}function Zs(o){return Ws(ys(o.value))?vs(Sn({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Op(o)}function Op(o){const r=o.value,a=o.key;if(Rr(r)!=="array")return[new Ve(a,r,`array expected, ${Rr(r)} found`)];const h=o.styleSpec;let m,y=[];if(r.length<1)return[new Ve(a,r,"filter array must have at least 1 element")];switch(y=y.concat(jl({key:`${a}[0]`,value:r[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),Wn(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&Wn(r[1])==="$type"&&y.push(new Ve(a,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&y.push(new Ve(a,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(m=Rr(r[1]),m!=="string"&&y.push(new Ve(`${a}[1]`,r[1],`string expected, ${m} found`)));for(let _=2;_<r.length;_++)m=Rr(r[_]),Wn(r[1])==="$type"?y=y.concat(jl({key:`${a}[${_}]`,value:r[_],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&y.push(new Ve(`${a}[${_}]`,r[_],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let _=1;_<r.length;_++)y=y.concat(Op({key:`${a}[${_}]`,value:r[_],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":m=Rr(r[1]),r.length!==2?y.push(new Ve(a,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="string"&&y.push(new Ve(`${a}[1]`,r[1],`string expected, ${m} found`));break;case"within":m=Rr(r[1]),r.length!==2?y.push(new Ve(a,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="object"&&y.push(new Ve(`${a}[1]`,r[1],`object expected, ${m} found`))}return y}function Eh(o,r){const a=o.key,h=o.validateSpec,m=o.style,y=o.styleSpec,_=o.value,b=o.objectKey,E=y[`${r}_${o.layerType}`];if(!E)return[];const I=b.match(/^(.*)-transition$/);if(r==="paint"&&I&&E[I[1]]&&E[I[1]].transition)return h({key:a,value:_,valueSpec:y.transition,style:m,styleSpec:y});const M=o.valueSpec||E[b];if(!M)return[new Ve(a,_,`unknown property "${b}"`)];let D;if(Rr(_)==="string"&&oa(M)&&!M.tokens&&(D=/^{([^}]+)}$/.exec(_)))return[new Ve(a,_,`"${b}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(D[1])} }\`.`)];const j=[];return o.layerType==="symbol"&&(b==="text-field"&&m&&!m.glyphs&&j.push(new Ve(a,_,'use of "text-field" requires a style "glyphs" property')),b==="text-font"&&gs(ys(_))&&Wn(_.type)==="identity"&&j.push(new Ve(a,_,'"text-font" does not support identity functions'))),j.concat(h({key:o.key,value:_,valueSpec:M,style:m,styleSpec:y,expressionContext:"property",propertyType:r,propertyKey:b}))}function Th(o){return Eh(o,"paint")}function Dp(o){return Eh(o,"layout")}function Mc(o){let r=[];const a=o.value,h=o.key,m=o.style,y=o.styleSpec;a.type||a.ref||r.push(new Ve(h,a,'either "type" or "ref" is required'));let _=Wn(a.type);const b=Wn(a.ref);if(a.id){const E=Wn(a.id);for(let I=0;I<o.arrayIndex;I++){const M=m.layers[I];Wn(M.id)===E&&r.push(new Ve(h,a.id,`duplicate layer id "${a.id}", previously used at line ${M.id.__line__}`))}}if("ref"in a){let E;["type","source","source-layer","filter","layout"].forEach(I=>{I in a&&r.push(new Ve(h,a[I],`"${I}" is prohibited for ref layers`))}),m.layers.forEach(I=>{Wn(I.id)===b&&(E=I)}),E?E.ref?r.push(new Ve(h,a.ref,"ref cannot reference another ref layer")):_=Wn(E.type):r.push(new Ve(h,a.ref,`ref layer "${b}" not found`))}else if(_!=="background")if(a.source){const E=m.sources&&m.sources[a.source],I=E&&Wn(E.type);E?I==="vector"&&_==="raster"?r.push(new Ve(h,a.source,`layer "${a.id}" requires a raster source`)):I==="raster"&&_!=="raster"?r.push(new Ve(h,a.source,`layer "${a.id}" requires a vector source`)):I!=="vector"||a["source-layer"]?I==="raster-dem"&&_!=="hillshade"?r.push(new Ve(h,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!a.paint||!a.paint["line-gradient"]||I==="geojson"&&E.lineMetrics||r.push(new Ve(h,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new Ve(h,a,`layer "${a.id}" must specify a "source-layer"`)):r.push(new Ve(h,a.source,`source "${a.source}" not found`))}else r.push(new Ve(h,a,'missing required property "source"'));return r=r.concat(Eo({key:h,value:a,valueSpec:y.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:a.type,valueSpec:y.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:a,objectKey:"type"}),filter:Zs,layout:E=>Eo({layer:a,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":I=>Dp(Sn({layerType:_},I))}}),paint:E=>Eo({layer:a,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":I=>Th(Sn({layerType:_},I))}})}})),r}function aa(o){const r=o.value,a=o.key,h=Rr(r);return h!=="string"?[new Ve(a,r,`string expected, ${h} found`)]:[]}const Rc={promoteId:function({key:o,value:r}){if(Rr(r)==="string")return aa({key:o,value:r});{const a=[];for(const h in r)a.push(...aa({key:`${o}.${h}`,value:r[h]}));return a}}};function zc(o){const r=o.value,a=o.key,h=o.styleSpec,m=o.style,y=o.validateSpec;if(!r.type)return[new Ve(a,r,'"type" is required')];const _=Wn(r.type);let b;switch(_){case"vector":case"raster":case"raster-dem":return b=Eo({key:a,value:r,valueSpec:h[`source_${_.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:Rc,validateSpec:y}),b;case"geojson":if(b=Eo({key:a,value:r,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:y,objectElementValidators:Rc}),r.cluster)for(const E in r.clusterProperties){const[I,M]=r.clusterProperties[E],D=typeof I=="string"?[I,["accumulated"],["get",E]]:I;b.push(...vs({key:`${a}.${E}.map`,value:M,validateSpec:y,expressionContext:"cluster-map"})),b.push(...vs({key:`${a}.${E}.reduce`,value:D,validateSpec:y,expressionContext:"cluster-reduce"}))}return b;case"video":return Eo({key:a,value:r,valueSpec:h.source_video,style:m,validateSpec:y,styleSpec:h});case"image":return Eo({key:a,value:r,valueSpec:h.source_image,style:m,validateSpec:y,styleSpec:h});case"canvas":return[new Ve(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return jl({key:`${a}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:y,styleSpec:h})}}function Bp(o){const r=o.value,a=o.styleSpec,h=a.light,m=o.style;let y=[];const _=Rr(r);if(r===void 0)return y;if(_!=="object")return y=y.concat([new Ve("light",r,`object expected, ${_} found`)]),y;for(const b in r){const E=b.match(/^(.*)-transition$/);y=y.concat(E&&h[E[1]]&&h[E[1]].transition?o.validateSpec({key:b,value:r[b],valueSpec:a.transition,validateSpec:o.validateSpec,style:m,styleSpec:a}):h[b]?o.validateSpec({key:b,value:r[b],valueSpec:h[b],validateSpec:o.validateSpec,style:m,styleSpec:a}):[new Ve(b,r[b],`unknown property "${b}"`)])}return y}function $l(o){const r=o.value,a=o.styleSpec,h=a.terrain,m=o.style;let y=[];const _=Rr(r);if(r===void 0)return y;if(_!=="object")return y=y.concat([new Ve("terrain",r,`object expected, ${_} found`)]),y;for(const b in r)y=y.concat(h[b]?o.validateSpec({key:b,value:r[b],valueSpec:h[b],validateSpec:o.validateSpec,style:m,styleSpec:a}):[new Ve(b,r[b],`unknown property "${b}"`)]);return y}function Fp(o){let r=[];const a=o.value,h=o.key;if(Array.isArray(a)){const m=[],y=[];for(const _ in a)a[_].id&&m.includes(a[_].id)&&r.push(new Ve(h,a,`all the sprites' ids must be unique, but ${a[_].id} is duplicated`)),m.push(a[_].id),a[_].url&&y.includes(a[_].url)&&r.push(new Ve(h,a,`all the sprites' URLs must be unique, but ${a[_].url} is duplicated`)),y.push(a[_].url),r=r.concat(Eo({key:`${h}[${_}]`,value:a[_],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return aa({key:h,value:a})}const Np={"*":()=>[],array:zp,boolean:function(o){const r=o.value,a=o.key,h=Rr(r);return h!=="boolean"?[new Ve(a,r,`boolean expected, ${h} found`)]:[]},number:Sh,color:function(o){const r=o.key,a=o.value,h=Rr(a);return h!=="string"?[new Ve(r,a,`color expected, ${h} found`)]:De.parse(String(a))?[]:[new Ve(r,a,`color expected, "${a}" found`)]},constants:Rp,enum:jl,filter:Zs,function:Lp,layer:Mc,object:Eo,source:zc,light:Bp,terrain:$l,string:aa,formatted:function(o){return aa(o).length===0?[]:vs(o)},resolvedImage:function(o){return aa(o).length===0?[]:vs(o)},padding:function(o){const r=o.key,a=o.value;if(Rr(a)==="array"){if(a.length<1||a.length>4)return[new Ve(r,a,`padding requires 1 to 4 values; ${a.length} values found`)];const h={type:"number"};let m=[];for(let y=0;y<a.length;y++)m=m.concat(o.validateSpec({key:`${r}[${y}]`,value:a[y],validateSpec:o.validateSpec,valueSpec:h}));return m}return Sh({key:r,value:a,valueSpec:{}})},sprite:Fp};function Vl(o){const r=o.value,a=o.valueSpec,h=o.styleSpec;return o.validateSpec=Vl,a.expression&&gs(Wn(r))?Lp(o):a.expression&&kc(ys(r))?vs(o):a.type&&Np[a.type]?Np[a.type](o):Eo(Sn({},o,{valueSpec:a.type?h[a.type]:a}))}function Up(o){const r=o.value,a=o.key,h=aa(o);return h.length||(r.indexOf("{fontstack}")===-1&&h.push(new Ve(a,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&h.push(new Ve(a,r,'"glyphs" url must include a "{range}" token'))),h}function sa(o,r=Ae){let a=[];return a=a.concat(Vl({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:Vl,objectElementValidators:{glyphs:Up,"*":()=>[]}})),o.constants&&(a=a.concat(Rp({key:"constants",value:o.constants,style:o,styleSpec:r,validateSpec:Vl}))),ql(a)}function To(o){return function(r){return o({...r,validateSpec:Vl})}}function ql(o){return[].concat(o).sort((r,a)=>r.line-a.line)}function ei(o){return function(...r){return ql(o.apply(this,r))}}sa.source=ei(To(zc)),sa.sprite=ei(To(Fp)),sa.glyphs=ei(To(Up)),sa.light=ei(To(Bp)),sa.terrain=ei(To($l)),sa.layer=ei(To(Mc)),sa.filter=ei(To(Zs)),sa.paintProperty=ei(To(Th)),sa.layoutProperty=ei(To(Dp));const Xa=sa,ty=Xa.light,ry=Xa.paintProperty,ny=Xa.layoutProperty;function Ks(o,r){let a=!1;if(r&&r.length)for(const h of r)o.fire(new Mn(new Error(h.message))),a=!0;return a}class Gl{constructor(r,a,h){const m=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const _=new Int32Array(this.arrayBuffer);r=_[0],this.d=(a=_[1])+2*(h=_[2]);for(let E=0;E<this.d*this.d;E++){const I=_[3+E],M=_[3+E+1];m.push(I===M?null:_.subarray(I,M))}const b=_[3+m.length+1];this.keys=_.subarray(_[3+m.length],b),this.bboxes=_.subarray(b),this.insert=this._insertReadonly}else{this.d=a+2*h;for(let _=0;_<this.d*this.d;_++)m.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=r,this.padding=h,this.scale=a/r,this.uid=0;const y=h/a*r;this.min=-y,this.max=r+y}insert(r,a,h,m,y){this._forEachCell(a,h,m,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(a),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,a,h,m,y,_){this.cells[y].push(_)}query(r,a,h,m,y){const _=this.min,b=this.max;if(r<=_&&a<=_&&b<=h&&b<=m&&!y)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(r,a,h,m,this._queryCell,E,{},y),E}}_queryCell(r,a,h,m,y,_,b,E){const I=this.cells[y];if(I!==null){const M=this.keys,D=this.bboxes;for(let j=0;j<I.length;j++){const V=I[j];if(b[V]===void 0){const H=4*V;(E?E(D[H+0],D[H+1],D[H+2],D[H+3]):r<=D[H+2]&&a<=D[H+3]&&h>=D[H+0]&&m>=D[H+1])?(b[V]=!0,_.push(M[V])):b[V]=!1}}}}_forEachCell(r,a,h,m,y,_,b,E){const I=this._convertToCellCoord(r),M=this._convertToCellCoord(a),D=this._convertToCellCoord(h),j=this._convertToCellCoord(m);for(let V=I;V<=D;V++)for(let H=M;H<=j;H++){const ne=this.d*H+V;if((!E||E(this._convertFromCellCoord(V),this._convertFromCellCoord(H),this._convertFromCellCoord(V+1),this._convertFromCellCoord(H+1)))&&y.call(this,r,a,h,m,ne,_,b,E))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,a=3+this.cells.length+1+1;let h=0;for(let _=0;_<this.cells.length;_++)h+=this.cells[_].length;const m=new Int32Array(a+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let y=a;for(let _=0;_<r.length;_++){const b=r[_];m[3+_]=y,m.set(b,y),y+=b.length}return m[3+r.length]=y,m.set(this.keys,y),y+=this.keys.length,m[3+r.length+1]=y,m.set(this.bboxes,y),y+=this.bboxes.length,m.buffer}static serialize(r,a){const h=r.toArrayBuffer();return a&&a.push(h),{buffer:h}}static deserialize(r){return new Gl(r.buffer)}}const la={};function xt(o,r,a={}){if(la[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),la[o]={klass:r,omit:a.omit||[],shallow:a.shallow||[]}}xt("Object",Object),xt("TransferableGridIndex",Gl),xt("Color",De),xt("Error",Error),xt("AJAXError",or),xt("ResolvedImage",cr),xt("StylePropertyFunction",ln),xt("StyleExpression",vh,{omit:["_evaluator"]}),xt("ZoomDependentExpression",Sr),xt("ZoomConstantExpression",_h),xt("CompoundExpression",qt,{omit:["_evaluate"]});for(const o in Ca)Ca[o]._classRegistryKey||xt(`Expression_${o}`,Ca[o]);function Lc(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Hl(o,r){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(Lc(o)||Mt(o))return r&&r.push(o),o;if(ArrayBuffer.isView(o)){const a=o;return r&&r.push(a.buffer),a}if(o instanceof ImageData)return r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const a=[];for(const h of o)a.push(Hl(h,r));return a}if(typeof o=="object"){const a=o.constructor,h=a._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!la[h])throw new Error(`${h} is not registered.`);const m=a.serialize?a.serialize(o,r):{};if(a.serialize){if(r&&m===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const y in o){if(!o.hasOwnProperty(y)||la[h].omit.indexOf(y)>=0)continue;const _=o[y];m[y]=la[h].shallow.indexOf(y)>=0?_:Hl(_,r)}o instanceof Error&&(m.message=o.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(m.$name=h),m}throw new Error("can't serialize object of type "+typeof o)}function Pa(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||Lc(o)||Mt(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Pa);if(typeof o=="object"){const r=o.$name||"Object";if(!la[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:a}=la[r];if(!a)throw new Error(`can't deserialize unregistered class ${r}`);if(a.deserialize)return a.deserialize(o);const h=Object.create(a.prototype);for(const m of Object.keys(o)){if(m==="$name")continue;const y=o[m];h[m]=la[r].shallow.indexOf(m)>=0?y:Pa(y)}return h}throw new Error("can't deserialize object of type "+typeof o)}class jp{constructor(){this.first=!0}update(r,a){const h=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=a),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=h,!0))}}const ht={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Oc(o){for(const r of o)if(Dc(r.charCodeAt(0)))return!0;return!1}function Ch(o){for(const r of o)if(!$p(r.charCodeAt(0)))return!1;return!0}function $p(o){return!(ht.Arabic(o)||ht["Arabic Supplement"](o)||ht["Arabic Extended-A"](o)||ht["Arabic Presentation Forms-A"](o)||ht["Arabic Presentation Forms-B"](o))}function Dc(o){return!(o!==746&&o!==747&&(o<4352||!(ht["Bopomofo Extended"](o)||ht.Bopomofo(o)||ht["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||ht["CJK Compatibility Ideographs"](o)||ht["CJK Compatibility"](o)||ht["CJK Radicals Supplement"](o)||ht["CJK Strokes"](o)||!(!ht["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||ht["CJK Unified Ideographs Extension A"](o)||ht["CJK Unified Ideographs"](o)||ht["Enclosed CJK Letters and Months"](o)||ht["Hangul Compatibility Jamo"](o)||ht["Hangul Jamo Extended-A"](o)||ht["Hangul Jamo Extended-B"](o)||ht["Hangul Jamo"](o)||ht["Hangul Syllables"](o)||ht.Hiragana(o)||ht["Ideographic Description Characters"](o)||ht.Kanbun(o)||ht["Kangxi Radicals"](o)||ht["Katakana Phonetic Extensions"](o)||ht.Katakana(o)&&o!==12540||!(!ht["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!ht["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||ht["Unified Canadian Aboriginal Syllabics"](o)||ht["Unified Canadian Aboriginal Syllabics Extended"](o)||ht["Vertical Forms"](o)||ht["Yijing Hexagram Symbols"](o)||ht["Yi Syllables"](o)||ht["Yi Radicals"](o))))}function Vp(o){return!(Dc(o)||function(r){return!!(ht["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||ht["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||ht["Letterlike Symbols"](r)||ht["Number Forms"](r)||ht["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||ht["Control Pictures"](r)&&r!==9251||ht["Optical Character Recognition"](r)||ht["Enclosed Alphanumerics"](r)||ht["Geometric Shapes"](r)||ht["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||ht["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||ht["CJK Symbols and Punctuation"](r)||ht.Katakana(r)||ht["Private Use Area"](r)||ht["CJK Compatibility Forms"](r)||ht["Small Form Variants"](r)||ht["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function Bc(o){return o>=1424&&o<=2303||ht["Arabic Presentation Forms-A"](o)||ht["Arabic Presentation Forms-B"](o)}function Fc(o,r){return!(!r&&Bc(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||ht.Khmer(o))}function qp(o){for(const r of o)if(Bc(r.charCodeAt(0)))return!0;return!1}const kh="deferred",Nc="loading",Ph="loaded";let Wl=null,Ji="unavailable",Ya=null;const Gp=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Ji="error"),Wl&&Wl(o)};function Ah(){Uc.fire(new kr("pluginStateChange",{pluginStatus:Ji,pluginURL:Ya}))}const Uc=new hn,Ih=function(){return Ji},Hp=function(){if(Ji!==kh||!Ya)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ji=Nc,Ah(),Ya&&zr({url:Ya},o=>{o?Gp(o):(Ji=Ph,Ah())})},Co={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ji===Ph||Co.applyArabicShaping!=null,isLoading:()=>Ji===Nc,setState(o){if(!Nt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Ji=o.pluginStatus,Ya=o.pluginURL},isParsed(){if(!Nt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Co.applyArabicShaping!=null&&Co.processBidirectionalText!=null&&Co.processStyledBidirectionalText!=null},getPluginURL(){if(!Nt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Ya}};class xn{constructor(r,a){this.zoom=r,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new jp,this.transition={})}isSupportedScript(r){return function(a,h){for(const m of a)if(!Fc(m.charCodeAt(0),h))return!1;return!0}(r,Co.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,a=r-Math.floor(r),h=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*a}}}class jc{constructor(r,a){this.property=r,this.value=a,this.expression=function(h,m){if(gs(h))return new ln(h,m);if(kc(h)){const y=Pc(h,m);if(y.result==="error")throw new Error(y.value.map(_=>`${_.key}: ${_.message}`).join(", "));return y.value}{let y=h;return m.type==="color"&&typeof h=="string"?y=De.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)||(y=it.parse(h)),{kind:"constant",evaluate:()=>y}}}(a===void 0?r.specification.default:a,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,a,h){return this.property.possiblyEvaluate(this,r,a,h)}}class Mh{constructor(r){this.property=r,this.value=new jc(r,void 0)}transitioned(r,a){return new Zl(this.property,this.value,a,K({},r.transition,this.transition),r.now)}untransitioned(){return new Zl(this.property,this.value,null,{},0)}}class Wp{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return Me(this._values[r].value.value)}setValue(r,a){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Mh(this._values[r].property)),this._values[r].value=new jc(this._values[r].property,a===null?void 0:Me(a))}getTransition(r){return Me(this._values[r].transition)}setTransition(r,a){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Mh(this._values[r].property)),this._values[r].transition=Me(a)||void 0}serialize(){const r={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(r[a]=h);const m=this.getTransition(a);m!==void 0&&(r[`${a}-transition`]=m)}return r}transitioned(r,a){const h=new Zp(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(r,a._values[m]);return h}untransitioned(){const r=new Zp(this._properties);for(const a of Object.keys(this._values))r._values[a]=this._values[a].untransitioned();return r}}class Zl{constructor(r,a,h,m,y){this.property=r,this.value=a,this.begin=y+m.delay||0,this.end=this.begin+m.duration||0,r.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(r,a,h){const m=r.now||0,y=this.value.possiblyEvaluate(r,a,h),_=this.prior;if(_){if(m>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(m<this.begin)return _.possiblyEvaluate(r,a,h);{const b=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(r,a,h),y,function(E){if(E<=0)return 0;if(E>=1)return 1;const I=E*E,M=I*E;return 4*(E<.5?M:3*(E-I)+M-.75)}(b))}}return y}}class Zp{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,a,h){const m=new $c(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(r,a,h);return m}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Rh{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}getValue(r){return Me(this._values[r].value)}setValue(r,a){this._values[r]=new jc(this._values[r].property,a===null?void 0:Me(a))}serialize(){const r={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(r[a]=h)}return r}possiblyEvaluate(r,a,h){const m=new $c(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(r,a,h);return m}}class ca{constructor(r,a,h){this.property=r,this.value=a,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,a,h,m){return this.property.evaluate(this.value,this.parameters,r,a,h,m)}}class $c{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class At{constructor(r){this.specification=r}possiblyEvaluate(r,a){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(a)}interpolate(r,a,h){const m=ar[this.specification.type];return m?m(r,a,h):r}}class Ht{constructor(r,a){this.specification=r,this.overrides=a}possiblyEvaluate(r,a,h,m){return new ca(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(a,null,{},h,m)}:r.expression,a)}interpolate(r,a,h){if(r.value.kind!=="constant"||a.value.kind!=="constant")return r;if(r.value.value===void 0||a.value.value===void 0)return new ca(this,{kind:"constant",value:void 0},r.parameters);const m=ar[this.specification.type];if(m){const y=m(r.value.value,a.value.value,h);return new ca(this,{kind:"constant",value:y},r.parameters)}return r}evaluate(r,a,h,m,y,_){return r.kind==="constant"?r.value:r.evaluate(a,h,m,y,_)}}class Kl extends Ht{possiblyEvaluate(r,a,h,m){if(r.value===void 0)return new ca(this,{kind:"constant",value:void 0},a);if(r.expression.kind==="constant"){const y=r.expression.evaluate(a,null,{},h,m),_=r.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,b=this._calculate(_,_,_,a);return new ca(this,{kind:"constant",value:b},a)}if(r.expression.kind==="camera"){const y=this._calculate(r.expression.evaluate({zoom:a.zoom-1}),r.expression.evaluate({zoom:a.zoom}),r.expression.evaluate({zoom:a.zoom+1}),a);return new ca(this,{kind:"constant",value:y},a)}return new ca(this,r.expression,a)}evaluate(r,a,h,m,y,_){if(r.kind==="source"){const b=r.evaluate(a,h,m,y,_);return this._calculate(b,b,b,a)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(a.zoom)-1},h,m),r.evaluate({zoom:Math.floor(a.zoom)},h,m),r.evaluate({zoom:Math.floor(a.zoom)+1},h,m),a):r.value}_calculate(r,a,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:a}:{from:h,to:a}}interpolate(r){return r}}class zh{constructor(r){this.specification=r}possiblyEvaluate(r,a,h,m){if(r.value!==void 0){if(r.expression.kind==="constant"){const y=r.expression.evaluate(a,null,{},h,m);return this._calculate(y,y,y,a)}return this._calculate(r.expression.evaluate(new xn(Math.floor(a.zoom-1),a)),r.expression.evaluate(new xn(Math.floor(a.zoom),a)),r.expression.evaluate(new xn(Math.floor(a.zoom+1),a)),a)}}_calculate(r,a,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:a}:{from:h,to:a}}interpolate(r){return r}}class Lh{constructor(r){this.specification=r}possiblyEvaluate(r,a,h,m){return!!r.expression.evaluate(a,null,{},h,m)}interpolate(){return!1}}class Qi{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in r){const h=r[a];h.specification.overridable&&this.overridableProperties.push(a);const m=this.defaultPropertyValues[a]=new jc(h,void 0),y=this.defaultTransitionablePropertyValues[a]=new Mh(h);this.defaultTransitioningPropertyValues[a]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=m.possiblyEvaluate({})}}}xt("DataDrivenProperty",Ht),xt("DataConstantProperty",At),xt("CrossFadedDataDrivenProperty",Kl),xt("CrossFadedProperty",zh),xt("ColorRampProperty",Lh);const Kp="-transition";class ua extends hn{constructor(r,a){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),a.layout&&(this._unevaluatedLayout=new Rh(a.layout)),a.paint)){this._transitionablePaint=new Wp(a.paint);for(const h in r.paint)this.setPaintProperty(h,r.paint[h],{validate:!1});for(const h in r.layout)this.setLayoutProperty(h,r.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new $c(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,a,h={}){a!=null&&this._validate(ny,`layers.${this.id}.layout.${r}`,r,a,h)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,a):this.visibility=a)}getPaintProperty(r){return r.endsWith(Kp)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,a,h={}){if(a!=null&&this._validate(ry,`layers.${this.id}.paint.${r}`,r,a,h))return!1;if(r.endsWith(Kp))return this._transitionablePaint.setTransition(r.slice(0,-11),a||void 0),!1;{const m=this._transitionablePaint._values[r],y=m.property.specification["property-type"]==="cross-faded-data-driven",_=m.value.isDataDriven(),b=m.value;this._transitionablePaint.setValue(r,a),this._handleSpecialPaintPropertyUpdate(r);const E=this._transitionablePaint._values[r].value;return E.isDataDriven()||_||y||this._handleOverridablePaintPropertyUpdate(r,b,E)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,a,h){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,a){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,a)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),xe(r,(a,h)=>!(a===void 0||h==="layout"&&!Object.keys(a).length||h==="paint"&&!Object.keys(a).length))}_validate(r,a,h,m,y={}){return(!y||y.validate!==!1)&&Ks(this,r.call(Xa,{key:a,layerType:this.type,objectKey:h,value:m,styleSpec:Ae,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const a=this.paint.get(r);if(a instanceof ca&&oa(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const iy={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Aa{constructor(r,a){this._structArray=r,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Fn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,a){return r._trim(),a&&(r.isTransferred=!0,a.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const a=Object.create(this.prototype);return a.arrayBuffer=r.arrayBuffer,a.length=r.length,a.capacity=r.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ti(o,r=1){let a=0,h=0;return{members:o.map(m=>{const y=iy[m.type].BYTES_PER_ELEMENT,_=a=Xp(a,Math.max(r,y)),b=m.components||1;return h=Math.max(h,y),a+=y*b,{name:m.name,type:m.type,components:b,offset:_}}),size:Xp(a,Math.max(h,r)),alignment:r}}function Xp(o,r){return Math.ceil(o/r)*r}class Xs extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a){const h=this.length;return this.resize(h+1),this.emplace(h,r,a)}emplace(r,a,h){const m=2*r;return this.int16[m+0]=a,this.int16[m+1]=h,r}}Xs.prototype.bytesPerElement=4,xt("StructArrayLayout2i4",Xs);class Vc extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,a,h)}emplace(r,a,h,m){const y=3*r;return this.int16[y+0]=a,this.int16[y+1]=h,this.int16[y+2]=m,r}}Vc.prototype.bytesPerElement=6,xt("StructArrayLayout3i6",Vc);class Oh extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,r,a,h,m)}emplace(r,a,h,m,y){const _=4*r;return this.int16[_+0]=a,this.int16[_+1]=h,this.int16[_+2]=m,this.int16[_+3]=y,r}}Oh.prototype.bytesPerElement=8,xt("StructArrayLayout4i8",Oh);class ha extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,h,m,y,_){const b=this.length;return this.resize(b+1),this.emplace(b,r,a,h,m,y,_)}emplace(r,a,h,m,y,_,b){const E=6*r;return this.int16[E+0]=a,this.int16[E+1]=h,this.int16[E+2]=m,this.int16[E+3]=y,this.int16[E+4]=_,this.int16[E+5]=b,r}}ha.prototype.bytesPerElement=12,xt("StructArrayLayout2i4i12",ha);class qc extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,h,m,y,_){const b=this.length;return this.resize(b+1),this.emplace(b,r,a,h,m,y,_)}emplace(r,a,h,m,y,_,b){const E=4*r,I=8*r;return this.int16[E+0]=a,this.int16[E+1]=h,this.uint8[I+4]=m,this.uint8[I+5]=y,this.uint8[I+6]=_,this.uint8[I+7]=b,r}}qc.prototype.bytesPerElement=8,xt("StructArrayLayout2i4ub8",qc);class _s extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a){const h=this.length;return this.resize(h+1),this.emplace(h,r,a)}emplace(r,a,h){const m=2*r;return this.float32[m+0]=a,this.float32[m+1]=h,r}}_s.prototype.bytesPerElement=8,xt("StructArrayLayout2f8",_s);class Gc extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,h,m,y,_,b,E,I,M){const D=this.length;return this.resize(D+1),this.emplace(D,r,a,h,m,y,_,b,E,I,M)}emplace(r,a,h,m,y,_,b,E,I,M,D){const j=10*r;return this.uint16[j+0]=a,this.uint16[j+1]=h,this.uint16[j+2]=m,this.uint16[j+3]=y,this.uint16[j+4]=_,this.uint16[j+5]=b,this.uint16[j+6]=E,this.uint16[j+7]=I,this.uint16[j+8]=M,this.uint16[j+9]=D,r}}Gc.prototype.bytesPerElement=20,xt("StructArrayLayout10ui20",Gc);class Xl extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,h,m,y,_,b,E,I,M,D,j){const V=this.length;return this.resize(V+1),this.emplace(V,r,a,h,m,y,_,b,E,I,M,D,j)}emplace(r,a,h,m,y,_,b,E,I,M,D,j,V){const H=12*r;return this.int16[H+0]=a,this.int16[H+1]=h,this.int16[H+2]=m,this.int16[H+3]=y,this.uint16[H+4]=_,this.uint16[H+5]=b,this.uint16[H+6]=E,this.uint16[H+7]=I,this.int16[H+8]=M,this.int16[H+9]=D,this.int16[H+10]=j,this.int16[H+11]=V,r}}Xl.prototype.bytesPerElement=24,xt("StructArrayLayout4i4ui4i24",Xl);class Dh extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,a,h)}emplace(r,a,h,m){const y=3*r;return this.float32[y+0]=a,this.float32[y+1]=h,this.float32[y+2]=m,r}}Dh.prototype.bytesPerElement=12,xt("StructArrayLayout3f12",Dh);class Ys extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.uint32[1*r+0]=a,r}}Ys.prototype.bytesPerElement=4,xt("StructArrayLayout1ul4",Ys);class xs extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,h,m,y,_,b,E,I){const M=this.length;return this.resize(M+1),this.emplace(M,r,a,h,m,y,_,b,E,I)}emplace(r,a,h,m,y,_,b,E,I,M){const D=10*r,j=5*r;return this.int16[D+0]=a,this.int16[D+1]=h,this.int16[D+2]=m,this.int16[D+3]=y,this.int16[D+4]=_,this.int16[D+5]=b,this.uint32[j+3]=E,this.uint16[D+8]=I,this.uint16[D+9]=M,r}}xs.prototype.bytesPerElement=20,xt("StructArrayLayout6i1ul2ui20",xs);class Bh extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,h,m,y,_){const b=this.length;return this.resize(b+1),this.emplace(b,r,a,h,m,y,_)}emplace(r,a,h,m,y,_,b){const E=6*r;return this.int16[E+0]=a,this.int16[E+1]=h,this.int16[E+2]=m,this.int16[E+3]=y,this.int16[E+4]=_,this.int16[E+5]=b,r}}Bh.prototype.bytesPerElement=12,xt("StructArrayLayout2i2i2i12",Bh);class Hc extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,h,m,y){const _=this.length;return this.resize(_+1),this.emplace(_,r,a,h,m,y)}emplace(r,a,h,m,y,_){const b=4*r,E=8*r;return this.float32[b+0]=a,this.float32[b+1]=h,this.float32[b+2]=m,this.int16[E+6]=y,this.int16[E+7]=_,r}}Hc.prototype.bytesPerElement=16,xt("StructArrayLayout2f1f2i16",Hc);class bs extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,r,a,h,m)}emplace(r,a,h,m,y){const _=12*r,b=3*r;return this.uint8[_+0]=a,this.uint8[_+1]=h,this.float32[b+1]=m,this.float32[b+2]=y,r}}bs.prototype.bytesPerElement=12,xt("StructArrayLayout2ub2f12",bs);class Wc extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,a,h)}emplace(r,a,h,m){const y=3*r;return this.uint16[y+0]=a,this.uint16[y+1]=h,this.uint16[y+2]=m,r}}Wc.prototype.bytesPerElement=6,xt("StructArrayLayout3ui6",Wc);class Fh extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,h,m,y,_,b,E,I,M,D,j,V,H,ne,te,fe){const be=this.length;return this.resize(be+1),this.emplace(be,r,a,h,m,y,_,b,E,I,M,D,j,V,H,ne,te,fe)}emplace(r,a,h,m,y,_,b,E,I,M,D,j,V,H,ne,te,fe,be){const de=24*r,Te=12*r,Pe=48*r;return this.int16[de+0]=a,this.int16[de+1]=h,this.uint16[de+2]=m,this.uint16[de+3]=y,this.uint32[Te+2]=_,this.uint32[Te+3]=b,this.uint32[Te+4]=E,this.uint16[de+10]=I,this.uint16[de+11]=M,this.uint16[de+12]=D,this.float32[Te+7]=j,this.float32[Te+8]=V,this.uint8[Pe+36]=H,this.uint8[Pe+37]=ne,this.uint8[Pe+38]=te,this.uint32[Te+10]=fe,this.int16[de+22]=be,r}}Fh.prototype.bytesPerElement=48,xt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Fh);class Zc extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,h,m,y,_,b,E,I,M,D,j,V,H,ne,te,fe,be,de,Te,Pe,Fe,_t,Ct,dt,at,rt,pt){const ct=this.length;return this.resize(ct+1),this.emplace(ct,r,a,h,m,y,_,b,E,I,M,D,j,V,H,ne,te,fe,be,de,Te,Pe,Fe,_t,Ct,dt,at,rt,pt)}emplace(r,a,h,m,y,_,b,E,I,M,D,j,V,H,ne,te,fe,be,de,Te,Pe,Fe,_t,Ct,dt,at,rt,pt,ct){const Ke=34*r,Bt=17*r;return this.int16[Ke+0]=a,this.int16[Ke+1]=h,this.int16[Ke+2]=m,this.int16[Ke+3]=y,this.int16[Ke+4]=_,this.int16[Ke+5]=b,this.int16[Ke+6]=E,this.int16[Ke+7]=I,this.uint16[Ke+8]=M,this.uint16[Ke+9]=D,this.uint16[Ke+10]=j,this.uint16[Ke+11]=V,this.uint16[Ke+12]=H,this.uint16[Ke+13]=ne,this.uint16[Ke+14]=te,this.uint16[Ke+15]=fe,this.uint16[Ke+16]=be,this.uint16[Ke+17]=de,this.uint16[Ke+18]=Te,this.uint16[Ke+19]=Pe,this.uint16[Ke+20]=Fe,this.uint16[Ke+21]=_t,this.uint16[Ke+22]=Ct,this.uint32[Bt+12]=dt,this.float32[Bt+13]=at,this.float32[Bt+14]=rt,this.float32[Bt+15]=pt,this.float32[Bt+16]=ct,r}}Zc.prototype.bytesPerElement=68,xt("StructArrayLayout8i15ui1ul4f68",Zc);class Kc extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.float32[1*r+0]=a,r}}Kc.prototype.bytesPerElement=4,xt("StructArrayLayout1f4",Kc);class Xc extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,a,h)}emplace(r,a,h,m){const y=4*r;return this.uint32[2*r+0]=a,this.uint16[y+2]=h,this.uint16[y+3]=m,r}}Xc.prototype.bytesPerElement=8,xt("StructArrayLayout1ul2ui8",Xc);class f extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a){const h=this.length;return this.resize(h+1),this.emplace(h,r,a)}emplace(r,a,h){const m=2*r;return this.uint16[m+0]=a,this.uint16[m+1]=h,r}}f.prototype.bytesPerElement=4,xt("StructArrayLayout2ui4",f);class n extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.uint16[1*r+0]=a,r}}n.prototype.bytesPerElement=2,xt("StructArrayLayout1ui2",n);class l extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,r,a,h,m)}emplace(r,a,h,m,y){const _=4*r;return this.float32[_+0]=a,this.float32[_+1]=h,this.float32[_+2]=m,this.float32[_+3]=y,r}}l.prototype.bytesPerElement=16,xt("StructArrayLayout4f16",l);class d extends Aa{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new L(this.anchorPointX,this.anchorPointY)}}d.prototype.size=20;class g extends xs{get(r){return new d(this,r)}}xt("CollisionBoxArray",g);class x extends Aa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}x.prototype.size=48;class S extends Fh{get(r){return new x(this,r)}}xt("PlacedSymbolArray",S);class k extends Aa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}k.prototype.size=68;class C extends Zc{get(r){return new k(this,r)}}xt("SymbolInstanceArray",C);class A extends Kc{getoffsetX(r){return this.float32[1*r+0]}}xt("GlyphOffsetArray",A);class z extends Vc{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}xt("SymbolLineVertexArray",z);class R extends Aa{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}R.prototype.size=8;class G extends Xc{get(r){return new R(this,r)}}xt("FeatureIndexArray",G);class re extends Xs{}class Y extends Xs{}class ee extends Xs{}class le extends ha{}class pe extends qc{}class Ce extends _s{}class oe extends Gc{}class Ee extends Xl{}class Ie extends Dh{}class Ne extends Ys{}class We extends Bh{}class Ye extends bs{}class Ge extends Wc{}class ft extends f{}const Dt=ti([{name:"a_pos",components:2,type:"Int16"}],4),{members:tr}=Dt;class ot{constructor(r=[]){this.segments=r}prepareSegment(r,a,h,m){let y=this.segments[this.segments.length-1];return r>ot.MAX_VERTEX_ARRAY_LENGTH&&Le(`Max vertices per segment is ${ot.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!y||y.vertexLength+r>ot.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==m)&&(y={vertexOffset:a.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},m!==void 0&&(y.sortKey=m),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const r of this.segments)for(const a in r.vaos)r.vaos[a].destroy()}static simpleSegment(r,a,h,m){return new ot([{vertexOffset:r,primitiveOffset:a,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function Zt(o,r){return 256*(o=q(Math.floor(o),0,255))+q(Math.floor(r),0,255)}ot.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,xt("SegmentVector",ot);const vt=ti([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Or={exports:{}},Zn={exports:{}};Zn.exports=function(o,r){var a,h,m,y,_,b,E,I;for(h=o.length-(a=3&o.length),m=r,_=3432918353,b=461845907,I=0;I<h;)E=255&o.charCodeAt(I)|(255&o.charCodeAt(++I))<<8|(255&o.charCodeAt(++I))<<16|(255&o.charCodeAt(++I))<<24,++I,m=27492+(65535&(y=5*(65535&(m=(m^=E=(65535&(E=(E=(65535&E)*_+(((E>>>16)*_&65535)<<16)&4294967295)<<15|E>>>17))*b+(((E>>>16)*b&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(E=0,a){case 3:E^=(255&o.charCodeAt(I+2))<<16;case 2:E^=(255&o.charCodeAt(I+1))<<8;case 1:m^=E=(65535&(E=(E=(65535&(E^=255&o.charCodeAt(I)))*_+(((E>>>16)*_&65535)<<16)&4294967295)<<15|E>>>17))*b+(((E>>>16)*b&65535)<<16)&4294967295}return m^=o.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var Dr=Zn.exports,ir={exports:{}};ir.exports=function(o,r){for(var a,h=o.length,m=r^h,y=0;h>=4;)a=1540483477*(65535&(a=255&o.charCodeAt(y)|(255&o.charCodeAt(++y))<<8|(255&o.charCodeAt(++y))<<16|(255&o.charCodeAt(++y))<<24))+((1540483477*(a>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),h-=4,++y;switch(h){case 3:m^=(255&o.charCodeAt(y+2))<<16;case 2:m^=(255&o.charCodeAt(y+1))<<8;case 1:m=1540483477*(65535&(m^=255&o.charCodeAt(y)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var Nn=Dr,Ui=ir.exports;Or.exports=Nn,Or.exports.murmur3=Nn,Or.exports.murmur2=Ui;var Kn=w(Or.exports);class pi{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,a,h,m){this.ids.push(co(r)),this.positions.push(a,h,m)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=co(r);let h=0,m=this.ids.length-1;for(;h<m;){const _=h+m>>1;this.ids[_]>=a?m=_:h=_+1}const y=[];for(;this.ids[h]===a;)y.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return y}static serialize(r,a){const h=new Float64Array(r.ids),m=new Uint32Array(r.positions);return Uo(h,m,0,h.length-1),a&&a.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(r){const a=new pi;return a.ids=r.ids,a.positions=r.positions,a.indexed=!0,a}}function co(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:Kn(String(o))}function Uo(o,r,a,h){for(;a<h;){const m=o[a+h>>1];let y=a-1,_=h+1;for(;;){do y++;while(o[y]<m);do _--;while(o[_]>m);if(y>=_)break;jo(o,y,_),jo(r,3*y,3*_),jo(r,3*y+1,3*_+1),jo(r,3*y+2,3*_+2)}_-a<h-_?(Uo(o,r,a,_),a=_+1):(Uo(o,r,_+1,h),h=_)}}function jo(o,r,a){const h=o[r];o[r]=o[a],o[a]=h}xt("FeaturePositionMap",pi);class ji{constructor(r,a){this.gl=r.gl,this.location=a}}class da extends ji{constructor(r,a){super(r,a),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Yl extends ji{constructor(r,a){super(r,a),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Ii extends ji{constructor(r,a){super(r,a),this.current=De.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const fi=new Float32Array(16);function jr(o){return[Zt(255*o.r,255*o.g),Zt(255*o.b,255*o.a)]}class ci{constructor(r,a,h){this.value=r,this.uniformNames=a.map(m=>`u_${m}`),this.type=h}setUniform(r,a,h){r.set(h.constantOr(this.value))}getBinding(r,a,h){return this.type==="color"?new Ii(r,a):new da(r,a)}}class mi{constructor(r,a){this.uniformNames=a.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=r.tlbr}setUniform(r,a,h,m){const y=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&r.set(y)}getBinding(r,a,h){return h.substr(0,9)==="u_pattern"?new Yl(r,a):new da(r,a)}}class Vr{constructor(r,a,h,m){this.expression=r,this.type=h,this.maxValue=0,this.paintVertexAttributes=a.map(y=>({name:`a_${y}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(r,a,h,m,y){const _=this.paintVertexArray.length,b=this.expression.evaluate(new xn(0),a,{},m,[],y);this.paintVertexArray.resize(r),this._setPaintValue(_,r,b)}updatePaintArray(r,a,h,m){const y=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(r,a,y)}_setPaintValue(r,a,h){if(this.type==="color"){const m=jr(h);for(let y=r;y<a;y++)this.paintVertexArray.emplace(y,m[0],m[1])}else{for(let m=r;m<a;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ui{constructor(r,a,h,m,y,_){this.expression=r,this.uniformNames=a.map(b=>`u_${b}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=a.map(b=>({name:`a_${b}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(r,a,h,m,y){const _=this.expression.evaluate(new xn(this.zoom),a,{},m,[],y),b=this.expression.evaluate(new xn(this.zoom+1),a,{},m,[],y),E=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(E,r,_,b)}updatePaintArray(r,a,h,m){const y=this.expression.evaluate({zoom:this.zoom},h,m),_=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(r,a,y,_)}_setPaintValue(r,a,h,m){if(this.type==="color"){const y=jr(h),_=jr(m);for(let b=r;b<a;b++)this.paintVertexArray.emplace(b,y[0],y[1],_[0],_[1])}else{for(let y=r;y<a;y++)this.paintVertexArray.emplace(y,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,a){const h=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,m=q(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);r.set(m)}getBinding(r,a,h){return new da(r,a)}}class uo{constructor(r,a,h,m,y,_){this.expression=r,this.type=a,this.useIntegerZoom=h,this.zoom=m,this.layerId=_,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(r,a,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(m,r,a.patterns&&a.patterns[this.layerId],h)}updatePaintArray(r,a,h,m,y){this._setPaintValues(r,a,h.patterns&&h.patterns[this.layerId],y)}_setPaintValues(r,a,h,m){if(!m||!h)return;const{min:y,mid:_,max:b}=h,E=m[y],I=m[_],M=m[b];if(E&&I&&M)for(let D=r;D<a;D++)this.zoomInPaintVertexArray.emplace(D,I.tl[0],I.tl[1],I.br[0],I.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],I.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(D,I.tl[0],I.tl[1],I.br[0],I.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],I.pixelRatio,M.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,vt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,vt.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Yc{constructor(r,a,h){this.binders={},this._buffers=[];const m=[];for(const y in r.paint._values){if(!h(y))continue;const _=r.paint.get(y);if(!(_ instanceof ca&&oa(_.property.specification)))continue;const b=oy(y,r.type),E=_.value,I=_.property.specification.type,M=_.property.useIntegerZoom,D=_.property.specification["property-type"],j=D==="cross-faded"||D==="cross-faded-data-driven";if(E.kind==="constant")this.binders[y]=j?new mi(E.value,b):new ci(E.value,b,I),m.push(`/u_${y}`);else if(E.kind==="source"||j){const V=Yp(y,I,"source");this.binders[y]=j?new uo(E,I,M,a,V,r.id):new Vr(E,b,I,V),m.push(`/a_${y}`)}else{const V=Yp(y,I,"composite");this.binders[y]=new ui(E,b,I,M,a,V),m.push(`/z_${y}`)}}this.cacheKey=m.sort().join("")}getMaxValue(r){const a=this.binders[r];return a instanceof Vr||a instanceof ui?a.maxValue:0}populatePaintArrays(r,a,h,m,y){for(const _ in this.binders){const b=this.binders[_];(b instanceof Vr||b instanceof ui||b instanceof uo)&&b.populatePaintArray(r,a,h,m,y)}}setConstantPatternPositions(r,a){for(const h in this.binders){const m=this.binders[h];m instanceof mi&&m.setConstantPatternPositions(r,a)}}updatePaintArrays(r,a,h,m,y){let _=!1;for(const b in r){const E=a.getPositions(b);for(const I of E){const M=h.feature(I.index);for(const D in this.binders){const j=this.binders[D];if((j instanceof Vr||j instanceof ui||j instanceof uo)&&j.expression.isStateDependent===!0){const V=m.paint.get(D);j.expression=V.value,j.updatePaintArray(I.start,I.end,M,r[b],y),_=!0}}}}return _}defines(){const r=[];for(const a in this.binders){const h=this.binders[a];(h instanceof ci||h instanceof mi)&&r.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return r}getBinderAttributes(){const r=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof Vr||h instanceof ui)for(let m=0;m<h.paintVertexAttributes.length;m++)r.push(h.paintVertexAttributes[m].name);else if(h instanceof uo)for(let m=0;m<vt.members.length;m++)r.push(vt.members[m].name)}return r}getBinderUniforms(){const r=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof ci||h instanceof mi||h instanceof ui)for(const m of h.uniformNames)r.push(m)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,a){const h=[];for(const m in this.binders){const y=this.binders[m];if(y instanceof ci||y instanceof mi||y instanceof ui){for(const _ of y.uniformNames)if(a[_]){const b=y.getBinding(r,a[_],_);h.push({name:_,property:m,binding:b})}}}return h}setUniforms(r,a,h,m){for(const{name:y,property:_,binding:b}of a)this.binders[_].setUniform(b,m,h.get(_),y)}updatePaintBuffers(r){this._buffers=[];for(const a in this.binders){const h=this.binders[a];if(r&&h instanceof uo){const m=r.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof Vr||h instanceof ui)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(r){for(const a in this.binders){const h=this.binders[a];(h instanceof Vr||h instanceof ui||h instanceof uo)&&h.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const a=this.binders[r];(a instanceof Vr||a instanceof ui||a instanceof uo)&&a.destroy()}}}class Ia{constructor(r,a,h=()=>!0){this.programConfigurations={};for(const m of r)this.programConfigurations[m.id]=new Yc(m,a,h);this.needsUpload=!1,this._featureMap=new pi,this._bufferOffset=0}populatePaintArrays(r,a,h,m,y,_){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(r,a,m,y,_);a.id!==void 0&&this._featureMap.add(a.id,h,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,a,h,m){for(const y of h)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(r,this._featureMap,a,y,m)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function oy(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function Yp(o,r,a){const h={color:{source:_s,composite:l},number:{source:Kc,composite:_s}},m=function(y){return{"line-pattern":{source:oe,composite:oe},"fill-pattern":{source:oe,composite:oe},"fill-extrusion-pattern":{source:oe,composite:oe}}[y]}(o);return m&&m[a]||h[r][a]}xt("ConstantBinder",ci),xt("CrossFadedConstantBinder",mi),xt("SourceExpressionBinder",Vr),xt("CrossFadedCompositeBinder",uo),xt("CompositeExpressionBinder",ui),xt("ProgramConfiguration",Yc,{omit:["_buffers"]}),xt("ProgramConfigurationSet",Ia);var fn=8192;const Nh=Math.pow(2,14)-1,Jl=-Nh-1;function Ma(o){const r=fn/o.extent,a=o.loadGeometry();for(let h=0;h<a.length;h++){const m=a[h];for(let y=0;y<m.length;y++){const _=m[y],b=Math.round(_.x*r),E=Math.round(_.y*r);_.x=q(b,Jl,Nh),_.y=q(E,Jl,Nh),(b<_.x||b>_.x+1||E<_.y||E>_.y+1)&&Le("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function Ql(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?Ma(o):[]}}function Jp(o,r,a,h,m){o.emplaceBack(2*r+(h+1)/2,2*a+(m+1)/2)}class ay{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Y,this.indexArray=new Ge,this.segments=new ot,this.programConfigurations=new Ia(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,h){const m=this.layers[0],y=[];let _=null,b=!1;m.type==="circle"&&(_=m.layout.get("circle-sort-key"),b=!_.isConstant());for(const{feature:E,id:I,index:M,sourceLayerIndex:D}of r){const j=this.layers[0]._featureFilter.needGeometry,V=Ql(E,j);if(!this.layers[0]._featureFilter.filter(new xn(this.zoom),V,h))continue;const H=b?_.evaluate(V,{},h):void 0,ne={id:I,properties:E.properties,type:E.type,sourceLayerIndex:D,index:M,geometry:j?V.geometry:Ma(E),patterns:{},sortKey:H};y.push(ne)}b&&y.sort((E,I)=>E.sortKey-I.sortKey);for(const E of y){const{geometry:I,index:M,sourceLayerIndex:D}=E,j=r[M].feature;this.addFeature(E,I,M,h),a.featureIndex.insert(j,I,M,D,this.index)}}update(r,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,tr),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,a,h,m){for(const y of a)for(const _ of y){const b=_.x,E=_.y;if(b<0||b>=fn||E<0||E>=fn)continue;const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),M=I.vertexLength;Jp(this.layoutVertexArray,b,E,-1,-1),Jp(this.layoutVertexArray,b,E,1,-1),Jp(this.layoutVertexArray,b,E,1,1),Jp(this.layoutVertexArray,b,E,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+3,M+2),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,{},m)}}function r1(o,r){for(let a=0;a<o.length;a++)if(Jc(r,o[a]))return!0;for(let a=0;a<r.length;a++)if(Jc(o,r[a]))return!0;return!!sy(o,r)}function bP(o,r,a){return!!Jc(o,r)||!!ly(r,o,a)}function n1(o,r){if(o.length===1)return o1(r,o[0]);for(let a=0;a<r.length;a++){const h=r[a];for(let m=0;m<h.length;m++)if(Jc(o,h[m]))return!0}for(let a=0;a<o.length;a++)if(o1(r,o[a]))return!0;for(let a=0;a<r.length;a++)if(sy(o,r[a]))return!0;return!1}function wP(o,r,a){if(o.length>1){if(sy(o,r))return!0;for(let h=0;h<r.length;h++)if(ly(r[h],o,a))return!0}for(let h=0;h<o.length;h++)if(ly(o[h],r,a))return!0;return!1}function sy(o,r){if(o.length===0||r.length===0)return!1;for(let a=0;a<o.length-1;a++){const h=o[a],m=o[a+1];for(let y=0;y<r.length-1;y++)if(SP(h,m,r[y],r[y+1]))return!0}return!1}function SP(o,r,a,h){return Je(o,a,h)!==Je(r,a,h)&&Je(o,r,a)!==Je(o,r,h)}function ly(o,r,a){const h=a*a;if(r.length===1)return o.distSqr(r[0])<h;for(let m=1;m<r.length;m++)if(i1(o,r[m-1],r[m])<h)return!0;return!1}function i1(o,r,a){const h=r.distSqr(a);if(h===0)return o.distSqr(r);const m=((o.x-r.x)*(a.x-r.x)+(o.y-r.y)*(a.y-r.y))/h;return o.distSqr(m<0?r:m>1?a:a.sub(r)._mult(m)._add(r))}function o1(o,r){let a,h,m,y=!1;for(let _=0;_<o.length;_++){a=o[_];for(let b=0,E=a.length-1;b<a.length;E=b++)h=a[b],m=a[E],h.y>r.y!=m.y>r.y&&r.x<(m.x-h.x)*(r.y-h.y)/(m.y-h.y)+h.x&&(y=!y)}return y}function Jc(o,r){let a=!1;for(let h=0,m=o.length-1;h<o.length;m=h++){const y=o[h],_=o[m];y.y>r.y!=_.y>r.y&&r.x<(_.x-y.x)*(r.y-y.y)/(_.y-y.y)+y.x&&(a=!a)}return a}function EP(o,r,a){const h=a[0],m=a[2];if(o.x<h.x&&r.x<h.x||o.x>m.x&&r.x>m.x||o.y<h.y&&r.y<h.y||o.y>m.y&&r.y>m.y)return!1;const y=Je(o,r,a[0]);return y!==Je(o,r,a[1])||y!==Je(o,r,a[2])||y!==Je(o,r,a[3])}function Uh(o,r,a){const h=r.paint.get(o).value;return h.kind==="constant"?h.value:a.programConfigurations.get(r.id).getMaxValue(o)}function Qp(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function ef(o,r,a,h,m){if(!r[0]&&!r[1])return o;const y=L.convert(r)._mult(m);a==="viewport"&&y._rotate(-h);const _=[];for(let b=0;b<o.length;b++)_.push(o[b].sub(y));return _}let a1,s1;xt("CircleBucket",ay,{omit:["layers"]});var TP={get paint(){return s1=s1||new Qi({"circle-radius":new Ht(Ae.paint_circle["circle-radius"]),"circle-color":new Ht(Ae.paint_circle["circle-color"]),"circle-blur":new Ht(Ae.paint_circle["circle-blur"]),"circle-opacity":new Ht(Ae.paint_circle["circle-opacity"]),"circle-translate":new At(Ae.paint_circle["circle-translate"]),"circle-translate-anchor":new At(Ae.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new At(Ae.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new At(Ae.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ht(Ae.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ht(Ae.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ht(Ae.paint_circle["circle-stroke-opacity"])})},get layout(){return a1=a1||new Qi({"circle-sort-key":new Ht(Ae.layout_circle["circle-sort-key"])})}},eo=1e-6,Qc=typeof Float32Array<"u"?Float32Array:Array;function cy(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function l1(o,r,a){var h=r[0],m=r[1],y=r[2],_=r[3],b=r[4],E=r[5],I=r[6],M=r[7],D=r[8],j=r[9],V=r[10],H=r[11],ne=r[12],te=r[13],fe=r[14],be=r[15],de=a[0],Te=a[1],Pe=a[2],Fe=a[3];return o[0]=de*h+Te*b+Pe*D+Fe*ne,o[1]=de*m+Te*E+Pe*j+Fe*te,o[2]=de*y+Te*I+Pe*V+Fe*fe,o[3]=de*_+Te*M+Pe*H+Fe*be,o[4]=(de=a[4])*h+(Te=a[5])*b+(Pe=a[6])*D+(Fe=a[7])*ne,o[5]=de*m+Te*E+Pe*j+Fe*te,o[6]=de*y+Te*I+Pe*V+Fe*fe,o[7]=de*_+Te*M+Pe*H+Fe*be,o[8]=(de=a[8])*h+(Te=a[9])*b+(Pe=a[10])*D+(Fe=a[11])*ne,o[9]=de*m+Te*E+Pe*j+Fe*te,o[10]=de*y+Te*I+Pe*V+Fe*fe,o[11]=de*_+Te*M+Pe*H+Fe*be,o[12]=(de=a[12])*h+(Te=a[13])*b+(Pe=a[14])*D+(Fe=a[15])*ne,o[13]=de*m+Te*E+Pe*j+Fe*te,o[14]=de*y+Te*I+Pe*V+Fe*fe,o[15]=de*_+Te*M+Pe*H+Fe*be,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var jh,CP=l1;function tf(o,r,a){var h=r[0],m=r[1],y=r[2],_=r[3];return o[0]=a[0]*h+a[4]*m+a[8]*y+a[12]*_,o[1]=a[1]*h+a[5]*m+a[9]*y+a[13]*_,o[2]=a[2]*h+a[6]*m+a[10]*y+a[14]*_,o[3]=a[3]*h+a[7]*m+a[11]*y+a[15]*_,o}function c1(o,r){const a=tf([],[o.x,o.y,0,1],r);return new L(a[0]/a[3],a[1]/a[3])}jh=new Qc(4),Qc!=Float32Array&&(jh[0]=0,jh[1]=0,jh[2]=0,jh[3]=0);class u1 extends ay{}let h1;xt("HeatmapBucket",u1,{omit:["layers"]});var kP={get paint(){return h1=h1||new Qi({"heatmap-radius":new Ht(Ae.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ht(Ae.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new At(Ae.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Lh(Ae.paint_heatmap["heatmap-color"]),"heatmap-opacity":new At(Ae.paint_heatmap["heatmap-opacity"])})}};function uy(o,{width:r,height:a},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==r*a*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${r*a*h}`)}else m=new Uint8Array(r*a*h);return o.width=r,o.height=a,o.data=m,o}function d1(o,{width:r,height:a},h){if(r===o.width&&a===o.height)return;const m=uy({},{width:r,height:a},h);hy(o,m,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,a)},h),o.width=r,o.height=a,o.data=m.data}function hy(o,r,a,h,m,y){if(m.width===0||m.height===0)return r;if(m.width>o.width||m.height>o.height||a.x>o.width-m.width||a.y>o.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>r.width||m.height>r.height||h.x>r.width-m.width||h.y>r.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const _=o.data,b=r.data;if(_===b)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<m.height;E++){const I=((a.y+E)*o.width+a.x)*y,M=((h.y+E)*r.width+h.x)*y;for(let D=0;D<m.width*y;D++)b[M+D]=_[I+D]}return r}class $h{constructor(r,a){uy(this,r,1,a)}resize(r){d1(this,r,1)}clone(){return new $h({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,a,h,m,y){hy(r,a,h,m,y,1)}}class $o{constructor(r,a){uy(this,r,4,a)}resize(r){d1(this,r,4)}replace(r,a){a?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new $o({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,a,h,m,y){hy(r,a,h,m,y,4)}}function p1(o){const r={},a=o.resolution||256,h=o.clips?o.clips.length:1,m=o.image||new $o({width:a,height:h});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const y=(_,b,E)=>{r[o.evaluationKey]=E;const I=o.expression.evaluate(r);m.data[_+b+0]=Math.floor(255*I.r/I.a),m.data[_+b+1]=Math.floor(255*I.g/I.a),m.data[_+b+2]=Math.floor(255*I.b/I.a),m.data[_+b+3]=Math.floor(255*I.a)};if(o.clips)for(let _=0,b=0;_<h;++_,b+=4*a)for(let E=0,I=0;E<a;E++,I+=4){const M=E/(a-1),{start:D,end:j}=o.clips[_];y(b,I,D*(1-M)+j*M)}else for(let _=0,b=0;_<a;_++,b+=4)y(0,b,_/(a-1));return m}let f1;xt("AlphaImage",$h),xt("RGBAImage",$o);var PP={get paint(){return f1=f1||new Qi({"hillshade-illumination-direction":new At(Ae.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new At(Ae.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new At(Ae.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new At(Ae.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new At(Ae.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new At(Ae.paint_hillshade["hillshade-accent-color"])})}};const AP=ti([{name:"a_pos",components:2,type:"Int16"}],4),{members:IP}=AP;var dy={exports:{}};function rf(o,r,a){a=a||2;var h,m,y,_,b,E,I,M=r&&r.length,D=M?r[0]*a:o.length,j=m1(o,0,D,a,!0),V=[];if(!j||j.next===j.prev)return V;if(M&&(j=function(ne,te,fe,be){var de,Te,Pe,Fe=[];for(de=0,Te=te.length;de<Te;de++)(Pe=m1(ne,te[de]*be,de<Te-1?te[de+1]*be:ne.length,be,!1))===Pe.next&&(Pe.steiner=!0),Fe.push(FP(Pe));for(Fe.sort(OP),de=0;de<Fe.length;de++)fe=DP(Fe[de],fe);return fe}(o,r,j,a)),o.length>80*a){h=y=o[0],m=_=o[1];for(var H=a;H<D;H+=a)(b=o[H])<h&&(h=b),(E=o[H+1])<m&&(m=E),b>y&&(y=b),E>_&&(_=E);I=(I=Math.max(y-h,_-m))!==0?32767/I:0}return Vh(j,V,a,h,m,I,0),V}function m1(o,r,a,h,m){var y,_;if(m===my(o,r,a,h)>0)for(y=r;y<a;y+=h)_=v1(y,o[y],o[y+1],_);else for(y=a-h;y>=r;y-=h)_=v1(y,o[y],o[y+1],_);return _&&nf(_,_.next)&&(Gh(_),_=_.next),_}function ec(o,r){if(!o)return o;r||(r=o);var a,h=o;do if(a=!1,h.steiner||!nf(h,h.next)&&Xn(h.prev,h,h.next)!==0)h=h.next;else{if(Gh(h),(h=r=h.prev)===h.next)break;a=!0}while(a||h!==r);return r}function Vh(o,r,a,h,m,y,_){if(o){!_&&y&&function(M,D,j,V){var H=M;do H.z===0&&(H.z=py(H.x,H.y,D,j,V)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==M);H.prevZ.nextZ=null,H.prevZ=null,function(ne){var te,fe,be,de,Te,Pe,Fe,_t,Ct=1;do{for(fe=ne,ne=null,Te=null,Pe=0;fe;){for(Pe++,be=fe,Fe=0,te=0;te<Ct&&(Fe++,be=be.nextZ);te++);for(_t=Ct;Fe>0||_t>0&&be;)Fe!==0&&(_t===0||!be||fe.z<=be.z)?(de=fe,fe=fe.nextZ,Fe--):(de=be,be=be.nextZ,_t--),Te?Te.nextZ=de:ne=de,de.prevZ=Te,Te=de;fe=be}Te.nextZ=null,Ct*=2}while(Pe>1)}(H)}(o,h,m,y);for(var b,E,I=o;o.prev!==o.next;)if(b=o.prev,E=o.next,y?RP(o,h,m,y):MP(o))r.push(b.i/a|0),r.push(o.i/a|0),r.push(E.i/a|0),Gh(o),o=E.next,I=E.next;else if((o=E)===I){_?_===1?Vh(o=zP(ec(o),r,a),r,a,h,m,y,2):_===2&&LP(o,r,a,h,m,y):Vh(ec(o),r,a,h,m,y,1);break}}}function MP(o){var r=o.prev,a=o,h=o.next;if(Xn(r,a,h)>=0)return!1;for(var m=r.x,y=a.x,_=h.x,b=r.y,E=a.y,I=h.y,M=m<y?m<_?m:_:y<_?y:_,D=b<E?b<I?b:I:E<I?E:I,j=m>y?m>_?m:_:y>_?y:_,V=b>E?b>I?b:I:E>I?E:I,H=h.next;H!==r;){if(H.x>=M&&H.x<=j&&H.y>=D&&H.y<=V&&eu(m,b,y,E,_,I,H.x,H.y)&&Xn(H.prev,H,H.next)>=0)return!1;H=H.next}return!0}function RP(o,r,a,h){var m=o.prev,y=o,_=o.next;if(Xn(m,y,_)>=0)return!1;for(var b=m.x,E=y.x,I=_.x,M=m.y,D=y.y,j=_.y,V=b<E?b<I?b:I:E<I?E:I,H=M<D?M<j?M:j:D<j?D:j,ne=b>E?b>I?b:I:E>I?E:I,te=M>D?M>j?M:j:D>j?D:j,fe=py(V,H,r,a,h),be=py(ne,te,r,a,h),de=o.prevZ,Te=o.nextZ;de&&de.z>=fe&&Te&&Te.z<=be;){if(de.x>=V&&de.x<=ne&&de.y>=H&&de.y<=te&&de!==m&&de!==_&&eu(b,M,E,D,I,j,de.x,de.y)&&Xn(de.prev,de,de.next)>=0||(de=de.prevZ,Te.x>=V&&Te.x<=ne&&Te.y>=H&&Te.y<=te&&Te!==m&&Te!==_&&eu(b,M,E,D,I,j,Te.x,Te.y)&&Xn(Te.prev,Te,Te.next)>=0))return!1;Te=Te.nextZ}for(;de&&de.z>=fe;){if(de.x>=V&&de.x<=ne&&de.y>=H&&de.y<=te&&de!==m&&de!==_&&eu(b,M,E,D,I,j,de.x,de.y)&&Xn(de.prev,de,de.next)>=0)return!1;de=de.prevZ}for(;Te&&Te.z<=be;){if(Te.x>=V&&Te.x<=ne&&Te.y>=H&&Te.y<=te&&Te!==m&&Te!==_&&eu(b,M,E,D,I,j,Te.x,Te.y)&&Xn(Te.prev,Te,Te.next)>=0)return!1;Te=Te.nextZ}return!0}function zP(o,r,a){var h=o;do{var m=h.prev,y=h.next.next;!nf(m,y)&&g1(m,h,h.next,y)&&qh(m,y)&&qh(y,m)&&(r.push(m.i/a|0),r.push(h.i/a|0),r.push(y.i/a|0),Gh(h),Gh(h.next),h=o=y),h=h.next}while(h!==o);return ec(h)}function LP(o,r,a,h,m,y){var _=o;do{for(var b=_.next.next;b!==_.prev;){if(_.i!==b.i&&NP(_,b)){var E=y1(_,b);return _=ec(_,_.next),E=ec(E,E.next),Vh(_,r,a,h,m,y,0),void Vh(E,r,a,h,m,y,0)}b=b.next}_=_.next}while(_!==o)}function OP(o,r){return o.x-r.x}function DP(o,r){var a=function(m,y){var _,b=y,E=m.x,I=m.y,M=-1/0;do{if(I<=b.y&&I>=b.next.y&&b.next.y!==b.y){var D=b.x+(I-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(D<=E&&D>M&&(M=D,_=b.x<b.next.x?b:b.next,D===E))return _}b=b.next}while(b!==y);if(!_)return null;var j,V=_,H=_.x,ne=_.y,te=1/0;b=_;do E>=b.x&&b.x>=H&&E!==b.x&&eu(I<ne?E:M,I,H,ne,I<ne?M:E,I,b.x,b.y)&&(j=Math.abs(I-b.y)/(E-b.x),qh(b,m)&&(j<te||j===te&&(b.x>_.x||b.x===_.x&&BP(_,b)))&&(_=b,te=j)),b=b.next;while(b!==V);return _}(o,r);if(!a)return r;var h=y1(a,o);return ec(h,h.next),ec(a,a.next)}function BP(o,r){return Xn(o.prev,o,r.prev)<0&&Xn(r.next,o,o.next)<0}function py(o,r,a,h,m){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-a)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-h)*m|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function FP(o){var r=o,a=o;do(r.x<a.x||r.x===a.x&&r.y<a.y)&&(a=r),r=r.next;while(r!==o);return a}function eu(o,r,a,h,m,y,_,b){return(m-_)*(r-b)>=(o-_)*(y-b)&&(o-_)*(h-b)>=(a-_)*(r-b)&&(a-_)*(y-b)>=(m-_)*(h-b)}function NP(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(a,h){var m=a;do{if(m.i!==a.i&&m.next.i!==a.i&&m.i!==h.i&&m.next.i!==h.i&&g1(m,m.next,a,h))return!0;m=m.next}while(m!==a);return!1}(o,r)&&(qh(o,r)&&qh(r,o)&&function(a,h){var m=a,y=!1,_=(a.x+h.x)/2,b=(a.y+h.y)/2;do m.y>b!=m.next.y>b&&m.next.y!==m.y&&_<(m.next.x-m.x)*(b-m.y)/(m.next.y-m.y)+m.x&&(y=!y),m=m.next;while(m!==a);return y}(o,r)&&(Xn(o.prev,o,r.prev)||Xn(o,r.prev,r))||nf(o,r)&&Xn(o.prev,o,o.next)>0&&Xn(r.prev,r,r.next)>0)}function Xn(o,r,a){return(r.y-o.y)*(a.x-r.x)-(r.x-o.x)*(a.y-r.y)}function nf(o,r){return o.x===r.x&&o.y===r.y}function g1(o,r,a,h){var m=af(Xn(o,r,a)),y=af(Xn(o,r,h)),_=af(Xn(a,h,o)),b=af(Xn(a,h,r));return m!==y&&_!==b||!(m!==0||!of(o,a,r))||!(y!==0||!of(o,h,r))||!(_!==0||!of(a,o,h))||!(b!==0||!of(a,r,h))}function of(o,r,a){return r.x<=Math.max(o.x,a.x)&&r.x>=Math.min(o.x,a.x)&&r.y<=Math.max(o.y,a.y)&&r.y>=Math.min(o.y,a.y)}function af(o){return o>0?1:o<0?-1:0}function qh(o,r){return Xn(o.prev,o,o.next)<0?Xn(o,r,o.next)>=0&&Xn(o,o.prev,r)>=0:Xn(o,r,o.prev)<0||Xn(o,o.next,r)<0}function y1(o,r){var a=new fy(o.i,o.x,o.y),h=new fy(r.i,r.x,r.y),m=o.next,y=r.prev;return o.next=r,r.prev=o,a.next=m,m.prev=a,h.next=a,a.prev=h,y.next=h,h.prev=y,h}function v1(o,r,a,h){var m=new fy(o,r,a);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function Gh(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function fy(o,r,a){this.i=o,this.x=r,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function my(o,r,a,h){for(var m=0,y=r,_=a-h;y<a;y+=h)m+=(o[_]-o[y])*(o[y+1]+o[_+1]),_=y;return m}dy.exports=rf,dy.exports.default=rf,rf.deviation=function(o,r,a,h){var m=r&&r.length,y=Math.abs(my(o,0,m?r[0]*a:o.length,a));if(m)for(var _=0,b=r.length;_<b;_++)y-=Math.abs(my(o,r[_]*a,_<b-1?r[_+1]*a:o.length,a));var E=0;for(_=0;_<h.length;_+=3){var I=h[_]*a,M=h[_+1]*a,D=h[_+2]*a;E+=Math.abs((o[I]-o[D])*(o[M+1]-o[I+1])-(o[I]-o[M])*(o[D+1]-o[I+1]))}return y===0&&E===0?0:Math.abs((E-y)/y)},rf.flatten=function(o){for(var r=o[0][0].length,a={vertices:[],holes:[],dimensions:r},h=0,m=0;m<o.length;m++){for(var y=0;y<o[m].length;y++)for(var _=0;_<r;_++)a.vertices.push(o[m][y][_]);m>0&&a.holes.push(h+=o[m-1].length)}return a};var _1=w(dy.exports);function UP(o,r,a,h,m){x1(o,r,a||0,h||o.length-1,m||jP)}function x1(o,r,a,h,m){for(;h>a;){if(h-a>600){var y=h-a+1,_=r-a+1,b=Math.log(y),E=.5*Math.exp(2*b/3),I=.5*Math.sqrt(b*E*(y-E)/y)*(_-y/2<0?-1:1);x1(o,r,Math.max(a,Math.floor(r-_*E/y+I)),Math.min(h,Math.floor(r+(y-_)*E/y+I)),m)}var M=o[r],D=a,j=h;for(Hh(o,a,r),m(o[h],M)>0&&Hh(o,a,h);D<j;){for(Hh(o,D,j),D++,j--;m(o[D],M)<0;)D++;for(;m(o[j],M)>0;)j--}m(o[a],M)===0?Hh(o,a,j):Hh(o,++j,h),j<=r&&(a=j+1),r<=j&&(h=j-1)}}function Hh(o,r,a){var h=o[r];o[r]=o[a],o[a]=h}function jP(o,r){return o<r?-1:o>r?1:0}function gy(o,r){const a=o.length;if(a<=1)return[o];const h=[];let m,y;for(let _=0;_<a;_++){const b=ur(o[_]);b!==0&&(o[_].area=Math.abs(b),y===void 0&&(y=b<0),y===b<0?(m&&h.push(m),m=[o[_]]):m.push(o[_]))}if(m&&h.push(m),r>1)for(let _=0;_<h.length;_++)h[_].length<=r||(UP(h[_],r,1,h[_].length-1,$P),h[_]=h[_].slice(0,r));return h}function $P(o,r){return r.area-o.area}function yy(o,r,a){const h=a.patternDependencies;let m=!1;for(const y of r){const _=y.paint.get(`${o}-pattern`);_.isConstant()||(m=!0);const b=_.constantOr(null);b&&(m=!0,h[b.to]=!0,h[b.from]=!0)}return m}function vy(o,r,a,h,m){const y=m.patternDependencies;for(const _ of r){const b=_.paint.get(`${o}-pattern`).value;if(b.kind!=="constant"){let E=b.evaluate({zoom:h-1},a,{},m.availableImages),I=b.evaluate({zoom:h},a,{},m.availableImages),M=b.evaluate({zoom:h+1},a,{},m.availableImages);E=E&&E.name?E.name:E,I=I&&I.name?I.name:I,M=M&&M.name?M.name:M,y[E]=!0,y[I]=!0,y[M]=!0,a.patterns[_.id]={min:E,mid:I,max:M}}}return a}class _y{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ee,this.indexArray=new Ge,this.indexArray2=new ft,this.programConfigurations=new Ia(r.layers,r.zoom),this.segments=new ot,this.segments2=new ot,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,h){this.hasPattern=yy("fill",this.layers,a);const m=this.layers[0].layout.get("fill-sort-key"),y=!m.isConstant(),_=[];for(const{feature:b,id:E,index:I,sourceLayerIndex:M}of r){const D=this.layers[0]._featureFilter.needGeometry,j=Ql(b,D);if(!this.layers[0]._featureFilter.filter(new xn(this.zoom),j,h))continue;const V=y?m.evaluate(j,{},h,a.availableImages):void 0,H={id:E,properties:b.properties,type:b.type,sourceLayerIndex:M,index:I,geometry:D?j.geometry:Ma(b),patterns:{},sortKey:V};_.push(H)}y&&_.sort((b,E)=>b.sortKey-E.sortKey);for(const b of _){const{geometry:E,index:I,sourceLayerIndex:M}=b;if(this.hasPattern){const D=vy("fill",this.layers,b,this.zoom,a);this.patternFeatures.push(D)}else this.addFeature(b,E,I,h,{});a.featureIndex.insert(r[I].feature,E,I,M,this.index)}}update(r,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,h)}addFeatures(r,a,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,a,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,IP),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,a,h,m,y){for(const _ of gy(a,500)){let b=0;for(const V of _)b+=V.length;const E=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),I=E.vertexLength,M=[],D=[];for(const V of _){if(V.length===0)continue;V!==_[0]&&D.push(M.length/2);const H=this.segments2.prepareSegment(V.length,this.layoutVertexArray,this.indexArray2),ne=H.vertexLength;this.layoutVertexArray.emplaceBack(V[0].x,V[0].y),this.indexArray2.emplaceBack(ne+V.length-1,ne),M.push(V[0].x),M.push(V[0].y);for(let te=1;te<V.length;te++)this.layoutVertexArray.emplaceBack(V[te].x,V[te].y),this.indexArray2.emplaceBack(ne+te-1,ne+te),M.push(V[te].x),M.push(V[te].y);H.vertexLength+=V.length,H.primitiveLength+=V.length}const j=_1(M,D);for(let V=0;V<j.length;V+=3)this.indexArray.emplaceBack(I+j[V],I+j[V+1],I+j[V+2]);E.vertexLength+=b,E.primitiveLength+=j.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,y,m)}}let b1,w1;xt("FillBucket",_y,{omit:["layers","patternFeatures"]});var VP={get paint(){return w1=w1||new Qi({"fill-antialias":new At(Ae.paint_fill["fill-antialias"]),"fill-opacity":new Ht(Ae.paint_fill["fill-opacity"]),"fill-color":new Ht(Ae.paint_fill["fill-color"]),"fill-outline-color":new Ht(Ae.paint_fill["fill-outline-color"]),"fill-translate":new At(Ae.paint_fill["fill-translate"]),"fill-translate-anchor":new At(Ae.paint_fill["fill-translate-anchor"]),"fill-pattern":new Kl(Ae.paint_fill["fill-pattern"])})},get layout(){return b1=b1||new Qi({"fill-sort-key":new Ht(Ae.layout_fill["fill-sort-key"])})}};const qP=ti([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),GP=ti([{name:"a_centroid",components:2,type:"Int16"}],4),{members:HP}=qP;var Js={},WP=T,S1=tu;function tu(o,r,a,h,m){this.properties={},this.extent=a,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=m,o.readFields(ZP,this,r)}function ZP(o,r,a){o==1?r.id=a.readVarint():o==2?function(h,m){for(var y=h.readVarint()+h.pos;h.pos<y;){var _=m._keys[h.readVarint()],b=m._values[h.readVarint()];m.properties[_]=b}}(a,r):o==3?r.type=a.readVarint():o==4&&(r._geometry=a.pos)}function KP(o){for(var r,a,h=0,m=0,y=o.length,_=y-1;m<y;_=m++)h+=((a=o[_]).x-(r=o[m]).x)*(r.y+a.y);return h}tu.types=["Unknown","Point","LineString","Polygon"],tu.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,a=o.readVarint()+o.pos,h=1,m=0,y=0,_=0,b=[];o.pos<a;){if(m<=0){var E=o.readVarint();h=7&E,m=E>>3}if(m--,h===1||h===2)y+=o.readSVarint(),_+=o.readSVarint(),h===1&&(r&&b.push(r),r=[]),r.push(new WP(y,_));else{if(h!==7)throw new Error("unknown command "+h);r&&r.push(r[0].clone())}}return r&&b.push(r),b},tu.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,a=1,h=0,m=0,y=0,_=1/0,b=-1/0,E=1/0,I=-1/0;o.pos<r;){if(h<=0){var M=o.readVarint();a=7&M,h=M>>3}if(h--,a===1||a===2)(m+=o.readSVarint())<_&&(_=m),m>b&&(b=m),(y+=o.readSVarint())<E&&(E=y),y>I&&(I=y);else if(a!==7)throw new Error("unknown command "+a)}return[_,E,b,I]},tu.prototype.toGeoJSON=function(o,r,a){var h,m,y=this.extent*Math.pow(2,a),_=this.extent*o,b=this.extent*r,E=this.loadGeometry(),I=tu.types[this.type];function M(V){for(var H=0;H<V.length;H++){var ne=V[H];V[H]=[360*(ne.x+_)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(ne.y+b)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var D=[];for(h=0;h<E.length;h++)D[h]=E[h][0];M(E=D);break;case 2:for(h=0;h<E.length;h++)M(E[h]);break;case 3:for(E=function(V){var H=V.length;if(H<=1)return[V];for(var ne,te,fe=[],be=0;be<H;be++){var de=KP(V[be]);de!==0&&(te===void 0&&(te=de<0),te===de<0?(ne&&fe.push(ne),ne=[V[be]]):ne.push(V[be]))}return ne&&fe.push(ne),fe}(E),h=0;h<E.length;h++)for(m=0;m<E[h].length;m++)M(E[h][m])}E.length===1?E=E[0]:I="Multi"+I;var j={type:"Feature",geometry:{type:I,coordinates:E},properties:this.properties};return"id"in this&&(j.id=this.id),j};var XP=S1,E1=T1;function T1(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(YP,this,r),this.length=this._features.length}function YP(o,r,a){o===15?r.version=a.readVarint():o===1?r.name=a.readString():o===5?r.extent=a.readVarint():o===2?r._features.push(a.pos):o===3?r._keys.push(a.readString()):o===4&&r._values.push(function(h){for(var m=null,y=h.readVarint()+h.pos;h.pos<y;){var _=h.readVarint()>>3;m=_===1?h.readString():_===2?h.readFloat():_===3?h.readDouble():_===4?h.readVarint64():_===5?h.readVarint():_===6?h.readSVarint():_===7?h.readBoolean():null}return m}(a))}T1.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new XP(this._pbf,r,this.extent,this._keys,this._values)};var JP=E1;function QP(o,r,a){if(o===3){var h=new JP(a,a.readVarint()+a.pos);h.length&&(r[h.name]=h)}}Js.VectorTile=function(o,r){this.layers=o.readFields(QP,{},r)},Js.VectorTileFeature=S1,Js.VectorTileLayer=E1;const eA=Js.VectorTileFeature.types,xy=Math.pow(2,13);function Wh(o,r,a,h,m,y,_,b){o.emplaceBack(r,a,2*Math.floor(h*xy)+_,m*xy*2,y*xy*2,Math.round(b))}class by{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new le,this.centroidVertexArray=new re,this.indexArray=new Ge,this.programConfigurations=new Ia(r.layers,r.zoom),this.segments=new ot,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,h){this.features=[],this.hasPattern=yy("fill-extrusion",this.layers,a);for(const{feature:m,id:y,index:_,sourceLayerIndex:b}of r){const E=this.layers[0]._featureFilter.needGeometry,I=Ql(m,E);if(!this.layers[0]._featureFilter.filter(new xn(this.zoom),I,h))continue;const M={id:y,sourceLayerIndex:b,index:_,geometry:E?I.geometry:Ma(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(vy("fill-extrusion",this.layers,M,this.zoom,a)):this.addFeature(M,M.geometry,_,h,{}),a.featureIndex.insert(m,M.geometry,_,b,this.index,!0)}}addFeatures(r,a,h){for(const m of this.features){const{geometry:y}=m;this.addFeature(m,y,m.index,a,h)}}update(r,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,HP),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,GP.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,a,h,m,y){const _={x:0,y:0,vertexCount:0};for(const b of gy(a,500)){let E=0;for(const H of b)E+=H.length;let I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const H of b){if(H.length===0||rA(H))continue;let ne=0;for(let te=0;te<H.length;te++){const fe=H[te];if(te>=1){const be=H[te-1];if(!tA(fe,be)){I.vertexLength+4>ot.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const de=fe.sub(be)._perp()._unit(),Te=be.dist(fe);ne+Te>32768&&(ne=0),Wh(this.layoutVertexArray,fe.x,fe.y,de.x,de.y,0,0,ne),Wh(this.layoutVertexArray,fe.x,fe.y,de.x,de.y,0,1,ne),_.x+=2*fe.x,_.y+=2*fe.y,_.vertexCount+=2,ne+=Te,Wh(this.layoutVertexArray,be.x,be.y,de.x,de.y,0,0,ne),Wh(this.layoutVertexArray,be.x,be.y,de.x,de.y,0,1,ne),_.x+=2*be.x,_.y+=2*be.y,_.vertexCount+=2;const Pe=I.vertexLength;this.indexArray.emplaceBack(Pe,Pe+2,Pe+1),this.indexArray.emplaceBack(Pe+1,Pe+2,Pe+3),I.vertexLength+=4,I.primitiveLength+=2}}}}if(I.vertexLength+E>ot.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray)),eA[r.type]!=="Polygon")continue;const M=[],D=[],j=I.vertexLength;for(const H of b)if(H.length!==0){H!==b[0]&&D.push(M.length/2);for(let ne=0;ne<H.length;ne++){const te=H[ne];Wh(this.layoutVertexArray,te.x,te.y,0,0,1,1,0),_.x+=te.x,_.y+=te.y,_.vertexCount+=1,M.push(te.x),M.push(te.y)}}const V=_1(M,D);for(let H=0;H<V.length;H+=3)this.indexArray.emplaceBack(j+V[H],j+V[H+2],j+V[H+1]);I.primitiveLength+=V.length/3,I.vertexLength+=E}for(let b=0;b<_.vertexCount;b++)this.centroidVertexArray.emplaceBack(Math.floor(_.x/_.vertexCount),Math.floor(_.y/_.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,y,m)}}function tA(o,r){return o.x===r.x&&(o.x<0||o.x>fn)||o.y===r.y&&(o.y<0||o.y>fn)}function rA(o){return o.every(r=>r.x<0)||o.every(r=>r.x>fn)||o.every(r=>r.y<0)||o.every(r=>r.y>fn)}let C1;xt("FillExtrusionBucket",by,{omit:["layers","features"]});var nA={get paint(){return C1=C1||new Qi({"fill-extrusion-opacity":new At(Ae["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ht(Ae["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new At(Ae["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new At(Ae["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Kl(Ae["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ht(Ae["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ht(Ae["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new At(Ae["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};function Zh(o,r){return o.x*r.x+o.y*r.y}function k1(o,r){if(o.length===1){let a=0;const h=r[a++];let m;for(;!m||h.equals(m);)if(m=r[a++],!m)return 1/0;for(;a<r.length;a++){const y=r[a],_=o[0],b=m.sub(h),E=y.sub(h),I=_.sub(h),M=Zh(b,b),D=Zh(b,E),j=Zh(E,E),V=Zh(I,b),H=Zh(I,E),ne=M*j-D*D,te=(j*V-D*H)/ne,fe=(M*H-D*V)/ne,be=h.z*(1-te-fe)+m.z*te+y.z*fe;if(isFinite(be))return be}return 1/0}{let a=1/0;for(const h of r)a=Math.min(a,h.z);return a}}const iA=ti([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:oA}=iA,aA=ti([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:sA}=aA,lA=Js.VectorTileFeature.types,cA=Math.cos(Math.PI/180*37.5),P1=Math.pow(2,14)/.5;class wy{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new pe,this.layoutVertexArray2=new Ce,this.indexArray=new Ge,this.programConfigurations=new Ia(r.layers,r.zoom),this.segments=new ot,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,h){this.hasPattern=yy("line",this.layers,a);const m=this.layers[0].layout.get("line-sort-key"),y=!m.isConstant(),_=[];for(const{feature:b,id:E,index:I,sourceLayerIndex:M}of r){const D=this.layers[0]._featureFilter.needGeometry,j=Ql(b,D);if(!this.layers[0]._featureFilter.filter(new xn(this.zoom),j,h))continue;const V=y?m.evaluate(j,{},h):void 0,H={id:E,properties:b.properties,type:b.type,sourceLayerIndex:M,index:I,geometry:D?j.geometry:Ma(b),patterns:{},sortKey:V};_.push(H)}y&&_.sort((b,E)=>b.sortKey-E.sortKey);for(const b of _){const{geometry:E,index:I,sourceLayerIndex:M}=b;if(this.hasPattern){const D=vy("line",this.layers,b,this.zoom,a);this.patternFeatures.push(D)}else this.addFeature(b,E,I,h,{});a.featureIndex.insert(r[I].feature,E,I,M,this.index)}}update(r,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,h)}addFeatures(r,a,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,a,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,sA)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,oA),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,a,h,m,y){const _=this.layers[0].layout,b=_.get("line-join").evaluate(r,{}),E=_.get("line-cap"),I=_.get("line-miter-limit"),M=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const D of a)this.addLine(D,r,b,E,I,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,y,m)}addLine(r,a,h,m,y,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let fe=0;fe<r.length-1;fe++)this.totalDistance+=r[fe].dist(r[fe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=lA[a.type]==="Polygon";let E=r.length;for(;E>=2&&r[E-1].equals(r[E-2]);)E--;let I=0;for(;I<E-1&&r[I].equals(r[I+1]);)I++;if(E<(b?3:2))return;h==="bevel"&&(y=1.05);const M=this.overscaling<=16?15*fn/(512*this.overscaling):0,D=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let j,V,H,ne,te;this.e1=this.e2=-1,b&&(j=r[E-2],te=r[I].sub(j)._unit()._perp());for(let fe=I;fe<E;fe++){if(H=fe===E-1?b?r[I+1]:void 0:r[fe+1],H&&r[fe].equals(H))continue;te&&(ne=te),j&&(V=j),j=r[fe],te=H?H.sub(j)._unit()._perp():ne,ne=ne||te;let be=ne.add(te);be.x===0&&be.y===0||be._unit();const de=ne.x*te.x+ne.y*te.y,Te=be.x*te.x+be.y*te.y,Pe=Te!==0?1/Te:1/0,Fe=2*Math.sqrt(2-2*Te),_t=Te<cA&&V&&H,Ct=ne.x*te.y-ne.y*te.x>0;if(_t&&fe>I){const rt=j.dist(V);if(rt>2*M){const pt=j.sub(j.sub(V)._mult(M/rt)._round());this.updateDistance(V,pt),this.addCurrentVertex(pt,ne,0,0,D),V=pt}}const dt=V&&H;let at=dt?h:b?"butt":m;if(dt&&at==="round"&&(Pe<_?at="miter":Pe<=2&&(at="fakeround")),at==="miter"&&Pe>y&&(at="bevel"),at==="bevel"&&(Pe>2&&(at="flipbevel"),Pe<y&&(at="miter")),V&&this.updateDistance(V,j),at==="miter")be._mult(Pe),this.addCurrentVertex(j,be,0,0,D);else if(at==="flipbevel"){if(Pe>100)be=te.mult(-1);else{const rt=Pe*ne.add(te).mag()/ne.sub(te).mag();be._perp()._mult(rt*(Ct?-1:1))}this.addCurrentVertex(j,be,0,0,D),this.addCurrentVertex(j,be.mult(-1),0,0,D)}else if(at==="bevel"||at==="fakeround"){const rt=-Math.sqrt(Pe*Pe-1),pt=Ct?rt:0,ct=Ct?0:rt;if(V&&this.addCurrentVertex(j,ne,pt,ct,D),at==="fakeround"){const Ke=Math.round(180*Fe/Math.PI/20);for(let Bt=1;Bt<Ke;Bt++){let Pt=Bt/Ke;if(Pt!==.5){const mn=Pt-.5;Pt+=Pt*mn*(Pt-1)*((1.0904+de*(de*(3.55645-1.43519*de)-3.2452))*mn*mn+(.848013+de*(.215638*de-1.06021)))}const br=te.sub(ne)._mult(Pt)._add(ne)._unit()._mult(Ct?-1:1);this.addHalfVertex(j,br.x,br.y,!1,Ct,0,D)}}H&&this.addCurrentVertex(j,te,-pt,-ct,D)}else if(at==="butt")this.addCurrentVertex(j,be,0,0,D);else if(at==="square"){const rt=V?1:-1;this.addCurrentVertex(j,be,rt,rt,D)}else at==="round"&&(V&&(this.addCurrentVertex(j,ne,0,0,D),this.addCurrentVertex(j,ne,1,1,D,!0)),H&&(this.addCurrentVertex(j,te,-1,-1,D,!0),this.addCurrentVertex(j,te,0,0,D)));if(_t&&fe<E-1){const rt=j.dist(H);if(rt>2*M){const pt=j.add(H.sub(j)._mult(M/rt)._round());this.updateDistance(j,pt),this.addCurrentVertex(pt,te,0,0,D),j=pt}}}}addCurrentVertex(r,a,h,m,y,_=!1){const b=a.y*m-a.x,E=-a.y-a.x*m;this.addHalfVertex(r,a.x+a.y*h,a.y-a.x*h,_,!1,h,y),this.addHalfVertex(r,b,E,_,!0,-m,y),this.distance>P1/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,a,h,m,y,_))}addHalfVertex({x:r,y:a},h,m,y,_,b,E){const I=.5*(this.lineClips?this.scaledDistance*(P1-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(y?1:0),(a<<1)+(_?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(b===0?0:b<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const M=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),E.primitiveLength++),_?this.e2=M:this.e1=M}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,a){this.distance+=r.dist(a),this.updateScaledDistance()}}let A1,I1;xt("LineBucket",wy,{omit:["layers","patternFeatures"]});var M1={get paint(){return I1=I1||new Qi({"line-opacity":new Ht(Ae.paint_line["line-opacity"]),"line-color":new Ht(Ae.paint_line["line-color"]),"line-translate":new At(Ae.paint_line["line-translate"]),"line-translate-anchor":new At(Ae.paint_line["line-translate-anchor"]),"line-width":new Ht(Ae.paint_line["line-width"]),"line-gap-width":new Ht(Ae.paint_line["line-gap-width"]),"line-offset":new Ht(Ae.paint_line["line-offset"]),"line-blur":new Ht(Ae.paint_line["line-blur"]),"line-dasharray":new zh(Ae.paint_line["line-dasharray"]),"line-pattern":new Kl(Ae.paint_line["line-pattern"]),"line-gradient":new Lh(Ae.paint_line["line-gradient"])})},get layout(){return A1=A1||new Qi({"line-cap":new At(Ae.layout_line["line-cap"]),"line-join":new Ht(Ae.layout_line["line-join"]),"line-miter-limit":new At(Ae.layout_line["line-miter-limit"]),"line-round-limit":new At(Ae.layout_line["line-round-limit"]),"line-sort-key":new Ht(Ae.layout_line["line-sort-key"])})}};class uA extends Ht{possiblyEvaluate(r,a){return a=new xn(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(r,a)}evaluate(r,a,h,m){return a=K({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(r,a,h,m)}}let sf;function R1(o,r){return r>0?r+2*o:o}const hA=ti([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),dA=ti([{name:"a_projected_pos",components:3,type:"Float32"}],4);ti([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const pA=ti([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ti([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const z1=ti([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),fA=ti([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function mA(o,r,a){return o.sections.forEach(h=>{h.text=function(m,y,_){const b=y.layout.get("text-transform").evaluate(_,{});return b==="uppercase"?m=m.toLocaleUpperCase():b==="lowercase"&&(m=m.toLocaleLowerCase()),Co.applyArabicShaping&&(m=Co.applyArabicShaping(m)),m}(h.text,r,a)}),o}ti([{name:"triangle",components:3,type:"Uint16"}]),ti([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ti([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ti([{type:"Float32",name:"offsetX"}]),ti([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Kh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var gi=24,L1=Qr,O1=function(o,r,a,h,m){var y,_,b=8*m-h-1,E=(1<<b)-1,I=E>>1,M=-7,D=a?m-1:0,j=a?-1:1,V=o[r+D];for(D+=j,y=V&(1<<-M)-1,V>>=-M,M+=b;M>0;y=256*y+o[r+D],D+=j,M-=8);for(_=y&(1<<-M)-1,y>>=-M,M+=h;M>0;_=256*_+o[r+D],D+=j,M-=8);if(y===0)y=1-I;else{if(y===E)return _?NaN:1/0*(V?-1:1);_+=Math.pow(2,h),y-=I}return(V?-1:1)*_*Math.pow(2,y-h)},D1=function(o,r,a,h,m,y){var _,b,E,I=8*y-m-1,M=(1<<I)-1,D=M>>1,j=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=h?0:y-1,H=h?1:-1,ne=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(b=isNaN(r)?1:0,_=M):(_=Math.floor(Math.log(r)/Math.LN2),r*(E=Math.pow(2,-_))<1&&(_--,E*=2),(r+=_+D>=1?j/E:j*Math.pow(2,1-D))*E>=2&&(_++,E/=2),_+D>=M?(b=0,_=M):_+D>=1?(b=(r*E-1)*Math.pow(2,m),_+=D):(b=r*Math.pow(2,D-1)*Math.pow(2,m),_=0));m>=8;o[a+V]=255&b,V+=H,b/=256,m-=8);for(_=_<<m|b,I+=m;I>0;o[a+V]=255&_,V+=H,_/=256,I-=8);o[a+V-H]|=128*ne};function Qr(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Qr.Varint=0,Qr.Fixed64=1,Qr.Bytes=2,Qr.Fixed32=5;var Sy=4294967296,B1=1/Sy,F1=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ws(o){return o.type===Qr.Bytes?o.readVarint()+o.pos:o.pos+1}function ru(o,r,a){return a?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function N1(o,r,a){var h=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));a.realloc(h);for(var m=a.pos-1;m>=o;m--)a.buf[m+h]=a.buf[m]}function gA(o,r){for(var a=0;a<o.length;a++)r.writeVarint(o[a])}function yA(o,r){for(var a=0;a<o.length;a++)r.writeSVarint(o[a])}function vA(o,r){for(var a=0;a<o.length;a++)r.writeFloat(o[a])}function _A(o,r){for(var a=0;a<o.length;a++)r.writeDouble(o[a])}function xA(o,r){for(var a=0;a<o.length;a++)r.writeBoolean(o[a])}function bA(o,r){for(var a=0;a<o.length;a++)r.writeFixed32(o[a])}function wA(o,r){for(var a=0;a<o.length;a++)r.writeSFixed32(o[a])}function SA(o,r){for(var a=0;a<o.length;a++)r.writeFixed64(o[a])}function EA(o,r){for(var a=0;a<o.length;a++)r.writeSFixed64(o[a])}function lf(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function nu(o,r,a){o[a]=r,o[a+1]=r>>>8,o[a+2]=r>>>16,o[a+3]=r>>>24}function U1(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}Qr.prototype={destroy:function(){this.buf=null},readFields:function(o,r,a){for(a=a||this.length;this.pos<a;){var h=this.readVarint(),m=h>>3,y=this.pos;this.type=7&h,o(m,r,this),this.pos===y&&this.skip(h)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=lf(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=U1(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=lf(this.buf,this.pos)+lf(this.buf,this.pos+4)*Sy;return this.pos+=8,o},readSFixed64:function(){var o=lf(this.buf,this.pos)+U1(this.buf,this.pos+4)*Sy;return this.pos+=8,o},readFloat:function(){var o=O1(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=O1(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,a,h=this.buf;return r=127&(a=h[this.pos++]),a<128?r:(r|=(127&(a=h[this.pos++]))<<7,a<128?r:(r|=(127&(a=h[this.pos++]))<<14,a<128?r:(r|=(127&(a=h[this.pos++]))<<21,a<128?r:function(m,y,_){var b,E,I=_.buf;if(b=(112&(E=I[_.pos++]))>>4,E<128||(b|=(127&(E=I[_.pos++]))<<3,E<128)||(b|=(127&(E=I[_.pos++]))<<10,E<128)||(b|=(127&(E=I[_.pos++]))<<17,E<128)||(b|=(127&(E=I[_.pos++]))<<24,E<128)||(b|=(1&(E=I[_.pos++]))<<31,E<128))return ru(m,b,y);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(a=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&F1?function(a,h,m){return F1.decode(a.subarray(h,m))}(this.buf,r,o):function(a,h,m){for(var y="",_=h;_<m;){var b,E,I,M=a[_],D=null,j=M>239?4:M>223?3:M>191?2:1;if(_+j>m)break;j===1?M<128&&(D=M):j===2?(192&(b=a[_+1]))==128&&(D=(31&M)<<6|63&b)<=127&&(D=null):j===3?(E=a[_+2],(192&(b=a[_+1]))==128&&(192&E)==128&&((D=(15&M)<<12|(63&b)<<6|63&E)<=2047||D>=55296&&D<=57343)&&(D=null)):j===4&&(E=a[_+2],I=a[_+3],(192&(b=a[_+1]))==128&&(192&E)==128&&(192&I)==128&&((D=(15&M)<<18|(63&b)<<12|(63&E)<<6|63&I)<=65535||D>=1114112)&&(D=null)),D===null?(D=65533,j=1):D>65535&&(D-=65536,y+=String.fromCharCode(D>>>10&1023|55296),D=56320|1023&D),y+=String.fromCharCode(D),_+=j}return y}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==Qr.Bytes)return o.push(this.readVarint(r));var a=ws(this);for(o=o||[];this.pos<a;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==Qr.Bytes)return o.push(this.readSVarint());var r=ws(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Qr.Bytes)return o.push(this.readBoolean());var r=ws(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Qr.Bytes)return o.push(this.readFloat());var r=ws(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Qr.Bytes)return o.push(this.readDouble());var r=ws(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Qr.Bytes)return o.push(this.readFixed32());var r=ws(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Qr.Bytes)return o.push(this.readSFixed32());var r=ws(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Qr.Bytes)return o.push(this.readFixed64());var r=ws(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Qr.Bytes)return o.push(this.readSFixed64());var r=ws(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===Qr.Varint)for(;this.buf[this.pos++]>127;);else if(r===Qr.Bytes)this.pos=this.readVarint()+this.pos;else if(r===Qr.Fixed32)this.pos+=4;else{if(r!==Qr.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var a=new Uint8Array(r);a.set(this.buf),this.buf=a,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),nu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),nu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),nu(this.buf,-1&o,this.pos),nu(this.buf,Math.floor(o*B1),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),nu(this.buf,-1&o,this.pos),nu(this.buf,Math.floor(o*B1),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,a){var h,m;if(r>=0?(h=r%4294967296|0,m=r/4294967296|0):(m=~(-r/4294967296),4294967295^(h=~(-r%4294967296))?h=h+1|0:(h=0,m=m+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(y,_,b){b.buf[b.pos++]=127&y|128,y>>>=7,b.buf[b.pos++]=127&y|128,y>>>=7,b.buf[b.pos++]=127&y|128,y>>>=7,b.buf[b.pos++]=127&y|128,b.buf[b.pos]=127&(y>>>=7)}(h,0,a),function(y,_){var b=(7&y)<<4;_.buf[_.pos++]|=b|((y>>>=3)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y)))))}(m,a)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(h,m,y){for(var _,b,E=0;E<m.length;E++){if((_=m.charCodeAt(E))>55295&&_<57344){if(!b){_>56319||E+1===m.length?(h[y++]=239,h[y++]=191,h[y++]=189):b=_;continue}if(_<56320){h[y++]=239,h[y++]=191,h[y++]=189,b=_;continue}_=b-55296<<10|_-56320|65536,b=null}else b&&(h[y++]=239,h[y++]=191,h[y++]=189,b=null);_<128?h[y++]=_:(_<2048?h[y++]=_>>6|192:(_<65536?h[y++]=_>>12|224:(h[y++]=_>>18|240,h[y++]=_>>12&63|128),h[y++]=_>>6&63|128),h[y++]=63&_|128)}return y}(this.buf,o,this.pos);var a=this.pos-r;a>=128&&N1(r,a,this),this.pos=r-1,this.writeVarint(a),this.pos+=a},writeFloat:function(o){this.realloc(4),D1(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),D1(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var a=0;a<r;a++)this.buf[this.pos++]=o[a]},writeRawMessage:function(o,r){this.pos++;var a=this.pos;o(r,this);var h=this.pos-a;h>=128&&N1(a,h,this),this.pos=a-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,r,a){this.writeTag(o,Qr.Bytes),this.writeRawMessage(r,a)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,gA,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,yA,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,xA,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,vA,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,_A,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,bA,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,wA,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,SA,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,EA,r)},writeBytesField:function(o,r){this.writeTag(o,Qr.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,Qr.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,Qr.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,Qr.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,Qr.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,Qr.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,Qr.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,Qr.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,Qr.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,Qr.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var Ey=w(L1);const Ty=3;function TA(o,r,a){o===1&&a.readMessage(CA,r)}function CA(o,r,a){if(o===3){const{id:h,bitmap:m,width:y,height:_,left:b,top:E,advance:I}=a.readMessage(kA,{});r.push({id:h,bitmap:new $h({width:y+2*Ty,height:_+2*Ty},m),metrics:{width:y,height:_,left:b,top:E,advance:I}})}}function kA(o,r,a){o===1?r.id=a.readVarint():o===2?r.bitmap=a.readBytes():o===3?r.width=a.readVarint():o===4?r.height=a.readVarint():o===5?r.left=a.readSVarint():o===6?r.top=a.readSVarint():o===7&&(r.advance=a.readVarint())}const j1=Ty;function $1(o){let r=0,a=0;for(const _ of o)r+=_.w*_.h,a=Math.max(a,_.w);o.sort((_,b)=>b.h-_.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),a),h:1/0}];let m=0,y=0;for(const _ of o)for(let b=h.length-1;b>=0;b--){const E=h[b];if(!(_.w>E.w||_.h>E.h)){if(_.x=E.x,_.y=E.y,y=Math.max(y,_.y+_.h),m=Math.max(m,_.x+_.w),_.w===E.w&&_.h===E.h){const I=h.pop();b<h.length&&(h[b]=I)}else _.h===E.h?(E.x+=_.w,E.w-=_.w):_.w===E.w?(E.y+=_.h,E.h-=_.h):(h.push({x:E.x+_.w,y:E.y,w:E.w-_.w,h:_.h}),E.y+=_.h,E.h-=_.h);break}}return{w:m,h:y,fill:r/(m*y)||0}}const ho=1;class Cy{constructor(r,{pixelRatio:a,version:h,stretchX:m,stretchY:y,content:_}){this.paddedRect=r,this.pixelRatio=a,this.stretchX=m,this.stretchY=y,this.content=_,this.version=h}get tl(){return[this.paddedRect.x+ho,this.paddedRect.y+ho]}get br(){return[this.paddedRect.x+this.paddedRect.w-ho,this.paddedRect.y+this.paddedRect.h-ho]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ho)/this.pixelRatio,(this.paddedRect.h-2*ho)/this.pixelRatio]}}class V1{constructor(r,a){const h={},m={};this.haveRenderCallbacks=[];const y=[];this.addImages(r,h,y),this.addImages(a,m,y);const{w:_,h:b}=$1(y),E=new $o({width:_||1,height:b||1});for(const I in r){const M=r[I],D=h[I].paddedRect;$o.copy(M.data,E,{x:0,y:0},{x:D.x+ho,y:D.y+ho},M.data)}for(const I in a){const M=a[I],D=m[I].paddedRect,j=D.x+ho,V=D.y+ho,H=M.data.width,ne=M.data.height;$o.copy(M.data,E,{x:0,y:0},{x:j,y:V},M.data),$o.copy(M.data,E,{x:0,y:ne-1},{x:j,y:V-1},{width:H,height:1}),$o.copy(M.data,E,{x:0,y:0},{x:j,y:V+ne},{width:H,height:1}),$o.copy(M.data,E,{x:H-1,y:0},{x:j-1,y:V},{width:1,height:ne}),$o.copy(M.data,E,{x:0,y:0},{x:j+H,y:V},{width:1,height:ne})}this.image=E,this.iconPositions=h,this.patternPositions=m}addImages(r,a,h){for(const m in r){const y=r[m],_={x:0,y:0,w:y.data.width+2*ho,h:y.data.height+2*ho};h.push(_),a[m]=new Cy(_,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(r,a){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in r.updatedImages)this.patchUpdatedImage(this.iconPositions[h],r.getImage(h),a),this.patchUpdatedImage(this.patternPositions[h],r.getImage(h),a)}patchUpdatedImage(r,a,h){if(!r||!a||r.version===a.version)return;r.version=a.version;const[m,y]=r.tl;h.update(a.data,void 0,{x:m,y})}}var Qs;xt("ImagePosition",Cy),xt("ImageAtlas",V1),c.WritingMode=void 0,(Qs=c.WritingMode||(c.WritingMode={}))[Qs.none=0]="none",Qs[Qs.horizontal=1]="horizontal",Qs[Qs.vertical=2]="vertical",Qs[Qs.horizontalOnly=3]="horizontalOnly";const Xh=-17;class Yh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,a){const h=new Yh;return h.scale=r||1,h.fontStack=a,h}static forImage(r){const a=new Yh;return a.imageName=r,a}}class iu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,a){const h=new iu;for(let m=0;m<r.sections.length;m++){const y=r.sections[m];y.image?h.addImageSection(y):h.addTextSection(y,a)}return h}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let a="";for(let h=0;h<r.length;h++){const m=r.charCodeAt(h+1)||null,y=r.charCodeAt(h-1)||null;a+=m&&Vp(m)&&!Kh[r[h+1]]||y&&Vp(y)&&!Kh[r[h-1]]||!Kh[r[h]]?r[h]:Kh[r[h]]}return a}(this.text)}trim(){let r=0;for(let h=0;h<this.text.length&&uf[this.text.charCodeAt(h)];h++)r++;let a=this.text.length;for(let h=this.text.length-1;h>=0&&h>=r&&uf[this.text.charCodeAt(h)];h--)a--;this.text=this.text.substring(r,a),this.sectionIndex=this.sectionIndex.slice(r,a)}substring(r,a){const h=new iu;return h.text=this.text.substring(r,a),h.sectionIndex=this.sectionIndex.slice(r,a),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,a)=>Math.max(r,this.sections[a].scale),0)}addTextSection(r,a){this.text+=r.text,this.sections.push(Yh.forText(r.scale,r.fontStack||a));const h=this.sections.length-1;for(let m=0;m<r.text.length;++m)this.sectionIndex.push(h)}addImageSection(r){const a=r.image?r.image.name:"";if(a.length===0)return void Le("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Yh.forImage(a)),this.sectionIndex.push(this.sections.length-1)):Le("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function cf(o,r,a,h,m,y,_,b,E,I,M,D,j,V,H,ne){const te=iu.fromFeature(o,m);let fe;D===c.WritingMode.vertical&&te.verticalizePunctuation();const{processBidirectionalText:be,processStyledBidirectionalText:de}=Co;if(be&&te.sections.length===1){fe=[];const Fe=be(te.toString(),ky(te,I,y,r,h,V,H));for(const _t of Fe){const Ct=new iu;Ct.text=_t,Ct.sections=te.sections;for(let dt=0;dt<_t.length;dt++)Ct.sectionIndex.push(0);fe.push(Ct)}}else if(de){fe=[];const Fe=de(te.text,te.sectionIndex,ky(te,I,y,r,h,V,H));for(const _t of Fe){const Ct=new iu;Ct.text=_t[0],Ct.sectionIndex=_t[1],Ct.sections=te.sections,fe.push(Ct)}}else fe=function(Fe,_t){const Ct=[],dt=Fe.text;let at=0;for(const rt of _t)Ct.push(Fe.substring(at,rt)),at=rt;return at<dt.length&&Ct.push(Fe.substring(at,dt.length)),Ct}(te,ky(te,I,y,r,h,V,H));const Te=[],Pe={positionedLines:Te,text:te.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:D,iconsInText:!1,verticalizable:!1};return function(Fe,_t,Ct,dt,at,rt,pt,ct,Ke,Bt,Pt,br){let mn=0,bn=Xh,hi=0,qo=0;const Mi=ct==="right"?1:ct==="left"?0:.5;let ri=0;for(const ni of at){ni.trim();const zi=ni.getMaxScale(),Vi=(zi-1)*gi,to={positionedGlyphs:[],lineOffset:0};Fe.positionedLines[ri]=to;const fo=to.positionedGlyphs;let mo=0;if(!ni.length()){bn+=rt,++ri;continue}for(let Li=0;Li<ni.length();Li++){const wr=ni.getSection(Li),ko=ni.getSectionIndex(Li),Oi=ni.getCharCode(Li);let qi=0,pa=null,Ra=null,za=null,Ss=gi;const fa=!(Ke===c.WritingMode.horizontal||!Pt&&!Dc(Oi)||Pt&&(uf[Oi]||(yi=Oi,ht.Arabic(yi)||ht["Arabic Supplement"](yi)||ht["Arabic Extended-A"](yi)||ht["Arabic Presentation Forms-A"](yi)||ht["Arabic Presentation Forms-B"](yi))));if(wr.imageName){const Go=dt[wr.imageName];if(!Go)continue;za=wr.imageName,Fe.iconsInText=Fe.iconsInText||!0,Ra=Go.paddedRect;const go=Go.displaySize;wr.scale=wr.scale*gi/br,pa={width:go[0],height:go[1],left:ho,top:-j1,advance:fa?go[1]:go[0]},qi=Vi+(gi-go[1]*wr.scale),Ss=pa.advance;const Es=fa?go[0]*wr.scale-gi*zi:go[1]*wr.scale-gi*zi;Es>0&&Es>mo&&(mo=Es)}else{const Go=Ct[wr.fontStack],go=Go&&Go[Oi];if(go&&go.rect)Ra=go.rect,pa=go.metrics;else{const Es=_t[wr.fontStack],rd=Es&&Es[Oi];if(!rd)continue;pa=rd.metrics}qi=(zi-wr.scale)*gi}fa?(Fe.verticalizable=!0,fo.push({glyph:Oi,imageName:za,x:mn,y:bn+qi,vertical:fa,scale:wr.scale,fontStack:wr.fontStack,sectionIndex:ko,metrics:pa,rect:Ra}),mn+=Ss*wr.scale+Bt):(fo.push({glyph:Oi,imageName:za,x:mn,y:bn+qi,vertical:fa,scale:wr.scale,fontStack:wr.fontStack,sectionIndex:ko,metrics:pa,rect:Ra}),mn+=pa.advance*wr.scale+Bt)}fo.length!==0&&(hi=Math.max(mn-Bt,hi),IA(fo,0,fo.length-1,Mi,mo)),mn=0;const Un=rt*zi+mo;to.lineOffset=Math.max(mo,Vi),bn+=Un,qo=Math.max(Un,qo),++ri}var yi;const Ri=bn-Xh,{horizontalAlign:$i,verticalAlign:po}=Py(pt);(function(ni,zi,Vi,to,fo,mo,Un,Li,wr){const ko=(zi-Vi)*fo;let Oi=0;Oi=mo!==Un?-Li*to-Xh:(-to*wr+.5)*Un;for(const qi of ni)for(const pa of qi.positionedGlyphs)pa.x+=ko,pa.y+=Oi})(Fe.positionedLines,Mi,$i,po,hi,qo,rt,Ri,at.length),Fe.top+=-po*Ri,Fe.bottom=Fe.top+Ri,Fe.left+=-$i*hi,Fe.right=Fe.left+hi}(Pe,r,a,h,fe,_,b,E,D,I,j,ne),!function(Fe){for(const _t of Fe)if(_t.positionedGlyphs.length!==0)return!1;return!0}(Te)&&Pe}const uf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},PA={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function q1(o,r,a,h,m,y){if(r.imageName){const _=h[r.imageName];return _?_.displaySize[0]*r.scale*gi/y+m:0}{const _=a[r.fontStack],b=_&&_[o];return b?b.metrics.advance*r.scale+m:0}}function G1(o,r,a,h){const m=Math.pow(o-r,2);return h?o<r?m/2:2*m:m+Math.abs(a)*a}function AA(o,r,a){let h=0;return o===10&&(h-=1e4),a&&(h+=150),o!==40&&o!==65288||(h+=50),r!==41&&r!==65289||(h+=50),h}function H1(o,r,a,h,m,y){let _=null,b=G1(r,a,m,y);for(const E of h){const I=G1(r-E.x,a,m,y)+E.badness;I<=b&&(_=E,b=I)}return{index:o,x:r,priorBreak:_,badness:b}}function W1(o){return o?W1(o.priorBreak).concat(o.index):[]}function ky(o,r,a,h,m,y,_){if(y!=="point")return[];if(!o)return[];const b=[],E=function(j,V,H,ne,te,fe){let be=0;for(let de=0;de<j.length();de++){const Te=j.getSection(de);be+=q1(j.getCharCode(de),Te,ne,te,V,fe)}return be/Math.max(1,Math.ceil(be/H))}(o,r,a,h,m,_),I=o.text.indexOf("")>=0;let M=0;for(let j=0;j<o.length();j++){const V=o.getSection(j),H=o.getCharCode(j);if(uf[H]||(M+=q1(H,V,h,m,r,_)),j<o.length()-1){const ne=!((D=H)<11904||!(ht["Bopomofo Extended"](D)||ht.Bopomofo(D)||ht["CJK Compatibility Forms"](D)||ht["CJK Compatibility Ideographs"](D)||ht["CJK Compatibility"](D)||ht["CJK Radicals Supplement"](D)||ht["CJK Strokes"](D)||ht["CJK Symbols and Punctuation"](D)||ht["CJK Unified Ideographs Extension A"](D)||ht["CJK Unified Ideographs"](D)||ht["Enclosed CJK Letters and Months"](D)||ht["Halfwidth and Fullwidth Forms"](D)||ht.Hiragana(D)||ht["Ideographic Description Characters"](D)||ht["Kangxi Radicals"](D)||ht["Katakana Phonetic Extensions"](D)||ht.Katakana(D)||ht["Vertical Forms"](D)||ht["Yi Radicals"](D)||ht["Yi Syllables"](D)));(PA[H]||ne||V.imageName)&&b.push(H1(j+1,M,E,b,AA(H,o.getCharCode(j+1),ne&&I),!1))}}var D;return W1(H1(o.length(),M,E,b,0,!0))}function Py(o){let r=.5,a=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:r,verticalAlign:a}}function IA(o,r,a,h,m){if(!h&&!m)return;const y=o[a],_=(o[a].x+y.metrics.advance*y.scale)*h;for(let b=r;b<=a;b++)o[b].x-=_,o[b].y+=m}function MA(o,r,a){const{horizontalAlign:h,verticalAlign:m}=Py(a),y=r[0]-o.displaySize[0]*h,_=r[1]-o.displaySize[1]*m;return{image:o,top:_,bottom:_+o.displaySize[1],left:y,right:y+o.displaySize[0]}}function Z1(o,r,a,h,m,y){const _=o.image;let b;if(_.content){const te=_.content,fe=_.pixelRatio||1;b=[te[0]/fe,te[1]/fe,_.displaySize[0]-te[2]/fe,_.displaySize[1]-te[3]/fe]}const E=r.left*y,I=r.right*y;let M,D,j,V;a==="width"||a==="both"?(V=m[0]+E-h[3],D=m[0]+I+h[1]):(V=m[0]+(E+I-_.displaySize[0])/2,D=V+_.displaySize[0]);const H=r.top*y,ne=r.bottom*y;return a==="height"||a==="both"?(M=m[1]+H-h[0],j=m[1]+ne+h[2]):(M=m[1]+(H+ne-_.displaySize[1])/2,j=M+_.displaySize[1]),{image:_,top:M,right:D,bottom:j,left:V,collisionPadding:b}}const Jh=255,Ja=128,el=Jh*Ja;function K1(o,r){const{expression:a}=r;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new xn(o+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:m}=a;let y=0;for(;y<h.length&&h[y]<=o;)y++;y=Math.max(0,y-1);let _=y;for(;_<h.length&&h[_]<o+1;)_++;_=Math.min(h.length-1,_);const b=h[y],E=h[_];return a.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:E,interpolationType:m}:{kind:"camera",minZoom:b,maxZoom:E,minSize:a.evaluate(new xn(b)),maxSize:a.evaluate(new xn(E)),interpolationType:m}}}function Ay(o,r,a){let h="never";const m=o.get(r);return m?h=m:o.get(a)&&(h="always"),h}const RA=Js.VectorTileFeature.types,zA=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function hf(o,r,a,h,m,y,_,b,E,I,M,D,j){const V=b?Math.min(el,Math.round(b[0])):0,H=b?Math.min(el,Math.round(b[1])):0;o.emplaceBack(r,a,Math.round(32*h),Math.round(32*m),y,_,(V<<1)+(E?1:0),H,16*I,16*M,256*D,256*j)}function Iy(o,r,a){o.emplaceBack(r.x,r.y,a),o.emplaceBack(r.x,r.y,a),o.emplaceBack(r.x,r.y,a),o.emplaceBack(r.x,r.y,a)}function LA(o){for(const r of o.sections)if(qp(r.text))return!0;return!1}class My{constructor(r){this.layoutVertexArray=new Ee,this.indexArray=new Ge,this.programConfigurations=r,this.segments=new ot,this.dynamicLayoutVertexArray=new Ie,this.opacityVertexArray=new Ne,this.hasVisibleVertices=!1,this.placedSymbolArray=new S}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,a,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,hA.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,dA.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,zA,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}xt("SymbolBuffers",My);class Ry{constructor(r,a,h){this.layoutVertexArray=new r,this.layoutAttributes=a,this.indexArray=new h,this.segments=new ot,this.collisionVertexArray=new Ye}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,pA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}xt("CollisionBuffers",Ry);class ou{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(_=>_.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=cy([]),this.placementViewportMatrix=cy([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=K1(this.zoom,a["text-size"]),this.iconSizeData=K1(this.zoom,a["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),y=h.get("symbol-z-order");this.canOverlap=Ay(h,"text-overlap","text-allow-overlap")!=="never"||Ay(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(_=>c.WritingMode[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=r.sourceID}createArrays(){this.text=new My(new Ia(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new My(new Ia(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new A,this.lineVertexArray=new z,this.symbolInstances=new C}calculateGlyphDependencies(r,a,h,m,y){for(let _=0;_<r.length;_++)if(a[r.charCodeAt(_)]=!0,(h||m)&&y){const b=Kh[r.charAt(_)];b&&(a[b.charCodeAt(0)]=!0)}}populate(r,a,h){const m=this.layers[0],y=m.layout,_=y.get("text-font"),b=y.get("text-field"),E=y.get("icon-image"),I=(b.value.kind!=="constant"||b.value.value instanceof Ot&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),M=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,D=y.get("symbol-sort-key");if(this.features=[],!I&&!M)return;const j=a.iconDependencies,V=a.glyphDependencies,H=a.availableImages,ne=new xn(this.zoom);for(const{feature:te,id:fe,index:be,sourceLayerIndex:de}of r){const Te=m._featureFilter.needGeometry,Pe=Ql(te,Te);if(!m._featureFilter.filter(ne,Pe,h))continue;let Fe,_t;if(Te||(Pe.geometry=Ma(te)),I){const dt=m.getValueAndResolveTokens("text-field",Pe,h,H),at=Ot.factory(dt);LA(at)&&(this.hasRTLText=!0),(!this.hasRTLText||Ih()==="unavailable"||this.hasRTLText&&Co.isParsed())&&(Fe=mA(at,m,Pe))}if(M){const dt=m.getValueAndResolveTokens("icon-image",Pe,h,H);_t=dt instanceof cr?dt:cr.fromString(dt)}if(!Fe&&!_t)continue;const Ct=this.sortFeaturesByKey?D.evaluate(Pe,{},h):void 0;if(this.features.push({id:fe,text:Fe,icon:_t,index:be,sourceLayerIndex:de,geometry:Pe.geometry,properties:te.properties,type:RA[te.type],sortKey:Ct}),_t&&(j[_t.name]=!0),Fe){const dt=_.evaluate(Pe,{},h).join(","),at=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.WritingMode.vertical)>=0;for(const rt of Fe.sections)if(rt.image)j[rt.image.name]=!0;else{const pt=Oc(Fe.toString()),ct=rt.fontStack||dt,Ke=V[ct]=V[ct]||{};this.calculateGlyphDependencies(rt.text,Ke,at,this.allowVerticalPlacement,pt)}}}y.get("symbol-placement")==="line"&&(this.features=function(te){const fe={},be={},de=[];let Te=0;function Pe(dt){de.push(te[dt]),Te++}function Fe(dt,at,rt){const pt=be[dt];return delete be[dt],be[at]=pt,de[pt].geometry[0].pop(),de[pt].geometry[0]=de[pt].geometry[0].concat(rt[0]),pt}function _t(dt,at,rt){const pt=fe[at];return delete fe[at],fe[dt]=pt,de[pt].geometry[0].shift(),de[pt].geometry[0]=rt[0].concat(de[pt].geometry[0]),pt}function Ct(dt,at,rt){const pt=rt?at[0][at[0].length-1]:at[0][0];return`${dt}:${pt.x}:${pt.y}`}for(let dt=0;dt<te.length;dt++){const at=te[dt],rt=at.geometry,pt=at.text?at.text.toString():null;if(!pt){Pe(dt);continue}const ct=Ct(pt,rt),Ke=Ct(pt,rt,!0);if(ct in be&&Ke in fe&&be[ct]!==fe[Ke]){const Bt=_t(ct,Ke,rt),Pt=Fe(ct,Ke,de[Bt].geometry);delete fe[ct],delete be[Ke],be[Ct(pt,de[Pt].geometry,!0)]=Pt,de[Bt].geometry=null}else ct in be?Fe(ct,Ke,rt):Ke in fe?_t(ct,Ke,rt):(Pe(dt),fe[ct]=Te-1,be[Ke]=Te-1)}return de.filter(dt=>dt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((te,fe)=>te.sortKey-fe.sortKey)}update(r,a,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,a,this.layers,h),this.icon.programConfigurations.updatePaintArrays(r,a,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,a){const h=this.lineVertexArray.length;if(r.segment!==void 0){let m=r.dist(a[r.segment+1]),y=r.dist(a[r.segment]);const _={};for(let b=r.segment+1;b<a.length;b++)_[b]={x:a[b].x,y:a[b].y,tileUnitDistanceFromAnchor:m},b<a.length-1&&(m+=a[b+1].dist(a[b]));for(let b=r.segment||0;b>=0;b--)_[b]={x:a[b].x,y:a[b].y,tileUnitDistanceFromAnchor:y},b>0&&(y+=a[b-1].dist(a[b]));for(let b=0;b<a.length;b++){const E=_[b];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(r,a,h,m,y,_,b,E,I,M,D,j){const V=r.indexArray,H=r.layoutVertexArray,ne=r.segments.prepareSegment(4*a.length,H,V,this.canOverlap?_.sortKey:void 0),te=this.glyphOffsetArray.length,fe=ne.vertexLength,be=this.allowVerticalPlacement&&b===c.WritingMode.vertical?Math.PI/2:0,de=_.text&&_.text.sections;for(let Te=0;Te<a.length;Te++){const{tl:Pe,tr:Fe,bl:_t,br:Ct,tex:dt,pixelOffsetTL:at,pixelOffsetBR:rt,minFontScaleX:pt,minFontScaleY:ct,glyphOffset:Ke,isSDF:Bt,sectionIndex:Pt}=a[Te],br=ne.vertexLength,mn=Ke[1];hf(H,E.x,E.y,Pe.x,mn+Pe.y,dt.x,dt.y,h,Bt,at.x,at.y,pt,ct),hf(H,E.x,E.y,Fe.x,mn+Fe.y,dt.x+dt.w,dt.y,h,Bt,rt.x,at.y,pt,ct),hf(H,E.x,E.y,_t.x,mn+_t.y,dt.x,dt.y+dt.h,h,Bt,at.x,rt.y,pt,ct),hf(H,E.x,E.y,Ct.x,mn+Ct.y,dt.x+dt.w,dt.y+dt.h,h,Bt,rt.x,rt.y,pt,ct),Iy(r.dynamicLayoutVertexArray,E,be),V.emplaceBack(br,br+1,br+2),V.emplaceBack(br+1,br+2,br+3),ne.vertexLength+=4,ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ke[0]),Te!==a.length-1&&Pt===a[Te+1].sectionIndex||r.programConfigurations.populatePaintArrays(H.length,_,_.index,{},j,de&&de[Pt])}r.placedSymbolArray.emplaceBack(E.x,E.y,te,this.glyphOffsetArray.length-te,fe,I,M,E.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],b,0,!1,0,D)}_addCollisionDebugVertex(r,a,h,m,y,_){return a.emplaceBack(0,0),r.emplaceBack(h.x,h.y,m,y,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(r,a,h,m,y,_,b){const E=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),I=E.vertexLength,M=y.layoutVertexArray,D=y.collisionVertexArray,j=b.anchorX,V=b.anchorY;this._addCollisionDebugVertex(M,D,_,j,V,new L(r,a)),this._addCollisionDebugVertex(M,D,_,j,V,new L(h,a)),this._addCollisionDebugVertex(M,D,_,j,V,new L(h,m)),this._addCollisionDebugVertex(M,D,_,j,V,new L(r,m)),E.vertexLength+=4;const H=y.indexArray;H.emplaceBack(I,I+1),H.emplaceBack(I+1,I+2),H.emplaceBack(I+2,I+3),H.emplaceBack(I+3,I),E.primitiveLength+=4}addDebugCollisionBoxes(r,a,h,m){for(let y=r;y<a;y++){const _=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,m?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ry(We,z1.members,ft),this.iconCollisionBox=new Ry(We,z1.members,ft);for(let r=0;r<this.symbolInstances.length;r++){const a=this.symbolInstances.get(r);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(r,a,h,m,y,_,b,E,I){const M={};for(let D=a;D<h;D++){const j=r.get(D);M.textBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},M.textFeatureIndex=j.featureIndex;break}for(let D=m;D<y;D++){const j=r.get(D);M.verticalTextBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},M.verticalTextFeatureIndex=j.featureIndex;break}for(let D=_;D<b;D++){const j=r.get(D);M.iconBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},M.iconFeatureIndex=j.featureIndex;break}for(let D=E;D<I;D++){const j=r.get(D);M.verticalIconBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},M.verticalIconFeatureIndex=j.featureIndex;break}return M}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const h=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,a){const h=r.placedSymbolArray.get(a),m=h.vertexStartIndex+4*h.numGlyphs;for(let y=h.vertexStartIndex;y<m;y+=4)r.indexArray.emplaceBack(y,y+1,y+2),r.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(r),h=Math.cos(r),m=[],y=[],_=[];for(let b=0;b<this.symbolInstances.length;++b){_.push(b);const E=this.symbolInstances.get(b);m.push(0|Math.round(a*E.anchorX+h*E.anchorY)),y.push(E.featureIndex)}return _.sort((b,E)=>m[b]-m[E]||y[E]-y[b]),_}addToSortKeyRanges(r,a){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===a?h.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const h=this.symbolInstances.get(a);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,y,_)=>{m>=0&&_.indexOf(m)===y&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let X1,Y1;xt("SymbolBucket",ou,{omit:["layers","collisionBoxArray","features","compareText"]}),ou.MAX_GLYPHS=65535,ou.addDynamicAttributes=Iy;var zy={get paint(){return Y1=Y1||new Qi({"icon-opacity":new Ht(Ae.paint_symbol["icon-opacity"]),"icon-color":new Ht(Ae.paint_symbol["icon-color"]),"icon-halo-color":new Ht(Ae.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ht(Ae.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ht(Ae.paint_symbol["icon-halo-blur"]),"icon-translate":new At(Ae.paint_symbol["icon-translate"]),"icon-translate-anchor":new At(Ae.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ht(Ae.paint_symbol["text-opacity"]),"text-color":new Ht(Ae.paint_symbol["text-color"],{runtimeType:$r,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new Ht(Ae.paint_symbol["text-halo-color"]),"text-halo-width":new Ht(Ae.paint_symbol["text-halo-width"]),"text-halo-blur":new Ht(Ae.paint_symbol["text-halo-blur"]),"text-translate":new At(Ae.paint_symbol["text-translate"]),"text-translate-anchor":new At(Ae.paint_symbol["text-translate-anchor"])})},get layout(){return X1=X1||new Qi({"symbol-placement":new At(Ae.layout_symbol["symbol-placement"]),"symbol-spacing":new At(Ae.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new At(Ae.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ht(Ae.layout_symbol["symbol-sort-key"]),"symbol-z-order":new At(Ae.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new At(Ae.layout_symbol["icon-allow-overlap"]),"icon-overlap":new At(Ae.layout_symbol["icon-overlap"]),"icon-ignore-placement":new At(Ae.layout_symbol["icon-ignore-placement"]),"icon-optional":new At(Ae.layout_symbol["icon-optional"]),"icon-rotation-alignment":new At(Ae.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ht(Ae.layout_symbol["icon-size"]),"icon-text-fit":new At(Ae.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new At(Ae.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ht(Ae.layout_symbol["icon-image"]),"icon-rotate":new Ht(Ae.layout_symbol["icon-rotate"]),"icon-padding":new Ht(Ae.layout_symbol["icon-padding"]),"icon-keep-upright":new At(Ae.layout_symbol["icon-keep-upright"]),"icon-offset":new Ht(Ae.layout_symbol["icon-offset"]),"icon-anchor":new Ht(Ae.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new At(Ae.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new At(Ae.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new At(Ae.layout_symbol["text-rotation-alignment"]),"text-field":new Ht(Ae.layout_symbol["text-field"]),"text-font":new Ht(Ae.layout_symbol["text-font"]),"text-size":new Ht(Ae.layout_symbol["text-size"]),"text-max-width":new Ht(Ae.layout_symbol["text-max-width"]),"text-line-height":new At(Ae.layout_symbol["text-line-height"]),"text-letter-spacing":new Ht(Ae.layout_symbol["text-letter-spacing"]),"text-justify":new Ht(Ae.layout_symbol["text-justify"]),"text-radial-offset":new Ht(Ae.layout_symbol["text-radial-offset"]),"text-variable-anchor":new At(Ae.layout_symbol["text-variable-anchor"]),"text-anchor":new Ht(Ae.layout_symbol["text-anchor"]),"text-max-angle":new At(Ae.layout_symbol["text-max-angle"]),"text-writing-mode":new At(Ae.layout_symbol["text-writing-mode"]),"text-rotate":new Ht(Ae.layout_symbol["text-rotate"]),"text-padding":new At(Ae.layout_symbol["text-padding"]),"text-keep-upright":new At(Ae.layout_symbol["text-keep-upright"]),"text-transform":new Ht(Ae.layout_symbol["text-transform"]),"text-offset":new Ht(Ae.layout_symbol["text-offset"]),"text-allow-overlap":new At(Ae.layout_symbol["text-allow-overlap"]),"text-overlap":new At(Ae.layout_symbol["text-overlap"]),"text-ignore-placement":new At(Ae.layout_symbol["text-ignore-placement"]),"text-optional":new At(Ae.layout_symbol["text-optional"])})}};class J1{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:dn,this.defaultValue=r}evaluate(r){if(r.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(r.formattedSection))return a.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}xt("FormatSectionOverride",J1,{omit:["defaultValue"]});class df extends ua{constructor(r){super(r,zy)}recalculate(r,a){if(super.recalculate(r,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const y of h)m.indexOf(y)<0&&m.push(y);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,a,h,m){const y=this.layout.get(r).evaluate(a,{},h,m),_=this._unevaluatedLayout._values[r];return _.isDataDriven()||kc(_.value)||!y?y:function(b,E){return E.replace(/{([^{}]+)}/g,(I,M)=>M in b?String(b[M]):"")}(a.properties,y)}createBucket(r){return new ou(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of zy.paint.overridableProperties){if(!df.hasPaintOverride(this.layout,r))continue;const a=this.paint.get(r),h=new J1(a),m=new vh(h,a.property.specification);let y=null;y=a.value.kind==="constant"||a.value.kind==="source"?new _h("source",m):new Sr("composite",m,a.value.zoomStops),this.paint._values[r]=new ca(a.property,y,a.parameters)}}_handleOverridablePaintPropertyUpdate(r,a,h){return!(!this.layout||a.isDataDriven()||h.isDataDriven())&&df.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,a){const h=r.get("text-field"),m=zy.paint.properties[a];let y=!1;const _=b=>{for(const E of b)if(m.overrides&&m.overrides.hasOverride(E))return void(y=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Ot)_(h.value.value.sections);else if(h.value.kind==="source"){const b=I=>{y||(I instanceof Qt&&$t(I.value)===pn?_(I.value.sections):I instanceof Za?_(I.sections):I.eachChild(b))},E=h.value;E._styleExpression&&b(E._styleExpression.expression)}return y}}let Q1;var OA={get paint(){return Q1=Q1||new Qi({"background-color":new At(Ae.paint_background["background-color"]),"background-pattern":new zh(Ae.paint_background["background-pattern"]),"background-opacity":new At(Ae.paint_background["background-opacity"])})}};let eb;var DA={get paint(){return eb=eb||new Qi({"raster-opacity":new At(Ae.paint_raster["raster-opacity"]),"raster-hue-rotate":new At(Ae.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new At(Ae.paint_raster["raster-brightness-min"]),"raster-brightness-max":new At(Ae.paint_raster["raster-brightness-max"]),"raster-saturation":new At(Ae.paint_raster["raster-saturation"]),"raster-contrast":new At(Ae.paint_raster["raster-contrast"]),"raster-resampling":new At(Ae.paint_raster["raster-resampling"]),"raster-fade-duration":new At(Ae.paint_raster["raster-fade-duration"])})}};class BA extends ua{constructor(r){super(r,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const FA={circle:class extends ua{constructor(o){super(o,TP)}createBucket(o){return new ay(o)}queryRadius(o){const r=o;return Uh("circle-radius",this,r)+Uh("circle-stroke-width",this,r)+Qp(this.paint.get("circle-translate"))}queryIntersectsFeature(o,r,a,h,m,y,_,b){const E=ef(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,_),I=this.paint.get("circle-radius").evaluate(r,a)+this.paint.get("circle-stroke-width").evaluate(r,a),M=this.paint.get("circle-pitch-alignment")==="map",D=M?E:function(V,H){return V.map(ne=>c1(ne,H))}(E,b),j=M?I*_:I;for(const V of h)for(const H of V){const ne=M?H:c1(H,b);let te=j;const fe=tf([],[H.x,H.y,0,1],b);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?te*=fe[3]/y.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(te*=y.cameraToCenterDistance/fe[3]),bP(D,ne,te))return!0}return!1}},heatmap:class extends ua{createBucket(o){return new u1(o)}constructor(o){super(o,kP),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=p1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends ua{constructor(o){super(o,PP)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends ua{constructor(o){super(o,VP)}recalculate(o,r){super.recalculate(o,r);const a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new _y(o)}queryRadius(){return Qp(this.paint.get("fill-translate"))}queryIntersectsFeature(o,r,a,h,m,y,_){return n1(ef(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,_),h)}isTileClipped(){return!0}},"fill-extrusion":class extends ua{constructor(o){super(o,nA)}createBucket(o){return new by(o)}queryRadius(){return Qp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,r,a,h,m,y,_,b){const E=ef(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,_),I=this.paint.get("fill-extrusion-height").evaluate(r,a),M=this.paint.get("fill-extrusion-base").evaluate(r,a),D=function(V,H,ne,te){const fe=[];for(const be of V){const de=[be.x,be.y,0,1];tf(de,de,H),fe.push(new L(de[0]/de[3],de[1]/de[3]))}return fe}(E,b),j=function(V,H,ne,te){const fe=[],be=[],de=te[8]*H,Te=te[9]*H,Pe=te[10]*H,Fe=te[11]*H,_t=te[8]*ne,Ct=te[9]*ne,dt=te[10]*ne,at=te[11]*ne;for(const rt of V){const pt=[],ct=[];for(const Ke of rt){const Bt=Ke.x,Pt=Ke.y,br=te[0]*Bt+te[4]*Pt+te[12],mn=te[1]*Bt+te[5]*Pt+te[13],bn=te[2]*Bt+te[6]*Pt+te[14],hi=te[3]*Bt+te[7]*Pt+te[15],qo=bn+Pe,Mi=hi+Fe,ri=br+_t,yi=mn+Ct,Ri=bn+dt,$i=hi+at,po=new L((br+de)/Mi,(mn+Te)/Mi);po.z=qo/Mi,pt.push(po);const ni=new L(ri/$i,yi/$i);ni.z=Ri/$i,ct.push(ni)}fe.push(pt),be.push(ct)}return[fe,be]}(h,M,I,b);return function(V,H,ne){let te=1/0;n1(ne,H)&&(te=k1(ne,H[0]));for(let fe=0;fe<H.length;fe++){const be=H[fe],de=V[fe];for(let Te=0;Te<be.length-1;Te++){const Pe=be[Te],Fe=[Pe,be[Te+1],de[Te+1],de[Te],Pe];r1(ne,Fe)&&(te=Math.min(te,k1(ne,Fe)))}}return te!==1/0&&te}(j[0],j[1],D)}},line:class extends ua{constructor(o){super(o,M1),this.gradientVersion=0,sf||(sf=new uA(M1.paint.properties["line-width"].specification),sf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){o==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Xt,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,r){super.recalculate(o,r),this.paint._values["line-floorwidth"]=sf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new wy(o)}queryRadius(o){const r=o,a=R1(Uh("line-width",this,r),Uh("line-gap-width",this,r)),h=Uh("line-offset",this,r);return a/2+Math.abs(h)+Qp(this.paint.get("line-translate"))}queryIntersectsFeature(o,r,a,h,m,y,_){const b=ef(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,_),E=_/2*R1(this.paint.get("line-width").evaluate(r,a),this.paint.get("line-gap-width").evaluate(r,a)),I=this.paint.get("line-offset").evaluate(r,a);return I&&(h=function(M,D){const j=[];for(let V=0;V<M.length;V++){const H=M[V],ne=[];for(let te=0;te<H.length;te++){const fe=H[te-1],be=H[te],de=H[te+1],Te=te===0?new L(0,0):be.sub(fe)._unit()._perp(),Pe=te===H.length-1?new L(0,0):de.sub(be)._unit()._perp(),Fe=Te._add(Pe)._unit(),_t=Fe.x*Pe.x+Fe.y*Pe.y;_t!==0&&Fe._mult(1/_t),ne.push(Fe._mult(D)._add(be))}j.push(ne)}return j}(h,I*_)),function(M,D,j){for(let V=0;V<D.length;V++){const H=D[V];if(M.length>=3){for(let ne=0;ne<H.length;ne++)if(Jc(M,H[ne]))return!0}if(wP(M,H,j))return!0}return!1}(b,h,E)}isTileClipped(){return!0}},symbol:df,background:class extends ua{constructor(o){super(o,OA)}},raster:class extends ua{constructor(o){super(o,DA)}}};class NA{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Ly=63710088e-1;class tl{constructor(r,a){if(isNaN(r)||isNaN(a))throw new Error(`Invalid LngLat object: (${r}, ${a})`);if(this.lng=+r,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new tl(W(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const a=Math.PI/180,h=this.lat*a,m=r.lat*a,y=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((r.lng-this.lng)*a);return Ly*Math.acos(Math.min(y,1))}static convert(r){if(r instanceof tl)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new tl(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new tl(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const tb=2*Math.PI*Ly;function rb(o){return tb*Math.cos(o*Math.PI/180)}function nb(o){return(180+o)/360}function ib(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function ob(o,r){return o/rb(r)}function Oy(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class pf{constructor(r,a,h=0){this.x=+r,this.y=+a,this.z=+h}static fromLngLat(r,a=0){const h=tl.convert(r);return new pf(nb(h.lng),ib(h.lat),ob(a,h.lat))}toLngLat(){return new tl(360*this.x-180,Oy(this.y))}toAltitude(){return this.z*rb(Oy(this.y))}meterInMercatorCoordinateUnits(){return 1/tb*(r=Oy(this.y),1/Math.cos(r*Math.PI/180));var r}}function ab(o,r,a){var h=2*Math.PI*6378137/256/Math.pow(2,a);return[o*h-2*Math.PI*6378137/2,r*h-2*Math.PI*6378137/2]}class Dy{constructor(r,a,h){if(r<0||r>25||h<0||h>=Math.pow(2,r)||a<0||a>=Math.pow(2,r))throw new Error(`x=${a}, y=${h}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=a,this.y=h,this.key=Qh(0,r,r,a,h)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,a,h){const m=(_=this.y,b=this.z,E=ab(256*(y=this.x),256*(_=Math.pow(2,b)-_-1),b),I=ab(256*(y+1),256*(_+1),b),E[0]+","+E[1]+","+I[0]+","+I[1]);var y,_,b,E,I;const M=function(D,j,V){let H,ne="";for(let te=D;te>0;te--)H=1<<te-1,ne+=(j&H?1:0)+(V&H?2:0);return ne}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,M).replace(/{bbox-epsg-3857}/g,m)}isChildOf(r){const a=this.z-r.z;return a>0&&r.x===this.x>>a&&r.y===this.y>>a}getTilePoint(r){const a=Math.pow(2,this.z);return new L((r.x*a-this.x)*fn,(r.y*a-this.y)*fn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class sb{constructor(r,a){this.wrap=r,this.canonical=a,this.key=Qh(r,a.z,a.z,a.x,a.y)}}class Vo{constructor(r,a,h,m,y){if(r<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${h}`);this.overscaledZ=r,this.wrap=a,this.canonical=new Dy(h,+m,+y),this.key=Qh(a,r,h,m,y)}clone(){return new Vo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-r;return r>this.canonical.z?new Vo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Vo(r,this.wrap,r,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(r,a){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-r;return r>this.canonical.z?Qh(this.wrap*+a,r,this.canonical.z,this.canonical.x,this.canonical.y):Qh(this.wrap*+a,r,r,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const a=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>a&&r.canonical.y===this.canonical.y>>a}children(r){if(this.overscaledZ>=r)return[new Vo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new Vo(a,this.wrap,a,h,m),new Vo(a,this.wrap,a,h+1,m),new Vo(a,this.wrap,a,h,m+1),new Vo(a,this.wrap,a,h+1,m+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Vo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Vo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new sb(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new pf(r.x-this.wrap,r.y))}}function Qh(o,r,a,h,m){(o*=2)<0&&(o=-1*o-1);const y=1<<a;return(y*y*o+y*m+h).toString(36)+a.toString(36)+r.toString(36)}xt("CanonicalTileID",Dy),xt("OverscaledTileID",Vo,{omit:["posMatrix"]});class lb{constructor(r,a,h){if(this.uid=r,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return void Le(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const m=this.dim=a.height-2;this.data=new Uint32Array(a.data.buffer),this.encoding=h||"mapbox";for(let y=0;y<m;y++)this.data[this._idx(-1,y)]=this.data[this._idx(0,y)],this.data[this._idx(m,y)]=this.data[this._idx(m-1,y)],this.data[this._idx(y,-1)]=this.data[this._idx(y,0)],this.data[this._idx(y,m)]=this.data[this._idx(y,m-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(m,-1)]=this.data[this._idx(m-1,0)],this.data[this._idx(-1,m)]=this.data[this._idx(0,m-1)],this.data[this._idx(m,m)]=this.data[this._idx(m-1,m-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let y=0;y<m;y++)for(let _=0;_<m;_++){const b=this.get(y,_);b>this.max&&(this.max=b),b<this.min&&(this.min=b)}}get(r,a){const h=new Uint8Array(this.data.buffer),m=4*this._idx(r,a);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(h[m],h[m+1],h[m+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(r,a){if(r<-1||r>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(r+1)}_unpackMapbox(r,a,h){return(256*r*256+256*a+h)/10-1e4}_unpackTerrarium(r,a,h){return 256*r+a+h/256-32768}getPixels(){return new $o({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,a,h){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let m=a*this.dim,y=a*this.dim+this.dim,_=h*this.dim,b=h*this.dim+this.dim;switch(a){case-1:m=y-1;break;case 1:y=m+1}switch(h){case-1:_=b-1;break;case 1:b=_+1}const E=-a*this.dim,I=-h*this.dim;for(let M=_;M<b;M++)for(let D=m;D<y;D++)this.data[this._idx(D,M)]=r.data[this._idx(D+E,M+I)]}}xt("DEMData",lb);class cb{constructor(r){this._stringToNumber={},this._numberToString=[];for(let a=0;a<r.length;a++){const h=r[a];this._stringToNumber[h]=a,this._numberToString[a]=h}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class ub{constructor(r,a,h,m,y){this.type="Feature",this._vectorTileFeature=r,r._z=a,r._x=h,r._y=m,this.properties=r.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(r[a]=this[a]);return r}}class hb{constructor(r,a){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Gl(fn,16,0),this.grid3D=new Gl(fn,16,0),this.featureIndexArray=new G,this.promoteId=a}insert(r,a,h,m,y,_){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,y);const E=_?this.grid3D:this.grid;for(let I=0;I<a.length;I++){const M=a[I],D=[1/0,1/0,-1/0,-1/0];for(let j=0;j<M.length;j++){const V=M[j];D[0]=Math.min(D[0],V.x),D[1]=Math.min(D[1],V.y),D[2]=Math.max(D[2],V.x),D[3]=Math.max(D[3],V.y)}D[0]<fn&&D[1]<fn&&D[2]>=0&&D[3]>=0&&E.insert(b,D[0],D[1],D[2],D[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Js.VectorTile(new Ey(this.rawTileData)).layers,this.sourceLayerCoder=new cb(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,a,h,m){this.loadVTLayers();const y=r.params||{},_=fn/r.tileSize/r.scale,b=xh(y.filter),E=r.queryGeometry,I=r.queryPadding*_,M=pb(E),D=this.grid.query(M.minX-I,M.minY-I,M.maxX+I,M.maxY+I),j=pb(r.cameraQueryGeometry),V=this.grid3D.query(j.minX-I,j.minY-I,j.maxX+I,j.maxY+I,(te,fe,be,de)=>function(Te,Pe,Fe,_t,Ct){for(const at of Te)if(Pe<=at.x&&Fe<=at.y&&_t>=at.x&&Ct>=at.y)return!0;const dt=[new L(Pe,Fe),new L(Pe,Ct),new L(_t,Ct),new L(_t,Fe)];if(Te.length>2){for(const at of dt)if(Jc(Te,at))return!0}for(let at=0;at<Te.length-1;at++)if(EP(Te[at],Te[at+1],dt))return!0;return!1}(r.cameraQueryGeometry,te-I,fe-I,be+I,de+I));for(const te of V)D.push(te);D.sort(UA);const H={};let ne;for(let te=0;te<D.length;te++){const fe=D[te];if(fe===ne)continue;ne=fe;const be=this.featureIndexArray.get(fe);let de=null;this.loadMatchingFeature(H,be.bucketIndex,be.sourceLayerIndex,be.featureIndex,b,y.layers,y.availableImages,a,h,m,(Te,Pe,Fe)=>(de||(de=Ma(Te)),Pe.queryIntersectsFeature(E,Te,Fe,de,this.z,r.transform,_,r.pixelPosMatrix)))}return H}loadMatchingFeature(r,a,h,m,y,_,b,E,I,M,D){const j=this.bucketLayerIDs[a];if(_&&!function(te,fe){for(let be=0;be<te.length;be++)if(fe.indexOf(te[be])>=0)return!0;return!1}(_,j))return;const V=this.sourceLayerCoder.decode(h),H=this.vtLayers[V].feature(m);if(y.needGeometry){const te=Ql(H,!0);if(!y.filter(new xn(this.tileID.overscaledZ),te,this.tileID.canonical))return}else if(!y.filter(new xn(this.tileID.overscaledZ),H))return;const ne=this.getId(H,V);for(let te=0;te<j.length;te++){const fe=j[te];if(_&&_.indexOf(fe)<0)continue;const be=E[fe];if(!be)continue;let de={};ne&&M&&(de=M.getState(be.sourceLayer||"_geojsonTileLayer",ne));const Te=K({},I[fe]);Te.paint=db(Te.paint,be.paint,H,de,b),Te.layout=db(Te.layout,be.layout,H,de,b);const Pe=!D||D(H,be,de);if(!Pe)continue;const Fe=new ub(H,this.z,this.x,this.y,ne);Fe.layer=Te;let _t=r[fe];_t===void 0&&(_t=r[fe]=[]),_t.push({featureIndex:m,feature:Fe,intersectionZ:Pe})}}lookupSymbolFeatures(r,a,h,m,y,_,b,E){const I={};this.loadVTLayers();const M=xh(y);for(const D of r)this.loadMatchingFeature(I,h,m,D,M,_,b,E,a);return I}hasLayer(r){for(const a of this.bucketLayerIDs)for(const h of a)if(r===h)return!0;return!1}getId(r,a){let h=r.id;return this.promoteId&&(h=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof h=="boolean"&&(h=Number(h))),h}}function db(o,r,a,h,m){return Se(o,(y,_)=>{const b=r instanceof $c?r.get(_):null;return b&&b.evaluate?b.evaluate(a,h,m):b})}function pb(o){let r=1/0,a=1/0,h=-1/0,m=-1/0;for(const y of o)r=Math.min(r,y.x),a=Math.min(a,y.y),h=Math.max(h,y.x),m=Math.max(m,y.y);return{minX:r,minY:a,maxX:h,maxY:m}}function UA(o,r){return r-o}function fb(o,r,a,h,m){const y=[];for(let _=0;_<o.length;_++){const b=o[_];let E;for(let I=0;I<b.length-1;I++){let M=b[I],D=b[I+1];M.x<r&&D.x<r||(M.x<r?M=new L(r,M.y+(r-M.x)/(D.x-M.x)*(D.y-M.y))._round():D.x<r&&(D=new L(r,M.y+(r-M.x)/(D.x-M.x)*(D.y-M.y))._round()),M.y<a&&D.y<a||(M.y<a?M=new L(M.x+(a-M.y)/(D.y-M.y)*(D.x-M.x),a)._round():D.y<a&&(D=new L(M.x+(a-M.y)/(D.y-M.y)*(D.x-M.x),a)._round()),M.x>=h&&D.x>=h||(M.x>=h?M=new L(h,M.y+(h-M.x)/(D.x-M.x)*(D.y-M.y))._round():D.x>=h&&(D=new L(h,M.y+(h-M.x)/(D.x-M.x)*(D.y-M.y))._round()),M.y>=m&&D.y>=m||(M.y>=m?M=new L(M.x+(m-M.y)/(D.y-M.y)*(D.x-M.x),m)._round():D.y>=m&&(D=new L(M.x+(m-M.y)/(D.y-M.y)*(D.x-M.x),m)._round()),E&&M.equals(E[E.length-1])||(E=[M],y.push(E)),E.push(D)))))}}return y}xt("FeatureIndex",hb,{omit:["rawTileData","sourceLayerCoder"]});class rl extends L{constructor(r,a,h,m){super(r,a),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new rl(this.x,this.y,this.angle,this.segment)}}function mb(o,r,a,h,m){if(r.segment===void 0)return!0;let y=r,_=r.segment+1,b=0;for(;b>-a/2;){if(_--,_<0)return!1;b-=o[_].dist(y),y=o[_]}b+=o[_].dist(o[_+1]),_++;const E=[];let I=0;for(;b<a/2;){const M=o[_],D=o[_+1];if(!D)return!1;let j=o[_-1].angleTo(M)-M.angleTo(D);for(j=Math.abs((j+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:b,angleDelta:j}),I+=j;b-E[0].distance>h;)I-=E.shift().angleDelta;if(I>m)return!1;_++,b+=M.dist(D)}return!0}function gb(o){let r=0;for(let a=0;a<o.length-1;a++)r+=o[a].dist(o[a+1]);return r}function yb(o,r,a){return o?.6*r*a:0}function vb(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function jA(o,r,a,h,m,y){const _=yb(a,m,y),b=vb(a,h)*y;let E=0;const I=gb(o)/2;for(let M=0;M<o.length-1;M++){const D=o[M],j=o[M+1],V=D.dist(j);if(E+V>I){const H=(I-E)/V,ne=ar.number(D.x,j.x,H),te=ar.number(D.y,j.y,H),fe=new rl(ne,te,j.angleTo(D),M);return fe._round(),!_||mb(o,fe,b,_,r)?fe:void 0}E+=V}}function $A(o,r,a,h,m,y,_,b,E){const I=yb(h,y,_),M=vb(h,m),D=M*_,j=o[0].x===0||o[0].x===E||o[0].y===0||o[0].y===E;return r-D<r/4&&(r=D+r/4),_b(o,j?r/2*b%r:(M/2+2*y)*_*b%r,r,I,a,D,j,!1,E)}function _b(o,r,a,h,m,y,_,b,E){const I=y/2,M=gb(o);let D=0,j=r-a,V=[];for(let H=0;H<o.length-1;H++){const ne=o[H],te=o[H+1],fe=ne.dist(te),be=te.angleTo(ne);for(;j+a<D+fe;){j+=a;const de=(j-D)/fe,Te=ar.number(ne.x,te.x,de),Pe=ar.number(ne.y,te.y,de);if(Te>=0&&Te<E&&Pe>=0&&Pe<E&&j-I>=0&&j+I<=M){const Fe=new rl(Te,Pe,be,H);Fe._round(),h&&!mb(o,Fe,y,h,m)||V.push(Fe)}}D+=fe}return b||V.length||_||(V=_b(o,D/2,a,h,m,y,_,!0,E)),V}xt("Anchor",rl);const au=ho;function xb(o,r,a,h){const m=[],y=o.image,_=y.pixelRatio,b=y.paddedRect.w-2*au,E=y.paddedRect.h-2*au,I=o.right-o.left,M=o.bottom-o.top,D=y.stretchX||[[0,b]],j=y.stretchY||[[0,E]],V=(rt,pt)=>rt+pt[1]-pt[0],H=D.reduce(V,0),ne=j.reduce(V,0),te=b-H,fe=E-ne;let be=0,de=H,Te=0,Pe=ne,Fe=0,_t=te,Ct=0,dt=fe;if(y.content&&h){const rt=y.content;be=ff(D,0,rt[0]),Te=ff(j,0,rt[1]),de=ff(D,rt[0],rt[2]),Pe=ff(j,rt[1],rt[3]),Fe=rt[0]-be,Ct=rt[1]-Te,_t=rt[2]-rt[0]-de,dt=rt[3]-rt[1]-Pe}const at=(rt,pt,ct,Ke)=>{const Bt=mf(rt.stretch-be,de,I,o.left),Pt=gf(rt.fixed-Fe,_t,rt.stretch,H),br=mf(pt.stretch-Te,Pe,M,o.top),mn=gf(pt.fixed-Ct,dt,pt.stretch,ne),bn=mf(ct.stretch-be,de,I,o.left),hi=gf(ct.fixed-Fe,_t,ct.stretch,H),qo=mf(Ke.stretch-Te,Pe,M,o.top),Mi=gf(Ke.fixed-Ct,dt,Ke.stretch,ne),ri=new L(Bt,br),yi=new L(bn,br),Ri=new L(bn,qo),$i=new L(Bt,qo),po=new L(Pt/_,mn/_),ni=new L(hi/_,Mi/_),zi=r*Math.PI/180;if(zi){const fo=Math.sin(zi),mo=Math.cos(zi),Un=[mo,-fo,fo,mo];ri._matMult(Un),yi._matMult(Un),$i._matMult(Un),Ri._matMult(Un)}const Vi=rt.stretch+rt.fixed,to=pt.stretch+pt.fixed;return{tl:ri,tr:yi,bl:$i,br:Ri,tex:{x:y.paddedRect.x+au+Vi,y:y.paddedRect.y+au+to,w:ct.stretch+ct.fixed-Vi,h:Ke.stretch+Ke.fixed-to},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:po,pixelOffsetBR:ni,minFontScaleX:_t/_/I,minFontScaleY:dt/_/M,isSDF:a}};if(h&&(y.stretchX||y.stretchY)){const rt=bb(D,te,H),pt=bb(j,fe,ne);for(let ct=0;ct<rt.length-1;ct++){const Ke=rt[ct],Bt=rt[ct+1];for(let Pt=0;Pt<pt.length-1;Pt++)m.push(at(Ke,pt[Pt],Bt,pt[Pt+1]))}}else m.push(at({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:E+1}));return m}function ff(o,r,a){let h=0;for(const m of o)h+=Math.max(r,Math.min(a,m[1]))-Math.max(r,Math.min(a,m[0]));return h}function bb(o,r,a){const h=[{fixed:-au,stretch:0}];for(const[m,y]of o){const _=h[h.length-1];h.push({fixed:m-_.stretch,stretch:_.stretch}),h.push({fixed:m-_.stretch,stretch:_.stretch+(y-m)})}return h.push({fixed:r+au,stretch:a}),h}function mf(o,r,a,h){return o/r*a+h}function gf(o,r,a,h){return o-r*a/h}class yf{constructor(r,a,h,m,y,_,b,E,I,M){if(this.boxStartIndex=r.length,I){let D=_.top,j=_.bottom;const V=_.collisionPadding;V&&(D-=V[1],j+=V[3]);let H=j-D;H>0&&(H=Math.max(10,H),this.circleDiameter=H)}else{let D=_.top*b-E[0],j=_.bottom*b+E[2],V=_.left*b-E[3],H=_.right*b+E[1];const ne=_.collisionPadding;if(ne&&(V-=ne[0]*b,D-=ne[1]*b,H+=ne[2]*b,j+=ne[3]*b),M){const te=new L(V,D),fe=new L(H,D),be=new L(V,j),de=new L(H,j),Te=M*Math.PI/180;te._rotate(Te),fe._rotate(Te),be._rotate(Te),de._rotate(Te),V=Math.min(te.x,fe.x,be.x,de.x),H=Math.max(te.x,fe.x,be.x,de.x),D=Math.min(te.y,fe.y,be.y,de.y),j=Math.max(te.y,fe.y,be.y,de.y)}r.emplaceBack(a.x,a.y,V,D,H,j,h,m,y)}this.boxEndIndex=r.length}}class VA{constructor(r=[],a=qA){if(this.data=r,this.length=this.data.length,this.compare=a,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:a,compare:h}=this,m=a[r];for(;r>0;){const y=r-1>>1,_=a[y];if(h(m,_)>=0)break;a[r]=_,r=y}a[r]=m}_down(r){const{data:a,compare:h}=this,m=this.length>>1,y=a[r];for(;r<m;){let _=1+(r<<1),b=a[_];const E=_+1;if(E<this.length&&h(a[E],b)<0&&(_=E,b=a[E]),h(b,y)>=0)break;a[r]=b,r=_}a[r]=y}}function qA(o,r){return o<r?-1:o>r?1:0}function GA(o,r=1,a=!1){let h=1/0,m=1/0,y=-1/0,_=-1/0;const b=o[0];for(let V=0;V<b.length;V++){const H=b[V];(!V||H.x<h)&&(h=H.x),(!V||H.y<m)&&(m=H.y),(!V||H.x>y)&&(y=H.x),(!V||H.y>_)&&(_=H.y)}const E=Math.min(y-h,_-m);let I=E/2;const M=new VA([],HA);if(E===0)return new L(h,m);for(let V=h;V<y;V+=E)for(let H=m;H<_;H+=E)M.push(new su(V+I,H+I,I,o));let D=function(V){let H=0,ne=0,te=0;const fe=V[0];for(let be=0,de=fe.length,Te=de-1;be<de;Te=be++){const Pe=fe[be],Fe=fe[Te],_t=Pe.x*Fe.y-Fe.x*Pe.y;ne+=(Pe.x+Fe.x)*_t,te+=(Pe.y+Fe.y)*_t,H+=3*_t}return new su(ne/H,te/H,0,V)}(o),j=M.length;for(;M.length;){const V=M.pop();(V.d>D.d||!D.d)&&(D=V,a&&console.log("found best %d after %d probes",Math.round(1e4*V.d)/1e4,j)),V.max-D.d<=r||(I=V.h/2,M.push(new su(V.p.x-I,V.p.y-I,I,o)),M.push(new su(V.p.x+I,V.p.y-I,I,o)),M.push(new su(V.p.x-I,V.p.y+I,I,o)),M.push(new su(V.p.x+I,V.p.y+I,I,o)),j+=4)}return a&&(console.log(`num probes: ${j}`),console.log(`best distance: ${D.d}`)),D.p}function HA(o,r){return r.max-o.max}function su(o,r,a,h){this.p=new L(o,r),this.h=a,this.d=function(m,y){let _=!1,b=1/0;for(let E=0;E<y.length;E++){const I=y[E];for(let M=0,D=I.length,j=D-1;M<D;j=M++){const V=I[M],H=I[j];V.y>m.y!=H.y>m.y&&m.x<(H.x-V.x)*(m.y-V.y)/(H.y-V.y)+V.x&&(_=!_),b=Math.min(b,i1(m,V,H))}}return(_?1:-1)*Math.sqrt(b)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}const By=Number.POSITIVE_INFINITY;function wb(o,r){return r[1]!==By?function(a,h,m){let y=0,_=0;switch(h=Math.abs(h),m=Math.abs(m),a){case"top-right":case"top-left":case"top":_=m-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-m}switch(a){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h}return[y,_]}(o,r[0],r[1]):function(a,h){let m=0,y=0;h<0&&(h=0);const _=h/Math.sqrt(2);switch(a){case"top-right":case"top-left":y=_-7;break;case"bottom-right":case"bottom-left":y=7-_;break;case"bottom":y=7-h;break;case"top":y=h-7}switch(a){case"top-right":case"bottom-right":m=-_;break;case"top-left":case"bottom-left":m=_;break;case"left":m=h;break;case"right":m=-h}return[m,y]}(o,r[0])}function Fy(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function WA(o,r,a,h,m,y,_,b,E,I,M){let D=y.textMaxSize.evaluate(r,{});D===void 0&&(D=_);const j=o.layers[0].layout,V=j.get("icon-offset").evaluate(r,{},M),H=Eb(a.horizontal),ne=_/24,te=o.tilePixelRatio*ne,fe=o.tilePixelRatio*D/24,be=o.tilePixelRatio*b,de=o.tilePixelRatio*j.get("symbol-spacing"),Te=j.get("text-padding")*o.tilePixelRatio,Pe=function(Ke,Bt,Pt,br=1){const mn=Ke.get("icon-padding").evaluate(Bt,{},Pt),bn=mn&&mn.values;return[bn[0]*br,bn[1]*br,bn[2]*br,bn[3]*br]}(j,r,M,o.tilePixelRatio),Fe=j.get("text-max-angle")/180*Math.PI,_t=j.get("text-rotation-alignment")!=="viewport"&&j.get("symbol-placement")!=="point",Ct=j.get("icon-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point",dt=j.get("symbol-placement"),at=de/2,rt=j.get("icon-text-fit");let pt;h&&rt!=="none"&&(o.allowVerticalPlacement&&a.vertical&&(pt=Z1(h,a.vertical,rt,j.get("icon-text-fit-padding"),V,ne)),H&&(h=Z1(h,H,rt,j.get("icon-text-fit-padding"),V,ne)));const ct=(Ke,Bt)=>{Bt.x<0||Bt.x>=fn||Bt.y<0||Bt.y>=fn||function(Pt,br,mn,bn,hi,qo,Mi,ri,yi,Ri,$i,po,ni,zi,Vi,to,fo,mo,Un,Li,wr,ko,Oi,qi,pa){const Ra=Pt.addToLineVertexArray(br,mn);let za,Ss,fa,Go,go=0,Es=0,rd=0,Pb=0,Hy=-1,Wy=-1;const Ts={};let Ab=Kn(""),Zy=0,Ky=0;if(ri._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Zy,Ky]=ri.layout.get("text-offset").evaluate(wr,{},qi).map(yo=>yo*gi):(Zy=ri.layout.get("text-radial-offset").evaluate(wr,{},qi)*gi,Ky=By),Pt.allowVerticalPlacement&&bn.vertical){const yo=ri.layout.get("text-rotate").evaluate(wr,{},qi)+90;fa=new yf(yi,br,Ri,$i,po,bn.vertical,ni,zi,Vi,yo),Mi&&(Go=new yf(yi,br,Ri,$i,po,Mi,fo,mo,Vi,yo))}if(hi){const yo=ri.layout.get("icon-rotate").evaluate(wr,{}),Qa=ri.layout.get("icon-text-fit")!=="none",nd=xb(hi,yo,Oi,Qa),id=Mi?xb(Mi,yo,Oi,Qa):void 0;Ss=new yf(yi,br,Ri,$i,po,hi,fo,mo,!1,yo),go=4*nd.length;const Rb=Pt.iconSizeData;let tc=null;Rb.kind==="source"?(tc=[Ja*ri.layout.get("icon-size").evaluate(wr,{})],tc[0]>el&&Le(`${Pt.layerIds[0]}: Value for "icon-size" is >= ${Jh}. Reduce your "icon-size".`)):Rb.kind==="composite"&&(tc=[Ja*ko.compositeIconSizes[0].evaluate(wr,{},qi),Ja*ko.compositeIconSizes[1].evaluate(wr,{},qi)],(tc[0]>el||tc[1]>el)&&Le(`${Pt.layerIds[0]}: Value for "icon-size" is >= ${Jh}. Reduce your "icon-size".`)),Pt.addSymbols(Pt.icon,nd,tc,Li,Un,wr,c.WritingMode.none,br,Ra.lineStartIndex,Ra.lineLength,-1,qi),Hy=Pt.icon.placedSymbolArray.length-1,id&&(Es=4*id.length,Pt.addSymbols(Pt.icon,id,tc,Li,Un,wr,c.WritingMode.vertical,br,Ra.lineStartIndex,Ra.lineLength,-1,qi),Wy=Pt.icon.placedSymbolArray.length-1)}const Ib=Object.keys(bn.horizontal);for(const yo of Ib){const Qa=bn.horizontal[yo];if(!za){Ab=Kn(Qa.text);const id=ri.layout.get("text-rotate").evaluate(wr,{},qi);za=new yf(yi,br,Ri,$i,po,Qa,ni,zi,Vi,id)}const nd=Qa.positionedLines.length===1;if(rd+=Sb(Pt,br,Qa,qo,ri,Vi,wr,to,Ra,bn.vertical?c.WritingMode.horizontal:c.WritingMode.horizontalOnly,nd?Ib:[yo],Ts,Hy,ko,qi),nd)break}bn.vertical&&(Pb+=Sb(Pt,br,bn.vertical,qo,ri,Vi,wr,to,Ra,c.WritingMode.vertical,["vertical"],Ts,Wy,ko,qi));const XA=za?za.boxStartIndex:Pt.collisionBoxArray.length,YA=za?za.boxEndIndex:Pt.collisionBoxArray.length,JA=fa?fa.boxStartIndex:Pt.collisionBoxArray.length,QA=fa?fa.boxEndIndex:Pt.collisionBoxArray.length,eI=Ss?Ss.boxStartIndex:Pt.collisionBoxArray.length,tI=Ss?Ss.boxEndIndex:Pt.collisionBoxArray.length,rI=Go?Go.boxStartIndex:Pt.collisionBoxArray.length,nI=Go?Go.boxEndIndex:Pt.collisionBoxArray.length;let La=-1;const _f=(yo,Qa)=>yo&&yo.circleDiameter?Math.max(yo.circleDiameter,Qa):Qa;La=_f(za,La),La=_f(fa,La),La=_f(Ss,La),La=_f(Go,La);const Mb=La>-1?1:0;Mb&&(La*=pa/gi),Pt.glyphOffsetArray.length>=ou.MAX_GLYPHS&&Le("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),wr.sortKey!==void 0&&Pt.addToSortKeyRanges(Pt.symbolInstances.length,wr.sortKey),Pt.symbolInstances.emplaceBack(br.x,br.y,Ts.right>=0?Ts.right:-1,Ts.center>=0?Ts.center:-1,Ts.left>=0?Ts.left:-1,Ts.vertical||-1,Hy,Wy,Ab,XA,YA,JA,QA,eI,tI,rI,nI,Ri,rd,Pb,go,Es,Mb,0,ni,Zy,Ky,La)}(o,Bt,Ke,a,h,m,pt,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,te,[Te,Te,Te,Te],_t,E,be,Pe,Ct,V,r,y,I,M,_)};if(dt==="line")for(const Ke of fb(r.geometry,0,0,fn,fn)){const Bt=$A(Ke,de,Fe,a.vertical||H,h,24,fe,o.overscaling,fn);for(const Pt of Bt)H&&ZA(o,H.text,at,Pt)||ct(Ke,Pt)}else if(dt==="line-center"){for(const Ke of r.geometry)if(Ke.length>1){const Bt=jA(Ke,Fe,a.vertical||H,h,24,fe);Bt&&ct(Ke,Bt)}}else if(r.type==="Polygon")for(const Ke of gy(r.geometry,0)){const Bt=GA(Ke,16);ct(Ke[0],new rl(Bt.x,Bt.y,0))}else if(r.type==="LineString")for(const Ke of r.geometry)ct(Ke,new rl(Ke[0].x,Ke[0].y,0));else if(r.type==="Point")for(const Ke of r.geometry)for(const Bt of Ke)ct([Bt],new rl(Bt.x,Bt.y,0))}function Sb(o,r,a,h,m,y,_,b,E,I,M,D,j,V,H){const ne=function(be,de,Te,Pe,Fe,_t,Ct,dt){const at=Pe.layout.get("text-rotate").evaluate(_t,{})*Math.PI/180,rt=[];for(const pt of de.positionedLines)for(const ct of pt.positionedGlyphs){if(!ct.rect)continue;const Ke=ct.rect||{};let Bt=j1+1,Pt=!0,br=1,mn=0;const bn=(Fe||dt)&&ct.vertical,hi=ct.metrics.advance*ct.scale/2;if(dt&&de.verticalizable&&(mn=pt.lineOffset/2-(ct.imageName?-(gi-ct.metrics.width*ct.scale)/2:(ct.scale-1)*gi)),ct.imageName){const Un=Ct[ct.imageName];Pt=Un.sdf,br=Un.pixelRatio,Bt=ho/br}const qo=Fe?[ct.x+hi,ct.y]:[0,0];let Mi=Fe?[0,0]:[ct.x+hi+Te[0],ct.y+Te[1]-mn],ri=[0,0];bn&&(ri=Mi,Mi=[0,0]);const yi=(ct.metrics.left-Bt)*ct.scale-hi+Mi[0],Ri=(-ct.metrics.top-Bt)*ct.scale+Mi[1],$i=yi+Ke.w*ct.scale/br,po=Ri+Ke.h*ct.scale/br,ni=new L(yi,Ri),zi=new L($i,Ri),Vi=new L(yi,po),to=new L($i,po);if(bn){const Un=new L(-hi,hi-Xh),Li=-Math.PI/2,wr=gi/2-hi,ko=new L(5-Xh-wr,-(ct.imageName?wr:0)),Oi=new L(...ri);ni._rotateAround(Li,Un)._add(ko)._add(Oi),zi._rotateAround(Li,Un)._add(ko)._add(Oi),Vi._rotateAround(Li,Un)._add(ko)._add(Oi),to._rotateAround(Li,Un)._add(ko)._add(Oi)}if(at){const Un=Math.sin(at),Li=Math.cos(at),wr=[Li,-Un,Un,Li];ni._matMult(wr),zi._matMult(wr),Vi._matMult(wr),to._matMult(wr)}const fo=new L(0,0),mo=new L(0,0);rt.push({tl:ni,tr:zi,bl:Vi,br:to,tex:Ke,writingMode:de.writingMode,glyphOffset:qo,sectionIndex:ct.sectionIndex,isSDF:Pt,pixelOffsetTL:fo,pixelOffsetBR:mo,minFontScaleX:0,minFontScaleY:0})}return rt}(0,a,b,m,y,_,h,o.allowVerticalPlacement),te=o.textSizeData;let fe=null;te.kind==="source"?(fe=[Ja*m.layout.get("text-size").evaluate(_,{})],fe[0]>el&&Le(`${o.layerIds[0]}: Value for "text-size" is >= ${Jh}. Reduce your "text-size".`)):te.kind==="composite"&&(fe=[Ja*V.compositeTextSizes[0].evaluate(_,{},H),Ja*V.compositeTextSizes[1].evaluate(_,{},H)],(fe[0]>el||fe[1]>el)&&Le(`${o.layerIds[0]}: Value for "text-size" is >= ${Jh}. Reduce your "text-size".`)),o.addSymbols(o.text,ne,fe,b,y,_,I,r,E.lineStartIndex,E.lineLength,j,H);for(const be of M)D[be]=o.text.placedSymbolArray.length-1;return 4*ne.length}function Eb(o){for(const r in o)return o[r];return null}function ZA(o,r,a,h){const m=o.compareText;if(r in m){const y=m[r];for(let _=y.length-1;_>=0;_--)if(h.dist(y[_])<a)return!0}else m[r]=[];return m[r].push(h),!1}const Tb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Ny{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,h]=new Uint8Array(r,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=h>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const y=Tb[15&h];if(!y)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(r,2,1),[b]=new Uint32Array(r,4,1);return new Ny(b,_,y,r)}constructor(r,a=64,h=Float64Array,m){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=h,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const y=Tb.indexOf(this.ArrayType),_=2*r*this.ArrayType.BYTES_PER_ELEMENT,b=r*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-b%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+b+E,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+_+b+E),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+b+E,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=r)}add(r,a){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=r,this.coords[this._pos++]=a,h}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Uy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,a,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:_,nodeSize:b}=this,E=[0,y.length-1,0],I=[];for(;E.length;){const M=E.pop()||0,D=E.pop()||0,j=E.pop()||0;if(D-j<=b){for(let te=j;te<=D;te++){const fe=_[2*te],be=_[2*te+1];fe>=r&&fe<=h&&be>=a&&be<=m&&I.push(y[te])}continue}const V=j+D>>1,H=_[2*V],ne=_[2*V+1];H>=r&&H<=h&&ne>=a&&ne<=m&&I.push(y[V]),(M===0?r<=H:a<=ne)&&(E.push(j),E.push(V-1),E.push(1-M)),(M===0?h>=H:m>=ne)&&(E.push(V+1),E.push(D),E.push(1-M))}return I}within(r,a,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:y,nodeSize:_}=this,b=[0,m.length-1,0],E=[],I=h*h;for(;b.length;){const M=b.pop()||0,D=b.pop()||0,j=b.pop()||0;if(D-j<=_){for(let te=j;te<=D;te++)kb(y[2*te],y[2*te+1],r,a)<=I&&E.push(m[te]);continue}const V=j+D>>1,H=y[2*V],ne=y[2*V+1];kb(H,ne,r,a)<=I&&E.push(m[V]),(M===0?r-h<=H:a-h<=ne)&&(b.push(j),b.push(V-1),b.push(1-M)),(M===0?r+h>=H:a+h>=ne)&&(b.push(V+1),b.push(D),b.push(1-M))}return E}}function Uy(o,r,a,h,m,y){if(m-h<=a)return;const _=h+m>>1;Cb(o,r,_,h,m,y),Uy(o,r,a,h,_-1,1-y),Uy(o,r,a,_+1,m,1-y)}function Cb(o,r,a,h,m,y){for(;m>h;){if(m-h>600){const I=m-h+1,M=a-h+1,D=Math.log(I),j=.5*Math.exp(2*D/3),V=.5*Math.sqrt(D*j*(I-j)/I)*(M-I/2<0?-1:1);Cb(o,r,a,Math.max(h,Math.floor(a-M*j/I+V)),Math.min(m,Math.floor(a+(I-M)*j/I+V)),y)}const _=r[2*a+y];let b=h,E=m;for(ed(o,r,h,a),r[2*m+y]>_&&ed(o,r,h,m);b<E;){for(ed(o,r,b,E),b++,E--;r[2*b+y]<_;)b++;for(;r[2*E+y]>_;)E--}r[2*h+y]===_?ed(o,r,h,E):(E++,ed(o,r,E,m)),E<=a&&(h=E+1),a<=E&&(m=E-1)}}function ed(o,r,a,h){jy(o,a,h),jy(r,2*a,2*h),jy(r,2*a+1,2*h+1)}function jy(o,r,a){const h=o[r];o[r]=o[a],o[a]=h}function kb(o,r,a,h){const m=o-a,y=r-h;return m*m+y*y}var $y;c.PerformanceMarkers=void 0,($y=c.PerformanceMarkers||(c.PerformanceMarkers={})).create="create",$y.load="load",$y.fullLoad="fullLoad";let vf=null,td=[];const Vy=1e3/60,qy="loadTime",Gy="fullLoadTime",KA={mark(o){performance.mark(o)},frame(o){const r=o;vf!=null&&td.push(r-vf),vf=r},clearMetrics(){vf=null,td=[],performance.clearMeasures(qy),performance.clearMeasures(Gy);for(const o in c.PerformanceMarkers)performance.clearMarks(c.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure(qy,c.PerformanceMarkers.create,c.PerformanceMarkers.load),performance.measure(Gy,c.PerformanceMarkers.create,c.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName(qy)[0].duration,r=performance.getEntriesByName(Gy)[0].duration,a=td.length,h=1/(td.reduce((y,_)=>y+_,0)/a/1e3),m=td.filter(y=>y>Vy).reduce((y,_)=>y+(_-Vy)/Vy,0);return{loadTime:o,fullLoadTime:r,fps:h,percentDroppedFrames:m/(a+m)*100,totalFrames:a}}};c.AJAXError=or,c.ARRAY_TYPE=Qc,c.Actor=class{constructor(o,r,a){this.target=o,this.parent=r,this.mapId=a,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},_e(["receive","process"],this),this.invoker=new NA(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Nt()?o:window}send(o,r,a,h,m=!1){const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(this.callbacks[y]=a);const _=tt(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:o,hasCallback:!!a,targetMapId:h,mustQueue:m,sourceMapId:this.mapId,data:Hl(r,_)},_),{cancel:()=>{a&&delete this.callbacks[y],this.target.postMessage({id:y,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(o){const r=o.data,a=r.id;if(a&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){delete this.tasks[a];const h=this.cancelCallbacks[a];delete this.cancelCallbacks[a],h&&h()}else Nt()||r.mustQueue?(this.tasks[a]=r,this.taskQueue.push(a),this.invoker.trigger()):this.processTask(a,r)}process(){if(!this.taskQueue.length)return;const o=this.taskQueue.shift(),r=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),r&&this.processTask(o,r)}processTask(o,r){if(r.type==="<response>"){const a=this.callbacks[o];delete this.callbacks[o],a&&(r.error?a(Pa(r.error)):a(null,Pa(r.data)))}else{let a=!1;const h=tt(this.globalScope)?void 0:[],m=r.hasCallback?(b,E)=>{a=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:b?Hl(b):null,data:Hl(E,h)},h)}:b=>{a=!0};let y=null;const _=Pa(r.data);if(this.parent[r.type])y=this.parent[r.type](r.sourceMapId,_,m);else if(this.parent.getWorkerSource){const b=r.type.split(".");y=this.parent.getWorkerSource(r.sourceMapId,b[0],_.source)[b[1]](_,m)}else m(new Error(`Could not find function ${r.type}`));!a&&y&&y.cancel&&(this.cancelCallbacks[o]=y.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},c.AlphaImage=$h,c.CanonicalTileID=Dy,c.CollisionBoxArray=g,c.CollisionCircleLayoutArray=class extends Hc{},c.Color=De,c.DEMData=lb,c.DataConstantProperty=At,c.DictionaryCoder=cb,c.EXTENT=fn,c.ErrorEvent=Mn,c.EvaluationParameters=xn,c.Event=kr,c.Evented=hn,c.FeatureIndex=hb,c.FillBucket=_y,c.FillExtrusionBucket=by,c.GeoJSONFeature=ub,c.ImageAtlas=V1,c.ImagePosition=Cy,c.KDBush=Ny,c.LineBucket=wy,c.LineStripIndexArray=class extends n{},c.LngLat=tl,c.MercatorCoordinate=pf,c.ONE_EM=gi,c.OverscaledTileID=Vo,c.PerformanceUtils=KA,c.Point=L,c.Pos3dArray=class extends Vc{},c.PosArray=re,c.Properties=Qi,c.Protobuf=Ey,c.QuadTriangleArray=class extends Wc{},c.RGBAImage=$o,c.RasterBoundsArray=class extends Oh{},c.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},c.SegmentVector=ot,c.SymbolBucket=ou,c.Transitionable=Wp,c.TriangleIndexArray=Ge,c.Uniform1f=da,c.Uniform1i=class extends ji{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},c.Uniform2f=class extends ji{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},c.Uniform3f=class extends ji{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},c.Uniform4f=Yl,c.UniformColor=Ii,c.UniformMatrix4f=class extends ji{constructor(o,r){super(o,r),this.current=fi}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},c.UnwrappedTileID=sb,c.ValidationError=Ve,c.ZoomHistory=jp,c.addDynamicAttributes=Iy,c.arrayBufferToImage=function(o,r){const a=new Image;a.onload=()=>{r(null,a),URL.revokeObjectURL(a.src),a.onload=null,window.requestAnimationFrame(()=>{a.src=kt})},a.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(o)],{type:"image/png"});a.src=o.byteLength?URL.createObjectURL(h):kt},c.arrayBufferToImageBitmap=function(o,r){const a=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(a).then(h=>{r(null,h)}).catch(h=>{r(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},c.asyncAll=function(o,r,a){if(!o.length)return a(null,[]);let h=o.length;const m=new Array(o.length);let y=null;o.forEach((_,b)=>{r(_,(E,I)=>{E&&(y=E),m[b]=I,--h==0&&a(y,m)})})},c.bezier=N,c.bindAll=_e,c.clamp=q,c.clipLine=fb,c.clone=function(o){var r=new Qc(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},c.clone$1=Me,c.collisionCircleLayout=fA,c.config=rr,c.copy=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},c.create=function(){var o=new Qc(16);return Qc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},c.createExpression=Tn,c.createFilter=xh,c.createLayout=ti,c.createStyleLayer=function(o){return o.type==="custom"?new BA(o):new FA[o.type](o)},c.deepEqual=function o(r,a){if(Array.isArray(r)){if(!Array.isArray(a)||r.length!==a.length)return!1;for(let h=0;h<r.length;h++)if(!o(r[h],a[h]))return!1;return!0}if(typeof r=="object"&&r!==null&&a!==null){if(typeof a!="object"||Object.keys(r).length!==Object.keys(a).length)return!1;for(const h in r)if(!o(r[h],a[h]))return!1;return!0}return r===a},c.derefLayers=function(o){o=o.slice();const r=Object.create(null);for(let a=0;a<o.length;a++)r[o[a].id]=o[a];for(let a=0;a<o.length;a++)"ref"in o[a]&&(o[a]=Rn(o[a],r[o[a].ref]));return o},c.diffStyles=function(o,r){if(!o)return[{command:Vt.setStyle,args:[r]}];let a=[];try{if(!pr(o.version,r.version))return[{command:Vt.setStyle,args:[r]}];pr(o.center,r.center)||a.push({command:Vt.setCenter,args:[r.center]}),pr(o.zoom,r.zoom)||a.push({command:Vt.setZoom,args:[r.zoom]}),pr(o.bearing,r.bearing)||a.push({command:Vt.setBearing,args:[r.bearing]}),pr(o.pitch,r.pitch)||a.push({command:Vt.setPitch,args:[r.pitch]}),pr(o.sprite,r.sprite)||a.push({command:Vt.setSprite,args:[r.sprite]}),pr(o.glyphs,r.glyphs)||a.push({command:Vt.setGlyphs,args:[r.glyphs]}),pr(o.transition,r.transition)||a.push({command:Vt.setTransition,args:[r.transition]}),pr(o.light,r.light)||a.push({command:Vt.setLight,args:[r.light]});const h={},m=[];(function(_,b,E,I){let M;for(M in b=b||{},_=_||{})Object.prototype.hasOwnProperty.call(_,M)&&(Object.prototype.hasOwnProperty.call(b,M)||Kr(M,E,I));for(M in b)Object.prototype.hasOwnProperty.call(b,M)&&(Object.prototype.hasOwnProperty.call(_,M)?pr(_[M],b[M])||(_[M].type==="geojson"&&b[M].type==="geojson"&&Tr(_,b,M)?E.push({command:Vt.setGeoJSONSourceData,args:[M,b[M].data]}):Ln(M,b,E,I)):zn(M,b,E))})(o.sources,r.sources,m,h);const y=[];o.layers&&o.layers.forEach(_=>{h[_.source]?a.push({command:Vt.removeLayer,args:[_.id]}):y.push(_)}),a=a.concat(m),function(_,b,E){b=b||[];const I=(_=_||[]).map(yn),M=b.map(yn),D=_.reduce(rn,{}),j=b.reduce(rn,{}),V=I.slice(),H=Object.create(null);let ne,te,fe,be,de,Te,Pe;for(ne=0,te=0;ne<I.length;ne++)fe=I[ne],Object.prototype.hasOwnProperty.call(j,fe)?te++:(E.push({command:Vt.removeLayer,args:[fe]}),V.splice(V.indexOf(fe,te),1));for(ne=0,te=0;ne<M.length;ne++)fe=M[M.length-1-ne],V[V.length-1-ne]!==fe&&(Object.prototype.hasOwnProperty.call(D,fe)?(E.push({command:Vt.removeLayer,args:[fe]}),V.splice(V.lastIndexOf(fe,V.length-te),1)):te++,Te=V[V.length-ne],E.push({command:Vt.addLayer,args:[j[fe],Te]}),V.splice(V.length-ne,0,fe),H[fe]=!0);for(ne=0;ne<M.length;ne++)if(fe=M[ne],be=D[fe],de=j[fe],!H[fe]&&!pr(be,de))if(pr(be.source,de.source)&&pr(be["source-layer"],de["source-layer"])&&pr(be.type,de.type)){for(Pe in Vn(be.layout,de.layout,E,fe,null,Vt.setLayoutProperty),Vn(be.paint,de.paint,E,fe,null,Vt.setPaintProperty),pr(be.filter,de.filter)||E.push({command:Vt.setFilter,args:[fe,de.filter]}),pr(be.minzoom,de.minzoom)&&pr(be.maxzoom,de.maxzoom)||E.push({command:Vt.setLayerZoomRange,args:[fe,de.minzoom,de.maxzoom]}),be)Object.prototype.hasOwnProperty.call(be,Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&(Pe.indexOf("paint.")===0?Vn(be[Pe],de[Pe],E,fe,Pe.slice(6),Vt.setPaintProperty):pr(be[Pe],de[Pe])||E.push({command:Vt.setLayerProperty,args:[fe,Pe,de[Pe]]}));for(Pe in de)Object.prototype.hasOwnProperty.call(de,Pe)&&!Object.prototype.hasOwnProperty.call(be,Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&(Pe.indexOf("paint.")===0?Vn(be[Pe],de[Pe],E,fe,Pe.slice(6),Vt.setPaintProperty):pr(be[Pe],de[Pe])||E.push({command:Vt.setLayerProperty,args:[fe,Pe,de[Pe]]}))}else E.push({command:Vt.removeLayer,args:[fe]}),Te=V[V.lastIndexOf(fe)+1],E.push({command:Vt.addLayer,args:[de,Te]})}(y,r.layers,a)}catch(h){console.warn("Unable to compute style diff:",h),a=[{command:Vt.setStyle,args:[r]}]}return a},c.dot=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},c.earthRadius=Ly,c.ease=ae,c.emitValidationErrors=Ks,c.emptyStyle=function(){const o={},r=Ae.$version;for(const a in Ae.$root){const h=Ae.$root[a];if(h.required){let m=null;m=a==="version"?r:h.type==="array"?[]:{},m!=null&&(o[a]=m)}}return o},c.equals=function(o,r){var a=o[0],h=o[1],m=o[2],y=o[3],_=o[4],b=o[5],E=o[6],I=o[7],M=o[8],D=o[9],j=o[10],V=o[11],H=o[12],ne=o[13],te=o[14],fe=o[15],be=r[0],de=r[1],Te=r[2],Pe=r[3],Fe=r[4],_t=r[5],Ct=r[6],dt=r[7],at=r[8],rt=r[9],pt=r[10],ct=r[11],Ke=r[12],Bt=r[13],Pt=r[14],br=r[15];return Math.abs(a-be)<=eo*Math.max(1,Math.abs(a),Math.abs(be))&&Math.abs(h-de)<=eo*Math.max(1,Math.abs(h),Math.abs(de))&&Math.abs(m-Te)<=eo*Math.max(1,Math.abs(m),Math.abs(Te))&&Math.abs(y-Pe)<=eo*Math.max(1,Math.abs(y),Math.abs(Pe))&&Math.abs(_-Fe)<=eo*Math.max(1,Math.abs(_),Math.abs(Fe))&&Math.abs(b-_t)<=eo*Math.max(1,Math.abs(b),Math.abs(_t))&&Math.abs(E-Ct)<=eo*Math.max(1,Math.abs(E),Math.abs(Ct))&&Math.abs(I-dt)<=eo*Math.max(1,Math.abs(I),Math.abs(dt))&&Math.abs(M-at)<=eo*Math.max(1,Math.abs(M),Math.abs(at))&&Math.abs(D-rt)<=eo*Math.max(1,Math.abs(D),Math.abs(rt))&&Math.abs(j-pt)<=eo*Math.max(1,Math.abs(j),Math.abs(pt))&&Math.abs(V-ct)<=eo*Math.max(1,Math.abs(V),Math.abs(ct))&&Math.abs(H-Ke)<=eo*Math.max(1,Math.abs(H),Math.abs(Ke))&&Math.abs(ne-Bt)<=eo*Math.max(1,Math.abs(ne),Math.abs(Bt))&&Math.abs(te-Pt)<=eo*Math.max(1,Math.abs(te),Math.abs(Pt))&&Math.abs(fe-br)<=eo*Math.max(1,Math.abs(fe),Math.abs(br))},c.evaluateSizeForFeature=function(o,{uSize:r,uSizeT:a},{lowerSize:h,upperSize:m}){return o.kind==="source"?h/Ja:o.kind==="composite"?ar.number(h/Ja,m/Ja,a):r},c.evaluateSizeForZoom=function(o,r){let a=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:m,minZoom:y,maxZoom:_}=o,b=m?q(Jr.interpolationFactor(m,r,y,_),0,1):0;o.kind==="camera"?h=ar.number(o.minSize,o.maxSize,b):a=b}return{uSizeT:a,uSize:h}},c.evaluateVariableOffset=wb,c.evented=Uc,c.exported=wt,c.extend=K,c.filterObject=xe,c.findLineIntersection=function(o,r,a,h){const m=r.y-o.y,y=r.x-o.x,_=h.y-a.y,b=h.x-a.x,E=_*y-b*m;if(E===0)return null;const I=(b*(o.y-a.y)-_*(o.x-a.x))/E;return new L(o.x+I*y,o.y+I*m)},c.fromScaling=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},c.getAnchorAlignment=Py,c.getAnchorJustification=Fy,c.getArrayBuffer=zr,c.getDefaultExportFromCjs=w,c.getJSON=function(o,r){return Ir(K(o,{type:"json"}),r)},c.getOverlapMode=Ay,c.getProtocolAction=dr,c.getRTLTextPluginStatus=Ih,c.getReferrer=fr,c.getVideo=function(o,r){const a=window.document.createElement("video");a.muted=!0,a.onloadstart=function(){r(null,a)};for(let h=0;h<o.length;h++){const m=window.document.createElement("source");Fr(o[h])||(a.crossOrigin="Anonymous"),m.src=o[h],a.appendChild(m)}return{cancel:()=>{}}},c.groupByLayout=function(o,r){const a={};for(let m=0;m<o.length;m++){const y=r&&r[o[m].id]||ey(o[m]);r&&(r[o[m].id]=y);let _=a[y];_||(_=a[y]=[]),_.push(o[m])}const h=[];for(const m in a)h.push(a[m]);return h},c.identity=cy,c.interpolate=ar,c.invert=function(o,r){var a=r[0],h=r[1],m=r[2],y=r[3],_=r[4],b=r[5],E=r[6],I=r[7],M=r[8],D=r[9],j=r[10],V=r[11],H=r[12],ne=r[13],te=r[14],fe=r[15],be=a*b-h*_,de=a*E-m*_,Te=a*I-y*_,Pe=h*E-m*b,Fe=h*I-y*b,_t=m*I-y*E,Ct=M*ne-D*H,dt=M*te-j*H,at=M*fe-V*H,rt=D*te-j*ne,pt=D*fe-V*ne,ct=j*fe-V*te,Ke=be*ct-de*pt+Te*rt+Pe*at-Fe*dt+_t*Ct;return Ke?(o[0]=(b*ct-E*pt+I*rt)*(Ke=1/Ke),o[1]=(m*pt-h*ct-y*rt)*Ke,o[2]=(ne*_t-te*Fe+fe*Pe)*Ke,o[3]=(j*Fe-D*_t-V*Pe)*Ke,o[4]=(E*at-_*ct-I*dt)*Ke,o[5]=(a*ct-m*at+y*dt)*Ke,o[6]=(te*Te-H*_t-fe*de)*Ke,o[7]=(M*_t-j*Te+V*de)*Ke,o[8]=(_*pt-b*at+I*Ct)*Ke,o[9]=(h*at-a*pt-y*Ct)*Ke,o[10]=(H*Fe-ne*Te+fe*be)*Ke,o[11]=(D*Te-M*Fe-V*be)*Ke,o[12]=(b*dt-_*rt-E*Ct)*Ke,o[13]=(a*rt-h*dt+m*Ct)*Ke,o[14]=(ne*de-H*Pe-te*be)*Ke,o[15]=(M*Pe-D*de+j*be)*Ke,o):null},c.isImageBitmap=Mt,c.isSafari=tt,c.isWorker=Nt,c.keysDifference=function(o,r){const a=[];for(const h in o)h in r||a.push(h);return a},c.lazyLoadRTLTextPlugin=function(){Co.isLoading()||Co.isLoaded()||Ih()!=="deferred"||Hp()},c.makeRequest=Ir,c.mapObject=Se,c.mercatorXfromLng=nb,c.mercatorYfromLat=ib,c.mercatorZfromAltitude=ob,c.mul=CP,c.mul$1=function(o,r,a){return o[0]=r[0]*a[0],o[1]=r[1]*a[1],o[2]=r[2]*a[2],o[3]=r[3]*a[3],o},c.multiply=l1,c.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},c.operations=Vt,c.ortho=function(o,r,a,h,m,y,_){var b=1/(r-a),E=1/(h-m),I=1/(y-_);return o[0]=-2*b,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*E,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*I,o[11]=0,o[12]=(r+a)*b,o[13]=(m+h)*E,o[14]=(_+y)*I,o[15]=1,o},c.parseCacheControl=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,h,m,y)=>{const _=m||y;return r[h]=!_||_.toLowerCase(),""}),r["max-age"]){const a=parseInt(r["max-age"],10);isNaN(a)?delete r["max-age"]:r["max-age"]=a}return r},c.parseGlyphPbf=function(o){return new Ey(o).readFields(TA,[])},c.pbf=L1,c.performSymbolLayout=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=fn/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0].layout,a=o.bucket.layers[0]._unevaluatedLayout._values,h={layoutIconSize:a["icon-size"].possiblyEvaluate(new xn(o.bucket.zoom+1),o.canonical),layoutTextSize:a["text-size"].possiblyEvaluate(new xn(o.bucket.zoom+1),o.canonical),textMaxSize:a["text-size"].possiblyEvaluate(new xn(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:E,maxZoom:I}=o.bucket.textSizeData;h.compositeTextSizes=[a["text-size"].possiblyEvaluate(new xn(E),o.canonical),a["text-size"].possiblyEvaluate(new xn(I),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:E,maxZoom:I}=o.bucket.iconSizeData;h.compositeIconSizes=[a["icon-size"].possiblyEvaluate(new xn(E),o.canonical),a["icon-size"].possiblyEvaluate(new xn(I),o.canonical)]}const m=r.get("text-line-height")*gi,y=r.get("text-rotation-alignment")!=="viewport"&&r.get("symbol-placement")!=="point",_=r.get("text-keep-upright"),b=r.get("text-size");for(const E of o.bucket.features){const I=r.get("text-font").evaluate(E,{},o.canonical).join(","),M=b.evaluate(E,{},o.canonical),D=h.layoutTextSize.evaluate(E,{},o.canonical),j=h.layoutIconSize.evaluate(E,{},o.canonical),V={horizontal:{},vertical:void 0},H=E.text;let ne,te=[0,0];if(H){const de=H.toString(),Te=r.get("text-letter-spacing").evaluate(E,{},o.canonical)*gi,Pe=Ch(de)?Te:0,Fe=r.get("text-anchor").evaluate(E,{},o.canonical),_t=r.get("text-variable-anchor");if(!_t){const pt=r.get("text-radial-offset").evaluate(E,{},o.canonical);te=pt?wb(Fe,[pt*gi,By]):r.get("text-offset").evaluate(E,{},o.canonical).map(ct=>ct*gi)}let Ct=y?"center":r.get("text-justify").evaluate(E,{},o.canonical);const dt=r.get("symbol-placement"),at=dt==="point"?r.get("text-max-width").evaluate(E,{},o.canonical)*gi:0,rt=()=>{o.bucket.allowVerticalPlacement&&Oc(de)&&(V.vertical=cf(H,o.glyphMap,o.glyphPositions,o.imagePositions,I,at,m,Fe,"left",Pe,te,c.WritingMode.vertical,!0,dt,D,M))};if(!y&&_t){const pt=Ct==="auto"?_t.map(Ke=>Fy(Ke)):[Ct];let ct=!1;for(let Ke=0;Ke<pt.length;Ke++){const Bt=pt[Ke];if(!V.horizontal[Bt])if(ct)V.horizontal[Bt]=V.horizontal[0];else{const Pt=cf(H,o.glyphMap,o.glyphPositions,o.imagePositions,I,at,m,"center",Bt,Pe,te,c.WritingMode.horizontal,!1,dt,D,M);Pt&&(V.horizontal[Bt]=Pt,ct=Pt.positionedLines.length===1)}}rt()}else{Ct==="auto"&&(Ct=Fy(Fe));const pt=cf(H,o.glyphMap,o.glyphPositions,o.imagePositions,I,at,m,Fe,Ct,Pe,te,c.WritingMode.horizontal,!1,dt,D,M);pt&&(V.horizontal[Ct]=pt),rt(),Oc(de)&&y&&_&&(V.vertical=cf(H,o.glyphMap,o.glyphPositions,o.imagePositions,I,at,m,Fe,Ct,Pe,te,c.WritingMode.vertical,!1,dt,D,M))}}let fe=!1;if(E.icon&&E.icon.name){const de=o.imageMap[E.icon.name];de&&(ne=MA(o.imagePositions[E.icon.name],r.get("icon-offset").evaluate(E,{},o.canonical),r.get("icon-anchor").evaluate(E,{},o.canonical)),fe=!!de.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=fe:o.bucket.sdfIcons!==fe&&Le("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(de.pixelRatio!==o.bucket.pixelRatio||r.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const be=Eb(V.horizontal)||V.vertical;o.bucket.iconsInText=!!be&&be.iconsInText,(be||ne)&&WA(o.bucket,E,V,ne,o.imageMap,h,D,j,te,fe,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},c.perspective=function(o,r,a,h,m){var y,_=1/Math.tan(r/2);return o[0]=_/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=_,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,m!=null&&m!==1/0?(o[10]=(m+h)*(y=1/(h-m)),o[14]=2*m*h*y):(o[10]=-1,o[14]=-2*h),o},c.pick=function(o,r){const a={};for(let h=0;h<r.length;h++){const m=r[h];m in o&&(a[m]=o[m])}return a},c.plugin=Co,c.pointGeometry=T,c.polygonIntersectsPolygon=r1,c.potpack=$1,c.register=xt,c.registerForPluginStateChange=function(o){return o({pluginStatus:Ji,pluginURL:Ya}),Uc.on("pluginStateChange",o),o},c.renderColorRamp=p1,c.rotateX=function(o,r,a){var h=Math.sin(a),m=Math.cos(a),y=r[4],_=r[5],b=r[6],E=r[7],I=r[8],M=r[9],D=r[10],j=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=y*m+I*h,o[5]=_*m+M*h,o[6]=b*m+D*h,o[7]=E*m+j*h,o[8]=I*m-y*h,o[9]=M*m-_*h,o[10]=D*m-b*h,o[11]=j*m-E*h,o},c.rotateZ=function(o,r,a){var h=Math.sin(a),m=Math.cos(a),y=r[0],_=r[1],b=r[2],E=r[3],I=r[4],M=r[5],D=r[6],j=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=y*m+I*h,o[1]=_*m+M*h,o[2]=b*m+D*h,o[3]=E*m+j*h,o[4]=I*m-y*h,o[5]=M*m-_*h,o[6]=D*m-b*h,o[7]=j*m-E*h,o},c.sameOrigin=Fr,c.scale=function(o,r,a){var h=a[0],m=a[1],y=a[2];return o[0]=r[0]*h,o[1]=r[1]*h,o[2]=r[2]*h,o[3]=r[3]*h,o[4]=r[4]*m,o[5]=r[5]*m,o[6]=r[6]*m,o[7]=r[7]*m,o[8]=r[8]*y,o[9]=r[9]*y,o[10]=r[10]*y,o[11]=r[11]*y,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},c.setRTLTextPlugin=function(o,r,a=!1){if(Ji===kh||Ji===Nc||Ji===Ph)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ya=wt.resolveURL(o),Ji=kh,Wl=r,Ah(),a||Hp()},c.sphericalToCartesian=function([o,r,a]){return r+=90,r*=Math.PI/180,a*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(a),y:o*Math.sin(r)*Math.sin(a),z:o*Math.cos(a)}},c.toEvaluationFeature=Ql,c.transformMat4=tf,c.translate=function(o,r,a){var h,m,y,_,b,E,I,M,D,j,V,H,ne=a[0],te=a[1],fe=a[2];return r===o?(o[12]=r[0]*ne+r[4]*te+r[8]*fe+r[12],o[13]=r[1]*ne+r[5]*te+r[9]*fe+r[13],o[14]=r[2]*ne+r[6]*te+r[10]*fe+r[14],o[15]=r[3]*ne+r[7]*te+r[11]*fe+r[15]):(m=r[1],y=r[2],_=r[3],b=r[4],E=r[5],I=r[6],M=r[7],D=r[8],j=r[9],V=r[10],H=r[11],o[0]=h=r[0],o[1]=m,o[2]=y,o[3]=_,o[4]=b,o[5]=E,o[6]=I,o[7]=M,o[8]=D,o[9]=j,o[10]=V,o[11]=H,o[12]=h*ne+b*te+D*fe+r[12],o[13]=m*ne+E*te+j*fe+r[13],o[14]=y*ne+I*te+V*fe+r[14],o[15]=_*ne+M*te+H*fe+r[15]),o},c.triggerPluginCompletionEvent=Gp,c.unicodeBlockLookup=ht,c.uniqueId=function(){return ie++},c.v8Spec=Ae,c.validateCustomStyleLayer=function(o){const r=[],a=o.id;return a===void 0&&r.push({message:`layers.${a}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${a}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),r},c.validateLight=ty,c.validateStyle=Xa,c.vectorTile=Js,c.warnOnce=Le,c.wrap=W}),p(["./shared"],function(c){class w{constructor(F){this.keyCache={},F&&this.replace(F)}replace(F){this._layerConfigs={},this._layers={},this.update(F,[])}update(F,$){for(const se of F){this._layerConfigs[se.id]=se;const ue=this._layers[se.id]=c.createStyleLayer(se);ue._featureFilter=c.createFilter(ue.filter),this.keyCache[se.id]&&delete this.keyCache[se.id]}for(const se of $)delete this.keyCache[se],delete this._layerConfigs[se],delete this._layers[se];this.familiesBySource={};const X=c.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const se of X){const ue=se.map(Oe=>this._layers[Oe.id]),me=ue[0];if(me.visibility==="none")continue;const he=me.source||"";let ce=this.familiesBySource[he];ce||(ce=this.familiesBySource[he]={});const ye=me.sourceLayer||"_geojsonTileLayer";let ze=ce[ye];ze||(ze=ce[ye]=[]),ze.push(ue)}}}class T{constructor(F){const $={},X=[];for(const he in F){const ce=F[he],ye=$[he]={};for(const ze in ce){const Oe=ce[+ze];if(!Oe||Oe.bitmap.width===0||Oe.bitmap.height===0)continue;const Be={x:0,y:0,w:Oe.bitmap.width+2,h:Oe.bitmap.height+2};X.push(Be),ye[ze]={rect:Be,metrics:Oe.metrics}}}const{w:se,h:ue}=c.potpack(X),me=new c.AlphaImage({width:se||1,height:ue||1});for(const he in F){const ce=F[he];for(const ye in ce){const ze=ce[+ye];if(!ze||ze.bitmap.width===0||ze.bitmap.height===0)continue;const Oe=$[he][ye].rect;c.AlphaImage.copy(ze.bitmap,me,{x:0,y:0},{x:Oe.x+1,y:Oe.y+1},ze.bitmap)}}this.image=me,this.positions=$}}c.register("GlyphAtlas",T);class P{constructor(F){this.tileID=new c.OverscaledTileID(F.tileID.overscaledZ,F.tileID.wrap,F.tileID.canonical.z,F.tileID.canonical.x,F.tileID.canonical.y),this.uid=F.uid,this.zoom=F.zoom,this.pixelRatio=F.pixelRatio,this.tileSize=F.tileSize,this.source=F.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=F.showCollisionBoxes,this.collectResourceTiming=!!F.collectResourceTiming,this.returnDependencies=!!F.returnDependencies,this.promoteId=F.promoteId}parse(F,$,X,se,ue){this.status="parsing",this.data=F,this.collisionBoxArray=new c.CollisionBoxArray;const me=new c.DictionaryCoder(Object.keys(F.layers).sort()),he=new c.FeatureIndex(this.tileID,this.promoteId);he.bucketLayerIDs=[];const ce={},ye={featureIndex:he,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:X},ze=$.familiesBySource[this.source];for(const Kt in ze){const gr=F.layers[Kt];if(!gr)continue;gr.version===1&&c.warnOnce(`Vector tile source "${this.source}" layer "${Kt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ar=me.encode(Kt),qr=[];for(let De=0;De<gr.length;De++){const Qe=gr.feature(De),Et=he.getId(Qe,Kt);qr.push({feature:Qe,id:Et,index:De,sourceLayerIndex:Ar})}for(const De of ze[Kt]){const Qe=De[0];Qe.source!==this.source&&c.warnOnce(`layer.source = ${Qe.source} does not equal this.source = ${this.source}`),Qe.minzoom&&this.zoom<Math.floor(Qe.minzoom)||Qe.maxzoom&&this.zoom>=Qe.maxzoom||Qe.visibility!=="none"&&(L(De,this.zoom,X),(ce[Qe.id]=Qe.createBucket({index:he.bucketLayerIDs.length,layers:De,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ar,sourceID:this.source})).populate(qr,ye,this.tileID.canonical),he.bucketLayerIDs.push(De.map(Et=>Et.id)))}}let Oe,Be,bt,jt;const mt=c.mapObject(ye.glyphDependencies,Kt=>Object.keys(Kt).map(Number));Object.keys(mt).length?se.send("getGlyphs",{uid:this.uid,stacks:mt,source:this.source,tileID:this.tileID,type:"glyphs"},(Kt,gr)=>{Oe||(Oe=Kt,Be=gr,lr.call(this))}):Be={};const St=Object.keys(ye.iconDependencies);St.length?se.send("getImages",{icons:St,source:this.source,tileID:this.tileID,type:"icons"},(Kt,gr)=>{Oe||(Oe=Kt,bt=gr,lr.call(this))}):bt={};const Lt=Object.keys(ye.patternDependencies);function lr(){if(Oe)return ue(Oe);if(Be&&bt&&jt){const Kt=new T(Be),gr=new c.ImageAtlas(bt,jt);for(const Ar in ce){const qr=ce[Ar];qr instanceof c.SymbolBucket?(L(qr.layers,this.zoom,X),c.performSymbolLayout({bucket:qr,glyphMap:Be,glyphPositions:Kt.positions,imageMap:bt,imagePositions:gr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):qr.hasPattern&&(qr instanceof c.LineBucket||qr instanceof c.FillBucket||qr instanceof c.FillExtrusionBucket)&&(L(qr.layers,this.zoom,X),qr.addFeatures(ye,this.tileID.canonical,gr.patternPositions))}this.status="done",ue(null,{buckets:Object.values(ce).filter(Ar=>!Ar.isEmpty()),featureIndex:he,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Kt.image,imageAtlas:gr,glyphMap:this.returnDependencies?Be:null,iconMap:this.returnDependencies?bt:null,glyphPositions:this.returnDependencies?Kt.positions:null})}}Lt.length?se.send("getImages",{icons:Lt,source:this.source,tileID:this.tileID,type:"patterns"},(Kt,gr)=>{Oe||(Oe=Kt,jt=gr,lr.call(this))}):jt={},lr.call(this)}}function L(J,F,$){const X=new c.EvaluationParameters(F);for(const se of J)se.recalculate(X,$)}function B(J,F){const $=c.getArrayBuffer(J.request,(X,se,ue,me)=>{X?F(X):se&&F(null,{vectorTile:new c.vectorTile.VectorTile(new c.Protobuf(se)),rawData:se,cacheControl:ue,expires:me})});return()=>{$.cancel(),F()}}class U{constructor(F,$,X,se){this.actor=F,this.layerIndex=$,this.availableImages=X,this.loadVectorData=se||B,this.loading={},this.loaded={}}loadTile(F,$){const X=F.uid;this.loading||(this.loading={});const se=!!(F&&F.request&&F.request.collectResourceTiming)&&new c.RequestPerformance(F.request),ue=this.loading[X]=new P(F);ue.abort=this.loadVectorData(F,(me,he)=>{if(delete this.loading[X],me||!he)return ue.status="done",this.loaded[X]=ue,$(me);const ce=he.rawData,ye={};he.expires&&(ye.expires=he.expires),he.cacheControl&&(ye.cacheControl=he.cacheControl);const ze={};if(se){const Oe=se.finish();Oe&&(ze.resourceTiming=JSON.parse(JSON.stringify(Oe)))}ue.vectorTile=he.vectorTile,ue.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,(Oe,Be)=>{if(Oe||!Be)return $(Oe);$(null,c.extend({rawTileData:ce.slice(0)},Be,ye,ze))}),this.loaded=this.loaded||{},this.loaded[X]=ue})}reloadTile(F,$){const X=this.loaded,se=F.uid,ue=this;if(X&&X[se]){const me=X[se];me.showCollisionBoxes=F.showCollisionBoxes;const he=(ce,ye)=>{const ze=me.reloadCallback;ze&&(delete me.reloadCallback,me.parse(me.vectorTile,ue.layerIndex,this.availableImages,ue.actor,ze)),$(ce,ye)};me.status==="parsing"?me.reloadCallback=he:me.status==="done"&&(me.vectorTile?me.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor,he):he())}}abortTile(F,$){const X=this.loading,se=F.uid;X&&X[se]&&X[se].abort&&(X[se].abort(),delete X[se]),$()}removeTile(F,$){const X=this.loaded,se=F.uid;X&&X[se]&&delete X[se],$()}}class O{constructor(){this.loaded={}}loadTile(F,$){const{uid:X,encoding:se,rawImageData:ue}=F,me=c.isImageBitmap(ue)?this.getImageData(ue):ue,he=new c.DEMData(X,me,se);this.loaded=this.loaded||{},this.loaded[X]=he,$(null,he)}getImageData(F){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(F.width,F.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=F.width,this.offscreenCanvas.height=F.height,this.offscreenCanvasContext.drawImage(F,0,0,F.width,F.height);const $=this.offscreenCanvasContext.getImageData(-1,-1,F.width+2,F.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new c.RGBAImage({width:$.width,height:$.height},$.data)}removeTile(F){const $=this.loaded,X=F.uid;$&&$[X]&&delete $[X]}}function N(J,F){if(J.length!==0){ae(J[0],F);for(var $=1;$<J.length;$++)ae(J[$],!F)}}function ae(J,F){for(var $=0,X=0,se=0,ue=J.length,me=ue-1;se<ue;me=se++){var he=(J[se][0]-J[me][0])*(J[me][1]+J[se][1]),ce=$+he;X+=Math.abs($)>=Math.abs(he)?$-ce+he:he-ce+$,$=ce}$+X>=0!=!!F&&J.reverse()}var q=c.getDefaultExportFromCjs(function J(F,$){var X,se=F&&F.type;if(se==="FeatureCollection")for(X=0;X<F.features.length;X++)J(F.features[X],$);else if(se==="GeometryCollection")for(X=0;X<F.geometries.length;X++)J(F.geometries[X],$);else if(se==="Feature")J(F.geometry,$);else if(se==="Polygon")N(F.coordinates,$);else if(se==="MultiPolygon")for(X=0;X<F.coordinates.length;X++)N(F.coordinates[X],$);return F});const W=c.vectorTile.VectorTileFeature.prototype.toGeoJSON;var K={exports:{}},ie=c.pointGeometry,_e=c.vectorTile.VectorTileFeature,Se=xe;function xe(J,F){this.options=F||{},this.features=J,this.length=J.length}function Me(J,F){this.id=typeof J.id=="number"?J.id:void 0,this.type=J.type,this.rawGeometry=J.type===1?[J.geometry]:J.geometry,this.properties=J.tags,this.extent=F||4096}xe.prototype.feature=function(J){return new Me(this.features[J],this.options.extent)},Me.prototype.loadGeometry=function(){var J=this.rawGeometry;this.geometry=[];for(var F=0;F<J.length;F++){for(var $=J[F],X=[],se=0;se<$.length;se++)X.push(new ie($[se][0],$[se][1]));this.geometry.push(X)}return this.geometry},Me.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var J=this.geometry,F=1/0,$=-1/0,X=1/0,se=-1/0,ue=0;ue<J.length;ue++)for(var me=J[ue],he=0;he<me.length;he++){var ce=me[he];F=Math.min(F,ce.x),$=Math.max($,ce.x),X=Math.min(X,ce.y),se=Math.max(se,ce.y)}return[F,X,$,se]},Me.prototype.toGeoJSON=_e.prototype.toGeoJSON;var Ze=c.pbf,Le=Se;function Je(J){var F=new Ze;return function($,X){for(var se in $.layers)X.writeMessage(3,ur,$.layers[se])}(J,F),F.finish()}function ur(J,F){var $;F.writeVarintField(15,J.version||1),F.writeStringField(1,J.name||""),F.writeVarintField(5,J.extent||4096);var X={keys:[],values:[],keycache:{},valuecache:{}};for($=0;$<J.length;$++)X.feature=J.feature($),F.writeMessage(2,Nt,X);var se=X.keys;for($=0;$<se.length;$++)F.writeStringField(3,se[$]);var ue=X.values;for($=0;$<ue.length;$++)F.writeMessage(4,$e,ue[$])}function Nt(J,F){var $=J.feature;$.id!==void 0&&F.writeVarintField(1,$.id),F.writeMessage(2,mr,J),F.writeVarintField(3,$.type),F.writeMessage(4,kt,$)}function mr(J,F){var $=J.feature,X=J.keys,se=J.values,ue=J.keycache,me=J.valuecache;for(var he in $.properties){var ce=$.properties[he],ye=ue[he];if(ce!==null){ye===void 0&&(X.push(he),ue[he]=ye=X.length-1),F.writeVarint(ye);var ze=typeof ce;ze!=="string"&&ze!=="boolean"&&ze!=="number"&&(ce=JSON.stringify(ce));var Oe=ze+":"+ce,Be=me[Oe];Be===void 0&&(se.push(ce),me[Oe]=Be=se.length-1),F.writeVarint(Be)}}}function tt(J,F){return(F<<3)+(7&J)}function Mt(J){return J<<1^J>>31}function kt(J,F){for(var $=J.loadGeometry(),X=J.type,se=0,ue=0,me=$.length,he=0;he<me;he++){var ce=$[he],ye=1;X===1&&(ye=ce.length),F.writeVarint(tt(1,ye));for(var ze=X===3?ce.length-1:ce.length,Oe=0;Oe<ze;Oe++){Oe===1&&X!==1&&F.writeVarint(tt(2,ze-1));var Be=ce[Oe].x-se,bt=ce[Oe].y-ue;F.writeVarint(Mt(Be)),F.writeVarint(Mt(bt)),se+=Be,ue+=bt}X===3&&F.writeVarint(tt(7,1))}}function $e(J,F){var $=typeof J;$==="string"?F.writeStringField(1,J):$==="boolean"?F.writeBooleanField(7,J):$==="number"&&(J%1!=0?F.writeDoubleField(3,J):J<0?F.writeSVarintField(6,J):F.writeVarintField(5,J))}K.exports=Je,K.exports.fromVectorTileJs=Je,K.exports.fromGeojsonVt=function(J,F){F=F||{};var $={};for(var X in J)$[X]=new Le(J[X].features,F),$[X].name=X,$[X].version=F.version,$[X].extent=F.extent;return Je({layers:$})},K.exports.GeoJSONWrapper=Le;var lt=c.getDefaultExportFromCjs(K.exports);const wt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:J=>J},rr=Math.fround||(or=new Float32Array(1),J=>(or[0]=+J,or[0]));var or;const fr=3,dr=5,Jt=6;class Ir{constructor(F){this.options=Object.assign(Object.create(wt),F),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(F){const{log:$,minZoom:X,maxZoom:se}=this.options;$&&console.time("total time");const ue=`prepare ${F.length} points`;$&&console.time(ue),this.points=F;const me=[];for(let ce=0;ce<F.length;ce++){const ye=F[ce];if(!ye.geometry)continue;const[ze,Oe]=ye.geometry.coordinates,Be=rr(sr(ze)),bt=rr(wn(Oe));me.push(Be,bt,1/0,ce,-1,1),this.options.reduce&&me.push(0)}let he=this.trees[se+1]=this._createTree(me);$&&console.timeEnd(ue);for(let ce=se;ce>=X;ce--){const ye=+Date.now();he=this.trees[ce]=this._createTree(this._cluster(he,ce)),$&&console.log("z%d: %d clusters in %dms",ce,he.numItems,+Date.now()-ye)}return $&&console.timeEnd("total time"),this}getClusters(F,$){let X=((F[0]+180)%360+360)%360-180;const se=Math.max(-90,Math.min(90,F[1]));let ue=F[2]===180?180:((F[2]+180)%360+360)%360-180;const me=Math.max(-90,Math.min(90,F[3]));if(F[2]-F[0]>=360)X=-180,ue=180;else if(X>ue){const Oe=this.getClusters([X,se,180,me],$),Be=this.getClusters([-180,se,ue,me],$);return Oe.concat(Be)}const he=this.trees[this._limitZoom($)],ce=he.range(sr(X),wn(me),sr(ue),wn(se)),ye=he.data,ze=[];for(const Oe of ce){const Be=this.stride*Oe;ze.push(ye[Be+dr]>1?zr(ye,Be,this.clusterProps):this.points[ye[Be+fr]])}return ze}getChildren(F){const $=this._getOriginId(F),X=this._getOriginZoom(F),se="No cluster with the specified id.",ue=this.trees[X];if(!ue)throw new Error(se);const me=ue.data;if($*this.stride>=me.length)throw new Error(se);const he=this.options.radius/(this.options.extent*Math.pow(2,X-1)),ce=ue.within(me[$*this.stride],me[$*this.stride+1],he),ye=[];for(const ze of ce){const Oe=ze*this.stride;me[Oe+4]===F&&ye.push(me[Oe+dr]>1?zr(me,Oe,this.clusterProps):this.points[me[Oe+fr]])}if(ye.length===0)throw new Error(se);return ye}getLeaves(F,$,X){const se=[];return this._appendLeaves(se,F,$=$||10,X=X||0,0),se}getTile(F,$,X){const se=this.trees[this._limitZoom(F)],ue=Math.pow(2,F),{extent:me,radius:he}=this.options,ce=he/me,ye=(X-ce)/ue,ze=(X+1+ce)/ue,Oe={features:[]};return this._addTileFeatures(se.range(($-ce)/ue,ye,($+1+ce)/ue,ze),se.data,$,X,ue,Oe),$===0&&this._addTileFeatures(se.range(1-ce/ue,ye,1,ze),se.data,ue,X,ue,Oe),$===ue-1&&this._addTileFeatures(se.range(0,ye,ce/ue,ze),se.data,-1,X,ue,Oe),Oe.features.length?Oe:null}getClusterExpansionZoom(F){let $=this._getOriginZoom(F)-1;for(;$<=this.options.maxZoom;){const X=this.getChildren(F);if($++,X.length!==1)break;F=X[0].properties.cluster_id}return $}_appendLeaves(F,$,X,se,ue){const me=this.getChildren($);for(const he of me){const ce=he.properties;if(ce&&ce.cluster?ue+ce.point_count<=se?ue+=ce.point_count:ue=this._appendLeaves(F,ce.cluster_id,X,se,ue):ue<se?ue++:F.push(he),F.length===X)break}return ue}_createTree(F){const $=new c.KDBush(F.length/this.stride|0,this.options.nodeSize,Float32Array);for(let X=0;X<F.length;X+=this.stride)$.add(F[X],F[X+1]);return $.finish(),$.data=F,$}_addTileFeatures(F,$,X,se,ue,me){for(const he of F){const ce=he*this.stride,ye=$[ce+dr]>1;let ze,Oe,Be;if(ye)ze=Fr($,ce,this.clusterProps),Oe=$[ce],Be=$[ce+1];else{const mt=this.points[$[ce+fr]];ze=mt.properties;const[St,Lt]=mt.geometry.coordinates;Oe=sr(St),Be=wn(Lt)}const bt={type:1,geometry:[[Math.round(this.options.extent*(Oe*ue-X)),Math.round(this.options.extent*(Be*ue-se))]],tags:ze};let jt;jt=ye||this.options.generateId?$[ce+fr]:this.points[$[ce+fr]].id,jt!==void 0&&(bt.id=jt),me.features.push(bt)}}_limitZoom(F){return Math.max(this.options.minZoom,Math.min(Math.floor(+F),this.options.maxZoom+1))}_cluster(F,$){const{radius:X,extent:se,reduce:ue,minPoints:me}=this.options,he=X/(se*Math.pow(2,$)),ce=F.data,ye=[],ze=this.stride;for(let Oe=0;Oe<ce.length;Oe+=ze){if(ce[Oe+2]<=$)continue;ce[Oe+2]=$;const Be=ce[Oe],bt=ce[Oe+1],jt=F.within(ce[Oe],ce[Oe+1],he),mt=ce[Oe+dr];let St=mt;for(const Lt of jt){const lr=Lt*ze;ce[lr+2]>$&&(St+=ce[lr+dr])}if(St>mt&&St>=me){let Lt,lr=Be*mt,Kt=bt*mt,gr=-1;const Ar=((Oe/ze|0)<<5)+($+1)+this.points.length;for(const qr of jt){const De=qr*ze;if(ce[De+2]<=$)continue;ce[De+2]=$;const Qe=ce[De+dr];lr+=ce[De]*Qe,Kt+=ce[De+1]*Qe,ce[De+4]=Ar,ue&&(Lt||(Lt=this._map(ce,Oe,!0),gr=this.clusterProps.length,this.clusterProps.push(Lt)),ue(Lt,this._map(ce,De)))}ce[Oe+4]=Ar,ye.push(lr/St,Kt/St,1/0,Ar,-1,St),ue&&ye.push(gr)}else{for(let Lt=0;Lt<ze;Lt++)ye.push(ce[Oe+Lt]);if(St>1)for(const Lt of jt){const lr=Lt*ze;if(!(ce[lr+2]<=$)){ce[lr+2]=$;for(let Kt=0;Kt<ze;Kt++)ye.push(ce[lr+Kt])}}}}return ye}_getOriginId(F){return F-this.points.length>>5}_getOriginZoom(F){return(F-this.points.length)%32}_map(F,$,X){if(F[$+dr]>1){const me=this.clusterProps[F[$+Jt]];return X?Object.assign({},me):me}const se=this.points[F[$+fr]].properties,ue=this.options.map(se);return X&&ue===se?Object.assign({},ue):ue}}function zr(J,F,$){return{type:"Feature",id:J[F+fr],properties:Fr(J,F,$),geometry:{type:"Point",coordinates:[(X=J[F],360*(X-.5)),kr(J[F+1])]}};var X}function Fr(J,F,$){const X=J[F+dr],se=X>=1e4?`${Math.round(X/1e3)}k`:X>=1e3?Math.round(X/100)/10+"k":X,ue=J[F+Jt],me=ue===-1?{}:Object.assign({},$[ue]);return Object.assign(me,{cluster:!0,cluster_id:J[F+fr],point_count:X,point_count_abbreviated:se})}function sr(J){return J/360+.5}function wn(J){const F=Math.sin(J*Math.PI/180),$=.5-.25*Math.log((1+F)/(1-F))/Math.PI;return $<0?0:$>1?1:$}function kr(J){const F=(180-360*J)*Math.PI/180;return 360*Math.atan(Math.exp(F))/Math.PI-90}function Mn(J,F,$,X){for(var se,ue=X,me=$-F>>1,he=$-F,ce=J[F],ye=J[F+1],ze=J[$],Oe=J[$+1],Be=F+3;Be<$;Be+=3){var bt=hn(J[Be],J[Be+1],ce,ye,ze,Oe);if(bt>ue)se=Be,ue=bt;else if(bt===ue){var jt=Math.abs(Be-me);jt<he&&(se=Be,he=jt)}}ue>X&&(se-F>3&&Mn(J,F,se,X),J[se+2]=ue,$-se>3&&Mn(J,se,$,X))}function hn(J,F,$,X,se,ue){var me=se-$,he=ue-X;if(me!==0||he!==0){var ce=((J-$)*me+(F-X)*he)/(me*me+he*he);ce>1?($=se,X=ue):ce>0&&($+=me*ce,X+=he*ce)}return(me=J-$)*me+(he=F-X)*he}function Ae(J,F,$,X){var se={id:J===void 0?null:J,type:F,geometry:$,tags:X,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ue){var me=ue.geometry,he=ue.type;if(he==="Point"||he==="MultiPoint"||he==="LineString")Pr(ue,me);else if(he==="Polygon"||he==="MultiLineString")for(var ce=0;ce<me.length;ce++)Pr(ue,me[ce]);else if(he==="MultiPolygon")for(ce=0;ce<me.length;ce++)for(var ye=0;ye<me[ce].length;ye++)Pr(ue,me[ce][ye])}(se),se}function Pr(J,F){for(var $=0;$<F.length;$+=3)J.minX=Math.min(J.minX,F[$]),J.minY=Math.min(J.minY,F[$+1]),J.maxX=Math.max(J.maxX,F[$]),J.maxY=Math.max(J.maxY,F[$+1])}function Rn(J,F,$,X){if(F.geometry){var se=F.geometry.coordinates,ue=F.geometry.type,me=Math.pow($.tolerance/((1<<$.maxZoom)*$.extent),2),he=[],ce=F.id;if($.promoteId?ce=F.properties[$.promoteId]:$.generateId&&(ce=X||0),ue==="Point")pr(se,he);else if(ue==="MultiPoint")for(var ye=0;ye<se.length;ye++)pr(se[ye],he);else if(ue==="LineString")Vt(se,he,me,!1);else if(ue==="MultiLineString"){if($.lineMetrics){for(ye=0;ye<se.length;ye++)Vt(se[ye],he=[],me,!1),J.push(Ae(ce,"LineString",he,F.properties));return}zn(se,he,me,!1)}else if(ue==="Polygon")zn(se,he,me,!0);else{if(ue!=="MultiPolygon"){if(ue==="GeometryCollection"){for(ye=0;ye<F.geometry.geometries.length;ye++)Rn(J,{id:ce,geometry:F.geometry.geometries[ye],properties:F.properties},$,X);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ye=0;ye<se.length;ye++){var ze=[];zn(se[ye],ze,me,!0),he.push(ze)}}J.push(Ae(ce,ue,he,F.properties))}}function pr(J,F){F.push(Kr(J[0])),F.push(Ln(J[1])),F.push(0)}function Vt(J,F,$,X){for(var se,ue,me=0,he=0;he<J.length;he++){var ce=Kr(J[he][0]),ye=Ln(J[he][1]);F.push(ce),F.push(ye),F.push(0),he>0&&(me+=X?(se*ye-ce*ue)/2:Math.sqrt(Math.pow(ce-se,2)+Math.pow(ye-ue,2))),se=ce,ue=ye}var ze=F.length-3;F[2]=1,Mn(F,0,ze,$),F[ze+2]=1,F.size=Math.abs(me),F.start=0,F.end=F.size}function zn(J,F,$,X){for(var se=0;se<J.length;se++){var ue=[];Vt(J[se],ue,$,X),F.push(ue)}}function Kr(J){return J/360+.5}function Ln(J){var F=Math.sin(J*Math.PI/180),$=.5-.25*Math.log((1+F)/(1-F))/Math.PI;return $<0?0:$>1?1:$}function Tr(J,F,$,X,se,ue,me,he){if(X/=F,ue>=($/=F)&&me<X)return J;if(me<$||ue>=X)return null;for(var ce=[],ye=0;ye<J.length;ye++){var ze=J[ye],Oe=ze.geometry,Be=ze.type,bt=se===0?ze.minX:ze.minY,jt=se===0?ze.maxX:ze.maxY;if(bt>=$&&jt<X)ce.push(ze);else if(!(jt<$||bt>=X)){var mt=[];if(Be==="Point"||Be==="MultiPoint")Vn(Oe,mt,$,X,se);else if(Be==="LineString")yn(Oe,mt,$,X,se,!1,he.lineMetrics);else if(Be==="MultiLineString")Ve(Oe,mt,$,X,se,!1);else if(Be==="Polygon")Ve(Oe,mt,$,X,se,!0);else if(Be==="MultiPolygon")for(var St=0;St<Oe.length;St++){var Lt=[];Ve(Oe[St],Lt,$,X,se,!0),Lt.length&&mt.push(Lt)}if(mt.length){if(he.lineMetrics&&Be==="LineString"){for(St=0;St<mt.length;St++)ce.push(Ae(ze.id,Be,mt[St],ze.tags));continue}Be!=="LineString"&&Be!=="MultiLineString"||(mt.length===1?(Be="LineString",mt=mt[0]):Be="MultiLineString"),Be!=="Point"&&Be!=="MultiPoint"||(Be=mt.length===3?"Point":"MultiPoint"),ce.push(Ae(ze.id,Be,mt,ze.tags))}}}return ce.length?ce:null}function Vn(J,F,$,X,se){for(var ue=0;ue<J.length;ue+=3){var me=J[ue+se];me>=$&&me<=X&&(F.push(J[ue]),F.push(J[ue+1]),F.push(J[ue+2]))}}function yn(J,F,$,X,se,ue,me){for(var he,ce,ye=rn(J),ze=se===0?Xr:Wt,Oe=J.start,Be=0;Be<J.length-3;Be+=3){var bt=J[Be],jt=J[Be+1],mt=J[Be+2],St=J[Be+3],Lt=J[Be+4],lr=se===0?bt:jt,Kt=se===0?St:Lt,gr=!1;me&&(he=Math.sqrt(Math.pow(bt-St,2)+Math.pow(jt-Lt,2))),lr<$?Kt>$&&(ce=ze(ye,bt,jt,St,Lt,$),me&&(ye.start=Oe+he*ce)):lr>X?Kt<X&&(ce=ze(ye,bt,jt,St,Lt,X),me&&(ye.start=Oe+he*ce)):Sn(ye,bt,jt,mt),Kt<$&&lr>=$&&(ce=ze(ye,bt,jt,St,Lt,$),gr=!0),Kt>X&&lr<=X&&(ce=ze(ye,bt,jt,St,Lt,X),gr=!0),!ue&&gr&&(me&&(ye.end=Oe+he*ce),F.push(ye),ye=rn(J)),me&&(Oe+=he)}var Ar=J.length-3;bt=J[Ar],jt=J[Ar+1],mt=J[Ar+2],(lr=se===0?bt:jt)>=$&&lr<=X&&Sn(ye,bt,jt,mt),Ar=ye.length-3,ue&&Ar>=3&&(ye[Ar]!==ye[0]||ye[Ar+1]!==ye[1])&&Sn(ye,ye[0],ye[1],ye[2]),ye.length&&F.push(ye)}function rn(J){var F=[];return F.size=J.size,F.start=J.start,F.end=J.end,F}function Ve(J,F,$,X,se,ue){for(var me=0;me<J.length;me++)yn(J[me],F,$,X,se,ue,!1)}function Sn(J,F,$,X){J.push(F),J.push($),J.push(X)}function Xr(J,F,$,X,se,ue){var me=(ue-F)/(X-F);return J.push(ue),J.push($+(se-$)*me),J.push(1),me}function Wt(J,F,$,X,se,ue){var me=(ue-$)/(se-$);return J.push(F+(X-F)*me),J.push(ue),J.push(1),me}function dn(J,F){for(var $=[],X=0;X<J.length;X++){var se,ue=J[X],me=ue.type;if(me==="Point"||me==="MultiPoint"||me==="LineString")se=Xe(ue.geometry,F);else if(me==="MultiLineString"||me==="Polygon"){se=[];for(var he=0;he<ue.geometry.length;he++)se.push(Xe(ue.geometry[he],F))}else if(me==="MultiPolygon")for(se=[],he=0;he<ue.geometry.length;he++){for(var ce=[],ye=0;ye<ue.geometry[he].length;ye++)ce.push(Xe(ue.geometry[he][ye],F));se.push(ce)}$.push(Ae(ue.id,me,se,ue.tags))}return $}function Xe(J,F){var $=[];$.size=J.size,J.start!==void 0&&($.start=J.start,$.end=J.end);for(var X=0;X<J.length;X+=3)$.push(J[X]+F,J[X+1],J[X+2]);return $}function Rt(J,F){if(J.transformed)return J;var $,X,se,ue=1<<J.z,me=J.x,he=J.y;for($=0;$<J.features.length;$++){var ce=J.features[$],ye=ce.geometry,ze=ce.type;if(ce.geometry=[],ze===1)for(X=0;X<ye.length;X+=2)ce.geometry.push(Ut(ye[X],ye[X+1],F,ue,me,he));else for(X=0;X<ye.length;X++){var Oe=[];for(se=0;se<ye[X].length;se+=2)Oe.push(Ut(ye[X][se],ye[X][se+1],F,ue,me,he));ce.geometry.push(Oe)}}return J.transformed=!0,J}function Ut(J,F,$,X,se,ue){return[Math.round($*(J*X-se)),Math.round($*(F*X-ue))]}function $r(J,F,$,X,se){for(var ue=F===se.maxZoom?0:se.tolerance/((1<<F)*se.extent),me={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:$,y:X,z:F,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},he=0;he<J.length;he++){me.numFeatures++,Mr(me,J[he],ue,se);var ce=J[he].minX,ye=J[he].minY,ze=J[he].maxX,Oe=J[he].maxY;ce<me.minX&&(me.minX=ce),ye<me.minY&&(me.minY=ye),ze>me.maxX&&(me.maxX=ze),Oe>me.maxY&&(me.maxY=Oe)}return me}function Mr(J,F,$,X){var se=F.geometry,ue=F.type,me=[];if(ue==="Point"||ue==="MultiPoint")for(var he=0;he<se.length;he+=3)me.push(se[he]),me.push(se[he+1]),J.numPoints++,J.numSimplified++;else if(ue==="LineString")zt(me,se,J,$,!1,!1);else if(ue==="MultiLineString"||ue==="Polygon")for(he=0;he<se.length;he++)zt(me,se[he],J,$,ue==="Polygon",he===0);else if(ue==="MultiPolygon")for(var ce=0;ce<se.length;ce++){var ye=se[ce];for(he=0;he<ye.length;he++)zt(me,ye[he],J,$,!0,he===0)}if(me.length){var ze=F.tags||null;if(ue==="LineString"&&X.lineMetrics){for(var Oe in ze={},F.tags)ze[Oe]=F.tags[Oe];ze.mapbox_clip_start=se.start/se.size,ze.mapbox_clip_end=se.end/se.size}var Be={geometry:me,type:ue==="Polygon"||ue==="MultiPolygon"?3:ue==="LineString"||ue==="MultiLineString"?2:1,tags:ze};F.id!==null&&(Be.id=F.id),J.features.push(Be)}}function zt(J,F,$,X,se,ue){var me=X*X;if(X>0&&F.size<(se?me:X))$.numPoints+=F.length/3;else{for(var he=[],ce=0;ce<F.length;ce+=3)(X===0||F[ce+2]>me)&&($.numSimplified++,he.push(F[ce]),he.push(F[ce+1])),$.numPoints++;se&&function(ye,ze){for(var Oe=0,Be=0,bt=ye.length,jt=bt-2;Be<bt;jt=Be,Be+=2)Oe+=(ye[Be]-ye[jt])*(ye[Be+1]+ye[jt+1]);if(Oe>0===ze)for(Be=0,bt=ye.length;Be<bt/2;Be+=2){var mt=ye[Be],St=ye[Be+1];ye[Be]=ye[bt-2-Be],ye[Be+1]=ye[bt-1-Be],ye[bt-2-Be]=mt,ye[bt-1-Be]=St}}(he,ue),J.push(he)}}function vn(J,F){var $=(F=this.options=function(se,ue){for(var me in ue)se[me]=ue[me];return se}(Object.create(this.options),F)).debug;if($&&console.time("preprocess data"),F.maxZoom<0||F.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(F.promoteId&&F.generateId)throw new Error("promoteId and generateId cannot be used together.");var X=function(se,ue){var me=[];if(se.type==="FeatureCollection")for(var he=0;he<se.features.length;he++)Rn(me,se.features[he],ue,he);else Rn(me,se.type==="Feature"?se:{geometry:se},ue);return me}(J,F);this.tiles={},this.tileCoords=[],$&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",F.indexMaxZoom,F.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),X=function(se,ue){var me=ue.buffer/ue.extent,he=se,ce=Tr(se,1,-1-me,me,0,-1,2,ue),ye=Tr(se,1,1-me,2+me,0,-1,2,ue);return(ce||ye)&&(he=Tr(se,1,-me,1+me,0,-1,2,ue)||[],ce&&(he=dn(ce,1).concat(he)),ye&&(he=he.concat(dn(ye,-1)))),he}(X,F),X.length&&this.splitTile(X,0,0,0),$&&(X.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function pn(J,F,$){return 32*((1<<J)*$+F)+J}function si(J,F){return F?J.properties[F]:J.id}function Ai(J,F){if(J==null)return!0;if(J.type==="Feature")return si(J,F)!=null;if(J.type==="FeatureCollection"){const $=new Set;for(const X of J.features){const se=si(X,F);if(se==null||$.has(se))return!1;$.add(se)}return!0}return!1}function Yr(J,F){const $=new Map;if(J!=null)if(J.type==="Feature")$.set(si(J,F),J);else for(const X of J.features)$.set(si(X,F),X);return $}function Cr(J,F){const $=J.tileID.canonical;if(!this._geoJSONIndex)return F(null,null);const X=this._geoJSONIndex.getTile($.z,$.x,$.y);if(!X)return F(null,null);const se=new class{constructor(me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.EXTENT,this.length=me.length,this._features=me}feature(me){return new class{constructor(he){this._feature=he,this.extent=c.EXTENT,this.type=he.type,this.properties=he.tags,"id"in he&&!isNaN(he.id)&&(this.id=parseInt(he.id,10))}loadGeometry(){if(this._feature.type===1){const he=[];for(const ce of this._feature.geometry)he.push([new c.Point(ce[0],ce[1])]);return he}{const he=[];for(const ce of this._feature.geometry){const ye=[];for(const ze of ce)ye.push(new c.Point(ze[0],ze[1]));he.push(ye)}return he}}toGeoJSON(he,ce,ye){return W.call(this,he,ce,ye)}}(this._features[me])}}(X.features);let ue=lt(se);ue.byteOffset===0&&ue.byteLength===ue.buffer.byteLength||(ue=new Uint8Array(ue)),F(null,{vectorTile:se,rawData:ue.buffer})}vn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},vn.prototype.splitTile=function(J,F,$,X,se,ue,me){for(var he=[J,F,$,X],ce=this.options,ye=ce.debug;he.length;){X=he.pop(),$=he.pop(),F=he.pop(),J=he.pop();var ze=1<<F,Oe=pn(F,$,X),Be=this.tiles[Oe];if(!Be&&(ye>1&&console.time("creation"),Be=this.tiles[Oe]=$r(J,F,$,X,ce),this.tileCoords.push({z:F,x:$,y:X}),ye)){ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",F,$,X,Be.numFeatures,Be.numPoints,Be.numSimplified),console.timeEnd("creation"));var bt="z"+F;this.stats[bt]=(this.stats[bt]||0)+1,this.total++}if(Be.source=J,se){if(F===ce.maxZoom||F===se)continue;var jt=1<<se-F;if($!==Math.floor(ue/jt)||X!==Math.floor(me/jt))continue}else if(F===ce.indexMaxZoom||Be.numPoints<=ce.indexMaxPoints)continue;if(Be.source=null,J.length!==0){ye>1&&console.time("clipping");var mt,St,Lt,lr,Kt,gr,Ar=.5*ce.buffer/ce.extent,qr=.5-Ar,De=.5+Ar,Qe=1+Ar;mt=St=Lt=lr=null,Kt=Tr(J,ze,$-Ar,$+De,0,Be.minX,Be.maxX,ce),gr=Tr(J,ze,$+qr,$+Qe,0,Be.minX,Be.maxX,ce),J=null,Kt&&(mt=Tr(Kt,ze,X-Ar,X+De,1,Be.minY,Be.maxY,ce),St=Tr(Kt,ze,X+qr,X+Qe,1,Be.minY,Be.maxY,ce),Kt=null),gr&&(Lt=Tr(gr,ze,X-Ar,X+De,1,Be.minY,Be.maxY,ce),lr=Tr(gr,ze,X+qr,X+Qe,1,Be.minY,Be.maxY,ce),gr=null),ye>1&&console.timeEnd("clipping"),he.push(mt||[],F+1,2*$,2*X),he.push(St||[],F+1,2*$,2*X+1),he.push(Lt||[],F+1,2*$+1,2*X),he.push(lr||[],F+1,2*$+1,2*X+1)}}},vn.prototype.getTile=function(J,F,$){var X=this.options,se=X.extent,ue=X.debug;if(J<0||J>24)return null;var me=1<<J,he=pn(J,F=(F%me+me)%me,$);if(this.tiles[he])return Rt(this.tiles[he],se);ue>1&&console.log("drilling down to z%d-%d-%d",J,F,$);for(var ce,ye=J,ze=F,Oe=$;!ce&&ye>0;)ye--,ze=Math.floor(ze/2),Oe=Math.floor(Oe/2),ce=this.tiles[pn(ye,ze,Oe)];return ce&&ce.source?(ue>1&&console.log("found parent tile z%d-%d-%d",ye,ze,Oe),ue>1&&console.time("drilling down"),this.splitTile(ce.source,ye,ze,Oe,J,F,$),ue>1&&console.timeEnd("drilling down"),this.tiles[he]?Rt(this.tiles[he],se):null):null};class Ni extends U{constructor(F,$,X,se){super(F,$,X,Cr),this._dataUpdateable=new Map,this.loadGeoJSON=(ue,me)=>{const{promoteId:he}=ue;if(ue.request)return c.getJSON(ue.request,(ce,ye,ze,Oe)=>{this._dataUpdateable=Ai(ye,he)?Yr(ye,he):void 0,me(ce,ye,ze,Oe)});if(typeof ue.data=="string")try{const ce=JSON.parse(ue.data);this._dataUpdateable=Ai(ce,he)?Yr(ce,he):void 0,me(null,ce)}catch{me(new Error(`Input data given to '${ue.source}' is not a valid GeoJSON object.`))}else ue.dataDiff?this._dataUpdateable?(function(ce,ye,ze){var Oe,Be,bt,jt;if(ye.removeAll&&ce.clear(),ye.remove)for(const mt of ye.remove)ce.delete(mt);if(ye.add)for(const mt of ye.add){const St=si(mt,ze);St!=null&&ce.set(St,mt)}if(ye.update)for(const mt of ye.update){let St=ce.get(mt.id);if(St==null)continue;const Lt=!mt.removeAllProperties&&(((Oe=mt.removeProperties)===null||Oe===void 0?void 0:Oe.length)>0||((Be=mt.addOrUpdateProperties)===null||Be===void 0?void 0:Be.length)>0);if((mt.newGeometry||mt.removeAllProperties||Lt)&&(St={...St},ce.set(mt.id,St),Lt&&(St.properties={...St.properties})),mt.newGeometry&&(St.geometry=mt.newGeometry),mt.removeAllProperties)St.properties={};else if(((bt=mt.removeProperties)===null||bt===void 0?void 0:bt.length)>0)for(const lr of mt.removeProperties)Object.prototype.hasOwnProperty.call(St.properties,lr)&&delete St.properties[lr];if(((jt=mt.addOrUpdateProperties)===null||jt===void 0?void 0:jt.length)>0)for(const{key:lr,value:Kt}of mt.addOrUpdateProperties)St.properties[lr]=Kt}}(this._dataUpdateable,ue.dataDiff,he),me(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):me(new Error(`Cannot update existing geojson data in ${ue.source}`)):me(new Error(`Input data given to '${ue.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},se&&(this.loadGeoJSON=se)}loadData(F,$){var X;(X=this._pendingRequest)===null||X===void 0||X.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const se=!!(F&&F.request&&F.request.collectResourceTiming)&&new c.RequestPerformance(F.request);this._pendingCallback=$,this._pendingRequest=this.loadGeoJSON(F,(ue,me)=>{if(delete this._pendingCallback,delete this._pendingRequest,ue||!me)return $(ue);if(typeof me!="object")return $(new Error(`Input data given to '${F.source}' is not a valid GeoJSON object.`));{q(me,!0);try{if(F.filter){const ce=c.createExpression(F.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ce.result==="error")throw new Error(ce.value.map(ze=>`${ze.key}: ${ze.message}`).join(", "));me={type:"FeatureCollection",features:me.features.filter(ze=>ce.value.evaluate({zoom:0},ze))}}this._geoJSONIndex=F.cluster?new Ir(function({superclusterOptions:ce,clusterProperties:ye}){if(!ye||!ce)return ce;const ze={},Oe={},Be={accumulated:null,zoom:0},bt={properties:null},jt=Object.keys(ye);for(const mt of jt){const[St,Lt]=ye[mt],lr=c.createExpression(Lt),Kt=c.createExpression(typeof St=="string"?[St,["accumulated"],["get",mt]]:St);ze[mt]=lr.value,Oe[mt]=Kt.value}return ce.map=mt=>{bt.properties=mt;const St={};for(const Lt of jt)St[Lt]=ze[Lt].evaluate(Be,bt);return St},ce.reduce=(mt,St)=>{bt.properties=St;for(const Lt of jt)Be.accumulated=mt[Lt],mt[Lt]=Oe[Lt].evaluate(Be,bt)},ce}(F)).load(me.features):function(ce,ye){return new vn(ce,ye)}(me,F.geojsonVtOptions)}catch(ce){return $(ce)}this.loaded={};const he={};if(se){const ce=se.finish();ce&&(he.resourceTiming={},he.resourceTiming[F.source]=JSON.parse(JSON.stringify(ce)))}$(null,he)}})}reloadTile(F,$){const X=this.loaded;return X&&X[F.uid]?super.reloadTile(F,$):this.loadTile(F,$)}removeSource(F,$){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),$()}getClusterExpansionZoom(F,$){try{$(null,this._geoJSONIndex.getClusterExpansionZoom(F.clusterId))}catch(X){$(X)}}getClusterChildren(F,$){try{$(null,this._geoJSONIndex.getChildren(F.clusterId))}catch(X){$(X)}}getClusterLeaves(F,$){try{$(null,this._geoJSONIndex.getLeaves(F.clusterId,F.limit,F.offset))}catch(X){$(X)}}}class li{constructor(F){this.self=F,this.actor=new c.Actor(F,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:U,geojson:Ni},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=($,X)=>{if(this.workerSourceTypes[$])throw new Error(`Worker source with name "${$}" already registered.`);this.workerSourceTypes[$]=X},this.self.registerRTLTextPlugin=$=>{if(c.plugin.isParsed())throw new Error("RTL text plugin already registered.");c.plugin.applyArabicShaping=$.applyArabicShaping,c.plugin.processBidirectionalText=$.processBidirectionalText,c.plugin.processStyledBidirectionalText=$.processStyledBidirectionalText}}setReferrer(F,$){this.referrer=$}setImages(F,$,X){this.availableImages[F]=$;for(const se in this.workerSources[F]){const ue=this.workerSources[F][se];for(const me in ue)ue[me].availableImages=$}X()}setLayers(F,$,X){this.getLayerIndex(F).replace($),X()}updateLayers(F,$,X){this.getLayerIndex(F).update($.layers,$.removedIds),X()}loadTile(F,$,X){this.getWorkerSource(F,$.type,$.source).loadTile($,X)}loadDEMTile(F,$,X){this.getDEMWorkerSource(F,$.source).loadTile($,X)}reloadTile(F,$,X){this.getWorkerSource(F,$.type,$.source).reloadTile($,X)}abortTile(F,$,X){this.getWorkerSource(F,$.type,$.source).abortTile($,X)}removeTile(F,$,X){this.getWorkerSource(F,$.type,$.source).removeTile($,X)}removeDEMTile(F,$){this.getDEMWorkerSource(F,$.source).removeTile($)}removeSource(F,$,X){if(!this.workerSources[F]||!this.workerSources[F][$.type]||!this.workerSources[F][$.type][$.source])return;const se=this.workerSources[F][$.type][$.source];delete this.workerSources[F][$.type][$.source],se.removeSource!==void 0?se.removeSource($,X):X()}loadWorkerSource(F,$,X){try{this.self.importScripts($.url),X()}catch(se){X(se.toString())}}syncRTLPluginState(F,$,X){try{c.plugin.setState($);const se=c.plugin.getPluginURL();if(c.plugin.isLoaded()&&!c.plugin.isParsed()&&se!=null){this.self.importScripts(se);const ue=c.plugin.isParsed();X(ue?void 0:new Error(`RTL Text Plugin failed to import scripts from ${se}`),ue)}}catch(se){X(se.toString())}}getAvailableImages(F){let $=this.availableImages[F];return $||($=[]),$}getLayerIndex(F){let $=this.layerIndexes[F];return $||($=this.layerIndexes[F]=new w),$}getWorkerSource(F,$,X){if(this.workerSources[F]||(this.workerSources[F]={}),this.workerSources[F][$]||(this.workerSources[F][$]={}),!this.workerSources[F][$][X]){const se={send:(ue,me,he)=>{this.actor.send(ue,me,he,F)}};this.workerSources[F][$][X]=new this.workerSourceTypes[$](se,this.getLayerIndex(F),this.getAvailableImages(F))}return this.workerSources[F][$][X]}getDEMWorkerSource(F,$){return this.demWorkerSources[F]||(this.demWorkerSources[F]={}),this.demWorkerSources[F][$]||(this.demWorkerSources[F][$]=new O),this.demWorkerSources[F][$]}}return c.isWorker()&&(self.worker=new li(self)),li}),p(["./shared"],function(c){var w="3.1.0";class T{static testProp(n){if(!T.docStyle)return n[0];for(let l=0;l<n.length;l++)if(n[l]in T.docStyle)return n[l];return n[0]}static create(n,l,d){const g=window.document.createElement(n);return l!==void 0&&(g.className=l),d&&d.appendChild(g),g}static createNS(n,l){return window.document.createElementNS(n,l)}static disableDrag(){T.docStyle&&T.selectProp&&(T.userSelect=T.docStyle[T.selectProp],T.docStyle[T.selectProp]="none")}static enableDrag(){T.docStyle&&T.selectProp&&(T.docStyle[T.selectProp]=T.userSelect)}static setTransform(n,l){n.style[T.transformProp]=l}static addEventListener(n,l,d,g={}){n.addEventListener(l,d,"passive"in g?g:g.capture)}static removeEventListener(n,l,d,g={}){n.removeEventListener(l,d,"passive"in g?g:g.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",T.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",T.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",T.suppressClickInternal,!0)},0)}static mousePos(n,l){const d=n.getBoundingClientRect();return new c.Point(l.clientX-d.left-n.clientLeft,l.clientY-d.top-n.clientTop)}static touchPos(n,l){const d=n.getBoundingClientRect(),g=[];for(let x=0;x<l.length;x++)g.push(new c.Point(l[x].clientX-d.left-n.clientLeft,l[x].clientY-d.top-n.clientTop));return g}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}T.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,T.selectProp=T.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),T.transformProp=T.testProp(["transform","WebkitTransform"]);const P={supported:!1,testSupport:function(f){!U&&B&&(O?N(f):L=f)}};let L,B,U=!1,O=!1;function N(f){const n=f.createTexture();f.bindTexture(f.TEXTURE_2D,n);try{if(f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,B),f.isContextLost())return;P.supported=!0}catch{}f.deleteTexture(n),U=!0}var ae;typeof document<"u"&&(B=document.createElement("img"),B.onload=function(){L&&N(L),L=null,O=!0},B.onerror=function(){U=!0,L=null},B.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(f){let n,l,d,g;f.resetRequestQueue=()=>{n=[],l=0,d=0,g={}},f.addThrottleControl=A=>{const z=d++;return g[z]=A,z},f.removeThrottleControl=A=>{delete g[A],k()},f.getImage=(A,z,R=!0)=>{P.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*");const G={requestParameters:A,supportImageRefresh:R,callback:z,cancelled:!1,completed:!1,cancel:()=>{G.completed||G.cancelled||(G.cancelled=!0,G.innerRequest&&(G.innerRequest.cancel(),l--),k())}};return n.push(G),k(),G};const x=A=>{const{requestParameters:z,supportImageRefresh:R,callback:G}=A;return c.extend(z,{type:"image"}),(R!==!1||c.isWorker()||c.getProtocolAction(z.url)||z.headers&&!Object.keys(z.headers).reduce((re,Y)=>re&&Y==="accept",!0)?c.makeRequest:C)(z,(re,Y,ee,le)=>{S(A,G,re,Y,ee,le)})},S=(A,z,R,G,re,Y)=>{R?z(R):G instanceof HTMLImageElement||G instanceof ImageBitmap?z(null,G):G&&((ee,le)=>{typeof createImageBitmap=="function"?c.arrayBufferToImageBitmap(ee,le):c.arrayBufferToImage(ee,le)})(G,(ee,le)=>{ee!=null?z(ee):le!=null&&z(null,le,{cacheControl:re,expires:Y})}),A.cancelled||(A.completed=!0,l--,k())},k=()=>{const A=(()=>{const z=Object.keys(g);let R=!1;if(z.length>0){for(const G of z)if(R=g[G](),R)break}return R})()?c.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=l;z<A&&n.length>0;z++){const R=n.shift();if(R.cancelled){z--;continue}const G=x(R);l++,R.innerRequest=G}},C=(A,z)=>{const R=new Image,G=A.url;let re=!1;const Y=A.credentials;return Y&&Y==="include"?R.crossOrigin="use-credentials":(Y&&Y==="same-origin"||!c.sameOrigin(G))&&(R.crossOrigin="anonymous"),R.fetchPriority="high",R.onload=()=>{z(null,R),R.onerror=R.onload=null},R.onerror=()=>{re||z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),R.onerror=R.onload=null},R.src=G,{cancel:()=>{re=!0,R.src=""}}}}(ae||(ae={})),ae.resetRequestQueue();var q,W=ae;(function(f){f.Glyphs="Glyphs",f.Image="Image",f.Source="Source",f.SpriteImage="SpriteImage",f.SpriteJSON="SpriteJSON",f.Style="Style",f.Tile="Tile",f.Unknown="Unknown"})(q||(q={}));class K{constructor(n){this._transformRequestFn=n}transformRequest(n,l){return this._transformRequestFn&&this._transformRequestFn(n,l)||{url:n}}normalizeSpriteURL(n,l,d){const g=function(x){const S=x.match(ie);if(!S)throw new Error(`Unable to parse URL "${x}"`);return{protocol:S[1],authority:S[2],path:S[3]||"/",params:S[4]?S[4].split("&"):[]}}(n);return g.path+=`${l}${d}`,function(x){const S=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${S}`}(g)}setTransformRequest(n){this._transformRequestFn=n}}const ie=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function _e(f){var n=new c.ARRAY_TYPE(3);return n[0]=f[0],n[1]=f[1],n[2]=f[2],n}var Se,xe=function(f,n,l){return f[0]=n[0]-l[0],f[1]=n[1]-l[1],f[2]=n[2]-l[2],f};Se=new c.ARRAY_TYPE(3),c.ARRAY_TYPE!=Float32Array&&(Se[0]=0,Se[1]=0,Se[2]=0);var Me=function(f){var n=f[0],l=f[1];return n*n+l*l};function Ze(f){const n=[];if(typeof f=="string")n.push({id:"default",url:f});else if(f&&f.length>0){const l=[];for(const{id:d,url:g}of f){const x=`${d}${g}`;l.indexOf(x)===-1&&(l.push(x),n.push({id:d,url:g}))}}return n}function Le(f,n,l,d,g){if(d)return void f(d);if(g!==Object.values(n).length||g!==Object.values(l).length)return;const x={};for(const S in n){x[S]={};const k=c.exported.getImageCanvasContext(l[S]),C=n[S];for(const A in C){const{width:z,height:R,x:G,y:re,sdf:Y,pixelRatio:ee,stretchX:le,stretchY:pe,content:Ce}=C[A];x[S][A]={data:null,pixelRatio:ee,sdf:Y,stretchX:le,stretchY:pe,content:Ce,spriteData:{width:z,height:R,x:G,y:re,context:k}}}}f(null,x)}(function(){var f=new c.ARRAY_TYPE(2);c.ARRAY_TYPE!=Float32Array&&(f[0]=0,f[1]=0)})();class Je{constructor(n,l,d,g){this.context=n,this.format=d,this.texture=n.gl.createTexture(),this.update(l,g)}update(n,l,d){const{width:g,height:x}=n,S=!(this.size&&this.size[0]===g&&this.size[1]===x||d),{context:k}=this,{gl:C}=k;if(this.useMipmap=!!(l&&l.useMipmap),C.bindTexture(C.TEXTURE_2D,this.texture),k.pixelStoreUnpackFlipY.set(!1),k.pixelStoreUnpack.set(1),k.pixelStoreUnpackPremultiplyAlpha.set(this.format===C.RGBA&&(!l||l.premultiply!==!1)),S)this.size=[g,x],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||c.isImageBitmap(n)?C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,C.UNSIGNED_BYTE,n):C.texImage2D(C.TEXTURE_2D,0,this.format,g,x,0,this.format,C.UNSIGNED_BYTE,n.data);else{const{x:A,y:z}=d||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||c.isImageBitmap(n)?C.texSubImage2D(C.TEXTURE_2D,0,A,z,C.RGBA,C.UNSIGNED_BYTE,n):C.texSubImage2D(C.TEXTURE_2D,0,A,z,g,x,C.RGBA,C.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&C.generateMipmap(C.TEXTURE_2D)}bind(n,l,d){const{context:g}=this,{gl:x}=g;x.bindTexture(x.TEXTURE_2D,this.texture),d!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=x.LINEAR),n!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,n),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,d||n),this.filter=n),l!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,l),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function ur(f){const{userImage:n}=f;return!!(n&&n.render&&n.render())&&(f.data.replace(new Uint8Array(n.data.buffer)),!0)}class Nt extends c.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:l,callback:d}of this.requestors)this._notify(l,d);this.requestors=[]}}getImage(n){const l=this.images[n];if(l&&!l.data&&l.spriteData){const d=l.spriteData;l.data=new c.RGBAImage({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),l.spriteData=null}return l}addImage(n,l){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,l)&&(this.images[n]=l)}_validate(n,l){let d=!0;const g=l.data||l.spriteData;return this._validateStretch(l.stretchX,g&&g.width)||(this.fire(new c.ErrorEvent(new Error(`Image "${n}" has invalid "stretchX" value`))),d=!1),this._validateStretch(l.stretchY,g&&g.height)||(this.fire(new c.ErrorEvent(new Error(`Image "${n}" has invalid "stretchY" value`))),d=!1),this._validateContent(l.content,l)||(this.fire(new c.ErrorEvent(new Error(`Image "${n}" has invalid "content" value`))),d=!1),d}_validateStretch(n,l){if(!n)return!0;let d=0;for(const g of n){if(g[0]<d||g[1]<g[0]||l<g[1])return!1;d=g[1]}return!0}_validateContent(n,l){if(!n)return!0;if(n.length!==4)return!1;const d=l.spriteData,g=d&&d.width||l.data.width,x=d&&d.height||l.data.height;return!(n[0]<0||g<n[0]||n[1]<0||x<n[1]||n[2]<0||g<n[2]||n[3]<0||x<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,l,d=!0){const g=this.getImage(n);if(d&&(g.data.width!==l.data.width||g.data.height!==l.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=g.version+1,this.images[n]=l,this.updatedImages[n]=!0}removeImage(n){const l=this.images[n];delete this.images[n],delete this.patterns[n],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n,l){let d=!0;if(!this.isLoaded())for(const g of n)this.images[g]||(d=!1);this.isLoaded()||d?this._notify(n,l):this.requestors.push({ids:n,callback:l})}_notify(n,l){const d={};for(const g of n){let x=this.getImage(g);x||(this.fire(new c.Event("styleimagemissing",{id:g})),x=this.getImage(g)),x?d[g]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,hasRenderCallback:!!(x.userImage&&x.userImage.render)}:c.warnOnce(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}l(null,d)}getPixelSize(){const{width:n,height:l}=this.atlasImage;return{width:n,height:l}}getPattern(n){const l=this.patterns[n],d=this.getImage(n);if(!d)return null;if(l&&l.position.version===d.version)return l.position;if(l)l.position.version=d.version;else{const g={w:d.data.width+2,h:d.data.height+2,x:0,y:0},x=new c.ImagePosition(g,d);this.patterns[n]={bin:g,position:x}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const l=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Je(n,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const x in this.patterns)n.push(this.patterns[x].bin);const{w:l,h:d}=c.potpack(n),g=this.atlasImage;g.resize({width:l||1,height:d||1});for(const x in this.patterns){const{bin:S}=this.patterns[x],k=S.x+1,C=S.y+1,A=this.getImage(x).data,z=A.width,R=A.height;c.RGBAImage.copy(A,g,{x:0,y:0},{x:k,y:C},{width:z,height:R}),c.RGBAImage.copy(A,g,{x:0,y:R-1},{x:k,y:C-1},{width:z,height:1}),c.RGBAImage.copy(A,g,{x:0,y:0},{x:k,y:C+R},{width:z,height:1}),c.RGBAImage.copy(A,g,{x:z-1,y:0},{x:k-1,y:C},{width:1,height:R}),c.RGBAImage.copy(A,g,{x:0,y:0},{x:k+z,y:C},{width:1,height:R})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const l of n){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const d=this.getImage(l);d||c.warnOnce(`Image with ID: "${l}" was not found`),ur(d)&&this.updateImage(l,d)}}}const mr=1e20;function tt(f,n,l,d,g,x,S,k,C){for(let A=n;A<n+d;A++)Mt(f,l*x+A,x,g,S,k,C);for(let A=l;A<l+g;A++)Mt(f,A*x+n,1,d,S,k,C)}function Mt(f,n,l,d,g,x,S){x[0]=0,S[0]=-mr,S[1]=mr,g[0]=f[n];for(let k=1,C=0,A=0;k<d;k++){g[k]=f[n+k*l];const z=k*k;do{const R=x[C];A=(g[k]-g[R]+z-R*R)/(k-R)/2}while(A<=S[C]&&--C>-1);C++,x[C]=k,S[C]=A,S[C+1]=mr}for(let k=0,C=0;k<d;k++){for(;S[C+1]<k;)C++;const A=x[C],z=k-A;f[n+k*l]=g[A]+z*z}}class kt{constructor(n,l){this.requestManager=n,this.localIdeographFontFamily=l,this.entries={}}setURL(n){this.url=n}getGlyphs(n,l){const d=[];for(const g in n)for(const x of n[g])d.push({stack:g,id:x});c.asyncAll(d,({stack:g,id:x},S)=>{let k=this.entries[g];k||(k=this.entries[g]={glyphs:{},requests:{},ranges:{}});let C=k.glyphs[x];if(C!==void 0)return void S(null,{stack:g,id:x,glyph:C});if(C=this._tinySDF(k,g,x),C)return k.glyphs[x]=C,void S(null,{stack:g,id:x,glyph:C});const A=Math.floor(x/256);if(256*A>65535)return void S(new Error("glyphs > 65535 not supported"));if(k.ranges[A])return void S(null,{stack:g,id:x,glyph:C});if(!this.url)return void S(new Error("glyphsUrl is not set"));let z=k.requests[A];z||(z=k.requests[A]=[],kt.loadGlyphRange(g,A,this.url,this.requestManager,(R,G)=>{if(G){for(const re in G)this._doesCharSupportLocalGlyph(+re)||(k.glyphs[+re]=G[+re]);k.ranges[A]=!0}for(const re of z)re(R,G);delete k.requests[A]})),z.push((R,G)=>{R?S(R):G&&S(null,{stack:g,id:x,glyph:G[x]||null})})},(g,x)=>{if(g)l(g);else if(x){const S={};for(const{stack:k,id:C,glyph:A}of x)(S[k]||(S[k]={}))[C]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics};l(null,S)}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(c.unicodeBlockLookup["CJK Unified Ideographs"](n)||c.unicodeBlockLookup["Hangul Syllables"](n)||c.unicodeBlockLookup.Hiragana(n)||c.unicodeBlockLookup.Katakana(n))}_tinySDF(n,l,d){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(d))return;let x=n.tinySDF;if(!x){let k="400";/bold/i.test(l)?k="900":/medium/i.test(l)?k="500":/light/i.test(l)&&(k="200"),x=n.tinySDF=new kt.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:g,fontWeight:k})}const S=x.draw(String.fromCharCode(d));return{id:d,bitmap:new c.AlphaImage({width:S.width||30,height:S.height||30},S.data),metrics:{width:S.glyphWidth||24,height:S.glyphHeight||24,left:S.glyphLeft||0,top:S.glyphTop-27||-8,advance:S.glyphAdvance||24}}}}kt.loadGlyphRange=function(f,n,l,d,g){const x=256*n,S=x+255,k=d.transformRequest(l.replace("{fontstack}",f).replace("{range}",`${x}-${S}`),q.Glyphs);c.getArrayBuffer(k,(C,A)=>{if(C)g(C);else if(A){const z={};for(const R of c.parseGlyphPbf(A))z[R.id]=R;g(null,z)}})},kt.TinySDF=class{constructor({fontSize:f=24,buffer:n=3,radius:l=8,cutoff:d=.25,fontFamily:g="sans-serif",fontWeight:x="normal",fontStyle:S="normal"}={}){this.buffer=n,this.cutoff=d,this.radius=l;const k=this.size=f+4*n,C=this._createCanvas(k),A=this.ctx=C.getContext("2d",{willReadFrequently:!0});A.font=`${S} ${x} ${f}px ${g}`,A.textBaseline="alphabetic",A.textAlign="left",A.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(f){const n=document.createElement("canvas");return n.width=n.height=f,n}draw(f){const{width:n,actualBoundingBoxAscent:l,actualBoundingBoxDescent:d,actualBoundingBoxLeft:g,actualBoundingBoxRight:x}=this.ctx.measureText(f),S=Math.ceil(l),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-g))),C=Math.min(this.size-this.buffer,S+Math.ceil(d)),A=k+2*this.buffer,z=C+2*this.buffer,R=Math.max(A*z,0),G=new Uint8ClampedArray(R),re={data:G,width:A,height:z,glyphWidth:k,glyphHeight:C,glyphTop:S,glyphLeft:0,glyphAdvance:n};if(k===0||C===0)return re;const{ctx:Y,buffer:ee,gridInner:le,gridOuter:pe}=this;Y.clearRect(ee,ee,k,C),Y.fillText(f,ee,ee+S);const Ce=Y.getImageData(ee,ee,k,C);pe.fill(mr,0,R),le.fill(0,0,R);for(let oe=0;oe<C;oe++)for(let Ee=0;Ee<k;Ee++){const Ie=Ce.data[4*(oe*k+Ee)+3]/255;if(Ie===0)continue;const Ne=(oe+ee)*A+Ee+ee;if(Ie===1)pe[Ne]=0,le[Ne]=mr;else{const We=.5-Ie;pe[Ne]=We>0?We*We:0,le[Ne]=We<0?We*We:0}}tt(pe,0,0,A,z,A,this.f,this.v,this.z),tt(le,ee,ee,k,C,A,this.f,this.v,this.z);for(let oe=0;oe<R;oe++){const Ee=Math.sqrt(pe[oe])-Math.sqrt(le[oe]);G[oe]=Math.round(255-255*(Ee/this.radius+this.cutoff))}return re}};class $e{constructor(){this.specification=c.v8Spec.light.position}possiblyEvaluate(n,l){return c.sphericalToCartesian(n.expression.evaluate(l))}interpolate(n,l,d){return{x:c.interpolate.number(n.x,l.x,d),y:c.interpolate.number(n.y,l.y,d),z:c.interpolate.number(n.z,l.z,d)}}}let lt,wt;class rr extends c.Evented{constructor(n){super(),lt=lt||new c.Properties({anchor:new c.DataConstantProperty(c.v8Spec.light.anchor),position:new $e,color:new c.DataConstantProperty(c.v8Spec.light.color),intensity:new c.DataConstantProperty(c.v8Spec.light.intensity)}),this._transitionable=new c.Transitionable(lt),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,l={}){if(!this._validate(c.validateLight,n,l))for(const d in n){const g=n[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),g):this._transitionable.setValue(d,g)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,l,d){return(!d||d.validate!==!1)&&c.emitValidationErrors(this,n.call(c.validateStyle,c.extend({value:l,style:{glyphs:!0,sprite:!0},styleSpec:c.v8Spec})))}}class or{constructor(n,l){this.width=n,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,l){const d=n.join(",")+String(l);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(n,l)),this.dashEntry[d]}getDashRanges(n,l,d){const g=[];let x=n.length%2==1?-n[n.length-1]*d:0,S=n[0]*d,k=!0;g.push({left:x,right:S,isDash:k,zeroLength:n[0]===0});let C=n[0];for(let A=1;A<n.length;A++){k=!k;const z=n[A];x=C*d,C+=z,S=C*d,g.push({left:x,right:S,isDash:k,zeroLength:z===0})}return g}addRoundDash(n,l,d){const g=l/2;for(let x=-d;x<=d;x++){const S=this.width*(this.nextRow+d+x);let k=0,C=n[k];for(let A=0;A<this.width;A++){A/C.right>1&&(C=n[++k]);const z=Math.abs(A-C.left),R=Math.abs(A-C.right),G=Math.min(z,R);let re;const Y=x/d*(g+1);if(C.isDash){const ee=g-Math.abs(Y);re=Math.sqrt(G*G+ee*ee)}else re=g-Math.sqrt(G*G+Y*Y);this.data[S+A]=Math.max(0,Math.min(255,re+128))}}}addRegularDash(n){for(let k=n.length-1;k>=0;--k){const C=n[k],A=n[k+1];C.zeroLength?n.splice(k,1):A&&A.isDash===C.isDash&&(A.left=C.left,n.splice(k,1))}const l=n[0],d=n[n.length-1];l.isDash===d.isDash&&(l.left=d.left-this.width,d.right=l.right+this.width);const g=this.width*this.nextRow;let x=0,S=n[x];for(let k=0;k<this.width;k++){k/S.right>1&&(S=n[++x]);const C=Math.abs(k-S.left),A=Math.abs(k-S.right),z=Math.min(C,A);this.data[g+k]=Math.max(0,Math.min(255,(S.isDash?z:-z)+128))}}addDash(n,l){const d=l?7:0,g=2*d+1;if(this.nextRow+g>this.height)return c.warnOnce("LineAtlas out of space"),null;let x=0;for(let k=0;k<n.length;k++)x+=n[k];if(x!==0){const k=this.width/x,C=this.getDashRanges(n,this.width,k);l?this.addRoundDash(C,k,d):this.addRegularDash(C)}const S={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:x};return this.nextRow+=g,this.dirty=!0,S}bind(n){const l=n.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}class fr{constructor(n,l,d){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=d;const g=this.workerPool.acquire(d);for(let x=0;x<g.length;x++){const S=new fr.Actor(g[x],l,d);S.name=`Worker ${x}`,this.actors.push(S)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,l,d){c.asyncAll(this.actors,(g,x)=>{g.send(n,l,x)},d=d||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}}function dr(f,n,l){const d=function(g,x){if(g)return l(g);if(x){const S=c.pick(c.extend(x,f),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);x.vector_layers&&(S.vectorLayers=x.vector_layers,S.vectorLayerIds=S.vectorLayers.map(k=>k.id)),l(null,S)}};return f.url?c.getJSON(n.transformRequest(f.url,q.Source),d):c.exported.frame(()=>d(null,f))}fr.Actor=c.Actor;class Jt{constructor(n,l){n&&(l?this.setSouthWest(n).setNorthEast(l):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof c.LngLat?new c.LngLat(n.lng,n.lat):c.LngLat.convert(n),this}setSouthWest(n){return this._sw=n instanceof c.LngLat?new c.LngLat(n.lng,n.lat):c.LngLat.convert(n),this}extend(n){const l=this._sw,d=this._ne;let g,x;if(n instanceof c.LngLat)g=n,x=n;else{if(!(n instanceof Jt))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Jt.convert(n)):this.extend(c.LngLat.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(c.LngLat.convert(n)):this;if(g=n._sw,x=n._ne,!g||!x)return this}return l||d?(l.lng=Math.min(g.lng,l.lng),l.lat=Math.min(g.lat,l.lat),d.lng=Math.max(x.lng,d.lng),d.lat=Math.max(x.lat,d.lat)):(this._sw=new c.LngLat(g.lng,g.lat),this._ne=new c.LngLat(x.lng,x.lat)),this}getCenter(){return new c.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new c.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:l,lat:d}=c.LngLat.convert(n);let g=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&g}static convert(n){return n instanceof Jt?n:n&&new Jt(n)}static fromLngLat(n,l=0){const d=360*l/40075017,g=d/Math.cos(Math.PI/180*n.lat);return new Jt(new c.LngLat(n.lng-g,n.lat-d),new c.LngLat(n.lng+g,n.lat+d))}}class Ir{constructor(n,l,d){this.bounds=Jt.convert(this.validateBounds(n)),this.minzoom=l||0,this.maxzoom=d||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const l=Math.pow(2,n.z),d=Math.floor(c.mercatorXfromLng(this.bounds.getWest())*l),g=Math.floor(c.mercatorYfromLat(this.bounds.getNorth())*l),x=Math.ceil(c.mercatorXfromLng(this.bounds.getEast())*l),S=Math.ceil(c.mercatorYfromLat(this.bounds.getSouth())*l);return n.x>=d&&n.x<x&&n.y>=g&&n.y<S}}class zr extends c.Evented{constructor(n,l,d,g){if(super(),this.id=n,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.extend(this,c.pick(l,["url","scheme","tileSize","promoteId"])),this._options=c.extend({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=dr(this._options,this.map._requestManager,(n,l)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n?this.fire(new c.ErrorEvent(n)):l&&(c.extend(this,l),l.bounds&&(this.tileBounds=new Ir(l.bounds,this.minzoom,this.maxzoom)),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.cancel(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return c.extend({},this._options)}loadTile(n,l){const d=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(d,q.Tile),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(S,k){return delete n.request,n.aborted?l(null):S&&S.status!==404?l(S):(k&&k.resourceTiming&&(n.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&n.setExpiryData(k),n.loadVectorData(k,this.map.painter),l(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,n.actor&&n.state!=="expired"?n.state==="loading"?n.reloadCallback=l:n.request=n.actor.send("reloadTile",g,x.bind(this)):(n.actor=this.dispatcher.getActor(),n.request=n.actor.send("loadTile",g,x.bind(this)))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.actor&&n.actor.send("abortTile",{uid:n.uid,type:this.type,source:this.id},void 0)}unloadTile(n){n.unloadVectorData(),n.actor&&n.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Fr extends c.Evented{constructor(n,l,d,g){super(),this.id=n,this.dispatcher=d,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.extend({type:"raster"},l),c.extend(this,c.pick(l,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=dr(this._options,this.map._requestManager,(n,l)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new c.ErrorEvent(n)):l&&(c.extend(this,l),l.bounds&&(this.tileBounds=new Ir(l.bounds,this.minzoom,this.maxzoom)),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return c.extend({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n,l){const d=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.request=W.getImage(this.map._requestManager.transformRequest(d,q.Tile),(g,x,S)=>{if(delete n.request,n.aborted)n.state="unloaded",l(null);else if(g)n.state="errored",l(g);else if(x){this.map._refreshExpiredTiles&&S&&n.setExpiryData(S);const k=this.map.painter.context,C=k.gl;n.texture=this.map.painter.getTileTexture(x.width),n.texture?n.texture.update(x,{useMipmap:!0}):(n.texture=new Je(k,x,C.RGBA,{useMipmap:!0}),n.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE,C.LINEAR_MIPMAP_NEAREST),k.extTextureFilterAnisotropic&&C.texParameterf(C.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax)),n.state="loaded",l(null)}},this.map._refreshExpiredTiles)}abortTile(n,l){n.request&&(n.request.cancel(),delete n.request),l()}unloadTile(n,l){n.texture&&this.map.painter.saveTileTexture(n.texture),l()}hasTransition(){return!1}}class sr extends Fr{constructor(n,l,d,g){super(n,l,d,g),this.type="raster-dem",this.maxzoom=22,this._options=c.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(n,l){const d=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function g(x,S){x&&(n.state="errored",l(x)),S&&(n.dem=S,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded",l(null))}n.request=W.getImage(this.map._requestManager.transformRequest(d,q.Tile),(function(x,S){if(delete n.request,n.aborted)n.state="unloaded",l(null);else if(x)n.state="errored",l(x);else if(S){this.map._refreshExpiredTiles&&n.setExpiryData(S),delete S.cacheControl,delete S.expires;const k=c.isImageBitmap(S)&&(wt==null&&(wt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),wt)?S:c.exported.getImageData(S,1),C={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:k,encoding:this.encoding};n.actor&&n.state!=="expired"||(n.actor=this.dispatcher.getActor(),n.actor.send("loadDEMTile",C,g.bind(this)))}}).bind(this),this.map._refreshExpiredTiles),n.neighboringTiles=this._getNeighboringTiles(n.tileID)}_getNeighboringTiles(n){const l=n.canonical,d=Math.pow(2,l.z),g=(l.x-1+d)%d,x=l.x===0?n.wrap-1:n.wrap,S=(l.x+1+d)%d,k=l.x+1===d?n.wrap+1:n.wrap,C={};return C[new c.OverscaledTileID(n.overscaledZ,x,l.z,g,l.y).key]={backfilled:!1},C[new c.OverscaledTileID(n.overscaledZ,k,l.z,S,l.y).key]={backfilled:!1},l.y>0&&(C[new c.OverscaledTileID(n.overscaledZ,x,l.z,g,l.y-1).key]={backfilled:!1},C[new c.OverscaledTileID(n.overscaledZ,n.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},C[new c.OverscaledTileID(n.overscaledZ,k,l.z,S,l.y-1).key]={backfilled:!1}),l.y+1<d&&(C[new c.OverscaledTileID(n.overscaledZ,x,l.z,g,l.y+1).key]={backfilled:!1},C[new c.OverscaledTileID(n.overscaledZ,n.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},C[new c.OverscaledTileID(n.overscaledZ,k,l.z,S,l.y+1).key]={backfilled:!1}),C}unloadTile(n){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&n.actor.send("removeDEMTile",{uid:n.uid,source:this.id})}}class wn extends c.Evented{constructor(n,l,d,g){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(g),this._data=l.data,this._options=c.extend({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const x=c.EXTENT/this.tileSize;this.workerOptions=c.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*x,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*x,extent:c.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:c.EXTENT,radius:(l.clusterRadius||50)*x,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){this._updateWorkerData()}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData(),this}updateData(n){return this._updateWorkerData(n),this}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n&&(n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=n.clusterRadius),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=n.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(n,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:n,source:this.id},l),this}getClusterChildren(n,l){return this.actor.send("geojson.getClusterChildren",{clusterId:n,source:this.id},l),this}getClusterLeaves(n,l,d,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:n,limit:l,offset:d},g),this}_updateWorkerData(n){const l=c.extend({},this.workerOptions);n?l.dataDiff=n:typeof this._data=="string"?(l.request=this.map._requestManager.transformRequest(c.exported.resolveURL(this._data),q.Source),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new c.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,l,(d,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new c.Event("dataabort",{dataType:"source"}));let x=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(x=g.resourceTiming[this.id].slice(0)),d)return void this.fire(new c.ErrorEvent(d));const S={dataType:"source"};this._collectResourceTiming&&x&&x.length>0&&c.extend(S,{resourceTiming:x}),this.fire(new c.Event("data",{...S,sourceDataType:"metadata"})),this.fire(new c.Event("data",{...S,sourceDataType:"content"}))})}loaded(){return this._pendingLoads===0}loadTile(n,l){const d=n.actor?"reloadTile":"loadTile";n.actor=this.actor;const g={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.request=this.actor.send(d,g,(x,S)=>(delete n.request,n.unloadVectorData(),n.aborted?l(null):x?l(x):(n.loadVectorData(S,this.map.painter,d==="reloadTile"),l(null))))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.aborted=!0}unloadTile(n){n.unloadVectorData(),this.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return c.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var kr=c.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Mn extends c.Evented{constructor(n,l,d,g){super(),this.id=n,this.dispatcher=d,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=l}load(n,l){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=W.getImage(this.map._requestManager.transformRequest(this.url,q.Image),(d,g)=>{this._request=null,this._loaded=!0,d?this.fire(new c.ErrorEvent(d)):g&&(this.image=g,n&&(this.coordinates=n),l&&l(),this._finishLoading())})}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=n.url,this.load(n.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(n){this.coordinates=n;const l=n.map(c.MercatorCoordinate.fromLngLat);this.tileID=function(g){let x=1/0,S=1/0,k=-1/0,C=-1/0;for(const G of g)x=Math.min(x,G.x),S=Math.min(S,G.y),k=Math.max(k,G.x),C=Math.max(C,G.y);const A=Math.max(k-x,C-S),z=Math.max(0,Math.floor(-Math.log(A)/Math.LN2)),R=Math.pow(2,z);return new c.CanonicalTileID(z,Math.floor((x+k)/2*R),Math.floor((S+C)/2*R))}(l),this.minzoom=this.maxzoom=this.tileID.z;const d=l.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new c.RasterBoundsArray,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,c.EXTENT,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,c.EXTENT),this._boundsArray.emplaceBack(d[2].x,d[2].y,c.EXTENT,c.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,l=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,kr.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Je(n,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let d=!1;for(const g in this.tiles){const x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,d=!0)}d&&this.fire(new c.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n,l){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={},l(null)):(n.state="errored",l(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class hn extends Mn{constructor(n,l,d,g){super(n,l,d,g),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const n=this.options;this.urls=[];for(const l of n.urls)this.urls.push(this.map._requestManager.transformRequest(l,q.Source).url);c.getVideo(this.urls,(l,d)=>{this._loaded=!0,l?this.fire(new c.ErrorEvent(l)):d&&(this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const l=this.video.seekable;n<l.start(0)||n>l.end(0)?this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,l=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,kr.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new Je(n,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let d=!1;for(const g in this.tiles){const x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,d=!0)}d&&this.fire(new c.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ae extends Mn{constructor(n,l,d,g){super(n,l,d,g),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(S=>typeof S!="number"))||this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,d=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,kr.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Je(l,this.canvas,d.RGBA,{premultiply:!0});let g=!1;for(const x in this.tiles){const S=this.tiles[x];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,g=!0)}g&&this.fire(new c.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const Pr={vector:zr,raster:Fr,"raster-dem":sr,geojson:wn,video:hn,image:Mn,canvas:Ae};function Rn(f,n){const l=c.create();return c.translate(l,l,[1,1,0]),c.scale(l,l,[.5*f.width,.5*f.height,1]),c.multiply(l,l,f.calculatePosMatrix(n.toUnwrapped()))}function pr(f,n,l,d,g,x){const S=function(R,G,re){if(R)for(const Y of R){const ee=G[Y];if(ee&&ee.source===re&&ee.type==="fill-extrusion")return!0}else for(const Y in G){const ee=G[Y];if(ee.source===re&&ee.type==="fill-extrusion")return!0}return!1}(g&&g.layers,n,f.id),k=x.maxPitchScaleFactor(),C=f.tilesIn(d,k,S);C.sort(Vt);const A=[];for(const R of C)A.push({wrappedTileID:R.tileID.wrapped().key,queryResults:R.tile.queryRenderedFeatures(n,l,f._state,R.queryGeometry,R.cameraQueryGeometry,R.scale,g,x,k,Rn(f.transform,R.tileID))});const z=function(R){const G={},re={};for(const Y of R){const ee=Y.queryResults,le=Y.wrappedTileID,pe=re[le]=re[le]||{};for(const Ce in ee){const oe=ee[Ce],Ee=pe[Ce]=pe[Ce]||{},Ie=G[Ce]=G[Ce]||[];for(const Ne of oe)Ee[Ne.featureIndex]||(Ee[Ne.featureIndex]=!0,Ie.push(Ne))}}return G}(A);for(const R in z)z[R].forEach(G=>{const re=G.feature,Y=f.getFeatureState(re.layer["source-layer"],re.id);re.source=re.layer.source,re.layer["source-layer"]&&(re.sourceLayer=re.layer["source-layer"]),re.state=Y});return z}function Vt(f,n){const l=f.tileID,d=n.tileID;return l.overscaledZ-d.overscaledZ||l.canonical.y-d.canonical.y||l.wrap-d.wrap||l.canonical.x-d.canonical.x}class zn{constructor(n,l){this.timeAdded=0,this.fadeEndTime=0,this.tileID=n,this.uid=c.uniqueId(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const l=n+this.timeAdded;l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,l,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(g,x){const S={};if(!x)return S;for(const k of g){const C=k.layerIds.map(A=>x.getLayer(A)).filter(Boolean);if(C.length!==0){k.layers=C,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(A=>C.filter(z=>z.id===A)[0]));for(const A of C)S[A.id]=k}}return S}(n.buckets,l.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const x=this.buckets[g];if(x instanceof c.SymbolBucket){if(this.hasSymbolBuckets=!0,!d)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const x=this.buckets[g];if(x instanceof c.SymbolBucket&&x.hasRTLText){this.hasRTLText=!0,c.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const g in this.buckets){const x=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(g).queryRadius(x))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new c.CollisionBoxArray}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const d in this.buckets){const g=this.buckets[d];g.uploadPending()&&g.upload(n)}const l=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Je(n,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Je(n,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,l,d,g,x,S,k,C,A,z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:x,scale:S,tileSize:this.tileSize,pixelPosMatrix:z,transform:C,params:k,queryPadding:this.queryPadding*A},n,l,d):{}}querySourceFeatures(n,l){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const g=d.loadVTLayers(),x=l&&l.sourceLayer?l.sourceLayer:"",S=g._geojsonTileLayer||g[x];if(!S)return;const k=c.createFilter(l&&l.filter),{z:C,x:A,y:z}=this.tileID.canonical,R={z:C,x:A,y:z};for(let G=0;G<S.length;G++){const re=S.feature(G);if(k.needGeometry){const le=c.toEvaluationFeature(re,!0);if(!k.filter(new c.EvaluationParameters(this.tileID.overscaledZ),le,this.tileID.canonical))continue}else if(!k.filter(new c.EvaluationParameters(this.tileID.overscaledZ),re))continue;const Y=d.getId(re,x),ee=new c.GeoJSONFeature(re,C,A,z,Y);ee.tile=R,n.push(ee)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const l=this.expirationTime;if(n.cacheControl){const d=c.parseCacheControl(n.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const d=Date.now();let g=!1;if(this.expirationTime>d)g=!1;else if(l)if(this.expirationTime<l)g=!0;else{const x=this.expirationTime-l;x?this.expirationTime=d+Math.max(x,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!l.style.hasLayer(g))continue;const x=this.buckets[g],S=x.layers[0].sourceLayer||"_geojsonTileLayer",k=d[S],C=n[S];if(!k||!C||Object.keys(C).length===0)continue;x.update(C,k,this.imageAtlas&&this.imageAtlas.patternPositions||{});const A=l&&l.style&&l.style.getLayer(g);A&&(this.queryPadding=Math.max(this.queryPadding,A.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<c.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=c.exported.now()+n}setDependencies(n,l){const d={};for(const g of l)d[g]=!0;this.dependencies[n]=d}hasDependency(n,l){for(const d of n){const g=this.dependencies[d];if(g){for(const x of l)if(g[x])return!0}}return!1}}class Kr{constructor(n,l){this.max=n,this.onRemove=l,this.reset()}reset(){for(const n in this.data)for(const l of this.data[n])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(n,l,d){const g=n.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const x={value:l,timeout:void 0};if(d!==void 0&&(x.timeout=setTimeout(()=>{this.remove(n,x)},d)),this.data[g].push(x),this.order.push(g),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const l=this.data[n].shift();return l.timeout&&clearTimeout(l.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),l.value}getByKey(n){const l=this.data[n];return l?l[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,l){if(!this.has(n))return this;const d=n.wrapped().key,g=l===void 0?0:this.data[d].indexOf(l),x=this.data[d][g];return this.data[d].splice(g,1),x.timeout&&clearTimeout(x.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(x.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(n){const l=[];for(const d in this.data)for(const g of this.data[d])n(g.value)||l.push(g);for(const d of l)this.remove(d.value.tileID,d)}}class Ln{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,l,d){const g=String(l);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][g]=this.stateChanges[n][g]||{},c.extend(this.stateChanges[n][g],d),this.deletedStates[n]===null){this.deletedStates[n]={};for(const x in this.state[n])x!==g&&(this.deletedStates[n][x]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][g]===null){this.deletedStates[n][g]={};for(const x in this.state[n][g])d[x]||(this.deletedStates[n][g][x]=null)}else for(const x in d)this.deletedStates[n]&&this.deletedStates[n][g]&&this.deletedStates[n][g][x]===null&&delete this.deletedStates[n][g][x]}removeFeatureState(n,l,d){if(this.deletedStates[n]===null)return;const g=String(l);if(this.deletedStates[n]=this.deletedStates[n]||{},d&&l!==void 0)this.deletedStates[n][g]!==null&&(this.deletedStates[n][g]=this.deletedStates[n][g]||{},this.deletedStates[n][g][d]=null);else if(l!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][g])for(d in this.deletedStates[n][g]={},this.stateChanges[n][g])this.deletedStates[n][g][d]=null;else this.deletedStates[n][g]=null;else this.deletedStates[n]=null}getState(n,l){const d=String(l),g=c.extend({},(this.state[n]||{})[d],(this.stateChanges[n]||{})[d]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const x=this.deletedStates[n][l];if(x===null)return{};for(const S in x)delete g[S]}return g}initializeTileState(n,l){n.setFeatureState(this.state,l)}coalesceChanges(n,l){const d={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const x={};for(const S in this.stateChanges[g])this.state[g][S]||(this.state[g][S]={}),c.extend(this.state[g][S],this.stateChanges[g][S]),x[S]=this.state[g][S];d[g]=x}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const x={};if(this.deletedStates[g]===null)for(const S in this.state[g])x[S]={},this.state[g][S]={};else for(const S in this.deletedStates[g]){if(this.deletedStates[g][S]===null)this.state[g][S]={};else for(const k of Object.keys(this.deletedStates[g][S]))delete this.state[g][S][k];x[S]=this.state[g][S]}d[g]=d[g]||{},c.extend(d[g],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const g in n)n[g].setFeatureState(d,l)}}class Tr extends c.Evented{constructor(n,l,d){super(),this.id=n,this.dispatcher=d,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(g,x,S,k){const C=new Pr[x.type](g,x,S,k);if(C.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${C.id}`);return c.bindAll(["load","abort","unload","serialize","prepare"],C),C}(n,l,d,this),this._tiles={},this._cache=new Kr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ln,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const l=this._tiles[n];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,l){return this._source.loadTile(n,l)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){this._source.abortTile&&this._source.abortTile(n,()=>{}),this._source.fire(new c.Event("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const d=this._tiles[l];d.upload(n),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(Vn).map(n=>n.key)}getRenderableIds(n){const l=[];for(const d in this._tiles)this._isIdRenderable(d,n)&&l.push(this._tiles[d]);return n?l.sort((d,g)=>{const x=d.tileID,S=g.tileID,k=new c.Point(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),C=new c.Point(S.canonical.x,S.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-S.overscaledZ||C.y-k.y||C.x-k.x}).map(d=>d.tileID.key):l.map(d=>d.tileID).sort(Vn).map(d=>d.key)}hasRenderableParent(n){const l=this.findLoadedParent(n,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(n,l){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(l||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(n,"reloading")}}_reloadTile(n,l){const d=this._tiles[n];d&&(d.state!=="loading"&&(d.state=l),this._loadTile(d,this._tileLoaded.bind(this,d,n,l)))}_tileLoaded(n,l,d,g){if(g)return n.state="errored",void(g.status!==404?this._source.fire(new c.ErrorEvent(g,{tile:n})):this.update(this.transform,this.terrain));n.timeAdded=c.exported.now(),d==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(l,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new c.Event("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const l=this.getRenderableIds();for(let g=0;g<l.length;g++){const x=l[g];if(n.neighboringTiles&&n.neighboringTiles[x]){const S=this.getTileByID(x);d(n,S),d(S,n)}}function d(g,x){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let S=x.tileID.canonical.x-g.tileID.canonical.x;const k=x.tileID.canonical.y-g.tileID.canonical.y,C=Math.pow(2,g.tileID.canonical.z),A=x.tileID.key;S===0&&k===0||Math.abs(k)>1||(Math.abs(S)>1&&(Math.abs(S+C)===1?S+=C:Math.abs(S-C)===1&&(S-=C)),x.dem&&g.dem&&(g.dem.backfillBorder(x.dem,S,k),g.neighboringTiles&&g.neighboringTiles[A]&&(g.neighboringTiles[A].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,l,d,g){for(const x in this._tiles){let S=this._tiles[x];if(g[x]||!S.hasData()||S.tileID.overscaledZ<=l||S.tileID.overscaledZ>d)continue;let k=S.tileID;for(;S&&S.tileID.overscaledZ>l+1;){const A=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[A.key],S&&S.hasData()&&(k=A)}let C=k;for(;C.overscaledZ>l;)if(C=C.scaledTo(C.overscaledZ-1),n[C.key]){g[k.key]=k;break}}}findLoadedParent(n,l){if(n.key in this._loadedParentTiles){const d=this._loadedParentTiles[n.key];return d&&d.tileID.overscaledZ>=l?d:null}for(let d=n.overscaledZ-1;d>=l;d--){const g=n.scaledTo(d),x=this._getLoadedTile(g);if(x)return x}}_getLoadedTile(n){const l=this._tiles[n.key];return l&&l.hasData()?l:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const l=Math.ceil(n.width/this._source.tileSize)+1,d=Math.ceil(n.height/this._source.tileSize)+1,g=Math.floor(l*d*(this._maxTileCacheZoomLevels===null?c.config.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(x)}handleWrapJump(n){const l=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,l){const d={};for(const g in this._tiles){const x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+l),d[x.tileID.key]=x}this._tiles=d;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(n,l){if(this.transform=n,this.terrain=l,!this._sourceLoaded||this._paused)return;let d;this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new c.OverscaledTileID(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y)):(d=n.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l}),this._source.hasTile&&(d=d.filter(z=>this._source.hasTile(z)))):d=[];const g=n.coveringZoomLevel(this._source),x=Math.max(g-Tr.maxOverzooming,this._source.minzoom),S=Math.max(g+Tr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const z={};for(const R of d)if(R.canonical.z>this._source.minzoom){const G=R.scaledTo(R.canonical.z-1);z[G.key]=G;const re=R.scaledTo(Math.max(this._source.minzoom,Math.min(R.canonical.z,5)));z[re.key]=re}d=d.concat(Object.values(z))}const k=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,k&&this.fire(new c.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const C=this._updateRetainedTiles(d,g);if(yn(this._source.type)){const z={},R={},G=Object.keys(C),re=c.exported.now();for(const Y of G){const ee=C[Y],le=this._tiles[Y];if(!le||le.fadeEndTime!==0&&le.fadeEndTime<=re)continue;const pe=this.findLoadedParent(ee,x);pe&&(this._addTile(pe.tileID),z[pe.tileID.key]=pe.tileID),R[Y]=ee}this._retainLoadedChildren(R,g,S,C);for(const Y in z)C[Y]||(this._coveredTiles[Y]=!0,C[Y]=z[Y]);if(l){const Y={},ee={};for(const le of d)this._tiles[le.key].hasData()?Y[le.key]=le:ee[le.key]=le;for(const le in ee){const pe=ee[le].children(this._source.maxzoom);this._tiles[pe[0].key]&&this._tiles[pe[1].key]&&this._tiles[pe[2].key]&&this._tiles[pe[3].key]&&(Y[pe[0].key]=C[pe[0].key]=pe[0],Y[pe[1].key]=C[pe[1].key]=pe[1],Y[pe[2].key]=C[pe[2].key]=pe[2],Y[pe[3].key]=C[pe[3].key]=pe[3],delete ee[le])}for(const le in ee){const pe=this.findLoadedParent(ee[le],this._source.minzoom);if(pe){Y[pe.tileID.key]=C[pe.tileID.key]=pe.tileID;for(const Ce in Y)Y[Ce].isChildOf(pe.tileID)&&delete Y[Ce]}}for(const le in this._tiles)Y[le]||(this._coveredTiles[le]=!0)}}for(const z in C)this._tiles[z].clearFadeHold();const A=c.keysDifference(this._tiles,C);for(const z of A){const R=this._tiles[z];R.hasSymbolBuckets&&!R.holdingForFade()?R.setHoldDuration(this.map._fadeDuration):R.hasSymbolBuckets&&!R.symbolFadeFinished()||this._removeTile(z)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,l){const d={},g={},x=Math.max(l-Tr.maxOverzooming,this._source.minzoom),S=Math.max(l+Tr.maxUnderzooming,this._source.minzoom),k={};for(const C of n){const A=this._addTile(C);d[C.key]=C,A.hasData()||l<this._source.maxzoom&&(k[C.key]=C)}this._retainLoadedChildren(k,l,S,d);for(const C of n){let A=this._tiles[C.key];if(A.hasData())continue;if(l+1>this._source.maxzoom){const R=C.children(this._source.maxzoom)[0],G=this.getTile(R);if(G&&G.hasData()){d[R.key]=R;continue}}else{const R=C.children(this._source.maxzoom);if(d[R[0].key]&&d[R[1].key]&&d[R[2].key]&&d[R[3].key])continue}let z=A.wasRequested();for(let R=C.overscaledZ-1;R>=x;--R){const G=C.scaledTo(R);if(g[G.key])break;if(g[G.key]=!0,A=this.getTile(G),!A&&z&&(A=this._addTile(G)),A){const re=A.hasData();if((z||re)&&(d[G.key]=G),z=A.wasRequested(),re)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const l=[];let d,g=this._tiles[n].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){d=this._loadedParentTiles[g.key];break}l.push(g.key);const x=g.scaledTo(g.overscaledZ-1);if(d=this._getLoadedTile(x),d)break;g=x}for(const x of l)this._loadedParentTiles[x]=d}}_addTile(n){let l=this._tiles[n.key];if(l)return l;l=this._cache.getAndRemove(n),l&&(this._setTileReloadTimer(n.key,l),l.tileID=n,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,l)));const d=l;return l||(l=new zn(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(l,this._tileLoaded.bind(this,l,n.key,l.state))),l.uses++,this._tiles[n.key]=l,d||this._source.fire(new c.Event("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(n,l){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const d=l.getExpiryTimeout();d&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},d))}_removeTile(n){const l=this._tiles[n];l&&(l.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,l,d){const g=[],x=this.transform;if(!x)return g;const S=d?x.getCameraQueryGeometry(n):n,k=n.map(Y=>x.pointCoordinate(Y,this.terrain)),C=S.map(Y=>x.pointCoordinate(Y,this.terrain)),A=this.getIds();let z=1/0,R=1/0,G=-1/0,re=-1/0;for(const Y of C)z=Math.min(z,Y.x),R=Math.min(R,Y.y),G=Math.max(G,Y.x),re=Math.max(re,Y.y);for(let Y=0;Y<A.length;Y++){const ee=this._tiles[A[Y]];if(ee.holdingForFade())continue;const le=ee.tileID,pe=Math.pow(2,x.zoom-ee.tileID.overscaledZ),Ce=l*ee.queryPadding*c.EXTENT/ee.tileSize/pe,oe=[le.getTilePoint(new c.MercatorCoordinate(z,R)),le.getTilePoint(new c.MercatorCoordinate(G,re))];if(oe[0].x-Ce<c.EXTENT&&oe[0].y-Ce<c.EXTENT&&oe[1].x+Ce>=0&&oe[1].y+Ce>=0){const Ee=k.map(Ne=>le.getTilePoint(Ne)),Ie=C.map(Ne=>le.getTilePoint(Ne));g.push({tile:ee,tileID:le,queryGeometry:Ee,cameraQueryGeometry:Ie,scale:pe})}}return g}getVisibleCoordinates(n){const l=this.getRenderableIds(n).map(d=>this._tiles[d].tileID);for(const d of l)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(yn(this._source.type)){const n=c.exported.now();for(const l in this._tiles)if(this._tiles[l].fadeEndTime>=n)return!0}return!1}setFeatureState(n,l,d){this._state.updateState(n=n||"_geojsonTileLayer",l,d)}removeFeatureState(n,l,d){this._state.removeFeatureState(n=n||"_geojsonTileLayer",l,d)}getFeatureState(n,l){return this._state.getState(n=n||"_geojsonTileLayer",l)}setDependencies(n,l,d){const g=this._tiles[n];g&&g.setDependencies(l,d)}reloadTilesForDependencies(n,l){for(const d in this._tiles)this._tiles[d].hasDependency(n,l)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(n,l))}}function Vn(f,n){const l=Math.abs(2*f.wrap)-+(f.wrap<0),d=Math.abs(2*n.wrap)-+(n.wrap<0);return f.overscaledZ-n.overscaledZ||d-l||n.canonical.y-f.canonical.y||n.canonical.x-f.canonical.x}function yn(f){return f==="raster"||f==="image"||f==="video"}Tr.maxOverzooming=10,Tr.maxUnderzooming=3;const rn="mapboxgl_preloaded_worker_pool";class Ve{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<Ve.workerCount;)this.workers.push(new Worker(c.config.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[rn]}numActive(){return Object.keys(this.active).length}}const Sn=Math.floor(c.exported.hardwareConcurrency/2);let Xr;function Wt(){return Xr||(Xr=new Ve),Xr}Ve.workerCount=c.isSafari(globalThis)?Math.max(Math.min(Sn,3),1):1;class dn{constructor(n,l){this.reset(n,l)}reset(n,l){this.points=n||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=c.clamp(n,0,1);let l=1,d=this._distances[l];const g=n*this.paddedLength+this.padding;for(;d<g&&l<this._distances.length;)d=this._distances[++l];const x=l-1,S=this._distances[x],k=d-S,C=k>0?(g-S)/k:0;return this.points[x].mult(1-C).add(this.points[l].mult(C))}}function Xe(f,n){let l=!0;return f==="always"||f!=="never"&&n!=="never"||(l=!1),l}class Rt{constructor(n,l,d){const g=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(n/d),this.yCellCount=Math.ceil(l/d);for(let S=0;S<this.xCellCount*this.yCellCount;S++)g.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=l,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,l,d,g,x){this._forEachCell(l,d,g,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(x)}insertCircle(n,l,d,g){this._forEachCell(l-g,d-g,l+g,d+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(l),this.circles.push(d),this.circles.push(g)}_insertBoxCell(n,l,d,g,x,S){this.boxCells[x].push(S)}_insertCircleCell(n,l,d,g,x,S){this.circleCells[x].push(S)}_query(n,l,d,g,x,S,k){if(d<0||n>this.width||g<0||l>this.height)return[];const C=[];if(n<=0&&l<=0&&this.width<=d&&this.height<=g){if(x)return[{key:null,x1:n,y1:l,x2:d,y2:g}];for(let A=0;A<this.boxKeys.length;A++)C.push({key:this.boxKeys[A],x1:this.bboxes[4*A],y1:this.bboxes[4*A+1],x2:this.bboxes[4*A+2],y2:this.bboxes[4*A+3]});for(let A=0;A<this.circleKeys.length;A++){const z=this.circles[3*A],R=this.circles[3*A+1],G=this.circles[3*A+2];C.push({key:this.circleKeys[A],x1:z-G,y1:R-G,x2:z+G,y2:R+G})}}else this._forEachCell(n,l,d,g,this._queryCell,C,{hitTest:x,overlapMode:S,seenUids:{box:{},circle:{}}},k);return C}query(n,l,d,g){return this._query(n,l,d,g,!1,null)}hitTest(n,l,d,g,x,S){return this._query(n,l,d,g,!0,x,S).length>0}hitTestCircle(n,l,d,g,x){const S=n-d,k=n+d,C=l-d,A=l+d;if(k<0||S>this.width||A<0||C>this.height)return!1;const z=[];return this._forEachCell(S,C,k,A,this._queryCellCircle,z,{hitTest:!0,overlapMode:g,circle:{x:n,y:l,radius:d},seenUids:{box:{},circle:{}}},x),z.length>0}_queryCell(n,l,d,g,x,S,k,C){const{seenUids:A,hitTest:z,overlapMode:R}=k,G=this.boxCells[x];if(G!==null){const Y=this.bboxes;for(const ee of G)if(!A.box[ee]){A.box[ee]=!0;const le=4*ee,pe=this.boxKeys[ee];if(n<=Y[le+2]&&l<=Y[le+3]&&d>=Y[le+0]&&g>=Y[le+1]&&(!C||C(pe))&&(!z||!Xe(R,pe.overlapMode))&&(S.push({key:pe,x1:Y[le],y1:Y[le+1],x2:Y[le+2],y2:Y[le+3]}),z))return!0}}const re=this.circleCells[x];if(re!==null){const Y=this.circles;for(const ee of re)if(!A.circle[ee]){A.circle[ee]=!0;const le=3*ee,pe=this.circleKeys[ee];if(this._circleAndRectCollide(Y[le],Y[le+1],Y[le+2],n,l,d,g)&&(!C||C(pe))&&(!z||!Xe(R,pe.overlapMode))){const Ce=Y[le],oe=Y[le+1],Ee=Y[le+2];if(S.push({key:pe,x1:Ce-Ee,y1:oe-Ee,x2:Ce+Ee,y2:oe+Ee}),z)return!0}}}return!1}_queryCellCircle(n,l,d,g,x,S,k,C){const{circle:A,seenUids:z,overlapMode:R}=k,G=this.boxCells[x];if(G!==null){const Y=this.bboxes;for(const ee of G)if(!z.box[ee]){z.box[ee]=!0;const le=4*ee,pe=this.boxKeys[ee];if(this._circleAndRectCollide(A.x,A.y,A.radius,Y[le+0],Y[le+1],Y[le+2],Y[le+3])&&(!C||C(pe))&&!Xe(R,pe.overlapMode))return S.push(!0),!0}}const re=this.circleCells[x];if(re!==null){const Y=this.circles;for(const ee of re)if(!z.circle[ee]){z.circle[ee]=!0;const le=3*ee,pe=this.circleKeys[ee];if(this._circlesCollide(Y[le],Y[le+1],Y[le+2],A.x,A.y,A.radius)&&(!C||C(pe))&&!Xe(R,pe.overlapMode))return S.push(!0),!0}}}_forEachCell(n,l,d,g,x,S,k,C){const A=this._convertToXCellCoord(n),z=this._convertToYCellCoord(l),R=this._convertToXCellCoord(d),G=this._convertToYCellCoord(g);for(let re=A;re<=R;re++)for(let Y=z;Y<=G;Y++)if(x.call(this,n,l,d,g,this.xCellCount*Y+re,S,k,C))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,l,d,g,x,S){const k=g-n,C=x-l,A=d+S;return A*A>k*k+C*C}_circleAndRectCollide(n,l,d,g,x,S,k){const C=(S-g)/2,A=Math.abs(n-(g+C));if(A>C+d)return!1;const z=(k-x)/2,R=Math.abs(l-(x+z));if(R>z+d)return!1;if(A<=C||R<=z)return!0;const G=A-C,re=R-z;return G*G+re*re<=d*d}}function Ut(f,n,l,d,g){const x=c.create();return n?(c.scale(x,x,[1/g,1/g,1]),l||c.rotateZ(x,x,d.angle)):c.multiply(x,d.labelPlaneMatrix,f),x}function $r(f,n,l,d,g){if(n){const x=c.clone(f);return c.scale(x,x,[g,g,1]),l||c.rotateZ(x,x,-d.angle),x}return d.glCoordMatrix}function Mr(f,n,l){let d;l?(d=[f.x,f.y,l(f.x,f.y),1],c.transformMat4(d,d,n)):(d=[f.x,f.y,0,1],se(d,d,n));const g=d[3];return{point:new c.Point(d[0]/g,d[1]/g),signedDistanceFromCamera:g}}function zt(f,n){return .5+f/n*.5}function vn(f,n){const l=f[0]/f[3],d=f[1]/f[3];return l>=-n[0]&&l<=n[0]&&d>=-n[1]&&d<=n[1]}function pn(f,n,l,d,g,x,S,k,C,A){const z=d?f.textSizeData:f.iconSizeData,R=c.evaluateSizeForZoom(z,l.transform.zoom),G=[256/l.width*2+1,256/l.height*2+1],re=d?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;re.clear();const Y=f.lineVertexArray,ee=d?f.text.placedSymbolArray:f.icon.placedSymbolArray,le=l.transform.width/l.transform.height;let pe=!1;for(let Ce=0;Ce<ee.length;Ce++){const oe=ee.get(Ce);if(oe.hidden||oe.writingMode===c.WritingMode.vertical&&!pe){X(oe.numGlyphs,re);continue}let Ee;if(pe=!1,A?(Ee=[oe.anchorX,oe.anchorY,A(oe.anchorX,oe.anchorY),1],c.transformMat4(Ee,Ee,n)):(Ee=[oe.anchorX,oe.anchorY,0,1],se(Ee,Ee,n)),!vn(Ee,G)){X(oe.numGlyphs,re);continue}const Ie=zt(l.transform.cameraToCenterDistance,Ee[3]),Ne=c.evaluateSizeForFeature(z,R,oe),We=S?Ne/Ie:Ne*Ie,Ye=new c.Point(oe.anchorX,oe.anchorY),Ge=Mr(Ye,g,A).point,ft={projections:{},offsets:{}},Dt=Yr(oe,We,!1,k,n,g,x,f.glyphOffsetArray,Y,re,Ge,Ye,ft,le,C,A);pe=Dt.useVertical,(Dt.notEnoughRoom||pe||Dt.needsFlipping&&Yr(oe,We,!0,k,n,g,x,f.glyphOffsetArray,Y,re,Ge,Ye,ft,le,C,A).notEnoughRoom)&&X(oe.numGlyphs,re)}d?f.text.dynamicLayoutVertexBuffer.updateData(re):f.icon.dynamicLayoutVertexBuffer.updateData(re)}function si(f,n,l,d,g,x,S,k,C,A,z,R,G){const re=k.glyphStartIndex+k.numGlyphs,Y=k.lineStartIndex,ee=k.lineStartIndex+k.lineLength,le=n.getoffsetX(k.glyphStartIndex),pe=n.getoffsetX(re-1),Ce=F(f*le,l,d,g,x,S,k.segment,Y,ee,C,A,z,R,G);if(!Ce)return null;const oe=F(f*pe,l,d,g,x,S,k.segment,Y,ee,C,A,z,R,G);return oe?{first:Ce,last:oe}:null}function Ai(f,n,l,d){return f===c.WritingMode.horizontal&&Math.abs(l.y-n.y)>Math.abs(l.x-n.x)*d?{useVertical:!0}:(f===c.WritingMode.vertical?n.y<l.y:n.x>l.x)?{needsFlipping:!0}:null}function Yr(f,n,l,d,g,x,S,k,C,A,z,R,G,re,Y,ee){const le=n/24,pe=f.lineOffsetX*le,Ce=f.lineOffsetY*le;let oe;if(f.numGlyphs>1){const Ee=f.glyphStartIndex+f.numGlyphs,Ie=f.lineStartIndex,Ne=f.lineStartIndex+f.lineLength,We=si(le,k,pe,Ce,l,z,R,f,C,x,G,Y,ee);if(!We)return{notEnoughRoom:!0};const Ye=Mr(We.first.point,S,ee).point,Ge=Mr(We.last.point,S,ee).point;if(d&&!l){const ft=Ai(f.writingMode,Ye,Ge,re);if(ft)return ft}oe=[We.first];for(let ft=f.glyphStartIndex+1;ft<Ee-1;ft++)oe.push(F(le*k.getoffsetX(ft),pe,Ce,l,z,R,f.segment,Ie,Ne,C,x,G,Y,ee));oe.push(We.last)}else{if(d&&!l){const Ie=Mr(R,g,ee).point,Ne=f.lineStartIndex+f.segment+1,We=new c.Point(C.getx(Ne),C.gety(Ne)),Ye=Mr(We,g,ee),Ge=Ye.signedDistanceFromCamera>0?Ye.point:Cr(R,We,Ie,1,g,ee),ft=Ai(f.writingMode,Ie,Ge,re);if(ft)return ft}const Ee=F(le*k.getoffsetX(f.glyphStartIndex),pe,Ce,l,z,R,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,C,x,G,Y,ee);if(!Ee)return{notEnoughRoom:!0};oe=[Ee]}for(const Ee of oe)c.addDynamicAttributes(A,Ee.point,Ee.angle);return{}}function Cr(f,n,l,d,g,x){const S=Mr(f.add(f.sub(n)._unit()),g,x).point,k=l.sub(S);return l.add(k._mult(d/k.mag()))}function Ni(f,n){const{projectionCache:l,lineVertexArray:d,labelPlaneMatrix:g,tileAnchorPoint:x,distanceFromAnchor:S,getElevation:k,previousVertex:C,direction:A,absOffsetX:z}=n;if(l.projections[f])return l.projections[f];const R=new c.Point(d.getx(f),d.gety(f)),G=Mr(R,g,k);if(G.signedDistanceFromCamera>0)return l.projections[f]=G.point,G.point;const re=f-A;return Cr(S===0?x:new c.Point(d.getx(re),d.gety(re)),R,C,z-S+1,g,k)}function li(f,n,l){return f._unit()._perp()._mult(n*l)}function J(f,n,l,d,g,x,S,k){const{projectionCache:C,direction:A}=k;if(C.offsets[f])return C.offsets[f];const z=l.add(n);if(f+A<d||f+A>=g)return C.offsets[f]=z,z;const R=Ni(f+A,k),G=li(R.sub(l),S,A),re=l.add(G),Y=R.add(G);return C.offsets[f]=c.findLineIntersection(x,z,re,Y)||z,C.offsets[f]}function F(f,n,l,d,g,x,S,k,C,A,z,R,G,re){const Y=d?f-n:f+n;let ee=Y>0?1:-1,le=0;d&&(ee*=-1,le=Math.PI),ee<0&&(le+=Math.PI);let pe,Ce,oe=ee>0?k+S:k+S+1,Ee=g,Ie=g,Ne=0,We=0;const Ye=Math.abs(Y),Ge=[];let ft;for(;Ne+We<=Ye;){if(oe+=ee,oe<k||oe>=C)return null;Ne+=We,Ie=Ee,Ce=pe;const ot={projectionCache:R,lineVertexArray:A,labelPlaneMatrix:z,tileAnchorPoint:x,distanceFromAnchor:Ne,getElevation:re,previousVertex:Ie,direction:ee,absOffsetX:Ye};if(Ee=Ni(oe,ot),l===0)Ge.push(Ie),ft=Ee.sub(Ie);else{let Zt;const vt=Ee.sub(Ie);Zt=vt.mag()===0?li(Ni(oe+ee,ot).sub(Ee),l,ee):li(vt,l,ee),Ce||(Ce=Ie.add(Zt)),pe=J(oe,Zt,Ee,k,C,Ce,l,ot),Ge.push(Ce),ft=pe.sub(Ce)}We=ft.mag()}const Dt=ft._mult((Ye-Ne)/We)._add(Ce||Ie),tr=le+Math.atan2(Ee.y-Ie.y,Ee.x-Ie.x);return Ge.push(Dt),{point:Dt,angle:G?tr:0,path:Ge}}const $=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function X(f,n){for(let l=0;l<f;l++){const d=n.length;n.resize(d+4),n.float32.set($,3*d)}}function se(f,n,l){const d=n[0],g=n[1];return f[0]=l[0]*d+l[4]*g+l[12],f[1]=l[1]*d+l[5]*g+l[13],f[3]=l[3]*d+l[7]*g+l[15],f}const ue=100;class me{constructor(n,l=new Rt(n.width+200,n.height+200,25),d=new Rt(n.width+200,n.height+200,25)){this.transform=n,this.grid=l,this.ignoredGrid=d,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+ue,this.screenBottomBoundary=n.height+ue,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,l,d,g,x,S){const k=this.projectAndGetPerspectiveRatio(g,n.anchorPointX,n.anchorPointY,S),C=d*k.perspectiveRatio,A=n.x1*C+k.point.x,z=n.y1*C+k.point.y,R=n.x2*C+k.point.x,G=n.y2*C+k.point.y;return!this.isInsideGrid(A,z,R,G)||l!=="always"&&this.grid.hitTest(A,z,R,G,l,x)||k.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[A,z,R,G],offscreen:this.isOffscreen(A,z,R,G)}}placeCollisionCircles(n,l,d,g,x,S,k,C,A,z,R,G,re,Y){const ee=[],le=new c.Point(l.anchorX,l.anchorY),pe=Mr(le,S,Y),Ce=zt(this.transform.cameraToCenterDistance,pe.signedDistanceFromCamera),oe=(z?x/Ce:x*Ce)/c.ONE_EM,Ee=Mr(le,k,Y).point,Ie=si(oe,g,l.lineOffsetX*oe,l.lineOffsetY*oe,!1,Ee,le,l,d,k,{projections:{},offsets:{}},!1,Y);let Ne=!1,We=!1,Ye=!0;if(Ie){const Ge=.5*G*Ce+re,ft=new c.Point(-100,-100),Dt=new c.Point(this.screenRightBoundary,this.screenBottomBoundary),tr=new dn,ot=Ie.first,Zt=Ie.last;let vt=[];for(let Dr=ot.path.length-1;Dr>=1;Dr--)vt.push(ot.path[Dr]);for(let Dr=1;Dr<Zt.path.length;Dr++)vt.push(Zt.path[Dr]);const Or=2.5*Ge;if(C){const Dr=vt.map(ir=>Mr(ir,C,Y));vt=Dr.some(ir=>ir.signedDistanceFromCamera<=0)?[]:Dr.map(ir=>ir.point)}let Zn=[];if(vt.length>0){const Dr=vt[0].clone(),ir=vt[0].clone();for(let Nn=1;Nn<vt.length;Nn++)Dr.x=Math.min(Dr.x,vt[Nn].x),Dr.y=Math.min(Dr.y,vt[Nn].y),ir.x=Math.max(ir.x,vt[Nn].x),ir.y=Math.max(ir.y,vt[Nn].y);Zn=Dr.x>=ft.x&&ir.x<=Dt.x&&Dr.y>=ft.y&&ir.y<=Dt.y?[vt]:ir.x<ft.x||Dr.x>Dt.x||ir.y<ft.y||Dr.y>Dt.y?[]:c.clipLine([vt],ft.x,ft.y,Dt.x,Dt.y)}for(const Dr of Zn){tr.reset(Dr,.25*Ge);let ir=0;ir=tr.length<=.5*Ge?1:Math.ceil(tr.paddedLength/Or)+1;for(let Nn=0;Nn<ir;Nn++){const Ui=Nn/Math.max(ir-1,1),Kn=tr.lerp(Ui),pi=Kn.x+ue,co=Kn.y+ue;ee.push(pi,co,Ge,0);const Uo=pi-Ge,jo=co-Ge,ji=pi+Ge,da=co+Ge;if(Ye=Ye&&this.isOffscreen(Uo,jo,ji,da),We=We||this.isInsideGrid(Uo,jo,ji,da),n!=="always"&&this.grid.hitTestCircle(pi,co,Ge,n,R)&&(Ne=!0,!A))return{circles:[],offscreen:!1,collisionDetected:Ne}}}}return{circles:!A&&Ne||!We||Ce<this.perspectiveRatioCutoff?[]:ee,offscreen:Ye,collisionDetected:Ne}}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let d=1/0,g=1/0,x=-1/0,S=-1/0;for(const z of n){const R=new c.Point(z.x+ue,z.y+ue);d=Math.min(d,R.x),g=Math.min(g,R.y),x=Math.max(x,R.x),S=Math.max(S,R.y),l.push(R)}const k=this.grid.query(d,g,x,S).concat(this.ignoredGrid.query(d,g,x,S)),C={},A={};for(const z of k){const R=z.key;if(C[R.bucketInstanceId]===void 0&&(C[R.bucketInstanceId]={}),C[R.bucketInstanceId][R.featureIndex])continue;const G=[new c.Point(z.x1,z.y1),new c.Point(z.x2,z.y1),new c.Point(z.x2,z.y2),new c.Point(z.x1,z.y2)];c.polygonIntersectsPolygon(l,G)&&(C[R.bucketInstanceId][R.featureIndex]=!0,A[R.bucketInstanceId]===void 0&&(A[R.bucketInstanceId]=[]),A[R.bucketInstanceId].push(R.featureIndex))}return A}insertCollisionBox(n,l,d,g,x,S){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:x,collisionGroupID:S,overlapMode:l},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,l,d,g,x,S){const k=d?this.ignoredGrid:this.grid,C={bucketInstanceId:g,featureIndex:x,collisionGroupID:S,overlapMode:l};for(let A=0;A<n.length;A+=4)k.insertCircle(C,n[A],n[A+1],n[A+2])}projectAndGetPerspectiveRatio(n,l,d,g){let x;return g?(x=[l,d,g(l,d),1],c.transformMat4(x,x,n)):(x=[l,d,0,1],se(x,x,n)),{point:new c.Point((x[0]/x[3]+1)/2*this.transform.width+ue,(-x[1]/x[3]+1)/2*this.transform.height+ue),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}}isOffscreen(n,l,d,g){return d<ue||n>=this.screenRightBoundary||g<ue||l>this.screenBottomBoundary}isInsideGrid(n,l,d,g){return d>=0&&n<this.gridRightBoundary&&g>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const n=c.identity([]);return c.translate(n,n,[-100,-100,0]),n}}function he(f,n,l){return n*(c.EXTENT/(f.tileSize*Math.pow(2,l-f.tileID.overscaledZ)))}class ce{constructor(n,l,d,g){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?l:-l))):g&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class ye{constructor(n,l,d,g,x){this.text=new ce(n?n.text:null,l,d,x),this.icon=new ce(n?n.icon:null,l,g,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ze{constructor(n,l,d){this.text=n,this.icon=l,this.skipFade=d}}class Oe{constructor(){this.invProjMatrix=c.create(),this.viewportMatrix=c.create(),this.circles=[]}}class Be{constructor(n,l,d,g,x){this.bucketInstanceId=n,this.featureIndex=l,this.sourceLayerIndex=d,this.bucketIndex=g,this.tileID=x}}class bt{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const l=++this.maxGroupID;this.collisionGroups[n]={ID:l,predicate:d=>d.collisionGroupID===l}}return this.collisionGroups[n]}}function jt(f,n,l,d,g){const{horizontalAlign:x,verticalAlign:S}=c.getAnchorAlignment(f),k=-(x-.5)*n,C=-(S-.5)*l,A=c.evaluateVariableOffset(f,d);return new c.Point(k+A[0]*g,C+A[1]*g)}function mt(f,n,l,d,g,x){const{x1:S,x2:k,y1:C,y2:A,anchorPointX:z,anchorPointY:R}=f,G=new c.Point(n,l);return d&&G._rotate(g?x:-x),{x1:S+G.x,y1:C+G.y,x2:k+G.x,y2:A+G.y,anchorPointX:z,anchorPointY:R}}class St{constructor(n,l,d,g,x){this.transform=n.clone(),this.terrain=l,this.collisionIndex=new me(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new bt(g),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(n,l,d,g){const x=d.getBucket(l),S=d.latestFeatureIndex;if(!x||!S||l.id!==x.layerIds[0])return;const k=d.collisionBoxArray,C=x.layers[0].layout,A=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),z=d.tileSize/c.EXTENT,R=this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),G=C.get("text-pitch-alignment")==="map",re=C.get("text-rotation-alignment")==="map",Y=he(d,1,this.transform.zoom),ee=Ut(R,G,re,this.transform,Y);let le=null;if(G){const Ce=$r(R,G,re,this.transform,Y);le=c.multiply([],this.transform.labelPlaneMatrix,Ce)}this.retainedQueryData[x.bucketInstanceId]=new Be(x.bucketInstanceId,S,x.sourceLayerIndex,x.index,d.tileID);const pe={bucket:x,layout:C,posMatrix:R,textLabelPlaneMatrix:ee,labelToScreenMatrix:le,scale:A,textPixelRatio:z,holdingForFade:d.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:c.evaluateSizeForZoom(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(g)for(const Ce of x.sortKeyRanges){const{sortKey:oe,symbolInstanceStart:Ee,symbolInstanceEnd:Ie}=Ce;n.push({sortKey:oe,symbolInstanceStart:Ee,symbolInstanceEnd:Ie,parameters:pe})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:pe})}attemptAnchorPlacement(n,l,d,g,x,S,k,C,A,z,R,G,re,Y,ee,le){const pe=[G.textOffset0,G.textOffset1],Ce=jt(n,d,g,pe,x),oe=this.collisionIndex.placeCollisionBox(mt(l,Ce.x,Ce.y,S,k,this.transform.angle),R,C,A,z.predicate,le);if((!ee||this.collisionIndex.placeCollisionBox(mt(ee,Ce.x,Ce.y,S,k,this.transform.angle),R,C,A,z.predicate,le).box.length!==0)&&oe.box.length>0){let Ee;if(this.prevPlacement&&this.prevPlacement.variableOffsets[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID].text&&(Ee=this.prevPlacement.variableOffsets[G.crossTileID].anchor),G.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[G.crossTileID]={textOffset:pe,width:d,height:g,anchor:n,textBoxScale:x,prevAnchor:Ee},this.markUsedJustification(re,n,G,Y),re.allowVerticalPlacement&&(this.markUsedOrientation(re,Y,G),this.placedOrientations[G.crossTileID]=Y),{shift:Ce,placedGlyphBoxes:oe}}}placeLayerBucketPart(n,l,d){const{bucket:g,layout:x,posMatrix:S,textLabelPlaneMatrix:k,labelToScreenMatrix:C,textPixelRatio:A,holdingForFade:z,collisionBoxArray:R,partiallyEvaluatedTextSize:G,collisionGroup:re}=n.parameters,Y=x.get("text-optional"),ee=x.get("icon-optional"),le=c.getOverlapMode(x,"text-overlap","text-allow-overlap"),pe=le==="always",Ce=c.getOverlapMode(x,"icon-overlap","icon-allow-overlap"),oe=Ce==="always",Ee=x.get("text-rotation-alignment")==="map",Ie=x.get("text-pitch-alignment")==="map",Ne=x.get("icon-text-fit")!=="none",We=x.get("symbol-z-order")==="viewport-y",Ye=pe&&(oe||!g.hasIconData()||ee),Ge=oe&&(pe||!g.hasTextData()||Y);!g.collisionArrays&&R&&g.deserializeCollisionBoxes(R);const ft=this.retainedQueryData[g.bucketInstanceId].tileID,Dt=this.terrain?(ot,Zt)=>this.terrain.getElevation(ft,ot,Zt):null,tr=(ot,Zt)=>{if(l[ot.crossTileID])return;if(z)return void(this.placements[ot.crossTileID]=new ze(!1,!1,!1));let vt=!1,Or=!1,Zn=!0,Dr=null,ir={box:null,offscreen:null},Nn={box:null,offscreen:null},Ui=null,Kn=null,pi=null,co=0,Uo=0,jo=0;Zt.textFeatureIndex?co=Zt.textFeatureIndex:ot.useRuntimeCollisionCircles&&(co=ot.featureIndex),Zt.verticalTextFeatureIndex&&(Uo=Zt.verticalTextFeatureIndex);const ji=Zt.textBox;if(ji){const Ii=jr=>{let ci=c.WritingMode.horizontal;if(g.allowVerticalPlacement&&!jr&&this.prevPlacement){const mi=this.prevPlacement.placedOrientations[ot.crossTileID];mi&&(this.placedOrientations[ot.crossTileID]=mi,ci=mi,this.markUsedOrientation(g,ci,ot))}return ci},fi=(jr,ci)=>{if(g.allowVerticalPlacement&&ot.numVerticalGlyphVertices>0&&Zt.verticalTextBox){for(const mi of g.writingModes)if(mi===c.WritingMode.vertical?(ir=ci(),Nn=ir):ir=jr(),ir&&ir.box&&ir.box.length)break}else ir=jr()};if(x.get("text-variable-anchor")){let jr=x.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[ot.crossTileID]){const Vr=this.prevPlacement.variableOffsets[ot.crossTileID];jr.indexOf(Vr.anchor)>0&&(jr=jr.filter(ui=>ui!==Vr.anchor),jr.unshift(Vr.anchor))}const ci=(Vr,ui,uo)=>{const Yc=Vr.x2-Vr.x1,Ia=Vr.y2-Vr.y1,oy=ot.textBoxScale,Yp=Ne&&Ce==="never"?ui:null;let fn={box:[],offscreen:!1};const Nh=le!=="never"?2*jr.length:jr.length;for(let Jl=0;Jl<Nh;++Jl){const Ma=this.attemptAnchorPlacement(jr[Jl%jr.length],Vr,Yc,Ia,oy,Ee,Ie,A,S,re,Jl>=jr.length?le:"never",ot,g,uo,Yp,Dt);if(Ma&&(fn=Ma.placedGlyphBoxes,fn&&fn.box&&fn.box.length)){vt=!0,Dr=Ma.shift;break}}return fn};fi(()=>ci(ji,Zt.iconBox,c.WritingMode.horizontal),()=>{const Vr=Zt.verticalTextBox;return g.allowVerticalPlacement&&!(ir&&ir.box&&ir.box.length)&&ot.numVerticalGlyphVertices>0&&Vr?ci(Vr,Zt.verticalIconBox,c.WritingMode.vertical):{box:null,offscreen:null}}),ir&&(vt=ir.box,Zn=ir.offscreen);const mi=Ii(ir&&ir.box);if(!vt&&this.prevPlacement){const Vr=this.prevPlacement.variableOffsets[ot.crossTileID];Vr&&(this.variableOffsets[ot.crossTileID]=Vr,this.markUsedJustification(g,Vr.anchor,ot,mi))}}else{const jr=(ci,mi)=>{const Vr=this.collisionIndex.placeCollisionBox(ci,le,A,S,re.predicate,Dt);return Vr&&Vr.box&&Vr.box.length&&(this.markUsedOrientation(g,mi,ot),this.placedOrientations[ot.crossTileID]=mi),Vr};fi(()=>jr(ji,c.WritingMode.horizontal),()=>{const ci=Zt.verticalTextBox;return g.allowVerticalPlacement&&ot.numVerticalGlyphVertices>0&&ci?jr(ci,c.WritingMode.vertical):{box:null,offscreen:null}}),Ii(ir&&ir.box&&ir.box.length)}}if(Ui=ir,vt=Ui&&Ui.box&&Ui.box.length>0,Zn=Ui&&Ui.offscreen,ot.useRuntimeCollisionCircles){const Ii=g.text.placedSymbolArray.get(ot.centerJustifiedTextSymbolIndex),fi=c.evaluateSizeForFeature(g.textSizeData,G,Ii),jr=x.get("text-padding");Kn=this.collisionIndex.placeCollisionCircles(le,Ii,g.lineVertexArray,g.glyphOffsetArray,fi,S,k,C,d,Ie,re.predicate,ot.collisionCircleDiameter,jr,Dt),Kn.circles.length&&Kn.collisionDetected&&!d&&c.warnOnce("Collisions detected, but collision boxes are not shown"),vt=pe||Kn.circles.length>0&&!Kn.collisionDetected,Zn=Zn&&Kn.offscreen}if(Zt.iconFeatureIndex&&(jo=Zt.iconFeatureIndex),Zt.iconBox){const Ii=fi=>{const jr=Ne&&Dr?mt(fi,Dr.x,Dr.y,Ee,Ie,this.transform.angle):fi;return this.collisionIndex.placeCollisionBox(jr,Ce,A,S,re.predicate,Dt)};Nn&&Nn.box&&Nn.box.length&&Zt.verticalIconBox?(pi=Ii(Zt.verticalIconBox),Or=pi.box.length>0):(pi=Ii(Zt.iconBox),Or=pi.box.length>0),Zn=Zn&&pi.offscreen}const da=Y||ot.numHorizontalGlyphVertices===0&&ot.numVerticalGlyphVertices===0,Yl=ee||ot.numIconVertices===0;if(da||Yl?Yl?da||(Or=Or&&vt):vt=Or&&vt:Or=vt=Or&&vt,vt&&Ui&&Ui.box&&this.collisionIndex.insertCollisionBox(Ui.box,le,x.get("text-ignore-placement"),g.bucketInstanceId,Nn&&Nn.box&&Uo?Uo:co,re.ID),Or&&pi&&this.collisionIndex.insertCollisionBox(pi.box,Ce,x.get("icon-ignore-placement"),g.bucketInstanceId,jo,re.ID),Kn&&(vt&&this.collisionIndex.insertCollisionCircles(Kn.circles,le,x.get("text-ignore-placement"),g.bucketInstanceId,co,re.ID),d)){const Ii=g.bucketInstanceId;let fi=this.collisionCircleArrays[Ii];fi===void 0&&(fi=this.collisionCircleArrays[Ii]=new Oe);for(let jr=0;jr<Kn.circles.length;jr+=4)fi.circles.push(Kn.circles[jr+0]),fi.circles.push(Kn.circles[jr+1]),fi.circles.push(Kn.circles[jr+2]),fi.circles.push(Kn.collisionDetected?1:0)}if(ot.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ot.crossTileID]=new ze(vt||Ye,Or||Ge,Zn||g.justReloaded),l[ot.crossTileID]=!0};if(We){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ot=g.getSortedSymbolIndexes(this.transform.angle);for(let Zt=ot.length-1;Zt>=0;--Zt){const vt=ot[Zt];tr(g.symbolInstances.get(vt),g.collisionArrays[vt])}}else for(let ot=n.symbolInstanceStart;ot<n.symbolInstanceEnd;ot++)tr(g.symbolInstances.get(ot),g.collisionArrays[ot]);if(d&&g.bucketInstanceId in this.collisionCircleArrays){const ot=this.collisionCircleArrays[g.bucketInstanceId];c.invert(ot.invProjMatrix,S),ot.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(n,l,d,g){let x;x=g===c.WritingMode.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[c.getAnchorJustification(l)];const S=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const k of S)k>=0&&(n.text.placedSymbolArray.get(k).crossTileID=x>=0&&k!==x?0:d.crossTileID)}markUsedOrientation(n,l,d){const g=l===c.WritingMode.horizontal||l===c.WritingMode.horizontalOnly?l:0,x=l===c.WritingMode.vertical?l:0,S=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const k of S)n.text.placedSymbolArray.get(k).placedOrientation=g;d.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let d=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const g=l?l.symbolFadeChange(n):1,x=l?l.opacities:{},S=l?l.variableOffsets:{},k=l?l.placedOrientations:{};for(const C in this.placements){const A=this.placements[C],z=x[C];z?(this.opacities[C]=new ye(z,g,A.text,A.icon),d=d||A.text!==z.text.placed||A.icon!==z.icon.placed):(this.opacities[C]=new ye(null,g,A.text,A.icon,A.skipFade),d=d||A.text||A.icon)}for(const C in x){const A=x[C];if(!this.opacities[C]){const z=new ye(A,g,!1,!1);z.isHidden()||(this.opacities[C]=z,d=d||A.text.placed||A.icon.placed)}}for(const C in S)this.variableOffsets[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.variableOffsets[C]=S[C]);for(const C in k)this.placedOrientations[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.placedOrientations[C]=k[C]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:n)}updateLayerOpacities(n,l){const d={};for(const g of l){const x=g.getBucket(n);x&&g.latestFeatureIndex&&n.id===x.layerIds[0]&&this.updateBucketOpacities(x,d,g.collisionBoxArray)}}updateBucketOpacities(n,l,d){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const g=n.layers[0].layout,x=new ye(null,0,!1,!1,!0),S=g.get("text-allow-overlap"),k=g.get("icon-allow-overlap"),C=g.get("text-variable-anchor"),A=g.get("text-rotation-alignment")==="map",z=g.get("text-pitch-alignment")==="map",R=g.get("icon-text-fit")!=="none",G=new ye(null,0,S&&(k||!n.hasIconData()||g.get("icon-optional")),k&&(S||!n.hasTextData()||g.get("text-optional")),!0);!n.collisionArrays&&d&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(d);const re=(Y,ee,le)=>{for(let pe=0;pe<ee/4;pe++)Y.opacityVertexArray.emplaceBack(le);Y.hasVisibleVertices=Y.hasVisibleVertices||le!==Ot};for(let Y=0;Y<n.symbolInstances.length;Y++){const ee=n.symbolInstances.get(Y),{numHorizontalGlyphVertices:le,numVerticalGlyphVertices:pe,crossTileID:Ce}=ee;let oe=this.opacities[Ce];l[Ce]?oe=x:oe||(oe=G,this.opacities[Ce]=oe),l[Ce]=!0;const Ee=ee.numIconVertices>0,Ie=this.placedOrientations[ee.crossTileID],Ne=Ie===c.WritingMode.vertical,We=Ie===c.WritingMode.horizontal||Ie===c.WritingMode.horizontalOnly;if(le>0||pe>0){const Ye=Et(oe.text);re(n.text,le,Ne?Ot:Ye),re(n.text,pe,We?Ot:Ye);const Ge=oe.text.isHidden();[ee.rightJustifiedTextSymbolIndex,ee.centerJustifiedTextSymbolIndex,ee.leftJustifiedTextSymbolIndex].forEach(tr=>{tr>=0&&(n.text.placedSymbolArray.get(tr).hidden=Ge||Ne?1:0)}),ee.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(ee.verticalPlacedTextSymbolIndex).hidden=Ge||We?1:0);const ft=this.variableOffsets[ee.crossTileID];ft&&this.markUsedJustification(n,ft.anchor,ee,Ie);const Dt=this.placedOrientations[ee.crossTileID];Dt&&(this.markUsedJustification(n,"left",ee,Dt),this.markUsedOrientation(n,Dt,ee))}if(Ee){const Ye=Et(oe.icon),Ge=!(R&&ee.verticalPlacedIconSymbolIndex&&Ne);ee.placedIconSymbolIndex>=0&&(re(n.icon,ee.numIconVertices,Ge?Ye:Ot),n.icon.placedSymbolArray.get(ee.placedIconSymbolIndex).hidden=oe.icon.isHidden()),ee.verticalPlacedIconSymbolIndex>=0&&(re(n.icon,ee.numVerticalIconVertices,Ge?Ot:Ye),n.icon.placedSymbolArray.get(ee.verticalPlacedIconSymbolIndex).hidden=oe.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Ye=n.collisionArrays[Y];if(Ye){let Ge=new c.Point(0,0);if(Ye.textBox||Ye.verticalTextBox){let Dt=!0;if(C){const tr=this.variableOffsets[Ce];tr?(Ge=jt(tr.anchor,tr.width,tr.height,tr.textOffset,tr.textBoxScale),A&&Ge._rotate(z?this.transform.angle:-this.transform.angle)):Dt=!1}Ye.textBox&&Lt(n.textCollisionBox.collisionVertexArray,oe.text.placed,!Dt||Ne,Ge.x,Ge.y),Ye.verticalTextBox&&Lt(n.textCollisionBox.collisionVertexArray,oe.text.placed,!Dt||We,Ge.x,Ge.y)}const ft=!!(!We&&Ye.verticalIconBox);Ye.iconBox&&Lt(n.iconCollisionBox.collisionVertexArray,oe.icon.placed,ft,R?Ge.x:0,R?Ge.y:0),Ye.verticalIconBox&&Lt(n.iconCollisionBox.collisionVertexArray,oe.icon.placed,!ft,R?Ge.x:0,R?Ge.y:0)}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);if(n.bucketInstanceId in this.collisionCircleArrays){const Y=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=Y.invProjMatrix,n.placementViewportMatrix=Y.viewportMatrix,n.collisionCircleArray=Y.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,l){const d=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*d>n}setStale(){this.stale=!0}}function Lt(f,n,l,d,g){f.emplaceBack(n?1:0,l?1:0,d||0,g||0),f.emplaceBack(n?1:0,l?1:0,d||0,g||0),f.emplaceBack(n?1:0,l?1:0,d||0,g||0),f.emplaceBack(n?1:0,l?1:0,d||0,g||0)}const lr=Math.pow(2,25),Kt=Math.pow(2,24),gr=Math.pow(2,17),Ar=Math.pow(2,16),qr=Math.pow(2,9),De=Math.pow(2,8),Qe=Math.pow(2,1);function Et(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;const n=f.placed?1:0,l=Math.floor(127*f.opacity);return l*lr+n*Kt+l*gr+n*Ar+l*qr+n*De+l*Qe+n}const Ot=0;class it{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,l,d,g,x){const S=this._bucketParts;for(;this._currentTileIndex<n.length;)if(l.getBucketParts(S,g,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((k,C)=>k.sortKey-C.sortKey));this._currentPartIndex<S.length;)if(l.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,x())return!0;return!1}}class cr{constructor(n,l,d,g,x,S,k,C){this.placement=new St(n,l,S,k,C),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(n,l,d){const g=c.exported.now(),x=()=>!this._forceFullPlacement&&c.exported.now()-g>2;for(;this._currentPlacementIndex>=0;){const S=l[n[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=k)&&(!S.maxzoom||S.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new it(S)),this._inProgressLayer.continuePlacement(d[S.source],this.placement,this._showCollisionBoxes,S,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const Re=512/c.EXTENT/2;class yr{constructor(n,l,d){this.tileID=n,this.bucketInstanceId=d,this._symbolsByKey={};const g=new Map;for(let x=0;x<l.length;x++){const S=l.get(x),k=S.key,C=g.get(k);C?C.push(S):g.set(k,[S])}for(const[x,S]of g){const k={positions:S.map(C=>({x:Math.floor(C.anchorX*Re),y:Math.floor(C.anchorY*Re)})),crossTileIDs:S.map(C=>C.crossTileID)};if(k.positions.length>128){const C=new c.KDBush(k.positions.length,16,Uint16Array);for(const{x:A,y:z}of k.positions)C.add(A,z);C.finish(),delete k.positions,k.index=C}this._symbolsByKey[x]=k}}getScaledCoordinates(n,l){const{x:d,y:g,z:x}=this.tileID.canonical,{x:S,y:k,z:C}=l.canonical,A=Re/Math.pow(2,C-x),z=(k*c.EXTENT+n.anchorY)*A,R=g*c.EXTENT*Re;return{x:Math.floor((S*c.EXTENT+n.anchorX)*A-d*c.EXTENT*Re),y:Math.floor(z-R)}}findMatches(n,l,d){const g=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let x=0;x<n.length;x++){const S=n.get(x);if(S.crossTileID)continue;const k=this._symbolsByKey[S.key];if(!k)continue;const C=this.getScaledCoordinates(S,l);if(k.index){const A=k.index.range(C.x-g,C.y-g,C.x+g,C.y+g).sort();for(const z of A){const R=k.crossTileIDs[z];if(!d[R]){d[R]=!0,S.crossTileID=R;break}}}else if(k.positions)for(let A=0;A<k.positions.length;A++){const z=k.positions[A],R=k.crossTileIDs[A];if(Math.abs(z.x-C.x)<=g&&Math.abs(z.y-C.y)<=g&&!d[R]){d[R]=!0,S.crossTileID=R;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:n})=>n)}}class $t{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Zr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const l=Math.round((n-this.lng)/360);if(l!==0)for(const d in this.indexes){const g=this.indexes[d],x={};for(const S in g){const k=g[S];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+l),x[k.tileID.key]=k}this.indexes[d]=x}this.lng=n}addBucket(n,l,d){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let x=0;x<l.symbolInstances.length;x++)l.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const g=this.usedCrossTileIDs[n.overscaledZ];for(const x in this.indexes){const S=this.indexes[x];if(Number(x)>n.overscaledZ)for(const k in S){const C=S[k];C.tileID.isChildOf(n)&&C.findMatches(l.symbolInstances,n,g)}else{const k=S[n.scaledTo(Number(x)).key];k&&k.findMatches(l.symbolInstances,n,g)}}for(let x=0;x<l.symbolInstances.length;x++){const S=l.symbolInstances.get(x);S.crossTileID||(S.crossTileID=d.generate(),g[S.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new yr(n,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(n,l){for(const d of l.getCrossTileIDsLists())for(const g of d)delete this.usedCrossTileIDs[n][g]}removeStaleBuckets(n){let l=!1;for(const d in this.indexes){const g=this.indexes[d];for(const x in g)n[g[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,g[x]),delete g[x],l=!0)}return l}}class Qt{constructor(){this.layerIndexes={},this.crossTileIDs=new $t,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,l,d){let g=this.layerIndexes[n.id];g===void 0&&(g=this.layerIndexes[n.id]=new Zr);let x=!1;const S={};g.handleWrapJump(d);for(const k of l){const C=k.getBucket(n);C&&n.id===C.layerIds[0]&&(C.bucketInstanceId||(C.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(k.tileID,C,this.crossTileIDs)&&(x=!0),S[C.bucketInstanceId]=!0)}return g.removeStaleBuckets(S)&&(x=!0),x}pruneUnusedLayers(n){const l={};n.forEach(d=>{l[d]=!0});for(const d in this.layerIndexes)l[d]||delete this.layerIndexes[d]}}const hr=(f,n)=>c.emitValidationErrors(f,n&&n.filter(l=>l.identifier!=="source.canvas")),Nr=c.pick(c.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),er=c.pick(c.operations,["setCenter","setZoom","setBearing","setPitch"]),On=c.emptyStyle();class Lr extends c.Evented{constructor(n,l={}){super(),this.map=n,this.dispatcher=new fr(Wt(),this,n._getMapId()),this.imageManager=new Nt,this.imageManager.setEventedParent(this),this.glyphManager=new kt(n._requestManager,l.localIdeographFontFamily),this.lineAtlas=new or(256,512),this.crossTileSymbolIndex=new Qt,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.getReferrer());const d=this;this._rtlTextPluginCallback=Lr.registerForPluginStateChange(g=>{d.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(x,S)=>{if(c.triggerPluginCompletionEvent(x),S&&S.every(k=>k))for(const k in d.sourceCaches){const C=d.sourceCaches[k].getSource().type;C!=="vector"&&C!=="geojson"||d.sourceCaches[k].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const x=this.sourceCaches[g.sourceId];if(!x)return;const S=x.getSource();if(S&&S.vectorLayerIds)for(const k in this._layers){const C=this._layers[k];C.source===S.id&&this._validateLayer(C)}})}loadURL(n,l={},d){this.fire(new c.Event("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;const g=this.map._requestManager.transformRequest(n,q.Style);this._request=c.getJSON(g,(x,S)=>{this._request=null,x?this.fire(new c.ErrorEvent(x)):S&&this._load(S,l,d)})}loadJSON(n,l={},d){this.fire(new c.Event("dataloading",{dataType:"style"})),this._request=c.exported.frame(()=>{this._request=null,l.validate=l.validate!==!1,this._load(n,l,d)})}loadEmpty(){this.fire(new c.Event("dataloading",{dataType:"style"})),this._load(On,{validate:!1})}_load(n,l,d){const g=l.transformStyle?l.transformStyle(d,n):n;if(!l.validate||!hr(this,c.validateStyle(g))){this._loaded=!0,this.stylesheet=g;for(const x in g.sources)this.addSource(x,g.sources[x],{validate:!1});g.sprite?this._loadSprite(g.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(g.glyphs),this._createLayers(),this.light=new rr(this.stylesheet.light),this.map.setTerrain(this.stylesheet.terrain),this.fire(new c.Event("data",{dataType:"style"})),this.fire(new c.Event("style.load"))}}_createLayers(){const n=c.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",n),this._order=n.map(l=>l.id),this._layers={},this._serializedLayers=null;for(const l of n){const d=c.createStyleLayer(l);d.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=d}}_loadSprite(n,l=!1,d=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,x,S,k){const C=Ze(g),A=C.length,z=S>1?"@2x":"",R={},G={},re={};for(const{id:Y,url:ee}of C){const le=x.transformRequest(x.normalizeSpriteURL(ee,z,".json"),q.SpriteJSON),pe=`${Y}_${le.url}`;R[pe]=c.getJSON(le,(Ee,Ie)=>{delete R[pe],G[Y]=Ie,Le(k,G,re,Ee,A)});const Ce=x.transformRequest(x.normalizeSpriteURL(ee,z,".png"),q.SpriteImage),oe=`${Y}_${Ce.url}`;R[oe]=W.getImage(Ce,(Ee,Ie)=>{delete R[oe],re[Y]=Ie,Le(k,G,re,Ee,A)})}return{cancel(){for(const Y of Object.values(R))Y.cancel()}}}(n,this.map._requestManager,this.map.getPixelRatio(),(g,x)=>{if(this._spriteRequest=null,g)this.fire(new c.ErrorEvent(g));else if(x)for(const S in x){this._spritesImagesIds[S]=[];const k=this._spritesImagesIds[S]?this._spritesImagesIds[S].filter(C=>!(C in x)):[];for(const C of k)this.imageManager.removeImage(C),this._changedImages[C]=!0;for(const C in x[S]){const A=S==="default"?C:`${S}:${C}`;this._spritesImagesIds[S].push(A),A in this.imageManager.images?this.imageManager.updateImage(A,x[S][C],!1):this.imageManager.addImage(A,x[S][C]),l&&(this._changedImages[A]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"})),d&&d(g)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))}_validateLayer(n){const l=this.sourceCaches[n.source];if(!l)return;const d=n.sourceLayer;if(!d)return;const g=l.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(d)===-1)&&this.fire(new c.ErrorEvent(new Error(`Source layer "${d}" does not exist on source "${g.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n){const l=this._serializedAllLayers();if(!n||n.length===0)return Object.values(l);const d=[];for(const g of n)l[g]&&d.push(l[g]);return d}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const l=Object.keys(this._layers);for(const d of l){const g=this._layers[d];g.type!=="custom"&&(n[d]=g.serialize())}return n}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const l=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(g.length||x.length)&&this._updateWorkerLayers(g,x);for(const S in this._updatedSources){const k=this._updatedSources[S];if(k==="reload")this._reloadSource(S);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(n);this.light.updateTransitions(n),this._resetUpdates()}const d={};for(const g in this.sourceCaches){const x=this.sourceCaches[g];d[g]=x.used,x.used=!1}for(const g of this._order){const x=this._layers[g];x.recalculate(n,this._availableImages),!x.isHidden(n.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const g in d){const x=this.sourceCaches[g];d[g]!==x.used&&x.fire(new c.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(n),this.z=n.zoom,l&&this.fire(new c.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,l){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(n),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,l={}){this._checkLoaded();const d=this.serialize();if(n=l.transformStyle?l.transformStyle(d,n):n,hr(this,c.validateStyle(n)))return!1;(n=c.clone$1(n)).layers=c.derefLayers(n.layers);const g=c.diffStyles(d,n).filter(S=>!(S.command in er));if(g.length===0)return!1;const x=g.filter(S=>!(S.command in Nr));if(x.length>0)throw new Error(`Unimplemented: ${x.map(S=>S.command).join(", ")}.`);for(const S of g)S.command!=="setTransition"&&this[S.command].apply(this,S.args);return this.stylesheet=n,!0}addImage(n,l){if(this.getImage(n))return this.fire(new c.ErrorEvent(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,l),this._afterImageUpdated(n)}updateImage(n,l){this.imageManager.updateImage(n,l)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new c.ErrorEvent(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,l,d={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(c.validateStyle.source,`sources.${n}`,l,null,d))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const g=this.sourceCaches[n]=new Tr(n,l,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:n})),g.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===n)return this.fire(new c.ErrorEvent(new Error(`Source "${n}" cannot be removed while layer "${d}" is using it.`)));const l=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],l.fire(new c.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,l){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const d=this.sourceCaches[n].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(l),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,l,d={}){this._checkLoaded();const g=n.id;if(this.getLayer(g))return void this.fire(new c.ErrorEvent(new Error(`Layer "${g}" already exists on this map.`)));let x;if(n.type==="custom"){if(hr(this,c.validateCustomStyleLayer(n)))return;x=c.createStyleLayer(n)}else{if(typeof n.source=="object"&&(this.addSource(g,n.source),n=c.clone$1(n),n=c.extend(n,{source:g})),this._validate(c.validateStyle.layer,`layers.${g}`,n,{arrayIndex:-1},d))return;x=c.createStyleLayer(n),this._validateLayer(x),x.setEventedParent(this,{layer:{id:g}})}const S=l?this._order.indexOf(l):this._order.length;if(l&&S===-1)this.fire(new c.ErrorEvent(new Error(`Cannot add layer "${g}" before non-existing layer "${l}".`)));else{if(this._order.splice(S,0,g),this._layerOrderChanged=!0,this._layers[g]=x,this._removedLayers[g]&&x.source&&x.type!=="custom"){const k=this._removedLayers[g];delete this._removedLayers[g],k.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(n,l){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new c.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===l)return;const d=this._order.indexOf(n);this._order.splice(d,1);const g=l?this._order.indexOf(l):this._order.length;l&&g===-1?this.fire(new c.ErrorEvent(new Error(`Cannot move layer "${n}" before non-existing layer "${l}".`))):(this._order.splice(g,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const l=this._layers[n];if(!l)return void this.fire(new c.ErrorEvent(new Error(`Cannot remove non-existing layer "${n}".`)));l.setEventedParent(null);const d=this._order.indexOf(n);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=l,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],l.onRemove&&l.onRemove(this.map)}getLayer(n){return this._layers[n]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,l,d){this._checkLoaded();const g=this.getLayer(n);g?g.minzoom===l&&g.maxzoom===d||(l!=null&&(g.minzoom=l),d!=null&&(g.maxzoom=d),this._updateLayer(g)):this.fire(new c.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,l,d={}){this._checkLoaded();const g=this.getLayer(n);if(g){if(!c.deepEqual(g.filter,l))return l==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(c.validateStyle.filter,`layers.${g.id}.filter`,l,null,d)||(g.filter=c.clone$1(l),this._updateLayer(g)))}else this.fire(new c.ErrorEvent(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return c.clone$1(this.getLayer(n).filter)}setLayoutProperty(n,l,d,g={}){this._checkLoaded();const x=this.getLayer(n);x?c.deepEqual(x.getLayoutProperty(l),d)||(x.setLayoutProperty(l,d,g),this._updateLayer(x)):this.fire(new c.ErrorEvent(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,l){const d=this.getLayer(n);if(d)return d.getLayoutProperty(l);this.fire(new c.ErrorEvent(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,l,d,g={}){this._checkLoaded();const x=this.getLayer(n);x?c.deepEqual(x.getPaintProperty(l),d)||(x.setPaintProperty(l,d,g)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new c.ErrorEvent(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,l){return this.getLayer(n).getPaintProperty(l)}setFeatureState(n,l){this._checkLoaded();const d=n.source,g=n.sourceLayer,x=this.sourceCaches[d];if(x===void 0)return void this.fire(new c.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)));const S=x.getSource().type;S==="geojson"&&g?this.fire(new c.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||g?(n.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),x.setFeatureState(g,n.id,l)):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,l){this._checkLoaded();const d=n.source,g=this.sourceCaches[d];if(g===void 0)return void this.fire(new c.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)));const x=g.getSource().type,S=x==="vector"?n.sourceLayer:void 0;x!=="vector"||S?l&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new c.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(S,n.id,l):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const l=n.source,d=n.sourceLayer,g=this.sourceCaches[l];if(g!==void 0)return g.getSource().type!=="vector"||d?(n.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),g.getFeatureState(d,n.id)):void this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.ErrorEvent(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const n=c.mapObject(this.sourceCaches,g=>g.serialize()),l=this._serializeByIds(this._order),d=this.stylesheet;return c.filterObject({version:d.version,name:d.name,metadata:d.metadata,light:d.light,center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,sprite:d.sprite,glyphs:d.glyphs,transition:d.transition,sources:n,layers:l},g=>g!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const l=S=>this._layers[S].type==="fill-extrusion",d={},g=[];for(let S=this._order.length-1;S>=0;S--){const k=this._order[S];if(l(k)){d[k]=S;for(const C of n){const A=C[k];if(A)for(const z of A)g.push(z)}}}g.sort((S,k)=>k.intersectionZ-S.intersectionZ);const x=[];for(let S=this._order.length-1;S>=0;S--){const k=this._order[S];if(l(k))for(let C=g.length-1;C>=0;C--){const A=g[C].feature;if(d[A.layer.id]<S)break;x.push(A),g.pop()}else for(const C of n){const A=C[k];if(A)for(const z of A)x.push(z.feature)}}return x}queryRenderedFeatures(n,l,d){l&&l.filter&&this._validate(c.validateStyle.filter,"queryRenderedFeatures.filter",l.filter,null,l);const g={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new c.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const k of l.layers){const C=this._layers[k];if(!C)return this.fire(new c.ErrorEvent(new Error(`The layer '${k}' does not exist in the map's style and cannot be queried for features.`))),[];g[C.source]=!0}}const x=[];l.availableImages=this._availableImages;const S=this._serializedAllLayers();for(const k in this.sourceCaches)l.layers&&!g[k]||x.push(pr(this.sourceCaches[k],this._layers,S,n,l,d));return this.placement&&x.push(function(k,C,A,z,R,G,re){const Y={},ee=G.queryRenderedSymbols(z),le=[];for(const pe of Object.keys(ee).map(Number))le.push(re[pe]);le.sort(Vt);for(const pe of le){const Ce=pe.featureIndex.lookupSymbolFeatures(ee[pe.bucketInstanceId],C,pe.bucketIndex,pe.sourceLayerIndex,R.filter,R.layers,R.availableImages,k);for(const oe in Ce){const Ee=Y[oe]=Y[oe]||[],Ie=Ce[oe];Ie.sort((Ne,We)=>{const Ye=pe.featureSortOrder;if(Ye){const Ge=Ye.indexOf(Ne.featureIndex);return Ye.indexOf(We.featureIndex)-Ge}return We.featureIndex-Ne.featureIndex});for(const Ne of Ie)Ee.push(Ne)}}for(const pe in Y)Y[pe].forEach(Ce=>{const oe=Ce.feature,Ee=A[k[pe].source].getFeatureState(oe.layer["source-layer"],oe.id);oe.source=oe.layer.source,oe.layer["source-layer"]&&(oe.sourceLayer=oe.layer["source-layer"]),oe.state=Ee});return Y}(this._layers,S,this.sourceCaches,n,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(n,l){l&&l.filter&&this._validate(c.validateStyle.filter,"querySourceFeatures.filter",l.filter,null,l);const d=this.sourceCaches[n];return d?function(g,x){const S=g.getRenderableIds().map(A=>g.getTileByID(A)),k=[],C={};for(let A=0;A<S.length;A++){const z=S[A],R=z.tileID.canonical.key;C[R]||(C[R]=!0,z.querySourceFeatures(k,x))}return k}(d,l):[]}addSourceType(n,l,d){return Lr.getSourceType(n)?d(new Error(`A source type called "${n}" already exists.`)):(Lr.setSourceType(n,l),l.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:n,url:l.workerSourceURL},d):d(null,null))}getLight(){return this.light.getLight()}setLight(n,l={}){this._checkLoaded();const d=this.light.getLight();let g=!1;for(const S in n)if(!c.deepEqual(n[S],d[S])){g=!0;break}if(!g)return;const x={now:c.exported.now(),transition:c.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,l),this.light.updateTransitions(x)}_validate(n,l,d,g,x={}){return(!x||x.validate!==!1)&&hr(this,n.call(c.validateStyle,c.extend({key:l,style:this.serialize(),value:d,styleSpec:c.v8Spec},g)))}_remove(n=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const d=this.sourceCaches[l];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(n)}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const l in this.sourceCaches)this.sourceCaches[l].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,l,d,g,x=!1){let S=!1,k=!1;const C={};for(const A of this._order){const z=this._layers[A];if(z.type!=="symbol")continue;if(!C[z.source]){const G=this.sourceCaches[z.source];C[z.source]=G.getRenderableIds(!0).map(re=>G.getTileByID(re)).sort((re,Y)=>Y.tileID.overscaledZ-re.tileID.overscaledZ||(re.tileID.isLessThan(Y.tileID)?-1:1))}const R=this.crossTileSymbolIndex.addLayer(z,C[z.source],n.center.lng);S=S||R}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.exported.now(),n.zoom))&&(this.pauseablePlacement=new cr(n,this.map.terrain,this._order,x,l,d,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,C),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.exported.now()),k=!0),S&&this.pauseablePlacement.placement.setStale()),k||S)for(const A of this._order){const z=this._layers[A];z.type==="symbol"&&this.placement.updateLayerOpacities(z,C[z.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.exported.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,l,d){this.imageManager.getImages(l.icons,d),this._updateTilesForChangedImages();const g=this.sourceCaches[l.source];g&&g.setDependencies(l.tileID.key,l.type,l.icons)}getGlyphs(n,l,d){this.glyphManager.getGlyphs(l.stacks,d);const g=this.sourceCaches[l.source];g&&g.setDependencies(l.tileID.key,l.type,[""])}getResource(n,l,d){return c.makeRequest(l,d)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,l={}){this._checkLoaded(),n&&this._validate(c.validateStyle.glyphs,"glyphs",n,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}addSprite(n,l,d={},g){this._checkLoaded();const x=[{id:n,url:l}],S=[...Ze(this.stylesheet.sprite),...x];this._validate(c.validateStyle.sprite,"sprite",S,null,d)||(this.stylesheet.sprite=S,this._loadSprite(x,!0,g))}removeSprite(n){this._checkLoaded();const l=Ze(this.stylesheet.sprite);if(l.find(d=>d.id===n)){if(this._spritesImagesIds[n])for(const d of this._spritesImagesIds[n])this.imageManager.removeImage(d),this._changedImages[d]=!0;l.splice(l.findIndex(d=>d.id===n),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))}else this.fire(new c.ErrorEvent(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return Ze(this.stylesheet.sprite)}setSprite(n,l={},d){this._checkLoaded(),n&&this._validate(c.validateStyle.sprite,"sprite",n,null,l)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,d):(this._unloadSprite(),d&&d(null)))}}Lr.getSourceType=function(f){return Pr[f]},Lr.setSourceType=function(f,n){Pr[f]=n},Lr.registerForPluginStateChange=c.registerForPluginStateChange;var Yi=c.createLayout([{name:"a_pos",type:"Int16",components:2}]),qn="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Dn={prelude:xr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:xr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:xr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:xr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:xr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:xr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:xr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:xr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:xr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:xr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:xr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:xr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:xr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:xr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:xr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:xr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:xr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:xr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:xr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:xr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:xr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:xr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:xr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:xr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:xr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:xr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:xr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",qn),terrainDepth:xr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",qn),terrainCoords:xr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",qn)};function xr(f,n){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=n.match(/attribute ([\w]+) ([\w]+)/g),g=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=x?x.concat(g):g,k={};return{fragmentSource:f=f.replace(l,(C,A,z,R,G)=>(k[G]=!0,A==="define"?`
#ifndef HAS_UNIFORM_u_${G}
varying ${z} ${R} ${G};
#else
uniform ${z} ${R} u_${G};
#endif
`:`
#ifdef HAS_UNIFORM_u_${G}
    ${z} ${R} ${G} = u_${G};
#endif
`)),vertexSource:n=n.replace(l,(C,A,z,R,G)=>{const re=R==="float"?"vec2":"vec4",Y=G.match(/color/)?"color":re;return k[G]?A==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
attribute ${z} ${re} a_${G};
varying ${z} ${R} ${G};
#else
uniform ${z} ${R} u_${G};
#endif
`:Y==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = a_${G};
#else
    ${z} ${R} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = unpack_mix_${Y}(a_${G}, u_${G}_t);
#else
    ${z} ${R} ${G} = u_${G};
#endif
`:A==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
attribute ${z} ${re} a_${G};
#else
uniform ${z} ${R} u_${G};
#endif
`:Y==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${z} ${R} ${G} = a_${G};
#else
    ${z} ${R} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${z} ${R} ${G} = unpack_mix_${Y}(a_${G}, u_${G}_t);
#else
    ${z} ${R} ${G} = u_${G};
#endif
`}),staticAttributes:d,staticUniforms:S}}class Gn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,l,d,g,x,S,k,C,A){this.context=n;let z=this.boundPaintVertexBuffers.length!==g.length;for(let R=0;!z&&R<g.length;R++)this.boundPaintVertexBuffers[R]!==g[R]&&(z=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==d||z||this.boundIndexBuffer!==x||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==C||this.boundDynamicVertexBuffer3!==A?this.freshBind(l,d,g,x,S,k,C,A):(n.bindVertexArray.set(this.vao),k&&k.bind(),x&&x.dynamicDraw&&x.bind(),C&&C.bind(),A&&A.bind())}freshBind(n,l,d,g,x,S,k,C){const A=n.numAttributes,z=this.context,R=z.gl;this.vao&&this.destroy(),this.vao=z.createVertexArray(),z.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=g,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=C,l.enableAttributes(R,n);for(const G of d)G.enableAttributes(R,n);S&&S.enableAttributes(R,n),k&&k.enableAttributes(R,n),C&&C.enableAttributes(R,n),l.bind(),l.setVertexAttribPointers(R,n,x);for(const G of d)G.bind(),G.setVertexAttribPointers(R,n,x);S&&(S.bind(),S.setVertexAttribPointers(R,n,x)),g&&g.bind(),k&&(k.bind(),k.setVertexAttribPointers(R,n,x)),C&&(C.bind(),C.setVertexAttribPointers(R,n,x)),z.currentNumAttributes=A}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function vr(f){const n=[];for(let l=0;l<f.length;l++){if(f[l]===null)continue;const d=f[l].split(" ");n.push(d.pop())}return n}class _n{constructor(n,l,d,g,x,S,k){const C=n.gl;this.program=C.createProgram();const A=vr(d.staticAttributes),z=g?g.getBinderAttributes():[],R=A.concat(z),G=Dn.prelude.staticUniforms?vr(Dn.prelude.staticUniforms):[],re=d.staticUniforms?vr(d.staticUniforms):[],Y=g?g.getBinderUniforms():[],ee=G.concat(re).concat(Y),le=[];for(const We of ee)le.indexOf(We)<0&&le.push(We);const pe=g?g.defines():[];S&&pe.push("#define OVERDRAW_INSPECTOR;"),k&&pe.push("#define TERRAIN3D;");const Ce=pe.concat(Dn.prelude.fragmentSource,d.fragmentSource).join(`
`),oe=pe.concat(Dn.prelude.vertexSource,d.vertexSource).join(`
`),Ee=C.createShader(C.FRAGMENT_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);C.shaderSource(Ee,Ce),C.compileShader(Ee),C.attachShader(this.program,Ee);const Ie=C.createShader(C.VERTEX_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);C.shaderSource(Ie,oe),C.compileShader(Ie),C.attachShader(this.program,Ie),this.attributes={};const Ne={};this.numAttributes=R.length;for(let We=0;We<this.numAttributes;We++)R[We]&&(C.bindAttribLocation(this.program,We,R[We]),this.attributes[R[We]]=We);C.linkProgram(this.program),C.deleteShader(Ie),C.deleteShader(Ee);for(let We=0;We<le.length;We++){const Ye=le[We];if(Ye&&!Ne[Ye]){const Ge=C.getUniformLocation(this.program,Ye);Ge&&(Ne[Ye]=Ge)}}this.fixedUniforms=x(n,Ne),this.terrainUniforms=((We,Ye)=>({u_depth:new c.Uniform1i(We,Ye.u_depth),u_terrain:new c.Uniform1i(We,Ye.u_terrain),u_terrain_dim:new c.Uniform1f(We,Ye.u_terrain_dim),u_terrain_matrix:new c.UniformMatrix4f(We,Ye.u_terrain_matrix),u_terrain_unpack:new c.Uniform4f(We,Ye.u_terrain_unpack),u_terrain_exaggeration:new c.Uniform1f(We,Ye.u_terrain_exaggeration)}))(n,Ne),this.binderUniforms=g?g.getUniforms(n,Ne):[]}draw(n,l,d,g,x,S,k,C,A,z,R,G,re,Y,ee,le,pe,Ce){const oe=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(d),n.setStencilMode(g),n.setColorMode(x),n.setCullFace(S),C){n.activeTexture.set(oe.TEXTURE2),oe.bindTexture(oe.TEXTURE_2D,C.depthTexture),n.activeTexture.set(oe.TEXTURE3),oe.bindTexture(oe.TEXTURE_2D,C.texture);for(const Ie in this.terrainUniforms)this.terrainUniforms[Ie].set(C[Ie])}for(const Ie in this.fixedUniforms)this.fixedUniforms[Ie].set(k[Ie]);ee&&ee.setUniforms(n,this.binderUniforms,re,{zoom:Y});let Ee=0;switch(l){case oe.LINES:Ee=2;break;case oe.TRIANGLES:Ee=3;break;case oe.LINE_STRIP:Ee=1}for(const Ie of G.get()){const Ne=Ie.vaos||(Ie.vaos={});(Ne[A]||(Ne[A]=new Gn)).bind(n,this,z,ee?ee.getPaintVertexBuffers():[],R,Ie.vertexOffset,le,pe,Ce),oe.drawElements(l,Ie.primitiveLength*Ee,oe.UNSIGNED_SHORT,Ie.primitiveOffset*Ee*2)}}}function So(f,n,l){const d=1/he(l,1,n.transform.tileZoom),g=Math.pow(2,l.tileID.overscaledZ),x=l.tileSize*Math.pow(2,n.transform.tileZoom)/g,S=x*(l.tileID.canonical.x+l.tileID.wrap*g),k=x*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[d,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[S>>16,k>>16],u_pixel_coord_lower:[65535&S,65535&k]}}const Fo=(f,n,l,d)=>{const g=n.style.light,x=g.properties.get("position"),S=[x.x,x.y,x.z],k=function(){var A=new c.ARRAY_TYPE(9);return c.ARRAY_TYPE!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A}();g.properties.get("anchor")==="viewport"&&function(A,z){var R=Math.sin(z),G=Math.cos(z);A[0]=G,A[1]=R,A[2]=0,A[3]=-R,A[4]=G,A[5]=0,A[6]=0,A[7]=0,A[8]=1}(k,-n.transform.angle),function(A,z,R){var G=z[0],re=z[1],Y=z[2];A[0]=G*R[0]+re*R[3]+Y*R[6],A[1]=G*R[1]+re*R[4]+Y*R[7],A[2]=G*R[2]+re*R[5]+Y*R[8]}(S,S,k);const C=g.properties.get("color");return{u_matrix:f,u_lightpos:S,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[C.r,C.g,C.b],u_vertical_gradient:+l,u_opacity:d}},Ur=(f,n,l,d,g,x,S)=>c.extend(Fo(f,n,l,d),So(x,n,S),{u_height_factor:-Math.pow(2,g.overscaledZ)/S.tileSize/8}),Yt=f=>({u_matrix:f}),Gr=(f,n,l,d)=>c.extend(Yt(f),So(l,n,d)),Bn=(f,n)=>({u_matrix:f,u_world:n}),nr=(f,n,l,d,g)=>c.extend(Gr(f,n,l,d),{u_world:g}),Z=(f,n,l,d)=>{const g=f.transform;let x,S;if(d.paint.get("circle-pitch-alignment")==="map"){const k=he(l,1,g.zoom);x=!0,S=[k,k]}else x=!1,S=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:f.translatePosMatrix(n.posMatrix,l,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:f.pixelRatio,u_extrude_scale:S}},Q=(f,n,l)=>{const d=he(l,1,n.zoom),g=Math.pow(2,n.zoom-l.tileID.overscaledZ),x=l.tileID.overscaleFactor();return{u_matrix:f,u_camera_to_center_distance:n.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[n.pixelsToGLUnits[0]/(d*g),n.pixelsToGLUnits[1]/(d*g)],u_overscale_factor:x}},ve=(f,n,l=1)=>({u_matrix:f,u_color:n,u_overlay:0,u_overlay_scale:l}),He=f=>({u_matrix:f}),gt=(f,n,l,d)=>({u_matrix:f,u_extrude_scale:he(n,1,l),u_intensity:d});function Ue(f,n){const l=Math.pow(2,n.canonical.z),d=n.canonical.y;return[new c.MercatorCoordinate(0,d/l).toLngLat().lat,new c.MercatorCoordinate(0,(d+1)/l).toLngLat().lat]}const we=(f,n,l,d)=>{const g=f.transform;return{u_matrix:ut(f,n,l,d),u_ratio:1/he(n,1,g.zoom),u_device_pixel_ratio:f.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Tt=(f,n,l,d,g)=>c.extend(we(f,n,l,g),{u_image:0,u_image_height:d}),qt=(f,n,l,d,g)=>{const x=f.transform,S=nt(n,x);return{u_matrix:ut(f,n,l,g),u_texsize:n.imageAtlasTexture.size,u_ratio:1/he(n,1,x.zoom),u_device_pixel_ratio:f.pixelRatio,u_image:0,u_scale:[S,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},qe=(f,n,l,d,g,x)=>{const S=f.lineAtlas,k=nt(n,f.transform),C=l.layout.get("line-cap")==="round",A=S.getDash(d.from,C),z=S.getDash(d.to,C),R=A.width*g.fromScale,G=z.width*g.toScale;return c.extend(we(f,n,l,x),{u_patternscale_a:[k/R,-A.height/2],u_patternscale_b:[k/G,-z.height/2],u_sdfgamma:S.width/(256*Math.min(R,G)*f.pixelRatio)/2,u_image:0,u_tex_y_a:A.y,u_tex_y_b:z.y,u_mix:g.t})};function nt(f,n){return 1/he(f,1,n.tileZoom)}function ut(f,n,l,d){return f.translatePosMatrix(d?d.posMatrix:n.tileID.posMatrix,n,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const yt=(f,n,l,d,g)=>{return{u_matrix:f,u_tl_parent:n,u_scale_parent:l,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(S=g.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(x=g.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:Ft(g.paint.get("raster-hue-rotate"))};var x,S};function Ft(f){f*=Math.PI/180;const n=Math.sin(f),l=Math.cos(f);return[(2*l+1)/3,(-Math.sqrt(3)*n-l+1)/3,(Math.sqrt(3)*n-l+1)/3]}const Xt=(f,n,l,d,g,x,S,k,C,A)=>{const z=g.transform;return{u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:z.cameraToCenterDistance,u_pitch:z.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:z.width/z.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:S,u_coord_matrix:k,u_is_text:+C,u_pitch_with_map:+d,u_texsize:A,u_texture:0}},Gt=(f,n,l,d,g,x,S,k,C,A,z)=>{const R=g.transform;return c.extend(Xt(f,n,l,d,g,x,S,k,C,A),{u_gamma_scale:d?Math.cos(R._pitch)*R.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+z})},nn=(f,n,l,d,g,x,S,k,C,A)=>c.extend(Gt(f,n,l,d,g,x,S,k,!0,C,!0),{u_texsize_icon:A,u_texture_icon:1}),ar=(f,n,l)=>({u_matrix:f,u_opacity:n,u_color:l}),Jr=(f,n,l,d,g,x)=>c.extend(function(S,k,C,A){const z=C.imageManager.getPattern(S.from.toString()),R=C.imageManager.getPattern(S.to.toString()),{width:G,height:re}=C.imageManager.getPixelSize(),Y=Math.pow(2,A.tileID.overscaledZ),ee=A.tileSize*Math.pow(2,C.transform.tileZoom)/Y,le=ee*(A.tileID.canonical.x+A.tileID.wrap*Y),pe=ee*A.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:R.tl,u_pattern_br_b:R.br,u_texsize:[G,re],u_mix:k.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:R.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/he(A,1,C.transform.tileZoom),u_pixel_coord_upper:[le>>16,pe>>16],u_pixel_coord_lower:[65535&le,65535&pe]}}(d,x,l,g),{u_matrix:f,u_opacity:n}),Si={fillExtrusion:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_lightpos:new c.Uniform3f(f,n.u_lightpos),u_lightintensity:new c.Uniform1f(f,n.u_lightintensity),u_lightcolor:new c.Uniform3f(f,n.u_lightcolor),u_vertical_gradient:new c.Uniform1f(f,n.u_vertical_gradient),u_opacity:new c.Uniform1f(f,n.u_opacity)}),fillExtrusionPattern:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_lightpos:new c.Uniform3f(f,n.u_lightpos),u_lightintensity:new c.Uniform1f(f,n.u_lightintensity),u_lightcolor:new c.Uniform3f(f,n.u_lightcolor),u_vertical_gradient:new c.Uniform1f(f,n.u_vertical_gradient),u_height_factor:new c.Uniform1f(f,n.u_height_factor),u_image:new c.Uniform1i(f,n.u_image),u_texsize:new c.Uniform2f(f,n.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,n.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,n.u_scale),u_fade:new c.Uniform1f(f,n.u_fade),u_opacity:new c.Uniform1f(f,n.u_opacity)}),fill:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix)}),fillPattern:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_image:new c.Uniform1i(f,n.u_image),u_texsize:new c.Uniform2f(f,n.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,n.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,n.u_scale),u_fade:new c.Uniform1f(f,n.u_fade)}),fillOutline:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_world:new c.Uniform2f(f,n.u_world)}),fillOutlinePattern:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_world:new c.Uniform2f(f,n.u_world),u_image:new c.Uniform1i(f,n.u_image),u_texsize:new c.Uniform2f(f,n.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,n.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,n.u_scale),u_fade:new c.Uniform1f(f,n.u_fade)}),circle:(f,n)=>({u_camera_to_center_distance:new c.Uniform1f(f,n.u_camera_to_center_distance),u_scale_with_map:new c.Uniform1i(f,n.u_scale_with_map),u_pitch_with_map:new c.Uniform1i(f,n.u_pitch_with_map),u_extrude_scale:new c.Uniform2f(f,n.u_extrude_scale),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_matrix:new c.UniformMatrix4f(f,n.u_matrix)}),collisionBox:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_camera_to_center_distance:new c.Uniform1f(f,n.u_camera_to_center_distance),u_pixels_to_tile_units:new c.Uniform1f(f,n.u_pixels_to_tile_units),u_extrude_scale:new c.Uniform2f(f,n.u_extrude_scale),u_overscale_factor:new c.Uniform1f(f,n.u_overscale_factor)}),collisionCircle:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_inv_matrix:new c.UniformMatrix4f(f,n.u_inv_matrix),u_camera_to_center_distance:new c.Uniform1f(f,n.u_camera_to_center_distance),u_viewport_size:new c.Uniform2f(f,n.u_viewport_size)}),debug:(f,n)=>({u_color:new c.UniformColor(f,n.u_color),u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_overlay:new c.Uniform1i(f,n.u_overlay),u_overlay_scale:new c.Uniform1f(f,n.u_overlay_scale)}),clippingMask:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix)}),heatmap:(f,n)=>({u_extrude_scale:new c.Uniform1f(f,n.u_extrude_scale),u_intensity:new c.Uniform1f(f,n.u_intensity),u_matrix:new c.UniformMatrix4f(f,n.u_matrix)}),heatmapTexture:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_world:new c.Uniform2f(f,n.u_world),u_image:new c.Uniform1i(f,n.u_image),u_color_ramp:new c.Uniform1i(f,n.u_color_ramp),u_opacity:new c.Uniform1f(f,n.u_opacity)}),hillshade:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_image:new c.Uniform1i(f,n.u_image),u_latrange:new c.Uniform2f(f,n.u_latrange),u_light:new c.Uniform2f(f,n.u_light),u_shadow:new c.UniformColor(f,n.u_shadow),u_highlight:new c.UniformColor(f,n.u_highlight),u_accent:new c.UniformColor(f,n.u_accent)}),hillshadePrepare:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_image:new c.Uniform1i(f,n.u_image),u_dimension:new c.Uniform2f(f,n.u_dimension),u_zoom:new c.Uniform1f(f,n.u_zoom),u_unpack:new c.Uniform4f(f,n.u_unpack)}),line:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_ratio:new c.Uniform1f(f,n.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,n.u_units_to_pixels)}),lineGradient:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_ratio:new c.Uniform1f(f,n.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,n.u_units_to_pixels),u_image:new c.Uniform1i(f,n.u_image),u_image_height:new c.Uniform1f(f,n.u_image_height)}),linePattern:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_texsize:new c.Uniform2f(f,n.u_texsize),u_ratio:new c.Uniform1f(f,n.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_image:new c.Uniform1i(f,n.u_image),u_units_to_pixels:new c.Uniform2f(f,n.u_units_to_pixels),u_scale:new c.Uniform3f(f,n.u_scale),u_fade:new c.Uniform1f(f,n.u_fade)}),lineSDF:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_ratio:new c.Uniform1f(f,n.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,n.u_units_to_pixels),u_patternscale_a:new c.Uniform2f(f,n.u_patternscale_a),u_patternscale_b:new c.Uniform2f(f,n.u_patternscale_b),u_sdfgamma:new c.Uniform1f(f,n.u_sdfgamma),u_image:new c.Uniform1i(f,n.u_image),u_tex_y_a:new c.Uniform1f(f,n.u_tex_y_a),u_tex_y_b:new c.Uniform1f(f,n.u_tex_y_b),u_mix:new c.Uniform1f(f,n.u_mix)}),raster:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_tl_parent:new c.Uniform2f(f,n.u_tl_parent),u_scale_parent:new c.Uniform1f(f,n.u_scale_parent),u_buffer_scale:new c.Uniform1f(f,n.u_buffer_scale),u_fade_t:new c.Uniform1f(f,n.u_fade_t),u_opacity:new c.Uniform1f(f,n.u_opacity),u_image0:new c.Uniform1i(f,n.u_image0),u_image1:new c.Uniform1i(f,n.u_image1),u_brightness_low:new c.Uniform1f(f,n.u_brightness_low),u_brightness_high:new c.Uniform1f(f,n.u_brightness_high),u_saturation_factor:new c.Uniform1f(f,n.u_saturation_factor),u_contrast_factor:new c.Uniform1f(f,n.u_contrast_factor),u_spin_weights:new c.Uniform3f(f,n.u_spin_weights)}),symbolIcon:(f,n)=>({u_is_size_zoom_constant:new c.Uniform1i(f,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,n.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,n.u_size_t),u_size:new c.Uniform1f(f,n.u_size),u_camera_to_center_distance:new c.Uniform1f(f,n.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,n.u_pitch),u_rotate_symbol:new c.Uniform1i(f,n.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,n.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,n.u_fade_change),u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,n.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,n.u_coord_matrix),u_is_text:new c.Uniform1i(f,n.u_is_text),u_pitch_with_map:new c.Uniform1i(f,n.u_pitch_with_map),u_texsize:new c.Uniform2f(f,n.u_texsize),u_texture:new c.Uniform1i(f,n.u_texture)}),symbolSDF:(f,n)=>({u_is_size_zoom_constant:new c.Uniform1i(f,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,n.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,n.u_size_t),u_size:new c.Uniform1f(f,n.u_size),u_camera_to_center_distance:new c.Uniform1f(f,n.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,n.u_pitch),u_rotate_symbol:new c.Uniform1i(f,n.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,n.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,n.u_fade_change),u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,n.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,n.u_coord_matrix),u_is_text:new c.Uniform1i(f,n.u_is_text),u_pitch_with_map:new c.Uniform1i(f,n.u_pitch_with_map),u_texsize:new c.Uniform2f(f,n.u_texsize),u_texture:new c.Uniform1i(f,n.u_texture),u_gamma_scale:new c.Uniform1f(f,n.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(f,n.u_is_halo)}),symbolTextAndIcon:(f,n)=>({u_is_size_zoom_constant:new c.Uniform1i(f,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,n.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,n.u_size_t),u_size:new c.Uniform1f(f,n.u_size),u_camera_to_center_distance:new c.Uniform1f(f,n.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,n.u_pitch),u_rotate_symbol:new c.Uniform1i(f,n.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,n.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,n.u_fade_change),u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,n.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,n.u_coord_matrix),u_is_text:new c.Uniform1i(f,n.u_is_text),u_pitch_with_map:new c.Uniform1i(f,n.u_pitch_with_map),u_texsize:new c.Uniform2f(f,n.u_texsize),u_texsize_icon:new c.Uniform2f(f,n.u_texsize_icon),u_texture:new c.Uniform1i(f,n.u_texture),u_texture_icon:new c.Uniform1i(f,n.u_texture_icon),u_gamma_scale:new c.Uniform1f(f,n.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(f,n.u_is_halo)}),background:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_opacity:new c.Uniform1f(f,n.u_opacity),u_color:new c.UniformColor(f,n.u_color)}),backgroundPattern:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_opacity:new c.Uniform1f(f,n.u_opacity),u_image:new c.Uniform1i(f,n.u_image),u_pattern_tl_a:new c.Uniform2f(f,n.u_pattern_tl_a),u_pattern_br_a:new c.Uniform2f(f,n.u_pattern_br_a),u_pattern_tl_b:new c.Uniform2f(f,n.u_pattern_tl_b),u_pattern_br_b:new c.Uniform2f(f,n.u_pattern_br_b),u_texsize:new c.Uniform2f(f,n.u_texsize),u_mix:new c.Uniform1f(f,n.u_mix),u_pattern_size_a:new c.Uniform2f(f,n.u_pattern_size_a),u_pattern_size_b:new c.Uniform2f(f,n.u_pattern_size_b),u_scale_a:new c.Uniform1f(f,n.u_scale_a),u_scale_b:new c.Uniform1f(f,n.u_scale_b),u_pixel_coord_upper:new c.Uniform2f(f,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,n.u_pixel_coord_lower),u_tile_units_to_pixels:new c.Uniform1f(f,n.u_tile_units_to_pixels)}),terrain:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_texture:new c.Uniform1i(f,n.u_texture),u_ele_delta:new c.Uniform1f(f,n.u_ele_delta)}),terrainDepth:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_ele_delta:new c.Uniform1f(f,n.u_ele_delta)}),terrainCoords:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_texture:new c.Uniform1i(f,n.u_texture),u_terrain_coords_id:new c.Uniform1f(f,n.u_terrain_coords_id),u_ele_delta:new c.Uniform1f(f,n.u_ele_delta)})};class En{constructor(n,l,d){this.context=n;const g=n.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ei={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class sn{constructor(n,l,d,g){this.length=l.length,this.attributes=d,this.itemSize=l.bytesPerElement,this.dynamicDraw=g,this.context=n;const x=n.gl;this.buffer=x.createBuffer(),n.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,l){for(let d=0;d<this.attributes.length;d++){const g=l.attributes[this.attributes[d].name];g!==void 0&&n.enableVertexAttribArray(g)}}setVertexAttribPointers(n,l,d){for(let g=0;g<this.attributes.length;g++){const x=this.attributes[g],S=l.attributes[x.name];S!==void 0&&n.vertexAttribPointer(S,x.components,n[Ei[x.type]],!1,this.itemSize,x.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Hn=new WeakMap;function Pn(f){if(Hn.has(f))return Hn.get(f);{const n=f.getParameter(f.VERSION).startsWith("WebGL 2.0");return Hn.set(f,n),n}}class _r{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ra extends _r{getDefault(){return c.Color.transparent}set(n){const l=this.current;(n.r!==l.r||n.g!==l.g||n.b!==l.b||n.a!==l.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class lo extends _r{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class Ga extends _r{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class Ha extends _r{getDefault(){return[!0,!0,!0,!0]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||n[3]!==l[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class na extends _r{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class Il extends _r{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class Wa extends _r{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const l=this.current;(n.func!==l.func||n.ref!==l.ref||n.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class Gs extends _r{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class ms extends _r{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=n,this.dirty=!1}}class Ml extends _r{getDefault(){return[0,1]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Rl extends _r{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=n,this.dirty=!1}}class No extends _r{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class Za extends _r{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.BLEND):l.disable(l.BLEND),this.current=n,this.dirty=!1}}class zl extends _r{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class Ll extends _r{getDefault(){return c.Color.transparent}set(n){const l=this.current;(n.r!==l.r||n.g!==l.g||n.b!==l.b||n.a!==l.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Ca extends _r{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class Ti extends _r{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=n,this.dirty=!1}}class Ol extends _r{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class ia extends _r{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class ka extends _r{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class Dl extends _r{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class Ka extends _r{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||n[3]!==l[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class oa extends _r{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Tc extends _r{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Bl extends _r{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Rr extends _r{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class gs extends _r{getDefault(){return null}set(n){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Hs extends _r{getDefault(){return null}set(n){var l;if(n===this.current&&!this.dirty)return;const d=this.gl;Pn(d)?d.bindVertexArray(n):(l=d.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class Cc extends _r{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class Fl extends _r{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class Yg extends _r{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class yh extends _r{constructor(n,l){super(n),this.context=n,this.parent=l}getDefault(){return null}}class Ap extends yh{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Jg extends yh{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class vh extends yh{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class kc{constructor(n,l,d,g,x){this.context=n,this.width=l,this.height=d;const S=n.gl,k=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new Ap(n,k),g)this.depthAttachment=x?new vh(n,k):new Jg(n,k);else if(x)throw new Error("Stencil cannot be setted without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const n=this.context.gl,l=this.colorAttachment.get();if(l&&n.deleteTexture(l),this.depthAttachment){const d=this.depthAttachment.get();d&&n.deleteRenderbuffer(d)}n.deleteFramebuffer(this.framebuffer)}}class Tn{constructor(n,l,d){this.blendFunction=n,this.blendColor=l,this.mask=d}}Tn.Replace=[1,0],Tn.disabled=new Tn(Tn.Replace,c.Color.transparent,[!1,!1,!1,!1]),Tn.unblended=new Tn(Tn.Replace,c.Color.transparent,[!0,!0,!0,!0]),Tn.alphaBlended=new Tn([1,771],c.Color.transparent,[!0,!0,!0,!0]);class _h{constructor(n){var l,d;if(this.gl=n,this.clearColor=new ra(this),this.clearDepth=new lo(this),this.clearStencil=new Ga(this),this.colorMask=new Ha(this),this.depthMask=new na(this),this.stencilMask=new Il(this),this.stencilFunc=new Wa(this),this.stencilOp=new Gs(this),this.stencilTest=new ms(this),this.depthRange=new Ml(this),this.depthTest=new Rl(this),this.depthFunc=new No(this),this.blend=new Za(this),this.blendFunc=new zl(this),this.blendColor=new Ll(this),this.blendEquation=new Ca(this),this.cullFace=new Ti(this),this.cullFaceSide=new Ol(this),this.frontFace=new ia(this),this.program=new ka(this),this.activeTexture=new Dl(this),this.viewport=new Ka(this),this.bindFramebuffer=new oa(this),this.bindRenderbuffer=new Tc(this),this.bindTexture=new Bl(this),this.bindVertexBuffer=new Rr(this),this.bindElementBuffer=new gs(this),this.bindVertexArray=new Hs(this),this.pixelStoreUnpack=new Cc(this),this.pixelStoreUnpackPremultiplyAlpha=new Fl(this),this.pixelStoreUnpackFlipY=new Yg(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),Pn(n)){this.HALF_FLOAT=n.HALF_FLOAT;const g=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=n.RGBA16F)!==null&&l!==void 0?l:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(d=n.RGB16F)!==null&&d!==void 0?d:g==null?void 0:g.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const g=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,l){return new En(this,n,l)}createVertexBuffer(n,l,d){return new sn(this,n,l,d)}createRenderbuffer(n,l,d){const g=this.gl,x=g.createRenderbuffer();return this.bindRenderbuffer.set(x),g.renderbufferStorage(g.RENDERBUFFER,n,l,d),this.bindRenderbuffer.set(null),x}createFramebuffer(n,l,d,g){return new kc(this,n,l,d,g)}clear({color:n,depth:l,stencil:d}){const g=this.gl;let x=0;n&&(x|=g.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(x|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),d!==void 0&&(x|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),g.clear(x)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){c.deepEqual(n.blendFunction,Tn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return Pn(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var l;return Pn(this.gl)?this.gl.deleteVertexArray(n):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}class Sr{constructor(n,l,d){this.func=n,this.mask=l,this.range=d}}Sr.ReadOnly=!1,Sr.ReadWrite=!0,Sr.disabled=new Sr(519,Sr.ReadOnly,[0,1]);const Pc=7680;class ln{constructor(n,l,d,g,x,S){this.test=n,this.ref=l,this.mask=d,this.fail=g,this.depthFail=x,this.pass=S}}ln.disabled=new ln({func:519,mask:0},0,0,Pc,Pc,Pc);class on{constructor(n,l,d){this.enable=n,this.mode=l,this.frontFace=d}}let Ws;function Ip(f,n,l,d,g,x,S){const k=f.context,C=k.gl,A=f.useProgram("collisionBox"),z=[];let R=0,G=0;for(let oe=0;oe<d.length;oe++){const Ee=d[oe],Ie=n.getTile(Ee),Ne=Ie.getBucket(l);if(!Ne)continue;let We=Ee.posMatrix;g[0]===0&&g[1]===0||(We=f.translatePosMatrix(Ee.posMatrix,Ie,g,x));const Ye=S?Ne.textCollisionBox:Ne.iconCollisionBox,Ge=Ne.collisionCircleArray;if(Ge.length>0){const ft=c.create(),Dt=We;c.mul(ft,Ne.placementInvProjMatrix,f.transform.glCoordMatrix),c.mul(ft,ft,Ne.placementViewportMatrix),z.push({circleArray:Ge,circleOffset:G,transform:Dt,invTransform:ft,coord:Ee}),R+=Ge.length/4,G=R}Ye&&A.draw(k,C.LINES,Sr.disabled,ln.disabled,f.colorModeForRenderPass(),on.disabled,Q(We,f.transform,Ie),f.style.map.terrain&&f.style.map.terrain.getTerrainData(Ee),l.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,null,f.transform.zoom,null,null,Ye.collisionVertexBuffer)}if(!S||!z.length)return;const re=f.useProgram("collisionCircle"),Y=new c.CollisionCircleLayoutArray;Y.resize(4*R),Y._trim();let ee=0;for(const oe of z)for(let Ee=0;Ee<oe.circleArray.length/4;Ee++){const Ie=4*Ee,Ne=oe.circleArray[Ie+0],We=oe.circleArray[Ie+1],Ye=oe.circleArray[Ie+2],Ge=oe.circleArray[Ie+3];Y.emplace(ee++,Ne,We,Ye,Ge,0),Y.emplace(ee++,Ne,We,Ye,Ge,1),Y.emplace(ee++,Ne,We,Ye,Ge,2),Y.emplace(ee++,Ne,We,Ye,Ge,3)}(!Ws||Ws.length<2*R)&&(Ws=function(oe){const Ee=2*oe,Ie=new c.QuadTriangleArray;Ie.resize(Ee),Ie._trim();for(let Ne=0;Ne<Ee;Ne++){const We=6*Ne;Ie.uint16[We+0]=4*Ne+0,Ie.uint16[We+1]=4*Ne+1,Ie.uint16[We+2]=4*Ne+2,Ie.uint16[We+3]=4*Ne+2,Ie.uint16[We+4]=4*Ne+3,Ie.uint16[We+5]=4*Ne+0}return Ie}(R));const le=k.createIndexBuffer(Ws,!0),pe=k.createVertexBuffer(Y,c.collisionCircleLayout.members,!0);for(const oe of z){const Ee={u_matrix:oe.transform,u_inv_matrix:oe.invTransform,u_camera_to_center_distance:(Ce=f.transform).cameraToCenterDistance,u_viewport_size:[Ce.width,Ce.height]};re.draw(k,C.TRIANGLES,Sr.disabled,ln.disabled,f.colorModeForRenderPass(),on.disabled,Ee,f.style.map.terrain&&f.style.map.terrain.getTerrainData(oe.coord),l.id,pe,le,c.SegmentVector.simpleSegment(0,2*oe.circleOffset,oe.circleArray.length,oe.circleArray.length/2),null,f.transform.zoom,null,null,null)}var Ce;pe.destroy(),le.destroy()}on.disabled=new on(!1,1029,2305),on.backCCW=new on(!0,1029,2305);const xh=c.identity(new Float32Array(16));function Qg(f,n,l,d,g,x){const{horizontalAlign:S,verticalAlign:k}=c.getAnchorAlignment(f),C=-(S-.5)*n,A=-(k-.5)*l,z=c.evaluateVariableOffset(f,d);return new c.Point((C/g+z[0])*x,(A/g+z[1])*x)}function Mp(f,n,l,d,g,x,S,k,C,A,z){const R=f.text.placedSymbolArray,G=f.text.dynamicLayoutVertexArray,re=f.icon.dynamicLayoutVertexArray,Y={};G.clear();for(let ee=0;ee<R.length;ee++){const le=R.get(ee),pe=le.hidden||!le.crossTileID||f.allowVerticalPlacement&&!le.placedOrientation?null:d[le.crossTileID];if(pe){const Ce=new c.Point(le.anchorX,le.anchorY),oe=Mr(Ce,l?S:x,z),Ee=zt(g.cameraToCenterDistance,oe.signedDistanceFromCamera);let Ie=c.evaluateSizeForFeature(f.textSizeData,C,le)*Ee/c.ONE_EM;l&&(Ie*=f.tilePixelRatio/k);const{width:Ne,height:We,anchor:Ye,textOffset:Ge,textBoxScale:ft}=pe,Dt=Qg(Ye,Ne,We,Ge,ft,Ie),tr=l?Mr(Ce.add(Dt),x,z).point:oe.point.add(n?Dt.rotate(-g.angle):Dt),ot=f.allowVerticalPlacement&&le.placedOrientation===c.WritingMode.vertical?Math.PI/2:0;for(let Zt=0;Zt<le.numGlyphs;Zt++)c.addDynamicAttributes(G,tr,ot);A&&le.associatedIconIndex>=0&&(Y[le.associatedIconIndex]={shiftedAnchor:tr,angle:ot})}else X(le.numGlyphs,G)}if(A){re.clear();const ee=f.icon.placedSymbolArray;for(let le=0;le<ee.length;le++){const pe=ee.get(le);if(pe.hidden)X(pe.numGlyphs,re);else{const Ce=Y[le];if(Ce)for(let oe=0;oe<pe.numGlyphs;oe++)c.addDynamicAttributes(re,Ce.shiftedAnchor,Ce.angle);else X(pe.numGlyphs,re)}}f.icon.dynamicLayoutVertexBuffer.updateData(re)}f.text.dynamicLayoutVertexBuffer.updateData(G)}function Ac(f,n,l){return l.iconsInText&&n?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Ic(f,n,l,d,g,x,S,k,C,A,z,R){const G=f.context,re=G.gl,Y=f.transform,ee=k==="map",le=C==="map",pe=k!=="viewport"&&l.layout.get("symbol-placement")!=="point",Ce=ee&&!le&&!pe,oe=!l.layout.get("symbol-sort-key").isConstant();let Ee=!1;const Ie=f.depthModeForSublayer(0,Sr.ReadOnly),Ne=l.layout.get("text-variable-anchor"),We=[];for(const Ye of d){const Ge=n.getTile(Ye),ft=Ge.getBucket(l);if(!ft)continue;const Dt=g?ft.text:ft.icon;if(!Dt||!Dt.segments.get().length||!Dt.hasVisibleVertices)continue;const tr=Dt.programConfigurations.get(l.id),ot=g||ft.sdfIcons,Zt=g?ft.textSizeData:ft.iconSizeData,vt=le||Y.pitch!==0,Or=f.useProgram(Ac(ot,g,ft),tr),Zn=c.evaluateSizeForZoom(Zt,Y.zoom),Dr=f.style.map.terrain&&f.style.map.terrain.getTerrainData(Ye);let ir,Nn,Ui,Kn,pi=[0,0],co=null;if(g)Nn=Ge.glyphAtlasTexture,Ui=re.LINEAR,ir=Ge.glyphAtlasTexture.size,ft.iconsInText&&(pi=Ge.imageAtlasTexture.size,co=Ge.imageAtlasTexture,Kn=vt||f.options.rotating||f.options.zooming||Zt.kind==="composite"||Zt.kind==="camera"?re.LINEAR:re.NEAREST);else{const ui=l.layout.get("icon-size").constantOr(0)!==1||ft.iconsNeedLinear;Nn=Ge.imageAtlasTexture,Ui=ot||f.options.rotating||f.options.zooming||ui||vt?re.LINEAR:re.NEAREST,ir=Ge.imageAtlasTexture.size}const Uo=he(Ge,1,f.transform.zoom),jo=Ut(Ye.posMatrix,le,ee,f.transform,Uo),ji=$r(Ye.posMatrix,le,ee,f.transform,Uo),da=Ne&&ft.hasTextData(),Yl=l.layout.get("icon-text-fit")!=="none"&&da&&ft.hasIconData();if(pe){const ui=f.style.map.terrain?(Yc,Ia)=>f.style.map.terrain.getElevation(Ye,Yc,Ia):null,uo=l.layout.get("text-rotation-alignment")==="map";pn(ft,Ye.posMatrix,f,g,jo,ji,le,A,uo,ui)}const Ii=f.translatePosMatrix(Ye.posMatrix,Ge,x,S),fi=pe||g&&Ne||Yl?xh:jo,jr=f.translatePosMatrix(ji,Ge,x,S,!0),ci=ot&&l.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let mi;mi=ot?ft.iconsInText?nn(Zt.kind,Zn,Ce,le,f,Ii,fi,jr,ir,pi):Gt(Zt.kind,Zn,Ce,le,f,Ii,fi,jr,g,ir,!0):Xt(Zt.kind,Zn,Ce,le,f,Ii,fi,jr,g,ir);const Vr={program:Or,buffers:Dt,uniformValues:mi,atlasTexture:Nn,atlasTextureIcon:co,atlasInterpolation:Ui,atlasInterpolationIcon:Kn,isSDF:ot,hasHalo:ci};if(oe&&ft.canOverlap){Ee=!0;const ui=Dt.segments.get();for(const uo of ui)We.push({segments:new c.SegmentVector([uo]),sortKey:uo.sortKey,state:Vr,terrainData:Dr})}else We.push({segments:Dt.segments,sortKey:0,state:Vr,terrainData:Dr})}Ee&&We.sort((Ye,Ge)=>Ye.sortKey-Ge.sortKey);for(const Ye of We){const Ge=Ye.state;if(G.activeTexture.set(re.TEXTURE0),Ge.atlasTexture.bind(Ge.atlasInterpolation,re.CLAMP_TO_EDGE),Ge.atlasTextureIcon&&(G.activeTexture.set(re.TEXTURE1),Ge.atlasTextureIcon&&Ge.atlasTextureIcon.bind(Ge.atlasInterpolationIcon,re.CLAMP_TO_EDGE)),Ge.isSDF){const ft=Ge.uniformValues;Ge.hasHalo&&(ft.u_is_halo=1,bh(Ge.buffers,Ye.segments,l,f,Ge.program,Ie,z,R,ft,Ye.terrainData)),ft.u_is_halo=0}bh(Ge.buffers,Ye.segments,l,f,Ge.program,Ie,z,R,Ge.uniformValues,Ye.terrainData)}}function bh(f,n,l,d,g,x,S,k,C,A){const z=d.context;g.draw(z,z.gl.TRIANGLES,x,S,k,on.disabled,C,A,l.id,f.layoutVertexBuffer,f.indexBuffer,n,l.paint,d.transform.zoom,f.programConfigurations.get(l.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function wh(f,n,l,d,g){if(!l||!d||!d.imageAtlas)return;const x=d.imageAtlas.patternPositions;let S=x[l.to.toString()],k=x[l.from.toString()];if(!S||!k){const C=g.getPaintProperty(n);S=x[C],k=x[C]}S&&k&&f.setConstantPatternPositions(S,k)}function Nl(f,n,l,d,g,x,S){const k=f.context.gl,C="fill-pattern",A=l.paint.get(C),z=A&&A.constantOr(1),R=l.getCrossfadeParameters();let G,re,Y,ee,le;S?(re=z&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",G=k.LINES):(re=z?"fillPattern":"fill",G=k.TRIANGLES);const pe=A.constantOr(null);for(const Ce of d){const oe=n.getTile(Ce);if(z&&!oe.patternsLoaded())continue;const Ee=oe.getBucket(l);if(!Ee)continue;const Ie=Ee.programConfigurations.get(l.id),Ne=f.useProgram(re,Ie),We=f.style.map.terrain&&f.style.map.terrain.getTerrainData(Ce);z&&(f.context.activeTexture.set(k.TEXTURE0),oe.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),Ie.updatePaintBuffers(R)),wh(Ie,C,pe,oe,l);const Ye=We?Ce:null,Ge=f.translatePosMatrix(Ye?Ye.posMatrix:Ce.posMatrix,oe,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(S){ee=Ee.indexBuffer2,le=Ee.segments2;const ft=[k.drawingBufferWidth,k.drawingBufferHeight];Y=re==="fillOutlinePattern"&&z?nr(Ge,f,R,oe,ft):Bn(Ge,ft)}else ee=Ee.indexBuffer,le=Ee.segments,Y=z?Gr(Ge,f,R,oe):Yt(Ge);Ne.draw(f.context,G,g,f.stencilModeForClipping(Ce),x,on.disabled,Y,We,l.id,Ee.layoutVertexBuffer,ee,le,l.paint,f.transform.zoom,Ie)}}function Ul(f,n,l,d,g,x,S){const k=f.context,C=k.gl,A="fill-extrusion-pattern",z=l.paint.get(A),R=z.constantOr(1),G=l.getCrossfadeParameters(),re=l.paint.get("fill-extrusion-opacity"),Y=z.constantOr(null);for(const ee of d){const le=n.getTile(ee),pe=le.getBucket(l);if(!pe)continue;const Ce=f.style.map.terrain&&f.style.map.terrain.getTerrainData(ee),oe=pe.programConfigurations.get(l.id),Ee=f.useProgram(R?"fillExtrusionPattern":"fillExtrusion",oe);R&&(f.context.activeTexture.set(C.TEXTURE0),le.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),oe.updatePaintBuffers(G)),wh(oe,A,Y,le,l);const Ie=f.translatePosMatrix(ee.posMatrix,le,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),Ne=l.paint.get("fill-extrusion-vertical-gradient"),We=R?Ur(Ie,f,Ne,re,ee,G,le):Fo(Ie,f,Ne,re);Ee.draw(k,k.gl.TRIANGLES,g,x,S,on.backCCW,We,Ce,l.id,pe.layoutVertexBuffer,pe.indexBuffer,pe.segments,l.paint,f.transform.zoom,oe,f.style.map.terrain&&pe.centroidVertexBuffer)}}function ey(f,n,l,d,g,x,S){const k=f.context,C=k.gl,A=l.fbo;if(!A)return;const z=f.useProgram("hillshade"),R=f.style.map.terrain&&f.style.map.terrain.getTerrainData(n);k.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,A.colorAttachment.get()),z.draw(k,C.TRIANGLES,g,x,S,on.disabled,((G,re,Y,ee)=>{const le=Y.paint.get("hillshade-shadow-color"),pe=Y.paint.get("hillshade-highlight-color"),Ce=Y.paint.get("hillshade-accent-color");let oe=Y.paint.get("hillshade-illumination-direction")*(Math.PI/180);Y.paint.get("hillshade-illumination-anchor")==="viewport"&&(oe-=G.transform.angle);const Ee=!G.options.moving;return{u_matrix:ee?ee.posMatrix:G.transform.calculatePosMatrix(re.tileID.toUnwrapped(),Ee),u_image:0,u_latrange:Ue(0,re.tileID),u_light:[Y.paint.get("hillshade-exaggeration"),oe],u_shadow:le,u_highlight:pe,u_accent:Ce}})(f,l,d,R?n:null),R,d.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}function Rp(f,n,l,d,g,x){const S=f.context,k=S.gl,C=n.dem;if(C&&C.data){const A=C.dim,z=C.stride,R=C.getPixels();if(S.activeTexture.set(k.TEXTURE1),S.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||f.getTileTexture(z),n.demTexture){const re=n.demTexture;re.update(R,{premultiply:!1}),re.bind(k.NEAREST,k.CLAMP_TO_EDGE)}else n.demTexture=new Je(S,R,k.RGBA,{premultiply:!1}),n.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);S.activeTexture.set(k.TEXTURE0);let G=n.fbo;if(!G){const re=new Je(S,{width:A,height:A,data:null},k.RGBA);re.bind(k.LINEAR,k.CLAMP_TO_EDGE),G=n.fbo=S.createFramebuffer(A,A,!0,!1),G.colorAttachment.set(re.texture)}S.bindFramebuffer.set(G.framebuffer),S.viewport.set([0,0,A,A]),f.useProgram("hillshadePrepare").draw(S,k.TRIANGLES,d,g,x,on.disabled,((re,Y)=>{const ee=Y.stride,le=c.create();return c.ortho(le,0,c.EXTENT,-c.EXTENT,0,0,1),c.translate(le,le,[0,-c.EXTENT,0]),{u_matrix:le,u_image:1,u_dimension:[ee,ee],u_zoom:re.overscaledZ,u_unpack:Y.getUnpackVector()}})(n.tileID,C),null,l.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Wn(f,n,l,d,g,x){const S=d.paint.get("raster-fade-duration");if(!x&&S>0){const k=c.exported.now(),C=(k-f.timeAdded)/S,A=n?(k-n.timeAdded)/S:-1,z=l.getSource(),R=g.coveringZoomLevel({tileSize:z.tileSize,roundZoom:z.roundZoom}),G=!n||Math.abs(n.tileID.overscaledZ-R)>Math.abs(f.tileID.overscaledZ-R),re=G&&f.refreshedUponExpiration?1:c.clamp(G?C:1-A,0,1);return f.refreshedUponExpiration&&C>=1&&(f.refreshedUponExpiration=!1),n?{opacity:1,mix:1-re}:{opacity:re,mix:0}}return{opacity:1,mix:0}}const ys=new c.Color(1,0,0,1),Eo=new c.Color(0,1,0,1),zp=new c.Color(0,0,1,1),Sh=new c.Color(1,0,1,1),Lp=new c.Color(0,1,1,1);function vs(f,n,l,d){Zs(f,0,n+l/2,f.transform.width,l,d)}function jl(f,n,l,d){Zs(f,n-l/2,0,l,f.transform.height,d)}function Zs(f,n,l,d,g,x){const S=f.context,k=S.gl;k.enable(k.SCISSOR_TEST),k.scissor(n*f.pixelRatio,l*f.pixelRatio,d*f.pixelRatio,g*f.pixelRatio),S.clear({color:x}),k.disable(k.SCISSOR_TEST)}function Op(f,n,l){const d=f.context,g=d.gl,x=l.posMatrix,S=f.useProgram("debug"),k=Sr.disabled,C=ln.disabled,A=f.colorModeForRenderPass(),z="$debug",R=f.style.map.terrain&&f.style.map.terrain.getTerrainData(l);d.activeTexture.set(g.TEXTURE0);const G=n.getTileByID(l.key).latestRawTileData,re=Math.floor((G&&G.byteLength||0)/1024),Y=n.getTile(l).tileSize,ee=512/Math.min(Y,512)*(l.overscaledZ/f.transform.zoom)*.5;let le=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(le+=` => ${l.overscaledZ}`),function(pe,Ce){pe.initDebugOverlayCanvas();const oe=pe.debugOverlayCanvas,Ee=pe.context.gl,Ie=pe.debugOverlayCanvas.getContext("2d");Ie.clearRect(0,0,oe.width,oe.height),Ie.shadowColor="white",Ie.shadowBlur=2,Ie.lineWidth=1.5,Ie.strokeStyle="white",Ie.textBaseline="top",Ie.font="bold 36px Open Sans, sans-serif",Ie.fillText(Ce,5,5),Ie.strokeText(Ce,5,5),pe.debugOverlayTexture.update(oe),pe.debugOverlayTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE)}(f,`${le} ${re}kB`),S.draw(d,g.TRIANGLES,k,C,Tn.alphaBlended,on.disabled,ve(x,c.Color.transparent,ee),null,z,f.debugBuffer,f.quadTriangleIndexBuffer,f.debugSegments),S.draw(d,g.LINE_STRIP,k,C,A,on.disabled,ve(x,c.Color.red),R,z,f.debugBuffer,f.tileBorderIndexBuffer,f.debugSegments)}function Eh(f,n,l){const d=f.context,g=d.gl,x=f.colorModeForRenderPass(),S=new Sr(g.LEQUAL,Sr.ReadWrite,f.depthRangeFor3D),k=f.useProgram("terrain"),C=n.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,f.width,f.height]);for(const A of l){const z=f.renderToTexture.getTexture(A),R=n.getTerrainData(A.tileID);d.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,z.texture);const G={u_matrix:f.transform.calculatePosMatrix(A.tileID.toUnwrapped()),u_texture:0,u_ele_delta:n.getMeshFrameDelta(f.transform.zoom)};k.draw(d,g.TRIANGLES,S,ln.disabled,x,on.backCCW,G,R,"terrain",C.vertexBuffer,C.indexBuffer,C.segments)}}const Th={symbol:function(f,n,l,d,g){if(f.renderPass!=="translucent")return;const x=ln.disabled,S=f.colorModeForRenderPass();l.layout.get("text-variable-anchor")&&function(k,C,A,z,R,G,re){const Y=C.transform,ee=R==="map",le=G==="map";for(const pe of k){const Ce=z.getTile(pe),oe=Ce.getBucket(A);if(!oe||!oe.text||!oe.text.segments.get().length)continue;const Ee=c.evaluateSizeForZoom(oe.textSizeData,Y.zoom),Ie=he(Ce,1,C.transform.zoom),Ne=Ut(pe.posMatrix,le,ee,C.transform,Ie),We=A.layout.get("icon-text-fit")!=="none"&&oe.hasIconData();if(Ee){const Ye=Math.pow(2,Y.zoom-Ce.tileID.overscaledZ);Mp(oe,ee,le,re,Y,Ne,pe.posMatrix,Ye,Ee,We,C.style.map.terrain?(Ge,ft)=>C.style.map.terrain.getElevation(pe,Ge,ft):null)}}}(d,f,l,n,l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),g),l.paint.get("icon-opacity").constantOr(1)!==0&&Ic(f,n,l,d,!1,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),l.layout.get("icon-rotation-alignment"),l.layout.get("icon-pitch-alignment"),l.layout.get("icon-keep-upright"),x,S),l.paint.get("text-opacity").constantOr(1)!==0&&Ic(f,n,l,d,!0,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),l.layout.get("text-keep-upright"),x,S),n.map.showCollisionBoxes&&(Ip(f,n,l,d,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),!0),Ip(f,n,l,d,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),!1))},circle:function(f,n,l,d){if(f.renderPass!=="translucent")return;const g=l.paint.get("circle-opacity"),x=l.paint.get("circle-stroke-width"),S=l.paint.get("circle-stroke-opacity"),k=!l.layout.get("circle-sort-key").isConstant();if(g.constantOr(1)===0&&(x.constantOr(1)===0||S.constantOr(1)===0))return;const C=f.context,A=C.gl,z=f.depthModeForSublayer(0,Sr.ReadOnly),R=ln.disabled,G=f.colorModeForRenderPass(),re=[];for(let Y=0;Y<d.length;Y++){const ee=d[Y],le=n.getTile(ee),pe=le.getBucket(l);if(!pe)continue;const Ce=pe.programConfigurations.get(l.id),oe=f.useProgram("circle",Ce),Ee=pe.layoutVertexBuffer,Ie=pe.indexBuffer,Ne=f.style.map.terrain&&f.style.map.terrain.getTerrainData(ee),We={programConfiguration:Ce,program:oe,layoutVertexBuffer:Ee,indexBuffer:Ie,uniformValues:Z(f,ee,le,l),terrainData:Ne};if(k){const Ye=pe.segments.get();for(const Ge of Ye)re.push({segments:new c.SegmentVector([Ge]),sortKey:Ge.sortKey,state:We})}else re.push({segments:pe.segments,sortKey:0,state:We})}k&&re.sort((Y,ee)=>Y.sortKey-ee.sortKey);for(const Y of re){const{programConfiguration:ee,program:le,layoutVertexBuffer:pe,indexBuffer:Ce,uniformValues:oe,terrainData:Ee}=Y.state;le.draw(C,A.TRIANGLES,z,R,G,on.disabled,oe,Ee,l.id,pe,Ce,Y.segments,l.paint,f.transform.zoom,ee)}},heatmap:function(f,n,l,d){if(l.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){const g=f.context,x=g.gl,S=ln.disabled,k=new Tn([x.ONE,x.ONE],c.Color.transparent,[!0,!0,!0,!0]);(function(C,A,z){const R=C.gl;C.activeTexture.set(R.TEXTURE1),C.viewport.set([0,0,A.width/4,A.height/4]);let G=z.heatmapFbo;if(G)R.bindTexture(R.TEXTURE_2D,G.colorAttachment.get()),C.bindFramebuffer.set(G.framebuffer);else{const re=R.createTexture();R.bindTexture(R.TEXTURE_2D,re),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,R.LINEAR),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,R.LINEAR),G=z.heatmapFbo=C.createFramebuffer(A.width/4,A.height/4,!1,!1),function(Y,ee,le,pe){var Ce,oe;const Ee=Y.gl,Ie=(Ce=Y.HALF_FLOAT)!==null&&Ce!==void 0?Ce:Ee.UNSIGNED_BYTE,Ne=(oe=Y.RGBA16F)!==null&&oe!==void 0?oe:Ee.RGBA;Ee.texImage2D(Ee.TEXTURE_2D,0,Ne,ee.width/4,ee.height/4,0,Ee.RGBA,Ie,null),pe.colorAttachment.set(le)}(C,A,re,G)}})(g,f,l),g.clear({color:c.Color.transparent});for(let C=0;C<d.length;C++){const A=d[C];if(n.hasRenderableParent(A))continue;const z=n.getTile(A),R=z.getBucket(l);if(!R)continue;const G=R.programConfigurations.get(l.id),re=f.useProgram("heatmap",G),{zoom:Y}=f.transform;re.draw(g,x.TRIANGLES,Sr.disabled,S,k,on.disabled,gt(A.posMatrix,z,Y,l.paint.get("heatmap-intensity")),null,l.id,R.layoutVertexBuffer,R.indexBuffer,R.segments,l.paint,f.transform.zoom,G)}g.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(g,x){const S=g.context,k=S.gl,C=x.heatmapFbo;if(!C)return;S.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,C.colorAttachment.get()),S.activeTexture.set(k.TEXTURE1);let A=x.colorRampTexture;A||(A=x.colorRampTexture=new Je(S,x.colorRamp,k.RGBA)),A.bind(k.LINEAR,k.CLAMP_TO_EDGE),g.useProgram("heatmapTexture").draw(S,k.TRIANGLES,Sr.disabled,ln.disabled,g.colorModeForRenderPass(),on.disabled,((z,R,G,re)=>{const Y=c.create();c.ortho(Y,0,z.width,z.height,0,0,1);const ee=z.context.gl;return{u_matrix:Y,u_world:[ee.drawingBufferWidth,ee.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:R.paint.get("heatmap-opacity")}})(g,x),null,x.id,g.viewportBuffer,g.quadTriangleIndexBuffer,g.viewportSegments,x.paint,g.transform.zoom)}(f,l))},line:function(f,n,l,d){if(f.renderPass!=="translucent")return;const g=l.paint.get("line-opacity"),x=l.paint.get("line-width");if(g.constantOr(1)===0||x.constantOr(1)===0)return;const S=f.depthModeForSublayer(0,Sr.ReadOnly),k=f.colorModeForRenderPass(),C=l.paint.get("line-dasharray"),A=l.paint.get("line-pattern"),z=A.constantOr(1),R=l.paint.get("line-gradient"),G=l.getCrossfadeParameters(),re=z?"linePattern":C?"lineSDF":R?"lineGradient":"line",Y=f.context,ee=Y.gl;let le=!0;for(const pe of d){const Ce=n.getTile(pe);if(z&&!Ce.patternsLoaded())continue;const oe=Ce.getBucket(l);if(!oe)continue;const Ee=oe.programConfigurations.get(l.id),Ie=f.context.program.get(),Ne=f.useProgram(re,Ee),We=le||Ne.program!==Ie,Ye=f.style.map.terrain&&f.style.map.terrain.getTerrainData(pe),Ge=A.constantOr(null);if(Ge&&Ce.imageAtlas){const tr=Ce.imageAtlas,ot=tr.patternPositions[Ge.to.toString()],Zt=tr.patternPositions[Ge.from.toString()];ot&&Zt&&Ee.setConstantPatternPositions(ot,Zt)}const ft=Ye?pe:null,Dt=z?qt(f,Ce,l,G,ft):C?qe(f,Ce,l,C,G,ft):R?Tt(f,Ce,l,oe.lineClipsArray.length,ft):we(f,Ce,l,ft);if(z)Y.activeTexture.set(ee.TEXTURE0),Ce.imageAtlasTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),Ee.updatePaintBuffers(G);else if(C&&(We||f.lineAtlas.dirty))Y.activeTexture.set(ee.TEXTURE0),f.lineAtlas.bind(Y);else if(R){const tr=oe.gradients[l.id];let ot=tr.texture;if(l.gradientVersion!==tr.version){let Zt=256;if(l.stepInterpolant){const vt=n.getSource().maxzoom,Or=pe.canonical.z===vt?Math.ceil(1<<f.transform.maxZoom-pe.canonical.z):1;Zt=c.clamp(c.nextPowerOfTwo(oe.maxLineLength/c.EXTENT*1024*Or),256,Y.maxTextureSize)}tr.gradient=c.renderColorRamp({expression:l.gradientExpression(),evaluationKey:"lineProgress",resolution:Zt,image:tr.gradient||void 0,clips:oe.lineClipsArray}),tr.texture?tr.texture.update(tr.gradient):tr.texture=new Je(Y,tr.gradient,ee.RGBA),tr.version=l.gradientVersion,ot=tr.texture}Y.activeTexture.set(ee.TEXTURE0),ot.bind(l.stepInterpolant?ee.NEAREST:ee.LINEAR,ee.CLAMP_TO_EDGE)}Ne.draw(Y,ee.TRIANGLES,S,f.stencilModeForClipping(pe),k,on.disabled,Dt,Ye,l.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,l.paint,f.transform.zoom,Ee,oe.layoutVertexBuffer2),le=!1}},fill:function(f,n,l,d){const g=l.paint.get("fill-color"),x=l.paint.get("fill-opacity");if(x.constantOr(1)===0)return;const S=f.colorModeForRenderPass(),k=l.paint.get("fill-pattern"),C=f.opaquePassEnabledForLayer()&&!k.constantOr(1)&&g.constantOr(c.Color.transparent).a===1&&x.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===C){const A=f.depthModeForSublayer(1,f.renderPass==="opaque"?Sr.ReadWrite:Sr.ReadOnly);Nl(f,n,l,d,A,S,!1)}if(f.renderPass==="translucent"&&l.paint.get("fill-antialias")){const A=f.depthModeForSublayer(l.getPaintProperty("fill-outline-color")?2:0,Sr.ReadOnly);Nl(f,n,l,d,A,S,!0)}},"fill-extrusion":function(f,n,l,d){const g=l.paint.get("fill-extrusion-opacity");if(g!==0&&f.renderPass==="translucent"){const x=new Sr(f.context.gl.LEQUAL,Sr.ReadWrite,f.depthRangeFor3D);if(g!==1||l.paint.get("fill-extrusion-pattern").constantOr(1))Ul(f,n,l,d,x,ln.disabled,Tn.disabled),Ul(f,n,l,d,x,f.stencilModeFor3D(),f.colorModeForRenderPass());else{const S=f.colorModeForRenderPass();Ul(f,n,l,d,x,ln.disabled,S)}}},hillshade:function(f,n,l,d){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent")return;const g=f.context,x=f.depthModeForSublayer(0,Sr.ReadOnly),S=f.colorModeForRenderPass(),[k,C]=f.renderPass==="translucent"?f.stencilConfigForOverlap(d):[{},d];for(const A of C){const z=n.getTile(A);z.needsHillshadePrepare!==void 0&&z.needsHillshadePrepare&&f.renderPass==="offscreen"?Rp(f,z,l,x,ln.disabled,S):f.renderPass==="translucent"&&ey(f,A,z,l,x,k[A.overscaledZ],S)}g.viewport.set([0,0,f.width,f.height])},raster:function(f,n,l,d){if(f.renderPass!=="translucent"||l.paint.get("raster-opacity")===0||!d.length)return;const g=f.context,x=g.gl,S=n.getSource(),k=f.useProgram("raster"),C=f.colorModeForRenderPass(),[A,z]=S instanceof Mn?[{},d]:f.stencilConfigForOverlap(d),R=z[z.length-1].overscaledZ,G=!f.options.moving;for(const re of z){const Y=f.depthModeForSublayer(re.overscaledZ-R,l.paint.get("raster-opacity")===1?Sr.ReadWrite:Sr.ReadOnly,x.LESS),ee=n.getTile(re);ee.registerFadeDuration(l.paint.get("raster-fade-duration"));const le=n.findLoadedParent(re,0),pe=Wn(ee,le,n,l,f.transform,f.style.map.terrain);let Ce,oe;const Ee=l.paint.get("raster-resampling")==="nearest"?x.NEAREST:x.LINEAR;g.activeTexture.set(x.TEXTURE0),ee.texture.bind(Ee,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),g.activeTexture.set(x.TEXTURE1),le?(le.texture.bind(Ee,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),Ce=Math.pow(2,le.tileID.overscaledZ-ee.tileID.overscaledZ),oe=[ee.tileID.canonical.x*Ce%1,ee.tileID.canonical.y*Ce%1]):ee.texture.bind(Ee,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST);const Ie=f.style.map.terrain&&f.style.map.terrain.getTerrainData(re),Ne=Ie?re:null,We=Ne?Ne.posMatrix:f.transform.calculatePosMatrix(re.toUnwrapped(),G),Ye=yt(We,oe||[0,0],Ce||1,pe,l);S instanceof Mn?k.draw(g,x.TRIANGLES,Y,ln.disabled,C,on.disabled,Ye,Ie,l.id,S.boundsBuffer,f.quadTriangleIndexBuffer,S.boundsSegments):k.draw(g,x.TRIANGLES,Y,A[re.overscaledZ],C,on.disabled,Ye,Ie,l.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}},background:function(f,n,l,d){const g=l.paint.get("background-color"),x=l.paint.get("background-opacity");if(x===0)return;const S=f.context,k=S.gl,C=f.transform,A=C.tileSize,z=l.paint.get("background-pattern");if(f.isPatternMissing(z))return;const R=!z&&g.a===1&&x===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==R)return;const G=ln.disabled,re=f.depthModeForSublayer(0,R==="opaque"?Sr.ReadWrite:Sr.ReadOnly),Y=f.colorModeForRenderPass(),ee=f.useProgram(z?"backgroundPattern":"background"),le=d||C.coveringTiles({tileSize:A,terrain:f.style.map.terrain});z&&(S.activeTexture.set(k.TEXTURE0),f.imageManager.bind(f.context));const pe=l.getCrossfadeParameters();for(const Ce of le){const oe=d?Ce.posMatrix:f.transform.calculatePosMatrix(Ce.toUnwrapped()),Ee=z?Jr(oe,x,f,z,{tileID:Ce,tileSize:A},pe):ar(oe,x,g),Ie=f.style.map.terrain&&f.style.map.terrain.getTerrainData(Ce);ee.draw(S,k.TRIANGLES,re,G,Y,on.disabled,Ee,Ie,l.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}},debug:function(f,n,l){for(let d=0;d<l.length;d++)Op(f,n,l[d])},custom:function(f,n,l){const d=f.context,g=l.implementation;if(f.renderPass==="offscreen"){const x=g.prerender;x&&(f.setCustomLayerDefaults(),d.setColorMode(f.colorModeForRenderPass()),x.call(g,d.gl,f.transform.customLayerMatrix()),d.setDirty(),f.setBaseState())}else if(f.renderPass==="translucent"){f.setCustomLayerDefaults(),d.setColorMode(f.colorModeForRenderPass()),d.setStencilMode(ln.disabled);const x=g.renderingMode==="3d"?new Sr(f.context.gl.LEQUAL,Sr.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,Sr.ReadOnly);d.setDepthMode(x),g.render(d.gl,f.transform.customLayerMatrix()),d.setDirty(),f.setBaseState(),d.bindFramebuffer.set(null)}}};class Dp{constructor(n,l){this.context=new _h(n),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.create(),renderTime:0},this.setup(),this.numSublayers=Tr.maxUnderzooming+Tr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Qt}resize(n,l,d){if(this.width=n*d,this.height=l*d,this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const n=this.context,l=new c.PosArray;l.emplaceBack(0,0),l.emplaceBack(c.EXTENT,0),l.emplaceBack(0,c.EXTENT),l.emplaceBack(c.EXTENT,c.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(l,Yi.members),this.tileExtentSegments=c.SegmentVector.simpleSegment(0,0,4,2);const d=new c.PosArray;d.emplaceBack(0,0),d.emplaceBack(c.EXTENT,0),d.emplaceBack(0,c.EXTENT),d.emplaceBack(c.EXTENT,c.EXTENT),this.debugBuffer=n.createVertexBuffer(d,Yi.members),this.debugSegments=c.SegmentVector.simpleSegment(0,0,4,5);const g=new c.RasterBoundsArray;g.emplaceBack(0,0,0,0),g.emplaceBack(c.EXTENT,0,c.EXTENT,0),g.emplaceBack(0,c.EXTENT,0,c.EXTENT),g.emplaceBack(c.EXTENT,c.EXTENT,c.EXTENT,c.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(g,kr.members),this.rasterBoundsSegments=c.SegmentVector.simpleSegment(0,0,4,2);const x=new c.PosArray;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(x,Yi.members),this.viewportSegments=c.SegmentVector.simpleSegment(0,0,4,2);const S=new c.LineStripIndexArray;S.emplaceBack(0),S.emplaceBack(1),S.emplaceBack(3),S.emplaceBack(2),S.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(S);const k=new c.TriangleIndexArray;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(k);const C=this.context.gl;this.stencilClearMode=new ln({func:C.ALWAYS,mask:0},0,255,C.ZERO,C.ZERO,C.ZERO)}clearStencil(){const n=this.context,l=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=c.create();c.ortho(d,0,this.width,this.height,0,0,1),c.scale(d,d,[l.drawingBufferWidth,l.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,l.TRIANGLES,Sr.disabled,this.stencilClearMode,Tn.disabled,on.disabled,He(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,l){if(this.currentStencilSource===n.source||!n.isTileClipped()||!l||!l.length)return;this.currentStencilSource=n.source;const d=this.context,g=d.gl;this.nextStencilID+l.length>256&&this.clearStencil(),d.setColorMode(Tn.disabled),d.setDepthMode(Sr.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const S of l){const k=this._tileClippingMaskIDs[S.key]=this.nextStencilID++,C=this.style.map.terrain&&this.style.map.terrain.getTerrainData(S);x.draw(d,g.TRIANGLES,Sr.disabled,new ln({func:g.ALWAYS,mask:0},k,255,g.KEEP,g.KEEP,g.REPLACE),Tn.disabled,on.disabled,He(S.posMatrix),C,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,l=this.context.gl;return new ln({func:l.NOTEQUAL,mask:255},n,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(n){const l=this.context.gl;return new ln({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(n){const l=this.context.gl,d=n.sort((S,k)=>k.overscaledZ-S.overscaledZ),g=d[d.length-1].overscaledZ,x=d[0].overscaledZ-g+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const S={};for(let k=0;k<x;k++)S[k+g]=new ln({func:l.GEQUAL,mask:255},k+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=x,[S,d]}return[{[g]:ln.disabled},d]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new Tn([n.CONSTANT_COLOR,n.ONE],new c.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Tn.unblended:Tn.alphaBlended}depthModeForSublayer(n,l,d){if(!this.opaquePassEnabledForLayer())return Sr.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new Sr(d||this.context.gl.LEQUAL,l,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,l){this.style=n,this.options=l,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(c.exported.now()),this.imageManager.beginFrame();const d=this.style._order,g=this.style.sourceCaches,x={},S={},k={};for(const C in g){const A=g[C];A.used&&A.prepare(this.context),x[C]=A.getVisibleCoordinates(),S[C]=x[C].slice().reverse(),k[C]=A.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let C=0;C<d.length;C++)if(this.style._layers[d[C]].is3D()){this.opaquePassCutoff=C;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const C=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!c.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||C.length)&&(c.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(A,z){const R=A.context,G=R.gl,re=Tn.unblended,Y=new Sr(G.LEQUAL,Sr.ReadWrite,[0,1]),ee=z.getTerrainMesh(),le=z.sourceCache.getRenderableTiles(),pe=A.useProgram("terrainDepth");R.bindFramebuffer.set(z.getFramebuffer("depth").framebuffer),R.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),R.clear({color:c.Color.transparent,depth:1});for(const Ce of le){const oe=z.getTerrainData(Ce.tileID),Ee={u_matrix:A.transform.calculatePosMatrix(Ce.tileID.toUnwrapped()),u_ele_delta:z.getMeshFrameDelta(A.transform.zoom)};pe.draw(R,G.TRIANGLES,Y,ln.disabled,re,on.backCCW,Ee,oe,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments)}R.bindFramebuffer.set(null),R.viewport.set([0,0,A.width,A.height])}(this,this.style.map.terrain),function(A,z){const R=A.context,G=R.gl,re=Tn.unblended,Y=new Sr(G.LEQUAL,Sr.ReadWrite,[0,1]),ee=z.getTerrainMesh(),le=z.getCoordsTexture(),pe=z.sourceCache.getRenderableTiles(),Ce=A.useProgram("terrainCoords");R.bindFramebuffer.set(z.getFramebuffer("coords").framebuffer),R.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),R.clear({color:c.Color.transparent,depth:1}),z.coordsIndex=[];for(const oe of pe){const Ee=z.getTerrainData(oe.tileID);R.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,le.texture);const Ie={u_matrix:A.transform.calculatePosMatrix(oe.tileID.toUnwrapped()),u_terrain_coords_id:(255-z.coordsIndex.length)/255,u_texture:0,u_ele_delta:z.getMeshFrameDelta(A.transform.zoom)};Ce.draw(R,G.TRIANGLES,Y,ln.disabled,re,on.backCCW,Ie,Ee,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments),z.coordsIndex.push(oe.tileID.key)}R.bindFramebuffer.set(null),R.viewport.set([0,0,A.width,A.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const C of d){const A=this.style._layers[C];if(!A.hasOffscreenPass()||A.isHidden(this.transform.zoom))continue;const z=S[A.source];(A.type==="custom"||z.length)&&this.renderLayer(this,g[A.source],A,z)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?c.Color.black:c.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const C=this.style._layers[d[this.currentLayer]],A=g[C.source],z=x[C.source];this._renderTileClippingMasks(C,z),this.renderLayer(this,A,C,z)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const C=this.style._layers[d[this.currentLayer]],A=g[C.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(C))continue;const z=(C.type==="symbol"?k:S)[C.source];this._renderTileClippingMasks(C,x[C.source]),this.renderLayer(this,A,C,z)}if(this.options.showTileBoundaries){const C=function(A,z){let R=null;const G=Object.values(A._layers).flatMap(le=>le.source&&!le.isHidden(z)?[A.sourceCaches[le.source]]:[]),re=G.filter(le=>le.getSource().type==="vector"),Y=G.filter(le=>le.getSource().type!=="vector"),ee=le=>{(!R||R.getSource().maxzoom<le.getSource().maxzoom)&&(R=le)};return re.forEach(le=>ee(le)),R||Y.forEach(le=>ee(le)),R}(this.style,this.transform.zoom);C&&Th.debug(this,C,C.getVisibleCoordinates())}this.options.showPadding&&function(C){const A=C.transform.padding;vs(C,C.transform.height-(A.top||0),3,ys),vs(C,A.bottom||0,3,Eo),jl(C,A.left||0,3,zp),jl(C,C.transform.width-(A.right||0),3,Sh);const z=C.transform.centerPoint;(function(R,G,re,Y){Zs(R,G-1,re-10,2,20,Y),Zs(R,G-10,re-1,20,2,Y)})(C,z.x,C.transform.height-z.y,Lp)}(this),this.context.setDefault()}renderLayer(n,l,d,g){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="custom"||(g||[]).length)&&(this.id=d.id,Th[d.type](n,l,d,g,this.style.placement.variableOffsets))}translatePosMatrix(n,l,d,g,x){if(!d[0]&&!d[1])return n;const S=x?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(S){const A=Math.sin(S),z=Math.cos(S);d=[d[0]*z-d[1]*A,d[0]*A+d[1]*z]}const k=[x?d[0]:he(l,d[0],this.transform.zoom),x?d[1]:he(l,d[1],this.transform.zoom),0],C=new Float32Array(16);return c.translate(C,n,k),C}saveTileTexture(n){const l=this._tileTextures[n.size[0]];l?l.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const l=this._tileTextures[n];return l&&l.length>0?l.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const l=this.imageManager.getPattern(n.from.toString()),d=this.imageManager.getPattern(n.to.toString());return!l||!d}useProgram(n,l){this.cache=this.cache||{};const d=n+(l?l.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new _n(this.context,n,Dn[n],l,Si[n],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Je(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Mc{constructor(n,l){this.points=n,this.planes=l}static fromInvProjectionMatrix(n,l,d){const g=Math.pow(2,d),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(k=>{const C=1/(k=c.transformMat4([],k,n))[3]/l*g;return c.mul$1(k,k,[C,C,1/k[3],C])}),S=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(k=>{const C=function(G,re){var Y=re[0],ee=re[1],le=re[2],pe=Y*Y+ee*ee+le*le;return pe>0&&(pe=1/Math.sqrt(pe)),G[0]=re[0]*pe,G[1]=re[1]*pe,G[2]=re[2]*pe,G}([],function(G,re,Y){var ee=re[0],le=re[1],pe=re[2],Ce=Y[0],oe=Y[1],Ee=Y[2];return G[0]=le*Ee-pe*oe,G[1]=pe*Ce-ee*Ee,G[2]=ee*oe-le*Ce,G}([],xe([],x[k[0]],x[k[1]]),xe([],x[k[2]],x[k[1]]))),A=-((z=C)[0]*(R=x[k[1]])[0]+z[1]*R[1]+z[2]*R[2]);var z,R;return C.concat(A)});return new Mc(x,S)}}class aa{constructor(n,l){this.min=n,this.max=l,this.center=function(d,g,x){return d[0]=.5*g[0],d[1]=.5*g[1],d[2]=.5*g[2],d}([],function(d,g,x){return d[0]=g[0]+x[0],d[1]=g[1]+x[1],d[2]=g[2]+x[2],d}([],this.min,this.max))}quadrant(n){const l=[n%2==0,n<2],d=_e(this.min),g=_e(this.max);for(let x=0;x<l.length;x++)d[x]=l[x]?this.min[x]:this.center[x],g[x]=l[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new aa(d,g)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const l=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let g=0;g<n.planes.length;g++){const x=n.planes[g];let S=0;for(let k=0;k<l.length;k++)c.dot(x,l[k])>=0&&S++;if(S===0)return 0;S!==l.length&&(d=!1)}if(d)return 2;for(let g=0;g<3;g++){let x=Number.MAX_VALUE,S=-Number.MAX_VALUE;for(let k=0;k<n.points.length;k++){const C=n.points[k][g]-this.min[g];x=Math.min(x,C),S=Math.max(S,C)}if(S<0||x>this.max[g]-this.min[g])return 0}return 1}}class Rc{constructor(n=0,l=0,d=0,g=0){if(isNaN(n)||n<0||isNaN(l)||l<0||isNaN(d)||d<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=l,this.left=d,this.right=g}interpolate(n,l,d){return l.top!=null&&n.top!=null&&(this.top=c.interpolate.number(n.top,l.top,d)),l.bottom!=null&&n.bottom!=null&&(this.bottom=c.interpolate.number(n.bottom,l.bottom,d)),l.left!=null&&n.left!=null&&(this.left=c.interpolate.number(n.left,l.left,d)),l.right!=null&&n.right!=null&&(this.right=c.interpolate.number(n.right,l.right,d)),this}getCenter(n,l){const d=c.clamp((this.left+n-this.right)/2,0,n),g=c.clamp((this.top+l-this.bottom)/2,0,l);return new c.Point(d,g)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new Rc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class zc{constructor(n,l,d,g,x){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=x===void 0||!!x,this._minZoom=n||0,this._maxZoom=l||22,this._minPitch=d??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Rc,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const n=new zc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.apply(this),n}apply(n){this.tileSize=n.tileSize,this.latRange=n.latRange,this.width=n.width,this.height=n.height,this._center=n._center,this._elevation=n._elevation,this.zoom=n.zoom,this.angle=n.angle,this._fov=n._fov,this._pitch=n._pitch,this._unmodified=n._unmodified,this._edgeInsets=n._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const l=-c.wrap(n,-180,180)*Math.PI/180;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=function(){var d=new c.ARRAY_TYPE(4);return c.ARRAY_TYPE!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,g,x){var S=g[0],k=g[1],C=g[2],A=g[3],z=Math.sin(x),R=Math.cos(x);d[0]=S*R+C*z,d[1]=k*R+A*z,d[2]=S*-z+C*R,d[3]=k*-z+A*R}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const l=c.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const l=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this.tileZoom=Math.max(0,Math.floor(l)),this.scale=this.zoomScale(l),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,l,d){this._unmodified=!1,this._edgeInsets.interpolate(n,l,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const l=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(n){const l=[new c.UnwrappedTileID(0,n)];if(this._renderWorldCopies){const d=this.pointCoordinate(new c.Point(0,0)),g=this.pointCoordinate(new c.Point(this.width,0)),x=this.pointCoordinate(new c.Point(this.width,this.height)),S=this.pointCoordinate(new c.Point(0,this.height)),k=Math.floor(Math.min(d.x,g.x,x.x,S.x)),C=Math.floor(Math.max(d.x,g.x,x.x,S.x)),A=1;for(let z=k-A;z<=C+A;z++)z!==0&&l.push(new c.UnwrappedTileID(z,n))}return l}coveringTiles(n){var l,d;let g=this.coveringZoomLevel(n);const x=g;if(n.minzoom!==void 0&&g<n.minzoom)return[];n.maxzoom!==void 0&&g>n.maxzoom&&(g=n.maxzoom);const S=this.pointCoordinate(this.getCameraPoint()),k=c.MercatorCoordinate.fromLngLat(this.center),C=Math.pow(2,g),A=[C*S.x,C*S.y,0],z=[C*k.x,C*k.y,0],R=Mc.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let G=n.minzoom||0;!n.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(G=g);const re=n.terrain?2/Math.min(this.tileSize,n.tileSize)*this.tileSize:3,Y=oe=>({aabb:new aa([oe*C,0,0],[(oe+1)*C,C,0]),zoom:0,x:0,y:0,wrap:oe,fullyVisible:!1}),ee=[],le=[],pe=g,Ce=n.reparseOverscaled?x:g;if(this._renderWorldCopies)for(let oe=1;oe<=3;oe++)ee.push(Y(-oe)),ee.push(Y(oe));for(ee.push(Y(0));ee.length>0;){const oe=ee.pop(),Ee=oe.x,Ie=oe.y;let Ne=oe.fullyVisible;if(!Ne){const Dt=oe.aabb.intersects(R);if(Dt===0)continue;Ne=Dt===2}const We=n.terrain?A:z,Ye=oe.aabb.distanceX(We),Ge=oe.aabb.distanceY(We),ft=Math.max(Math.abs(Ye),Math.abs(Ge));if(oe.zoom===pe||ft>re+(1<<pe-oe.zoom)-2&&oe.zoom>=G){const Dt=pe-oe.zoom,tr=A[0]-.5-(Ee<<Dt),ot=A[1]-.5-(Ie<<Dt);le.push({tileID:new c.OverscaledTileID(oe.zoom===pe?Ce:oe.zoom,oe.wrap,oe.zoom,Ee,Ie),distanceSq:Me([z[0]-.5-Ee,z[1]-.5-Ie]),tileDistanceToCamera:Math.sqrt(tr*tr+ot*ot)})}else for(let Dt=0;Dt<4;Dt++){const tr=(Ee<<1)+Dt%2,ot=(Ie<<1)+(Dt>>1),Zt=oe.zoom+1;let vt=oe.aabb.quadrant(Dt);if(n.terrain){const Or=new c.OverscaledTileID(Zt,oe.wrap,Zt,tr,ot),Zn=n.terrain.getMinMaxElevation(Or),Dr=(l=Zn.minElevation)!==null&&l!==void 0?l:this.elevation,ir=(d=Zn.maxElevation)!==null&&d!==void 0?d:this.elevation;vt=new aa([vt.min[0],vt.min[1],Dr],[vt.max[0],vt.max[1],ir])}ee.push({aabb:vt,zoom:Zt,x:tr,y:ot,wrap:oe.wrap,fullyVisible:Ne})}}return le.sort((oe,Ee)=>oe.distanceSq-Ee.distanceSq).map(oe=>oe.tileID)}resize(n,l){this.width=n,this.height=l,this.pixelsToGLUnits=[2/n,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const l=c.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.Point(c.mercatorXfromLng(n.lng)*this.worldSize,c.mercatorYfromLat(l)*this.worldSize)}unproject(n){return new c.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(n){this.freezeElevation||(this.elevation=n?this.getElevation(this._center,n):0)}getElevation(n,l){const d=c.MercatorCoordinate.fromLngLat(n.wrap()),g=(1<<this.tileZoom)*c.EXTENT,x=d.x*g,S=d.y*g,k=Math.floor(x/c.EXTENT),C=Math.floor(S/c.EXTENT),A=new c.OverscaledTileID(this.tileZoom,0,this.tileZoom,k,C);return l.getElevation(A,x%c.EXTENT,S%c.EXTENT,c.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(n){const l=this.pointLocation(this.centerPoint,n),d=this.getElevation(l,n);if(!(this.elevation-d))return;const g=this.getCameraPosition(),x=c.MercatorCoordinate.fromLngLat(g.lngLat,g.altitude),S=c.MercatorCoordinate.fromLngLat(l,d),k=x.x-S.x,C=x.y-S.y,A=x.z-S.z,z=Math.sqrt(k*k+C*C+A*A),R=this.scaleZoom(this.cameraToCenterDistance/z/this.tileSize);this._elevation=d,this._center=l,this.zoom=R}setLocationAtPoint(n,l){const d=this.pointCoordinate(l),g=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(n),S=new c.MercatorCoordinate(x.x-(d.x-g.x),x.y-(d.y-g.y));this.center=this.coordinateLocation(S),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n,l){return l?this.coordinatePoint(this.locationCoordinate(n),this.getElevation(n,l),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n,l){return this.coordinateLocation(this.pointCoordinate(n,l))}locationCoordinate(n){return c.MercatorCoordinate.fromLngLat(n)}coordinateLocation(n){return n&&n.toLngLat()}pointCoordinate(n,l){if(l){const G=l.pointCoordinate(n);if(G!=null)return G}const d=[n.x,n.y,0,1],g=[n.x,n.y,1,1];c.transformMat4(d,d,this.pixelMatrixInverse),c.transformMat4(g,g,this.pixelMatrixInverse);const x=d[3],S=g[3],k=d[1]/x,C=g[1]/S,A=d[2]/x,z=g[2]/S,R=A===z?0:(0-A)/(z-A);return new c.MercatorCoordinate(c.interpolate.number(d[0]/x,g[0]/S,R)/this.worldSize,c.interpolate.number(k,C,R)/this.worldSize)}coordinatePoint(n,l=0,d=this.pixelMatrix){const g=[n.x*this.worldSize,n.y*this.worldSize,l,1];return c.transformMat4(g,g,d),new c.Point(g[0]/g[3],g[1]/g[3])}getBounds(){const n=Math.max(0,this.height/2-this.getHorizon());return new Jt().extend(this.pointLocation(new c.Point(0,n))).extend(this.pointLocation(new c.Point(this.width,n))).extend(this.pointLocation(new c.Point(this.width,this.height))).extend(this.pointLocation(new c.Point(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Jt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(n,l=!1){const d=n.key,g=l?this._alignedPosMatrixCache:this._posMatrixCache;if(g[d])return g[d];const x=n.canonical,S=this.worldSize/this.zoomScale(x.z),k=x.x+Math.pow(2,x.z)*n.wrap,C=c.identity(new Float64Array(16));return c.translate(C,C,[k*S,x.y*S,0]),c.scale(C,C,[S/c.EXTENT,S/c.EXTENT,1]),c.multiply(C,l?this.alignedProjMatrix:this.projMatrix,C),g[d]=new Float32Array(C),g[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let n,l,d,g,x=-90,S=90,k=-180,C=180;const A=this.size,z=this._unmodified;if(this.latRange){const re=this.latRange;x=c.mercatorYfromLat(re[1])*this.worldSize,S=c.mercatorYfromLat(re[0])*this.worldSize,n=S-x<A.y?A.y/(S-x):0}if(this.lngRange){const re=this.lngRange;k=c.wrap(c.mercatorXfromLng(re[0])*this.worldSize,0,this.worldSize),C=c.wrap(c.mercatorXfromLng(re[1])*this.worldSize,0,this.worldSize),C<k&&(C+=this.worldSize),l=C-k<A.x?A.x/(C-k):0}const R=this.point,G=Math.max(l||0,n||0);if(G)return this.center=this.unproject(new c.Point(l?(C+k)/2:R.x,n?(S+x)/2:R.y)),this.zoom+=this.scaleZoom(G),this._unmodified=z,void(this._constraining=!1);if(this.latRange){const re=R.y,Y=A.y/2;re-Y<x&&(g=x+Y),re+Y>S&&(g=S-Y)}if(this.lngRange){const re=(k+C)/2,Y=c.wrap(R.x,re-this.worldSize/2,re+this.worldSize/2),ee=A.x/2;Y-ee<k&&(d=k+ee),Y+ee>C&&(d=C-ee)}d===void 0&&g===void 0||(this.center=this.unproject(new c.Point(d!==void 0?d:R.x,g!==void 0?g:R.y)).wrap()),this._unmodified=z,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,l=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let g=c.identity(new Float64Array(16));c.scale(g,g,[this.width/2,-this.height/2,1]),c.translate(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=c.identity(new Float64Array(16)),c.scale(g,g,[1,-1,1]),c.translate(g,g,[-1,-1,0]),c.scale(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const x=this._elevation<0?this.cameraToCenterDistance:this.cameraToSeaLevelDistance,S=Math.PI/2+this._pitch,k=this._fov*(.5+n.y/this.height),C=Math.sin(k)*x/Math.sin(c.clamp(Math.PI-S-k,.01,Math.PI-.01)),A=this.getHorizon(),z=2*Math.atan(A/this.cameraToCenterDistance)*(.5+n.y/(2*A)),R=Math.sin(z)*x/Math.sin(c.clamp(Math.PI-S-z,.01,Math.PI-.01)),G=Math.min(C,R),re=1.01*(Math.cos(Math.PI/2-this._pitch)*G+x),Y=this.height/50;g=new Float64Array(16),c.perspective(g,this._fov,this.width/this.height,Y,re),g[8]=2*-n.x/this.width,g[9]=2*n.y/this.height,c.scale(g,g,[1,-1,1]),c.translate(g,g,[0,0,-this.cameraToCenterDistance]),c.rotateX(g,g,this._pitch),c.rotateZ(g,g,this.angle),c.translate(g,g,[-l,-d,0]),this.mercatorMatrix=c.scale([],g,[this.worldSize,this.worldSize,this.worldSize]),c.scale(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.multiply(new Float64Array(16),this.labelPlaneMatrix,g),c.translate(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=c.invert([],g),this.pixelMatrix3D=c.multiply(new Float64Array(16),this.labelPlaneMatrix,g);const ee=this.width%2/2,le=this.height%2/2,pe=Math.cos(this.angle),Ce=Math.sin(this.angle),oe=l-Math.round(l)+pe*ee+Ce*le,Ee=d-Math.round(d)+pe*le+Ce*ee,Ie=new Float64Array(g);if(c.translate(Ie,Ie,[oe>.5?oe-1:oe,Ee>.5?Ee-1:Ee,0]),this.alignedProjMatrix=Ie,g=c.invert(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new c.Point(0,0)),l=[n.x*this.worldSize,n.y*this.worldSize,0,1];return c.transformMat4(l,l,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.Point(0,n))}getCameraQueryGeometry(n){const l=this.getCameraPoint();if(n.length===1)return[n[0],l];{let d=l.x,g=l.y,x=l.x,S=l.y;for(const k of n)d=Math.min(d,k.x),g=Math.min(g,k.y),x=Math.max(x,k.x),S=Math.max(S,k.y);return[new c.Point(d,g),new c.Point(x,g),new c.Point(x,S),new c.Point(d,S),new c.Point(d,g)]}}}class Bp{constructor(n){this._hashName=n&&encodeURIComponent(n),c.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(l,d){let g=!1,x=null;const S=()=>{x=null,g&&(l(),x=setTimeout(S,300),g=!1)};return()=>(g=!0,x||S(),x)}(this._updateHashUnthrottled.bind(this))}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(n){const l=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,g=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,g),S=Math.round(l.lng*x)/x,k=Math.round(l.lat*x)/x,C=this._map.getBearing(),A=this._map.getPitch();let z="";if(z+=n?`/${S}/${k}/${d}`:`${d}/${k}/${S}`,(C||A)&&(z+="/"+Math.round(10*C)/10),A&&(z+=`/${Math.round(A)}`),this._hashName){const R=this._hashName;let G=!1;const re=window.location.hash.slice(1).split("&").map(Y=>{const ee=Y.split("=")[0];return ee===R?(G=!0,`${ee}=${z}`):Y}).filter(Y=>Y);return G||re.push(`${R}=${z}`),`#${re.join("&")}`}return`#${z}`}_getCurrentHash(){const n=window.location.hash.replace("#","");if(this._hashName){let l;return n.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(l=d)}),(l&&l[1]||"").split("/")}return n.split("/")}_onHashChange(){const n=this._getCurrentHash();if(n.length>=3&&!n.some(l=>isNaN(l))){const l=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:l,pitch:+(n[4]||0)}),!0}return!1}_updateHashUnthrottled(){const n=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,n)}catch{}}}const $l={linearity:.3,easing:c.bezier(0,0,.3,1)},Fp=c.extend({deceleration:2500,maxSpeed:1400},$l),Np=c.extend({deceleration:20,maxSpeed:1400},$l),Vl=c.extend({deceleration:1e3,maxSpeed:360},$l),Up=c.extend({deceleration:1e3,maxSpeed:90},$l);class sa{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.exported.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,l=c.exported.now();for(;n.length>0&&l-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,pan:new c.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)l.zoom+=x.zoomDelta||0,l.bearing+=x.bearingDelta||0,l.pitch+=x.pitchDelta||0,x.panDelta&&l.pan._add(x.panDelta),x.around&&(l.around=x.around),x.pinchAround&&(l.pinchAround=x.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(l.pan.mag()){const x=ql(l.pan.mag(),d,c.extend({},Fp,n||{}));g.offset=l.pan.mult(x.amount/l.pan.mag()),g.center=this._map.transform.center,To(g,x)}if(l.zoom){const x=ql(l.zoom,d,Np);g.zoom=this._map.transform.zoom+x.amount,To(g,x)}if(l.bearing){const x=ql(l.bearing,d,Vl);g.bearing=this._map.transform.bearing+c.clamp(x.amount,-179,179),To(g,x)}if(l.pitch){const x=ql(l.pitch,d,Up);g.pitch=this._map.transform.pitch+x.amount,To(g,x)}if(g.zoom||g.bearing){const x=l.pinchAround===void 0?l.around:l.pinchAround;g.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),c.extend(g,{noMoveStart:!0})}}function To(f,n){(!f.duration||f.duration<n.duration)&&(f.duration=n.duration,f.easing=n.easing)}function ql(f,n,l){const{maxSpeed:d,linearity:g,deceleration:x}=l,S=c.clamp(f*g/(n/1e3),-d,d),k=Math.abs(S)/(x*g);return{easing:l.easing,duration:1e3*k,amount:S*(k/2)}}class ei extends c.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,d,g={}){const x=T.mousePos(l.getCanvasContainer(),d),S=l.unproject(x);super(n,c.extend({point:x,lngLat:S,originalEvent:d},g)),this._defaultPrevented=!1,this.target=l}}class Xa extends c.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,d){const g=n==="touchend"?d.changedTouches:d.touches,x=T.touchPos(l.getCanvasContainer(),g),S=x.map(C=>l.unproject(C)),k=x.reduce((C,A,z,R)=>C.add(A.div(R.length)),new c.Point(0,0));super(n,{points:x,point:k,lngLats:S,lngLat:l.unproject(k),originalEvent:d}),this._defaultPrevented=!1}}class ty extends c.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,d){super(n,{originalEvent:d}),this._defaultPrevented=!1}}class ry{constructor(n,l){this._map=n,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new ty(n.type,this._map,n))}mousedown(n,l){return this._mousedownPos=l,this._firePreventable(new ei(n.type,this._map,n))}mouseup(n){this._map.fire(new ei(n.type,this._map,n))}click(n,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new ei(n.type,this._map,n))}dblclick(n){return this._firePreventable(new ei(n.type,this._map,n))}mouseover(n){this._map.fire(new ei(n.type,this._map,n))}mouseout(n){this._map.fire(new ei(n.type,this._map,n))}touchstart(n){return this._firePreventable(new Xa(n.type,this._map,n))}touchmove(n){this._map.fire(new Xa(n.type,this._map,n))}touchend(n){this._map.fire(new Xa(n.type,this._map,n))}touchcancel(n){this._map.fire(new Xa(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ny{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new ei(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ei("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new ei(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ks{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.pointLocation(c.Point.convert(n),this._map.terrain)}}class Gl{constructor(n,l){this._map=n,this._tr=new Ks(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,l){this.isEnabled()&&n.shiftKey&&n.button===0&&(T.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(n,l){if(!this._active)return;const d=l;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=d,this._box||(this._box=T.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const x=Math.min(g.x,d.x),S=Math.max(g.x,d.x),k=Math.min(g.y,d.y),C=Math.max(g.y,d.y);T.setTransform(this._box,`translate(${x}px,${k}px)`),this._box.style.width=S-x+"px",this._box.style.height=C-k+"px"}mouseupWindow(n,l){if(!this._active||n.button!==0)return;const d=this._startPos,g=l;if(this.reset(),T.suppressClick(),d.x!==g.x||d.y!==g.y)return this._map.fire(new c.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:x=>x.fitScreenCoordinates(d,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,l){return this._map.fire(new c.Event(n,{originalEvent:l}))}}function la(f,n){if(f.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${f.length}, points ${n.length}`);const l={};for(let d=0;d<f.length;d++)l[f[d].identifier]=n[d];return l}class xt{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,l,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),d.length===this.numTouches&&(this.centroid=function(g){const x=new c.Point(0,0);for(const S of g)x._add(S);return x.div(g.length)}(l),this.touches=la(d,l)))}touchmove(n,l,d){if(this.aborted||!this.centroid)return;const g=la(d,l);for(const x in this.touches){const S=g[x];(!S||S.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(n,l,d){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Lc{constructor(n){this.singleTap=new xt(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,l,d){this.singleTap.touchstart(n,l,d)}touchmove(n,l,d){this.singleTap.touchmove(n,l,d)}touchend(n,l,d){const g=this.singleTap.touchend(n,l,d);if(g){const x=n.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(g)<30;if(x&&S||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Hl{constructor(n){this._tr=new Ks(n),this._zoomIn=new Lc({numTouches:1,numTaps:2}),this._zoomOut=new Lc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,l,d){this._zoomIn.touchstart(n,l,d),this._zoomOut.touchstart(n,l,d)}touchmove(n,l,d){this._zoomIn.touchmove(n,l,d),this._zoomOut.touchmove(n,l,d)}touchend(n,l,d){const g=this._zoomIn.touchend(n,l,d),x=this._zoomOut.touchend(n,l,d),S=this._tr;return g?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(g)},{originalEvent:n})}):x?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(x)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Pa{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const l=this._moveFunction(...n);if(l.bearingDelta||l.pitchDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(n,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=l.length?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,l){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const g=l.length?l[0]:l;return!this._moved&&g.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(d,g))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&T.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const jp={0:1,2:2};class ht{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const l=T.mouseButton(n);this._eventButton=l}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(l,d){const g=jp[d];return l.buttons===void 0||(l.buttons&g)!==g}(n,this._eventButton)}isValidEndEvent(n){return T.mouseButton(n)===this._eventButton}}class Oc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}const Ch=f=>{f.mousedown=f.dragStart,f.mousemoveWindow=f.dragMove,f.mouseup=f.dragEnd,f.contextmenu=function(n){n.preventDefault()}},$p=({enable:f,clickTolerance:n,bearingDegreesPerPixelMoved:l=.8})=>{const d=new ht({checkCorrectEvent:g=>T.mouseButton(g)===0&&g.ctrlKey||T.mouseButton(g)===2});return new Pa({clickTolerance:n,move:(g,x)=>({bearingDelta:(x.x-g.x)*l}),moveStateManager:d,enable:f,assignEvents:Ch})},Dc=({enable:f,clickTolerance:n,pitchDegreesPerPixelMoved:l=-.5})=>{const d=new ht({checkCorrectEvent:g=>T.mouseButton(g)===0&&g.ctrlKey||T.mouseButton(g)===2});return new Pa({clickTolerance:n,move:(g,x)=>({pitchDelta:(x.y-g.y)*l}),moveStateManager:d,enable:f,assignEvents:Ch})};class Vp{constructor(n,l){this._minTouches=n.cooperativeGestures?2:1,this._clickTolerance=n.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(n,l,d){return this._calculateTransform(n,l,d)}touchmove(n,l,d){if(this._map._cooperativeGestures&&(this._minTouches===2&&d.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(n,!1,d.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(d.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,l,d)}touchend(n,l,d){this._calculateTransform(n,l,d),this._active&&d.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,l,d){d.length>0&&(this._active=!0);const g=la(d,l),x=new c.Point(0,0),S=new c.Point(0,0);let k=0;for(const A in g){const z=g[A],R=this._touches[A];R&&(x._add(z),S._add(z.sub(R)),k++,g[A]=z)}if(this._touches=g,k<this._minTouches||!S.mag())return;const C=S.div(k);return this._sum._add(C),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(k),panDelta:C}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(n){}_move(n,l,d){return{}}touchstart(n,l,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([l[0],l[1]]))}touchmove(n,l,d){if(!this._firstTwoTouches)return;n.preventDefault();const[g,x]=this._firstTwoTouches,S=Fc(d,l,g),k=Fc(d,l,x);if(!S||!k)return;const C=this._aroundCenter?null:S.add(k).div(2);return this._move([S,k],C,n)}touchend(n,l,d){if(!this._firstTwoTouches)return;const[g,x]=this._firstTwoTouches,S=Fc(d,l,g),k=Fc(d,l,x);S&&k||(this._active&&T.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Fc(f,n,l){for(let d=0;d<f.length;d++)if(f[d].identifier===l)return n[d]}function qp(f,n){return Math.log(f/n)/Math.LN2}class kh extends Bc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,l){const d=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(qp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:qp(this._distance,d),pinchAround:l}}}function Nc(f,n){return 180*f.angleWith(n)/Math.PI}class Ph extends Bc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,l){const d=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Nc(this._vector,d),pinchAround:l}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const l=25/(Math.PI*this._minDiameter)*360,d=Nc(n,this._startVector);return Math.abs(d)<l}}function Wl(f){return Math.abs(f.y)>Math.abs(f.x)}class Ji extends Bc{constructor(n){super(),this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,l,d){super.touchstart(n,l,d),this._currentTouchCount=d.length}_start(n){this._lastPoints=n,Wl(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,l,d){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=n[0].sub(this._lastPoints[0]),x=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,x,d.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(g.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(n,l,d){if(this._valid!==void 0)return this._valid;const g=n.mag()>=2,x=l.mag()>=2;if(!g&&!x)return;if(!g||!x)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const S=n.y>0==l.y>0;return Wl(n)&&Wl(l)&&S}}const Ya={panStep:100,bearingStep:15,pitchStep:10};class Gp{constructor(n){this._tr=new Ks(n);const l=Ya;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let l=0,d=0,g=0,x=0,S=0;switch(n.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:n.shiftKey?d=-1:(n.preventDefault(),x=-1);break;case 39:n.shiftKey?d=1:(n.preventDefault(),x=1);break;case 38:n.shiftKey?g=1:(n.preventDefault(),S=-1);break;case 40:n.shiftKey?g=-1:(n.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(d=0,g=0),{cameraAnimation:k=>{const C=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:Ah,zoom:l?Math.round(C.zoom)+l*(n.shiftKey?2:1):C.zoom,bearing:C.bearing+d*this._bearingStep,pitch:C.pitch+g*this._pitchStep,offset:[-x*this._panStep,-S*this._panStep],center:C.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ah(f){return f*(2-f)}const Uc=4.000244140625;class Ih{constructor(n,l){this._map=n,this._tr=new Ks(n),this._el=n.getCanvasContainer(),this._handler=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,c.bindAll(["_onTimeout"],this)}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(n){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!n[this._map._metaKey])return;n.preventDefault()}let l=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const d=c.exported.now(),g=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,l!==0&&l%Uc==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(g*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),n.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=n,this._delta-=l,this._active||this._start(n)),n.preventDefault()}_onTimeout(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=T.mousePos(this._el,n),d=this._tr;this._around=c.LngLat.convert(this._aroundCenter?d.center:d.unproject(l)),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>Uc?this._wheelZoomRate:this._defaultZoomRate;let C=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&C!==0&&(C=1/C);const A=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(A*C))),this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom=="number"?this._targetZoom:n.zoom,d=this._startZoom,g=this._easing;let x,S=!1;if(this._type==="wheel"&&d&&g){const k=Math.min((c.exported.now()-this._lastWheelEventTime)/200,1),C=g(k);x=c.interpolate.number(d,l,C),k<1?this._frameId||(this._frameId=!0):S=!0}else x=l,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!S,zoomDelta:x-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let l=c.ease;if(this._prevEase){const d=this._prevEase,g=(c.exported.now()-d.start)/d.duration,x=d.easing(g+.01)-d.easing(g),S=.27/Math.sqrt(x*x+1e-4)*.01,k=Math.sqrt(.0729-S*S);l=c.bezier(S,k,.25,1)}return this._prevEase={start:c.exported.now(),duration:n,easing:l},l}reset(){this._active=!1}}class Hp{constructor(n,l){this._clickZoom=n,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Co{constructor(n){this._tr=new Ks(n),this.reset()}reset(){this._active=!1}dblclick(n,l){return n.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xn{constructor(){this._tap=new Lc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(n,l,d){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?d.length>0&&(this._swipePoint=l[0],this._swipeTouch=d[0].identifier):this._tap.touchstart(n,l,d))}touchmove(n,l,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const g=l[0],x=g.y-this._swipePoint.y;return this._swipePoint=g,n.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(n,l,d)}touchend(n,l,d){this._tapTime?this._swipePoint&&d.length===0&&this.reset():this._tap.touchend(n,l,d)&&(this._tapTime=n.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class jc{constructor(n,l,d){this._el=n,this._mousePan=l,this._touchPan=d}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Mh{constructor(n,l,d){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=l,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Wp{constructor(n,l,d,g){this._el=n,this._touchZoom=l,this._touchRotate=d,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Zl=f=>f.zoom||f.drag||f.pitch||f.rotate;class Zp extends c.Event{}function Rh(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class ca{constructor(n,l){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new sa(n),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l),c.bindAll(["handleEvent","handleWindowEvent"],this);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,x,S]of this._listeners)T.addEventListener(g,x,g===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[n,l,d]of this._listeners)T.removeEventListener(n,l,n===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(n){const l=this._map,d=l.getCanvasContainer();this._add("mapEvent",new ry(l,n));const g=l.boxZoom=new Gl(l,n);this._add("boxZoom",g);const x=new Hl(l),S=new Co(l);l.doubleClickZoom=new Hp(S,x),this._add("tapZoom",x),this._add("clickZoom",S);const k=new xn;this._add("tapDragZoom",k);const C=l.touchPitch=new Ji(l);this._add("touchPitch",C);const A=$p(n),z=Dc(n);l.dragRotate=new Mh(n,A,z),this._add("mouseRotate",A,["mousePitch"]),this._add("mousePitch",z,["mouseRotate"]);const R=(({enable:pe,clickTolerance:Ce})=>{const oe=new ht({checkCorrectEvent:Ee=>T.mouseButton(Ee)===0&&!Ee.ctrlKey});return new Pa({clickTolerance:Ce,move:(Ee,Ie)=>({around:Ie,panDelta:Ie.sub(Ee)}),activateOnStart:!0,moveStateManager:oe,enable:pe,assignEvents:Ch})})(n),G=new Vp(n,l);l.dragPan=new jc(d,R,G),this._add("mousePan",R),this._add("touchPan",G,["touchZoom","touchRotate"]);const re=new Ph,Y=new kh;l.touchZoomRotate=new Wp(d,Y,re,k),this._add("touchRotate",re,["touchPan","touchZoom"]),this._add("touchZoom",Y,["touchPan","touchRotate"]);const ee=l.scrollZoom=new Ih(l,this);this._add("scrollZoom",ee,["mousePan"]);const le=l.keyboard=new Gp(l);this._add("keyboard",le),this._add("blockableMapEvent",new ny(l));for(const pe of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])n.interactive&&n[pe]&&l[pe].enable(n[pe])}_add(n,l,d){this._handlers.push({handlerName:n,handler:l,allowed:d}),this._handlersById[n]=l}stop(n){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Zl(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,l,d){for(const g in n)if(g!==d&&(!l||l.indexOf(g)<0))return!0;return!1}handleWindowEvent(n){this.handleEvent(n,`${n.type}Window`)}_getMapTouches(n){const l=[];for(const d of n)this._el.contains(d.target)&&l.push(d);return l}handleEvent(n,l){if(n.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const d=n.type==="renderFrame"?void 0:n,g={needsRenderFrame:!1},x={},S={},k=n.touches,C=k?this._getMapTouches(k):void 0,A=C?T.touchPos(this._el,C):T.mousePos(this._el,n);for(const{handlerName:G,handler:re,allowed:Y}of this._handlers){if(!re.isEnabled())continue;let ee;this._blockedByActive(S,Y,G)?re.reset():re[l||n.type]&&(ee=re[l||n.type](n,A,C),this.mergeHandlerResult(g,x,ee,G,d),ee&&ee.needsRenderFrame&&this._triggerRenderFrame()),(ee||re.isActive())&&(S[G]=re)}const z={};for(const G in this._previousActiveHandlers)S[G]||(z[G]=d);this._previousActiveHandlers=S,(Object.keys(z).length||Rh(g))&&(this._changes.push([g,x,z]),this._triggerRenderFrame()),(Object.keys(S).length||Rh(g))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:R}=g;R&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],R(this._map))}mergeHandlerResult(n,l,d,g,x){if(!d)return;c.extend(n,d);const S={handlerName:g,originalEvent:d.originalEvent||x};d.zoomDelta!==void 0&&(l.zoom=S),d.panDelta!==void 0&&(l.drag=S),d.pitchDelta!==void 0&&(l.pitch=S),d.bearingDelta!==void 0&&(l.rotate=S)}_applyChanges(){const n={},l={},d={};for(const[g,x,S]of this._changes)g.panDelta&&(n.panDelta=(n.panDelta||new c.Point(0,0))._add(g.panDelta)),g.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(n.around=g.around),g.pinchAround!==void 0&&(n.pinchAround=g.pinchAround),g.noInertia&&(n.noInertia=g.noInertia),c.extend(l,x),c.extend(d,S);this._updateMapTransform(n,l,d),this._changes=[]}_updateMapTransform(n,l,d){const g=this._map,x=g._getTransformForUpdate(),S=g.terrain;if(!(Rh(n)||S&&this._terrainMovement))return this._fireEvents(l,d,!0);let{panDelta:k,zoomDelta:C,bearingDelta:A,pitchDelta:z,around:R,pinchAround:G}=n;G!==void 0&&(R=G),g._stop(!0),R=R||g.transform.centerPoint;const re=x.pointLocation(k?R.sub(k):R);A&&(x.bearing+=A),z&&(x.pitch+=z),C&&(x.zoom+=C),S?this._terrainMovement||!l.drag&&!l.zoom?l.drag&&this._terrainMovement?x.center=x.pointLocation(x.centerPoint.sub(k)):x.setLocationAtPoint(re,R):(this._terrainMovement=!0,x.freezeElevation=!0,x.setLocationAtPoint(re,R),this._map.once("moveend",()=>{x.freezeElevation=!1,this._terrainMovement=!1,x.recalculateZoom(g.terrain)})):x.setLocationAtPoint(re,R),g._applyUpdatedTransform(x),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(l,d,!0)}_fireEvents(n,l,d){const g=Zl(this._eventsInProgress),x=Zl(n),S={};for(const z in n){const{originalEvent:R}=n[z];this._eventsInProgress[z]||(S[`${z}start`]=R),this._eventsInProgress[z]=n[z]}!g&&x&&this._fireEvent("movestart",x.originalEvent);for(const z in S)this._fireEvent(z,S[z]);x&&this._fireEvent("move",x.originalEvent);for(const z in n){const{originalEvent:R}=n[z];this._fireEvent(z,R)}const k={};let C;for(const z in this._eventsInProgress){const{handlerName:R,originalEvent:G}=this._eventsInProgress[z];this._handlersById[R].isActive()||(delete this._eventsInProgress[z],C=l[R]||G,k[`${z}end`]=C)}for(const z in k)this._fireEvent(z,k[z]);const A=Zl(this._eventsInProgress);if(d&&(g||x)&&!A){this._updatingCamera=!0;const z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),R=G=>G!==0&&-this._bearingSnap<G&&G<this._bearingSnap;z?(R(z.bearing||this._map.getBearing())&&(z.bearing=0),z.freezeElevation=!0,this._map.easeTo(z,{originalEvent:C})):(this._map.fire(new c.Event("moveend",{originalEvent:C})),R(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(n,l){this._map.fire(new c.Event(n,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new Zp("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const $c={extend:(f,...n)=>c.extend(f,...n),run(f){f()},logToElement(f,n=!1,l="log"){const d=window.document.getElementById(l);d&&(n&&(d.innerHTML=""),d.innerHTML+=`<br>${f}`)}};class At extends c.Evented{constructor(n,l){super(),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=l.bearingSnap,c.bindAll(["_renderFrameCallback"],this),this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new c.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(n,l){return this.jumpTo({center:n},l)}panBy(n,l,d){return n=c.Point.convert(n).mult(-1),this.panTo(this.transform.center,c.extend({offset:n},l),d)}panTo(n,l,d){return this.easeTo(c.extend({center:n},l),d)}getZoom(){return this.transform.zoom}setZoom(n,l){return this.jumpTo({zoom:n},l),this}zoomTo(n,l,d){return this.easeTo(c.extend({zoom:n},l),d)}zoomIn(n,l){return this.zoomTo(this.getZoom()+1,n,l),this}zoomOut(n,l){return this.zoomTo(this.getZoom()-1,n,l),this}getBearing(){return this.transform.bearing}setBearing(n,l){return this.jumpTo({bearing:n},l),this}getPadding(){return this.transform.padding}setPadding(n,l){return this.jumpTo({padding:n},l),this}rotateTo(n,l,d){return this.easeTo(c.extend({bearing:n},l),d)}resetNorth(n,l){return this.rotateTo(0,c.extend({duration:1e3},n),l),this}resetNorthPitch(n,l){return this.easeTo(c.extend({bearing:0,pitch:0,duration:1e3},n),l),this}snapToNorth(n,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,l):this}getPitch(){return this.transform.pitch}setPitch(n,l){return this.jumpTo({pitch:n},l),this}cameraForBounds(n,l){n=Jt.convert(n);const d=l&&l.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),d,l)}_cameraForBoxAndBearing(n,l,d,g){const x={top:0,bottom:0,right:0,left:0};if(typeof(g=c.extend({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const Ie=g.padding;g.padding={top:Ie,bottom:Ie,right:Ie,left:Ie}}g.padding=c.extend(x,g.padding);const S=this.transform,k=S.padding,C=S.project(c.LngLat.convert(n)),A=S.project(c.LngLat.convert(l)),z=C.rotate(-d*Math.PI/180),R=A.rotate(-d*Math.PI/180),G=new c.Point(Math.max(z.x,R.x),Math.max(z.y,R.y)),re=new c.Point(Math.min(z.x,R.x),Math.min(z.y,R.y)),Y=G.sub(re),ee=(S.width-(k.left+k.right+g.padding.left+g.padding.right))/Y.x,le=(S.height-(k.top+k.bottom+g.padding.top+g.padding.bottom))/Y.y;if(le<0||ee<0)return void c.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const pe=Math.min(S.scaleZoom(S.scale*Math.min(ee,le)),g.maxZoom),Ce=c.Point.convert(g.offset),oe=new c.Point((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(d*Math.PI/180),Ee=Ce.add(oe).mult(S.scale/S.zoomScale(pe));return{center:S.unproject(C.add(A).div(2).sub(Ee)),zoom:pe,bearing:d}}fitBounds(n,l,d){return this._fitInternal(this.cameraForBounds(n,l),l,d)}fitScreenCoordinates(n,l,d,g,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.Point.convert(n)),this.transform.pointLocation(c.Point.convert(l)),d,g),g,x)}_fitInternal(n,l,d){return n?(delete(l=c.extend(n,l)).padding,l.linear?this.easeTo(l,d):this.flyTo(l,d)):this}jumpTo(n,l){this.stop();const d=this._getTransformForUpdate();let g=!1,x=!1,S=!1;return"zoom"in n&&d.zoom!==+n.zoom&&(g=!0,d.zoom=+n.zoom),n.center!==void 0&&(d.center=c.LngLat.convert(n.center)),"bearing"in n&&d.bearing!==+n.bearing&&(x=!0,d.bearing=+n.bearing),"pitch"in n&&d.pitch!==+n.pitch&&(S=!0,d.pitch=+n.pitch),n.padding==null||d.isPaddingEqual(n.padding)||(d.padding=n.padding),this._applyUpdatedTransform(d),this.fire(new c.Event("movestart",l)).fire(new c.Event("move",l)),g&&this.fire(new c.Event("zoomstart",l)).fire(new c.Event("zoom",l)).fire(new c.Event("zoomend",l)),x&&this.fire(new c.Event("rotatestart",l)).fire(new c.Event("rotate",l)).fire(new c.Event("rotateend",l)),S&&this.fire(new c.Event("pitchstart",l)).fire(new c.Event("pitch",l)).fire(new c.Event("pitchend",l)),this.fire(new c.Event("moveend",l))}calculateCameraOptionsFromTo(n,l,d,g=0){const x=c.MercatorCoordinate.fromLngLat(n,l),S=c.MercatorCoordinate.fromLngLat(d,g),k=S.x-x.x,C=S.y-x.y,A=S.z-x.z,z=Math.hypot(k,C,A);if(z===0)throw new Error("Can't calculate camera options with same From and To");const R=Math.hypot(k,C),G=this.transform.scaleZoom(this.transform.cameraToCenterDistance/z/this.transform.tileSize),re=180*Math.atan2(k,-C)/Math.PI;let Y=180*Math.acos(R/z)/Math.PI;return Y=A<0?90-Y:90+Y,{center:S.toLngLat(),zoom:G,pitch:Y,bearing:re}}easeTo(n,l){this._stop(!1,n.easeId),((n=c.extend({offset:[0,0],duration:500,easing:c.ease},n)).animate===!1||!n.essential&&c.exported.prefersReducedMotion)&&(n.duration=0);const d=this._getTransformForUpdate(),g=this.getZoom(),x=this.getBearing(),S=this.getPitch(),k=this.getPadding(),C="zoom"in n?+n.zoom:g,A="bearing"in n?this._normalizeBearing(n.bearing,x):x,z="pitch"in n?+n.pitch:S,R="padding"in n?n.padding:d.padding,G=c.Point.convert(n.offset);let re=d.centerPoint.add(G);const Y=d.pointLocation(re),ee=c.LngLat.convert(n.center||Y);this._normalizeCenter(ee);const le=d.project(Y),pe=d.project(ee).sub(le),Ce=d.zoomScale(C-g);let oe,Ee;n.around&&(oe=c.LngLat.convert(n.around),Ee=d.locationPoint(oe));const Ie={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||C!==g,this._rotating=this._rotating||x!==A,this._pitching=this._pitching||z!==S,this._padding=!d.isPaddingEqual(R),this._easeId=n.easeId,this._prepareEase(l,n.noMoveStart,Ie),this.terrain&&this._prepareElevation(ee),this._ease(Ne=>{if(this._zooming&&(d.zoom=c.interpolate.number(g,C,Ne)),this._rotating&&(d.bearing=c.interpolate.number(x,A,Ne)),this._pitching&&(d.pitch=c.interpolate.number(S,z,Ne)),this._padding&&(d.interpolatePadding(k,R,Ne),re=d.centerPoint.add(G)),this.terrain&&!n.freezeElevation&&this._updateElevation(Ne),oe)d.setLocationAtPoint(oe,Ee);else{const We=d.zoomScale(d.zoom-g),Ye=C>g?Math.min(2,Ce):Math.max(.5,Ce),Ge=Math.pow(Ye,1-Ne),ft=d.unproject(le.add(pe.mult(Ne*Ge)).mult(We));d.setLocationAtPoint(d.renderWorldCopies?ft.wrap():ft,re)}this._applyUpdatedTransform(d),this._fireMoveEvents(l)},Ne=>{this.terrain&&this._finalizeElevation(),this._afterEase(l,Ne)},n),this}_prepareEase(n,l,d={}){this._moving=!0,l||d.moving||this.fire(new c.Event("movestart",n)),this._zooming&&!d.zooming&&this.fire(new c.Event("zoomstart",n)),this._rotating&&!d.rotating&&this.fire(new c.Event("rotatestart",n)),this._pitching&&!d.pitching&&this.fire(new c.Event("pitchstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.transform.getElevation(n,this.terrain),this.transform.freezeElevation=!0}_updateElevation(n){const l=this.transform.getElevation(this._elevationCenter,this.terrain);if(n<1&&l!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(d-(l-(d*n+this._elevationStart))/(1-n)),this._elevationTarget=l}this.transform.elevation=c.interpolate.number(this._elevationStart,this._elevationTarget,n)}_finalizeElevation(){this.transform.freezeElevation=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(n){if(!this.transformCameraUpdate)return;const l=n.clone(),{center:d,zoom:g,pitch:x,bearing:S,elevation:k}=this.transformCameraUpdate(l);d&&(l.center=d),g!==void 0&&(l.zoom=g),x!==void 0&&(l.pitch=x),S!==void 0&&(l.bearing=S),k!==void 0&&(l.elevation=k),this.transform.apply(l)}_fireMoveEvents(n){this.fire(new c.Event("move",n)),this._zooming&&this.fire(new c.Event("zoom",n)),this._rotating&&this.fire(new c.Event("rotate",n)),this._pitching&&this.fire(new c.Event("pitch",n))}_afterEase(n,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;const d=this._zooming,g=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new c.Event("zoomend",n)),g&&this.fire(new c.Event("rotateend",n)),x&&this.fire(new c.Event("pitchend",n)),this.fire(new c.Event("moveend",n))}flyTo(n,l){if(!n.essential&&c.exported.prefersReducedMotion){const vt=c.pick(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(vt,l)}this.stop(),n=c.extend({offset:[0,0],speed:1.2,curve:1.42,easing:c.ease},n);const d=this._getTransformForUpdate(),g=this.getZoom(),x=this.getBearing(),S=this.getPitch(),k=this.getPadding(),C="zoom"in n?c.clamp(+n.zoom,d.minZoom,d.maxZoom):g,A="bearing"in n?this._normalizeBearing(n.bearing,x):x,z="pitch"in n?+n.pitch:S,R="padding"in n?n.padding:d.padding,G=d.zoomScale(C-g),re=c.Point.convert(n.offset);let Y=d.centerPoint.add(re);const ee=d.pointLocation(Y),le=c.LngLat.convert(n.center||ee);this._normalizeCenter(le);const pe=d.project(ee),Ce=d.project(le).sub(pe);let oe=n.curve;const Ee=Math.max(d.width,d.height),Ie=Ee/G,Ne=Ce.mag();if("minZoom"in n){const vt=c.clamp(Math.min(n.minZoom,g,C),d.minZoom,d.maxZoom),Or=Ee/d.zoomScale(vt-g);oe=Math.sqrt(Or/Ne*2)}const We=oe*oe;function Ye(vt){const Or=(Ie*Ie-Ee*Ee+(vt?-1:1)*We*We*Ne*Ne)/(2*(vt?Ie:Ee)*We*Ne);return Math.log(Math.sqrt(Or*Or+1)-Or)}function Ge(vt){return(Math.exp(vt)-Math.exp(-vt))/2}function ft(vt){return(Math.exp(vt)+Math.exp(-vt))/2}const Dt=Ye(0);let tr=function(vt){return ft(Dt)/ft(Dt+oe*vt)},ot=function(vt){return Ee*((ft(Dt)*(Ge(Or=Dt+oe*vt)/ft(Or))-Ge(Dt))/We)/Ne;var Or},Zt=(Ye(1)-Dt)/oe;if(Math.abs(Ne)<1e-6||!isFinite(Zt)){if(Math.abs(Ee-Ie)<1e-6)return this.easeTo(n,l);const vt=Ie<Ee?-1:1;Zt=Math.abs(Math.log(Ie/Ee))/oe,ot=function(){return 0},tr=function(Or){return Math.exp(vt*oe*Or)}}return n.duration="duration"in n?+n.duration:1e3*Zt/("screenSpeed"in n?+n.screenSpeed/oe:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=x!==A,this._pitching=z!==S,this._padding=!d.isPaddingEqual(R),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(le),this._ease(vt=>{const Or=vt*Zt,Zn=1/tr(Or);d.zoom=vt===1?C:g+d.scaleZoom(Zn),this._rotating&&(d.bearing=c.interpolate.number(x,A,vt)),this._pitching&&(d.pitch=c.interpolate.number(S,z,vt)),this._padding&&(d.interpolatePadding(k,R,vt),Y=d.centerPoint.add(re)),this.terrain&&!n.freezeElevation&&this._updateElevation(vt);const Dr=vt===1?le:d.unproject(pe.add(Ce.mult(ot(Or))).mult(Zn));d.setLocationAtPoint(d.renderWorldCopies?Dr.wrap():Dr,Y),this._applyUpdatedTransform(d),this._fireMoveEvents(l)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(l)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,l){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,l)}if(!n){const d=this.handlers;d&&d.stop(!1)}return this}_ease(n,l,d){d.animate===!1||d.duration===0?(n(1),l()):(this._easeStart=c.exported.now(),this._easeOptions=d,this._onEaseFrame=n,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const n=Math.min((c.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(n)),n<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(n,l){n=c.wrap(n,-180,180);const d=Math.abs(n-l);return Math.abs(n-360-l)<d&&(n-=360),Math.abs(n+360-l)<d&&(n+=360),n}_normalizeCenter(n){const l=this.transform;if(!l.renderWorldCopies||l.lngRange)return;const d=n.lng-l.center.lng;n.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(n){return this.terrain?this.transform.getElevation(c.LngLat.convert(n),this.terrain)-this.transform.elevation:null}}class Ht{constructor(n={}){this.options=n,c.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options&&this.options.compact,this._container=T.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=T.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=T.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,l){const d=this._map._getUIString(`AttributionControl.${l}`);n.title=d,n.setAttribute("aria-label",d)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))}_updateData(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"&&n.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const l=this._map.style.sourceCaches;for(const g in l){const x=l[g];if(x.used||x.usedForTerrain){const S=x.getSource();S.attribution&&n.indexOf(S.attribution)<0&&n.push(S.attribution)}}n=n.filter(g=>String(g).trim()),n.sort((g,x)=>g.length-x.length),n=n.filter((g,x)=>{for(let S=x+1;S<n.length;S++)if(n[S].indexOf(g)>=0)return!1;return!0});const d=n.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,n.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")}}class Kl{constructor(n={}){this.options=n,c.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=T.create("div","maplibregl-ctrl");const l=T.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){T.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const n=this._container.children;if(n.length){const l=n[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&l.classList.add("maplibregl-compact"):l.classList.remove("maplibregl-compact")}}}class zh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const l=++this._id;return this._queue.push({callback:n,id:l,cancelled:!1}),l}remove(n){const l=this._currentlyRunning,d=l?this._queue.concat(l):this._queue;for(const g of d)if(g.id===n)return void(g.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const l=this._currentlyRunning=this._queue;this._queue=[];for(const d of l)if(!d.cancelled&&(d.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Lh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Qi=c.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class Kp extends c.Evented{constructor(n){super(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,n.usedForTerrain=!0,n.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,l){this.sourceCache.update(n,l),this._renderableTilesKeys=[];const d={};for(const g of n.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l}))d[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),c.ortho(g.posMatrix,0,c.EXTENT,0,c.EXTENT,0,1),this._tiles[g.key]=new zn(g,this.tileSize));for(const g in this._tiles)d[g]||delete this._tiles[g]}freeRtt(n){for(const l in this._tiles){const d=this._tiles[l];(!n||d.tileID.equals(n)||d.tileID.isChildOf(n)||n.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n){const l={};for(const d of this._renderableTilesKeys){const g=this._tiles[d].tileID;if(g.canonical.equals(n.canonical)){const x=n.clone();x.posMatrix=new Float64Array(16),c.ortho(x.posMatrix,0,c.EXTENT,0,c.EXTENT,0,1),l[d]=x}else if(g.canonical.isChildOf(n.canonical)){const x=n.clone();x.posMatrix=new Float64Array(16);const S=g.canonical.z-n.canonical.z,k=g.canonical.x-(g.canonical.x>>S<<S),C=g.canonical.y-(g.canonical.y>>S<<S),A=c.EXTENT>>S;c.ortho(x.posMatrix,0,A,0,A,0,1),c.translate(x.posMatrix,x.posMatrix,[-k*A,-C*A,0]),l[d]=x}else if(n.canonical.isChildOf(g.canonical)){const x=n.clone();x.posMatrix=new Float64Array(16);const S=n.canonical.z-g.canonical.z,k=n.canonical.x-(n.canonical.x>>S<<S),C=n.canonical.y-(n.canonical.y>>S<<S),A=c.EXTENT>>S;c.ortho(x.posMatrix,0,c.EXTENT,0,c.EXTENT,0,1),c.translate(x.posMatrix,x.posMatrix,[k*A,C*A,0]),c.scale(x.posMatrix,x.posMatrix,[1/2**S,1/2**S,0]),l[d]=x}}return l}getSourceTile(n,l){const d=this.sourceCache._source;let g=n.overscaledZ-this.deltaZoom;if(g>d.maxzoom&&(g=d.maxzoom),g<d.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(g).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!x||!x.dem)&&l)for(;g>=d.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(n.scaledTo(g--).key);return x}tilesAfterTime(n=Date.now()){return Object.values(this._tiles).filter(l=>l.timeAdded>=n)}}class ua{constructor(n,l,d){this.painter=n,this.sourceCache=new Kp(l),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,l,d,g=c.EXTENT){if(!(l>=0&&l<g&&d>=0&&d<g))return 0;let x=0;const S=this.getTerrainData(n);if(S.tile&&S.tile.dem){const k=function(Y,ee,le){var pe=ee[0],Ce=ee[1];return Y[0]=le[0]*pe+le[4]*Ce+le[12],Y[1]=le[1]*pe+le[5]*Ce+le[13],Y}([],[l/g*c.EXTENT,d/g*c.EXTENT],S.u_terrain_matrix),C=[k[0]*S.tile.dem.dim,k[1]*S.tile.dem.dim],A=[Math.floor(C[0]),Math.floor(C[1])],z=S.tile.dem.get(A[0],A[1]),R=S.tile.dem.get(A[0],A[1]+1),G=S.tile.dem.get(A[0]+1,A[1]),re=S.tile.dem.get(A[0]+1,A[1]+1);x=c.interpolate.number(c.interpolate.number(z,R,C[0]-A[0]),c.interpolate.number(G,re,C[0]-A[0]),C[1]-A[1])}return x}getElevation(n,l,d,g=c.EXTENT){return this.getDEMElevation(n,l,d,g)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const g=this.painter.context,x=new c.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Je(g,x,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Je(g,new c.RGBAImage({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.identity([])}const l=this.sourceCache.getSourceTile(n,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){const g=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new Je(g,l.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),l.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}const d=l&&l+l.tileID.key+n.key;if(d&&!this._demMatrixCache[d]){const g=this.sourceCache.sourceCache._source.maxzoom;let x=n.canonical.z-l.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=g?x=n.canonical.z-g:c.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const S=n.canonical.x-(n.canonical.x>>x<<x),k=n.canonical.y-(n.canonical.y>>x<<x),C=c.fromScaling(new Float64Array(16),[1/(c.EXTENT<<x),1/(c.EXTENT<<x),0]);c.translate(C,C,[S*c.EXTENT,k*c.EXTENT,0]),this._demMatrixCache[n.key]={matrix:C,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(n){const l=this.painter,d=l.width/devicePixelRatio,g=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Je(l.context,{width:d,height:g,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Je(l.context,{width:d,height:g,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(d,g,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,d,g))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,S=0;x<this._coordsTextureSize;x++)for(let k=0;k<this._coordsTextureSize;k++,S+=4)l[S+0]=255&k,l[S+1]=255&x,l[S+2]=k>>8<<4|x>>8,l[S+3]=0;const d=new c.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),g=new Je(n,d,n.gl.RGBA,{premultiply:!1});return g.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(n){const l=new Uint8Array(4),d=this.painter.context,g=d.gl;d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,l),d.bindFramebuffer.set(null);const x=l[0]+(l[2]>>4<<8),S=l[1]+((15&l[2])<<8),k=this.coordsIndex[255-l[3]],C=k&&this.sourceCache.getTileByID(k);if(!C)return null;const A=this._coordsTextureSize,z=(1<<C.tileID.canonical.z)*A;return new c.MercatorCoordinate((C.tileID.canonical.x*A+x)/z,(C.tileID.canonical.y*A+S)/z,this.getElevation(C.tileID,x,S,A))}getTerrainMesh(){if(this._mesh)return this._mesh;const n=this.painter.context,l=new c.Pos3dArray,d=new c.TriangleIndexArray,g=this.meshSize,x=c.EXTENT/g,S=g*g;for(let R=0;R<=g;R++)for(let G=0;G<=g;G++)l.emplaceBack(G*x,R*x,0);for(let R=0;R<S;R+=g+1)for(let G=0;G<g;G++)d.emplaceBack(G+R,g+G+R+1,g+G+R+2),d.emplaceBack(G+R,g+G+R+2,G+R+1);const k=l.length,C=k+2*(g+1);for(const R of[0,1])for(let G=0;G<=g;G++)for(const re of[0,1])l.emplaceBack(G*x,R*c.EXTENT,re);for(let R=0;R<2*g;R+=2)d.emplaceBack(C+R,C+R+1,C+R+3),d.emplaceBack(C+R,C+R+3,C+R+2),d.emplaceBack(k+R,k+R+3,k+R+1),d.emplaceBack(k+R,k+R+2,k+R+3);const A=l.length,z=A+2*(g+1);for(const R of[0,1])for(let G=0;G<=g;G++)for(const re of[0,1])l.emplaceBack(R*c.EXTENT,G*x,re);for(let R=0;R<2*g;R+=2)d.emplaceBack(A+R,A+R+1,A+R+3),d.emplaceBack(A+R,A+R+3,A+R+2),d.emplaceBack(z+R,z+R+3,z+R+1),d.emplaceBack(z+R,z+R+2,z+R+3);return this._mesh={indexBuffer:n.createIndexBuffer(d),vertexBuffer:n.createVertexBuffer(l,Qi.members),segments:c.SegmentVector.simpleSegment(0,0,l.length,d.length)},this._mesh}getMeshFrameDelta(n){return 2*Math.PI*c.earthRadius/Math.pow(2,n)/5}getMinMaxElevation(n){const l=this.getTerrainData(n).tile,d={minElevation:null,maxElevation:null};return l&&l.dem&&(d.minElevation=l.dem.min*this.exaggeration,d.maxElevation=l.dem.max*this.exaggeration),d}}class iy{constructor(n,l,d){this._context=n,this._size=l,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new Je(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(d.texture),{id:n,fbo:l,texture:d,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>n.id!==l),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(n=>!n.inUse)===!1}}const Aa={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Fn{constructor(n,l){this.painter=n,this.terrain=l,this.pool=new iy(n.context,30,l.sourceCache.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter(d=>!n._layers[d].isHidden(l)),this._coordsDescendingInv={};for(const d in n.sourceCaches){this._coordsDescendingInv[d]={};const g=n.sourceCaches[d].getVisibleCoordinates();for(const x of g){const S=this.terrain.sourceCache.getTerrainCoords(x);for(const k in S)this._coordsDescendingInv[d][k]||(this._coordsDescendingInv[d][k]=[]),this._coordsDescendingInv[d][k].push(S[k])}}this._coordsDescendingInvStr={};for(const d of n._order){const g=n._layers[d],x=g.source;if(Aa[g.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(const S in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][S]=this._coordsDescendingInv[x][S].map(k=>k.key).sort().join()}}for(const d of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const x=this._coordsDescendingInvStr[g][d.tileID.key];x&&x!==d.rttCoords[g]&&(d.rtt=[])}}renderLayer(n){if(n.isHidden(this.painter.transform.zoom))return!1;const l=n.type,d=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(Aa[l]&&(this._prevType&&Aa[this._prevType]||this._stacks.push([]),this._prevType=l,this._stacks[this._stacks.length-1].push(n.id),!g))return!0;if(Aa[this._prevType]||Aa[l]&&g){this._prevType=l;const x=this._stacks.length-1,S=this._stacks[x]||[];for(const k of this._renderableTiles){if(this.pool.isFull()&&(Eh(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(k),k.rtt[x]){const A=this.pool.getObjectForId(k.rtt[x].id);if(A.stamp===k.rtt[x].stamp){this.pool.useObject(A);continue}}const C=this.pool.getOrCreateFreeObject();this.pool.useObject(C),this.pool.stampObject(C),k.rtt[x]={id:C.id,stamp:C.stamp},d.context.bindFramebuffer.set(C.fbo.framebuffer),d.context.clear({color:c.Color.transparent,stencil:0}),d.currentStencilSource=void 0;for(let A=0;A<S.length;A++){const z=d.style._layers[S[A]],R=z.source?this._coordsDescendingInv[z.source][k.tileID.key]:[k.tileID];d.context.viewport.set([0,0,C.fbo.width,C.fbo.height]),d._renderTileClippingMasks(z,R),d.renderLayer(d,d.style.sourceCaches[z.source],z,R),z.source&&(k.rttCoords[z.source]=this._coordsDescendingInvStr[z.source][k.tileID.key])}}return Eh(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Aa[l]}return!1}}const ti=w,Xp={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.config.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0},Xs=f=>{f.touchstart=f.dragStart,f.touchmoveWindow=f.dragMove,f.touchend=f.dragEnd},Vc={showCompass:!0,showZoom:!0,visualizePitch:!1};class Oh{constructor(n,l,d=!1){this._clickTolerance=10;const g=n.dragRotate._mouseRotate.getClickTolerance(),x=n.dragRotate._mousePitch.getClickTolerance();this.element=l,this.mouseRotate=$p({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:S,clickTolerance:k,bearingDegreesPerPixelMoved:C=.8})=>{const A=new Oc;return new Pa({clickTolerance:k,move:(z,R)=>({bearingDelta:(R.x-z.x)*C}),moveStateManager:A,enable:S,assignEvents:Xs})})({clickTolerance:g,enable:!0}),this.map=n,d&&(this.mousePitch=Dc({clickTolerance:x,enable:!0}),this.touchPitch=(({enable:S,clickTolerance:k,pitchDegreesPerPixelMoved:C=-.5})=>{const A=new Oc;return new Pa({clickTolerance:k,move:(z,R)=>({pitchDelta:(R.y-z.y)*C}),moveStateManager:A,enable:S,assignEvents:Xs})})({clickTolerance:x,enable:!0})),c.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),T.addEventListener(l,"mousedown",this.mousedown),T.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(l,"touchcancel",this.reset)}startMouse(n,l){this.mouseRotate.dragStart(n,l),this.mousePitch&&this.mousePitch.dragStart(n,l),T.disableDrag()}startTouch(n,l){this.touchRotate.dragStart(n,l),this.touchPitch&&this.touchPitch.dragStart(n,l),T.disableDrag()}moveMouse(n,l){const d=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(n,l)||{};if(g&&d.setBearing(d.getBearing()+g),this.mousePitch){const{pitchDelta:x}=this.mousePitch.dragMove(n,l)||{};x&&d.setPitch(d.getPitch()+x)}}moveTouch(n,l){const d=this.map,{bearingDelta:g}=this.touchRotate.dragMove(n,l)||{};if(g&&d.setBearing(d.getBearing()+g),this.touchPitch){const{pitchDelta:x}=this.touchPitch.dragMove(n,l)||{};x&&d.setPitch(d.getPitch()+x)}}off(){const n=this.element;T.removeEventListener(n,"mousedown",this.mousedown),T.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend),T.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){T.enableDrag(),T.removeEventListener(window,"mousemove",this.mousemove),T.removeEventListener(window,"mouseup",this.mouseup),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend)}mousedown(n){this.startMouse(c.extend({},n,{ctrlKey:!0,preventDefault:()=>n.preventDefault()}),T.mousePos(this.element,n)),T.addEventListener(window,"mousemove",this.mousemove),T.addEventListener(window,"mouseup",this.mouseup)}mousemove(n){this.moveMouse(n,T.mousePos(this.element,n))}mouseup(n){this.mouseRotate.dragEnd(n),this.mousePitch&&this.mousePitch.dragEnd(n),this.offTemp()}touchstart(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,n.targetTouches)[0],this.startTouch(n,this._startPos),T.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.addEventListener(window,"touchend",this.touchend))}touchmove(n){n.targetTouches.length!==1?this.reset():(this._lastPos=T.touchPos(this.element,n.targetTouches)[0],this.moveTouch(n,this._lastPos))}touchend(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}let ha;function qc(f,n,l){if(f=new c.LngLat(f.lng,f.lat),n){const d=new c.LngLat(f.lng-360,f.lat),g=new c.LngLat(f.lng+360,f.lat),x=l.locationPoint(f).distSqr(n);l.locationPoint(d).distSqr(n)<x?f=d:l.locationPoint(g).distSqr(n)<x&&(f=g)}for(;Math.abs(f.lng-l.center.lng)>180;){const d=l.locationPoint(f);if(d.x>=0&&d.y>=0&&d.x<=l.width&&d.y<=l.height)break;f.lng>l.center.lng?f.lng-=360:f.lng+=360}return f}const _s={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Gc(f,n,l){const d=f.classList;for(const g in _s)d.remove(`maplibregl-${l}-anchor-${g}`);d.add(`maplibregl-${l}-anchor-${n}`)}class Xl extends c.Evented{constructor(n,l){if(super(),(n instanceof HTMLElement||l)&&(n=c.extend({element:n},l)),c.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,n&&n.element)this._element=n.element,this._offset=c.Point.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=T.create("div"),this._element.setAttribute("aria-label","Map marker");const d=T.createNS("http://www.w3.org/2000/svg","svg"),g=41,x=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${g}px`),d.setAttributeNS(null,"width",`${x}px`),d.setAttributeNS(null,"viewBox",`0 0 ${x} ${g}`);const S=T.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"stroke","none"),S.setAttributeNS(null,"stroke-width","1"),S.setAttributeNS(null,"fill","none"),S.setAttributeNS(null,"fill-rule","evenodd");const k=T.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");const C=T.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");const A=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ce of A){const oe=T.createNS("http://www.w3.org/2000/svg","ellipse");oe.setAttributeNS(null,"opacity","0.04"),oe.setAttributeNS(null,"cx","10.5"),oe.setAttributeNS(null,"cy","5.80029008"),oe.setAttributeNS(null,"rx",Ce.rx),oe.setAttributeNS(null,"ry",Ce.ry),C.appendChild(oe)}const z=T.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const R=T.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(R);const G=T.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"fill","#000000");const re=T.createNS("http://www.w3.org/2000/svg","path");re.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),G.appendChild(re);const Y=T.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Y.setAttributeNS(null,"fill","#FFFFFF");const ee=T.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");const le=T.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#000000"),le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962");const pe=T.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#FFFFFF"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962"),ee.appendChild(le),ee.appendChild(pe),k.appendChild(C),k.appendChild(z),k.appendChild(G),k.appendChild(Y),k.appendChild(ee),d.appendChild(k),d.setAttributeNS(null,"height",g*this._scale+"px"),d.setAttributeNS(null,"width",x*this._scale+"px"),this._element.appendChild(d),this._offset=c.Point.convert(n&&n.offset||[0,-14])}this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),Gc(this._element,this._anchor,"marker"),this._popup=null}addTo(n){return this.remove(),this._map=n,n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=c.LngLat.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const g=Math.sqrt(Math.pow(13.5,2)/2);n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(n){const l=n.code,d=n.charCode||n.keyCode;l!=="Space"&&l!=="Enter"&&d!==32&&d!==13||this.togglePopup()}_onMapClick(n){const l=n.originalEvent.target,d=this._element;this._popup&&(l===d||d.contains(l))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const n=this._popup;return n?(n.isOpen()?n.remove():n.addTo(this._map),this):this}_update(n){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=qc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let l="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?l=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(l=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let d="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?d="rotateX(0deg)":this._pitchAlignment==="map"&&(d=`rotateX(${this._map.getPitch()}deg)`),n&&n.type!=="moveend"||(this._pos=this._pos.round()),T.setTransform(this._element,`${_s[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${d} ${l}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const g=this._map.unproject(this._pos),x=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=g.distanceTo(this._lngLat)>20*x?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(n){return this._offset=c.Point.convert(n),this._update(),this}_onMove(n){if(!this._isDragging){const l=this._clickTolerance||this._map._clickTolerance;this._isDragging=n.point.dist(this._pointerdownPos)>=l}this._isDragging&&(this._pos=n.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.Event("dragstart"))),this.fire(new c.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.Event("dragend")),this._state="inactive"}_addDragHandler(n){this._element.contains(n.originalEvent.target)&&(n.preventDefault(),this._positionDelta=n.point.sub(this._pos).add(this._offset),this._pointerdownPos=n.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Dh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ys=0,xs=!1;const Bh={maxWidth:100,unit:"metric"};function Hc(f,n,l){const d=l&&l.maxWidth||100,g=f._container.clientHeight/2,x=f.unproject([0,g]),S=f.unproject([d,g]),k=x.distanceTo(S);if(l&&l.unit==="imperial"){const C=3.2808*k;C>5280?bs(n,d,C/5280,f._getUIString("ScaleControl.Miles")):bs(n,d,C,f._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?bs(n,d,k/1852,f._getUIString("ScaleControl.NauticalMiles")):k>=1e3?bs(n,d,k/1e3,f._getUIString("ScaleControl.Kilometers")):bs(n,d,k,f._getUIString("ScaleControl.Meters"))}function bs(f,n,l,d){const g=function(x){const S=Math.pow(10,`${Math.floor(x)}`.length-1);let k=x/S;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(C){const A=Math.pow(10,Math.ceil(-Math.log(C)/Math.LN10));return Math.round(C*A)/A}(k),S*k}(l);f.style.width=n*(g/l)+"px",f.innerHTML=`${g}&nbsp;${d}`}const Wc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Fh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Zc(f){if(f){if(typeof f=="number"){const n=Math.round(Math.sqrt(.5*Math.pow(f,2)));return{center:new c.Point(0,0),top:new c.Point(0,f),"top-left":new c.Point(n,n),"top-right":new c.Point(-n,n),bottom:new c.Point(0,-f),"bottom-left":new c.Point(n,-n),"bottom-right":new c.Point(-n,-n),left:new c.Point(f,0),right:new c.Point(-f,0)}}if(f instanceof c.Point||Array.isArray(f)){const n=c.Point.convert(f);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:c.Point.convert(f.center||[0,0]),top:c.Point.convert(f.top||[0,0]),"top-left":c.Point.convert(f["top-left"]||[0,0]),"top-right":c.Point.convert(f["top-right"]||[0,0]),bottom:c.Point.convert(f.bottom||[0,0]),"bottom-left":c.Point.convert(f["bottom-left"]||[0,0]),"bottom-right":c.Point.convert(f["bottom-right"]||[0,0]),left:c.Point.convert(f.left||[0,0]),right:c.Point.convert(f.right||[0,0])}}return Zc(new c.Point(0,0))}const Kc=w,Xc={setRTLTextPlugin:c.setRTLTextPlugin,getRTLTextPluginStatus:c.getRTLTextPluginStatus,Map:class extends At{constructor(f){var n;if(c.PerformanceUtils.mark(c.PerformanceMarkers.create),(f=c.extend({},Xp,f)).minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new zc(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),{bearingSnap:f.bearingSnap}),this._interactive=f.interactive,this._cooperativeGestures=f.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=f.maxTileCacheSize,this._maxTileCacheZoomLevels=f.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=f.collectResourceTiming,this._renderTaskQueue=new zh,this._controls=[],this._mapId=c.uniqueId(),this._locale=c.extend({},Lh,f.locale),this._clickTolerance=f.clickTolerance,this._pixelRatio=(n=f.pixelRatio)!==null&&n!==void 0?n:devicePixelRatio,this.transformCameraUpdate=f.transformCameraUpdate,this._imageQueueHandle=W.addThrottleControl(()=>this.isMoving()),this._requestManager=new K(f.transformRequest),typeof f.container=="string"){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),c.bindAll(["_onWindowOnline","_onMapScroll","_cooperativeGesturesOnWheel","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let l=!1;this._resizeObserver=new ResizeObserver(d=>{l?this._trackResize&&this.resize(d)._update():l=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ca(this,f),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=f.hash&&new Bp(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,c.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=f.localIdeographFontFamily,this._validateStyle=f.validateStyle,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new Ht({customAttribution:f.customAttribution})),f.maplibreLogo&&this.addControl(new Kl,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new c.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new c.Event(`${l.dataType}dataloading`,l))}),this.on("dataabort",l=>{this.fire(new c.Event("sourcedataabort",l))})}_getMapId(){return this._mapId}addControl(f,n){if(n===void 0&&(n=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=f.onAdd(this);this._controls.push(f);const d=this._controlPositions[n];return n.indexOf("bottom")!==-1?d.insertBefore(l,d.firstChild):d.appendChild(l),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(f);return n>-1&&this._controls.splice(n,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}calculateCameraOptionsFromTo(f,n,l,d){return d==null&&this.terrain&&(d=this.transform.getElevation(l,this.terrain)),super.calculateCameraOptionsFromTo(f,n,l,d)}resize(f){var n;const l=this._containerDimensions(),d=l[0],g=l[1];this._resizeCanvas(d,g,this.getPixelRatio()),this.transform.resize(d,g),(n=this._requestedCameraState)===null||n===void 0||n.resize(d,g),this.painter.resize(d,g,this.getPixelRatio());const x=!this._moving;return x&&(this.stop(),this.fire(new c.Event("movestart",f)).fire(new c.Event("move",f))),this.fire(new c.Event("resize",f)),x&&this.fire(new c.Event("moveend",f)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(f){const[n,l]=this._containerDimensions();this._pixelRatio=f,this._resizeCanvas(n,l,f),this.painter.resize(n,l,f)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(f){return this.transform.setMaxBounds(Jt.convert(f)),this._update()}setMinZoom(f){if((f=f??-2)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f&&this.setZoom(f),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f??22)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f&&this.setZoom(f),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f&&this.setPitch(f),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f&&this.setPitch(f),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(f){return this._cooperativeGestures=f,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(f){return this.transform.locationPoint(c.LngLat.convert(f),this.style&&this.terrain)}unproject(f){return this.transform.pointLocation(c.Point.convert(f),this.terrain)}isMoving(){var f;return this._moving||((f=this.handlers)===null||f===void 0?void 0:f.isMoving())}isZooming(){var f;return this._zooming||((f=this.handlers)===null||f===void 0?void 0:f.isZooming())}isRotating(){var f;return this._rotating||((f=this.handlers)===null||f===void 0?void 0:f.isRotating())}_createDelegatedListener(f,n,l){if(f==="mouseenter"||f==="mouseover"){let d=!1;return{layer:n,listener:l,delegates:{mousemove:x=>{const S=this.getLayer(n)?this.queryRenderedFeatures(x.point,{layers:[n]}):[];S.length?d||(d=!0,l.call(this,new ei(f,this,x.originalEvent,{features:S}))):d=!1},mouseout:()=>{d=!1}}}}if(f==="mouseleave"||f==="mouseout"){let d=!1;return{layer:n,listener:l,delegates:{mousemove:S=>{(this.getLayer(n)?this.queryRenderedFeatures(S.point,{layers:[n]}):[]).length?d=!0:d&&(d=!1,l.call(this,new ei(f,this,S.originalEvent)))},mouseout:S=>{d&&(d=!1,l.call(this,new ei(f,this,S.originalEvent)))}}}}{const d=g=>{const x=this.getLayer(n)?this.queryRenderedFeatures(g.point,{layers:[n]}):[];x.length&&(g.features=x,l.call(this,g),delete g.features)};return{layer:n,listener:l,delegates:{[f]:d}}}}on(f,n,l){if(l===void 0)return super.on(f,n);const d=this._createDelegatedListener(f,n,l);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(d);for(const g in d.delegates)this.on(g,d.delegates[g]);return this}once(f,n,l){if(l===void 0)return super.once(f,n);const d=this._createDelegatedListener(f,n,l);for(const g in d.delegates)this.once(g,d.delegates[g]);return this}off(f,n,l){return l===void 0?super.off(f,n):(this._delegatedListeners&&this._delegatedListeners[f]&&(d=>{const g=this._delegatedListeners[f];for(let x=0;x<g.length;x++){const S=g[x];if(S.layer===n&&S.listener===l){for(const k in S.delegates)this.off(k,S.delegates[k]);return g.splice(x,1),this}}})(),this)}queryRenderedFeatures(f,n){if(!this.style)return[];let l;const d=f instanceof c.Point||Array.isArray(f),g=d?f:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(d?{}:f)||{},g instanceof c.Point||typeof g[0]=="number")l=[c.Point.convert(g)];else{const x=c.Point.convert(g[0]),S=c.Point.convert(g[1]);l=[x,new c.Point(S.x,x.y),S,new c.Point(x.x,S.y),x]}return this.style.queryRenderedFeatures(l,n,this.transform)}querySourceFeatures(f,n){return this.style.querySourceFeatures(f,n)}setStyle(f,n){return(n=c.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&f?(this._diffStyle(f,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(f,n))}setTransformRequest(f){return this._requestManager.setTransformRequest(f),this}_getUIString(f){const n=this._locale[f];if(n==null)throw new Error(`Missing UI string '${f}'`);return n}_updateStyle(f,n){if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(f,n));const l=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!f)),f?(this.style=new Lr(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof f=="string"?this.style.loadURL(f,n,l):this.style.loadJSON(f,n,l),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Lr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,n){if(typeof f=="string"){const l=this._requestManager.transformRequest(f,q.Style);c.getJSON(l,(d,g)=>{d?this.fire(new c.ErrorEvent(d)):g&&this._updateDiff(g,n)})}else typeof f=="object"&&this._updateDiff(f,n)}_updateDiff(f,n){try{this.style.setState(f,n)&&this._update(!0)}catch(l){c.warnOnce(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(f,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.warnOnce("There is no style added to the map.")}addSource(f,n){return this._lazyInitEmptyStyle(),this.style.addSource(f,n),this._update(!0)}isSourceLoaded(f){const n=this.style&&this.style.sourceCaches[f];if(n!==void 0)return n.loaded();this.fire(new c.ErrorEvent(new Error(`There is no source with ID '${f}'`)))}setTerrain(f){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),f){const n=this.style.sourceCaches[f.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${f.source}`);for(const l in this.style._layers){const d=this.style._layers[l];d.type==="hillshade"&&d.source===f.source&&c.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ua(this.painter,n,f),this.painter.renderToTexture=new Fn(this.painter,this.terrain),this.transform.updateElevation(this.terrain),this._terrainDataCallback=l=>{l.dataType==="style"?this.terrain.sourceCache.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId===f.source&&this.transform.updateElevation(this.terrain),this.terrain.sourceCache.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.updateElevation(this.terrain);return this.fire(new c.Event("terrain",{terrain:f})),this}getTerrain(){return this.terrain&&this.terrain.options}areTilesLoaded(){const f=this.style&&this.style.sourceCaches;for(const n in f){const l=f[n]._tiles;for(const d in l){const g=l[d];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(f,n,l){return this._lazyInitEmptyStyle(),this.style.addSourceType(f,n,l)}removeSource(f){return this.style.removeSource(f),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,n,{pixelRatio:l=1,sdf:d=!1,stretchX:g,stretchY:x,content:S}={}){if(this._lazyInitEmptyStyle(),n instanceof HTMLImageElement||c.isImageBitmap(n)){const{width:k,height:C,data:A}=c.exported.getImageData(n);this.style.addImage(f,{data:new c.RGBAImage({width:k,height:C},A),pixelRatio:l,stretchX:g,stretchY:x,content:S,sdf:d,version:0})}else{if(n.width===void 0||n.height===void 0)return this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:k,height:C,data:A}=n,z=n;this.style.addImage(f,{data:new c.RGBAImage({width:k,height:C},new Uint8Array(A)),pixelRatio:l,stretchX:g,stretchY:x,content:S,sdf:d,version:0,userImage:z}),z.onAdd&&z.onAdd(this,f)}}}updateImage(f,n){const l=this.style.getImage(f);if(!l)return this.fire(new c.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=n instanceof HTMLImageElement||c.isImageBitmap(n)?c.exported.getImageData(n):n,{width:g,height:x,data:S}=d;if(g===void 0||x===void 0)return this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==l.data.width||x!==l.data.height)return this.fire(new c.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(n instanceof HTMLImageElement||c.isImageBitmap(n));l.data.replace(S,k),this.style.updateImage(f,l)}getImage(f){return this.style.getImage(f)}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new c.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,n){W.getImage(this._requestManager.transformRequest(f,q.Image),n)}listImages(){return this.style.listImages()}addLayer(f,n){return this._lazyInitEmptyStyle(),this.style.addLayer(f,n),this._update(!0)}moveLayer(f,n){return this.style.moveLayer(f,n),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,n,l){return this.style.setLayerZoomRange(f,n,l),this._update(!0)}setFilter(f,n,l={}){return this.style.setFilter(f,n,l),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,n,l,d={}){return this.style.setPaintProperty(f,n,l,d),this._update(!0)}getPaintProperty(f,n){return this.style.getPaintProperty(f,n)}setLayoutProperty(f,n,l,d={}){return this.style.setLayoutProperty(f,n,l,d),this._update(!0)}getLayoutProperty(f,n){return this.style.getLayoutProperty(f,n)}setGlyphs(f,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(f,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(f,n,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(f,n,l,d=>{d||this._update(!0)}),this}removeSprite(f){return this._lazyInitEmptyStyle(),this.style.removeSprite(f),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(f,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(f,n,l=>{l||this._update(!0)}),this}setLight(f,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,n),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(f,n){return this.style.setFeatureState(f,n),this._update()}removeFeatureState(f,n){return this.style.removeFeatureState(f,n),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let f=0,n=0;return this._container&&(f=this._container.clientWidth||400,n=this._container.clientHeight||300),[f,n]}_setupContainer(){const f=this._container;f.classList.add("maplibregl-map");const n=this._canvasContainer=T.create("div","maplibregl-canvas-container",f);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=T.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const l=this._containerDimensions();this._resizeCanvas(l[0],l[1],this.getPixelRatio());const d=this._controlContainer=T.create("div","maplibregl-control-container",f),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{g[x]=T.create("div",`maplibregl-ctrl-${x} `,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_cooperativeGesturesOnWheel(f){this._onCooperativeGesture(f,f[this._metaKey],1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=T.create("div","maplibregl-cooperative-gesture-screen",this._container);let f=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(f=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${f}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){T.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(f,n,l){this._canvas.width=l*f,this._canvas.height=l*n,this._canvas.style.width=`${f}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const f={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let n=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{n={requestedAttributes:f},d&&(n.statusMessage=d.statusMessage,n.type=d.type)},{once:!0});const l=this._canvas.getContext("webgl2",f)||this._canvas.getContext("webgl",f);if(!l){const d="Failed to initialize WebGL";throw n?(n.message=d,new Error(JSON.stringify(n))):new Error(d)}this.painter=new Dp(l,this.transform),P.testSupport(l)}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new c.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(f,n,l){return!n&&l<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_render(f){const n=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(f),this._removed)return;let l=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,x=c.exported.now();this.style.zoomHistory.update(g,x);const S=new c.EvaluationParameters(g,{now:x,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),k=S.crossFadingFactor();k===1&&k===this._crossFadingFactor||(l=!0,this._crossFadingFactor=k),this.style.update(S)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain&&this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.updateElevation(this.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new c.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.PerformanceUtils.mark(c.PerformanceMarkers.load),this.fire(new c.Event("load"))),this.style&&(this.style.hasTransitions()||l)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.Event("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,c.PerformanceUtils.mark(c.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var f;this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),W.removeThrottleControl(this._imageQueueHandle),(f=this._resizeObserver)===null||f===void 0||f.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),T.remove(this._canvasContainer),T.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),c.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new c.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=c.exported.frame(f=>{c.PerformanceUtils.frame(f),this._frame=null,this._render(f)}))}_onWindowOnline(){this._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}get version(){return ti}getCameraTargetElevation(){return this.transform.elevation}},NavigationControl:class{constructor(f){this.options=c.extend({},Vc,f),this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(c.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),T.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),T.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(c.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=T.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map.getZoom(),n=f===this._map.getMaxZoom(),l=f===this._map.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=l,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",l.toString())}_rotateCompassArrow(){const f=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=f}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Oh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(f,n){const l=T.create("button",f,this._container);return l.type="button",l.addEventListener("click",n),l}_setButtonTitle(f,n){const l=this._map._getUIString(`NavigationControl.${n}`);f.title=l,f.setAttribute("aria-label",l)}},GeolocateControl:class extends c.Evented{constructor(f){super(),this.options=c.extend({},Dh,f),c.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(f){return this._map=f,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(n,l=!1){ha===void 0||l?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(d=>{ha=d.state!=="denied",n(ha)}).catch(()=>{ha=!!window.navigator.geolocation,n(ha)}):(ha=!!window.navigator.geolocation,n(ha)):n(ha)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ys=0,xs=!1}_isOutOfMapMaxBounds(f){const n=this._map.getMaxBounds(),l=f.coords;return n&&(l.longitude<n.getWest()||l.longitude>n.getEast()||l.latitude<n.getSouth()||l.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new c.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(f),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.Event("geolocate",f)),this._finish()}}_updateCamera(f){const n=new c.LngLat(f.coords.longitude,f.coords.latitude),l=f.coords.accuracy,d=this._map.getBearing(),g=c.extend({bearing:d},this.options.fitBoundsOptions),x=Jt.fromLngLat(n,l);this._map.fitBounds(x,g,{geolocateSource:!0})}_updateMarker(f){if(f){const n=new c.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map.getBounds(),n=f.getSouthEast(),l=f.getNorthEast(),d=n.distanceTo(l),g=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(f){if(this._map){if(this.options.trackUserLocation)if(f.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(f.code===3&&xs)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._map){if(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=T.create("button","maplibregl-ctrl-geolocate",this._container),T.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",f===!1){c.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Xl(this._dotElement),this._circleElement=T.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Xl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",n=>{n.geolocateSource||this._watchState!=="ACTIVE_LOCK"||n.originalEvent&&n.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.Event("trackuserlocationend")))})}}trigger(){if(!this._setup)return c.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ys--,xs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let f;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ys++,Ys>1?(f={maximumAge:6e5,timeout:0},xs=!0):(f=this.options.positionOptions,xs=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,f)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ht,LogoControl:Kl,ScaleControl:class{constructor(f){this.options=c.extend({},Bh,f),c.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Hc(this._map,this._container,this.options)}onAdd(f){return this._map=f,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(f){this.options.unit=f,Hc(this._map,this._container,this.options)}},FullscreenControl:class extends c.Evented{constructor(f={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,f&&f.container&&(f.container instanceof HTMLElement?this._container=f.container:c.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){T.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const f=this._fullscreenButton=T.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);T.create("span","maplibregl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.title=f}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new c.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},TerrainControl:class{constructor(f){this.options=f,c.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(f){return this._map=f,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=T.create("button","maplibregl-ctrl-terrain",this._container),T.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){T.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends c.Evented{constructor(f){super(),this.options=c.extend(Object.create(Wc),f),c.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){return this._lngLat=c.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(document.createTextNode(f))}setHTML(f){const n=document.createDocumentFragment(),l=document.createElement("body");let d;for(l.innerHTML=f;d=l.firstChild,d;)n.appendChild(d);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=T.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(f),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(f){this._container&&this._container.classList.add(f)}removeClassName(f){this._container&&this._container.classList.remove(f)}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){if(this._container)return this._container.classList.toggle(f)}_createCloseButton(){this.options.closeButton&&(this._closeButton=T.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(f){this._update(f.point)}_onMouseMove(f){this._update(f.point)}_onDrag(f){this._update(f.point)}_update(f){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=T.create("div","maplibregl-popup",this._map.getContainer()),this._tip=T.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(x=>this._container.classList.add(x)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=qc(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!f))return;const n=this._pos=this._trackPointer&&f?f:this._map.project(this._lngLat);let l=this.options.anchor;const d=Zc(this.options.offset);if(!l){const x=this._container.offsetWidth,S=this._container.offsetHeight;let k;k=n.y+d.bottom.y<S?["top"]:n.y>this._map.transform.height-S?["bottom"]:[],n.x<x/2?k.push("left"):n.x>this._map.transform.width-x/2&&k.push("right"),l=k.length===0?"bottom":k.join("-")}const g=n.add(d[l]).round();T.setTransform(this._container,`${_s[l]} translate(${g.x}px,${g.y}px)`),Gc(this._container,l,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(Fh);f&&f.focus()}_onClose(){this.remove()}},Marker:Xl,Style:Lr,LngLat:c.LngLat,LngLatBounds:Jt,Point:c.Point,MercatorCoordinate:c.MercatorCoordinate,Evented:c.Evented,AJAXError:c.AJAXError,config:c.config,CanvasSource:Ae,GeoJSONSource:wn,ImageSource:Mn,RasterDEMTileSource:sr,RasterTileSource:Fr,VectorTileSource:zr,VideoSource:hn,prewarm:function(){Wt().acquire(rn)},clearPrewarmedResources:function(){const f=Xr;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(rn),Xr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return Kc},get workerCount(){return Ve.workerCount},set workerCount(f){Ve.workerCount=f},get maxParallelImageRequests(){return c.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){c.config.MAX_PARALLEL_IMAGE_REQUESTS=f},get workerUrl(){return c.config.WORKER_URL},set workerUrl(f){c.config.WORKER_URL=f},addProtocol(f,n){c.config.REGISTERED_PROTOCOLS[f]=n},removeProtocol(f){delete c.config.REGISTERED_PROTOCOLS[f]}};return $c.extend(Xc,{isSafari:c.isSafari,getPerformanceMetrics:c.PerformanceUtils.getPerformanceMetrics}),Xc});var v=u;return v})})(Ck);var JB=Ck.exports;const Er=Tl(JB),Pk="3.7.5",QB=Pk,e6=typeof atob=="function",t6=typeof btoa=="function",mh=typeof Buffer=="function",tS=typeof TextDecoder=="function"?new TextDecoder:void 0,rS=typeof TextEncoder=="function"?new TextEncoder:void 0,r6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",kd=Array.prototype.slice.call(r6),Vf=(e=>{let t={};return e.forEach((i,s)=>t[i]=s),t})(kd),n6=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Wi=String.fromCharCode.bind(String),nS=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),Ak=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),Ik=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Mk=e=>{let t,i,s,u,p="";const v=e.length%3;for(let c=0;c<e.length;){if((i=e.charCodeAt(c++))>255||(s=e.charCodeAt(c++))>255||(u=e.charCodeAt(c++))>255)throw new TypeError("invalid character found");t=i<<16|s<<8|u,p+=kd[t>>18&63]+kd[t>>12&63]+kd[t>>6&63]+kd[t&63]}return v?p.slice(0,v-3)+"===".substring(v):p},Wx=t6?e=>btoa(e):mh?e=>Buffer.from(e,"binary").toString("base64"):Mk,K0=mh?e=>Buffer.from(e).toString("base64"):e=>{let i=[];for(let s=0,u=e.length;s<u;s+=4096)i.push(Wi.apply(null,e.subarray(s,s+4096)));return Wx(i.join(""))},lm=(e,t=!1)=>t?Ak(K0(e)):K0(e),i6=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?Wi(192|t>>>6)+Wi(128|t&63):Wi(224|t>>>12&15)+Wi(128|t>>>6&63)+Wi(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return Wi(240|t>>>18&7)+Wi(128|t>>>12&63)+Wi(128|t>>>6&63)+Wi(128|t&63)}},o6=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Rk=e=>e.replace(o6,i6),iS=mh?e=>Buffer.from(e,"utf8").toString("base64"):rS?e=>K0(rS.encode(e)):e=>Wx(Rk(e)),Nu=(e,t=!1)=>t?Ak(iS(e)):iS(e),oS=e=>Nu(e,!0),a6=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,s6=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),i=t-65536;return Wi((i>>>10)+55296)+Wi((i&1023)+56320);case 3:return Wi((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return Wi((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},zk=e=>e.replace(a6,s6),Lk=e=>{if(e=e.replace(/\s+/g,""),!n6.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,i="",s,u;for(let p=0;p<e.length;)t=Vf[e.charAt(p++)]<<18|Vf[e.charAt(p++)]<<12|(s=Vf[e.charAt(p++)])<<6|(u=Vf[e.charAt(p++)]),i+=s===64?Wi(t>>16&255):u===64?Wi(t>>16&255,t>>8&255):Wi(t>>16&255,t>>8&255,t&255);return i},Zx=e6?e=>atob(Ik(e)):mh?e=>Buffer.from(e,"base64").toString("binary"):Lk,Ok=mh?e=>nS(Buffer.from(e,"base64")):e=>nS(Zx(e).split("").map(t=>t.charCodeAt(0))),Dk=e=>Ok(Bk(e)),l6=mh?e=>Buffer.from(e,"base64").toString("utf8"):tS?e=>tS.decode(Ok(e)):e=>zk(Zx(e)),Bk=e=>Ik(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),X0=e=>l6(Bk(e)),c6=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},Fk=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),Nk=function(){const e=(t,i)=>Object.defineProperty(String.prototype,t,Fk(i));e("fromBase64",function(){return X0(this)}),e("toBase64",function(t){return Nu(this,t)}),e("toBase64URI",function(){return Nu(this,!0)}),e("toBase64URL",function(){return Nu(this,!0)}),e("toUint8Array",function(){return Dk(this)})},Uk=function(){const e=(t,i)=>Object.defineProperty(Uint8Array.prototype,t,Fk(i));e("toBase64",function(t){return lm(this,t)}),e("toBase64URI",function(){return lm(this,!0)}),e("toBase64URL",function(){return lm(this,!0)})},u6=()=>{Nk(),Uk()},h6={version:Pk,VERSION:QB,atob:Zx,atobPolyfill:Lk,btoa:Wx,btoaPolyfill:Mk,fromBase64:X0,toBase64:Nu,encode:Nu,encodeURI:oS,encodeURL:oS,utob:Rk,btou:zk,decode:X0,isValid:c6,fromUint8Array:lm,toUint8Array:Dk,extendString:Nk,extendUint8Array:Uk,extendBuiltins:u6};var Kx={exports:{}},Uu=typeof Reflect=="object"?Reflect:null,aS=Uu&&typeof Uu.apply=="function"?Uu.apply:function(t,i,s){return Function.prototype.apply.call(t,i,s)},cm;Uu&&typeof Uu.ownKeys=="function"?cm=Uu.ownKeys:Object.getOwnPropertySymbols?cm=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:cm=function(t){return Object.getOwnPropertyNames(t)};function d6(e){console&&console.warn&&console.warn(e)}var jk=Number.isNaN||function(t){return t!==t};function gn(){gn.init.call(this)}Kx.exports=gn;Kx.exports.once=g6;gn.EventEmitter=gn;gn.prototype._events=void 0;gn.prototype._eventsCount=0;gn.prototype._maxListeners=void 0;var sS=10;function Gg(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(gn,"defaultMaxListeners",{enumerable:!0,get:function(){return sS},set:function(e){if(typeof e!="number"||e<0||jk(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");sS=e}});gn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};gn.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||jk(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function $k(e){return e._maxListeners===void 0?gn.defaultMaxListeners:e._maxListeners}gn.prototype.getMaxListeners=function(){return $k(this)};gn.prototype.emit=function(t){for(var i=[],s=1;s<arguments.length;s++)i.push(arguments[s]);var u=t==="error",p=this._events;if(p!==void 0)u=u&&p.error===void 0;else if(!u)return!1;if(u){var v;if(i.length>0&&(v=i[0]),v instanceof Error)throw v;var c=new Error("Unhandled error."+(v?" ("+v.message+")":""));throw c.context=v,c}var w=p[t];if(w===void 0)return!1;if(typeof w=="function")aS(w,this,i);else for(var T=w.length,P=Wk(w,T),s=0;s<T;++s)aS(P[s],this,i);return!0};function Vk(e,t,i,s){var u,p,v;if(Gg(i),p=e._events,p===void 0?(p=e._events=Object.create(null),e._eventsCount=0):(p.newListener!==void 0&&(e.emit("newListener",t,i.listener?i.listener:i),p=e._events),v=p[t]),v===void 0)v=p[t]=i,++e._eventsCount;else if(typeof v=="function"?v=p[t]=s?[i,v]:[v,i]:s?v.unshift(i):v.push(i),u=$k(e),u>0&&v.length>u&&!v.warned){v.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=v.length,d6(c)}return e}gn.prototype.addListener=function(t,i){return Vk(this,t,i,!1)};gn.prototype.on=gn.prototype.addListener;gn.prototype.prependListener=function(t,i){return Vk(this,t,i,!0)};function p6(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function qk(e,t,i){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},u=p6.bind(s);return u.listener=i,s.wrapFn=u,u}gn.prototype.once=function(t,i){return Gg(i),this.on(t,qk(this,t,i)),this};gn.prototype.prependOnceListener=function(t,i){return Gg(i),this.prependListener(t,qk(this,t,i)),this};gn.prototype.removeListener=function(t,i){var s,u,p,v,c;if(Gg(i),u=this._events,u===void 0)return this;if(s=u[t],s===void 0)return this;if(s===i||s.listener===i)--this._eventsCount===0?this._events=Object.create(null):(delete u[t],u.removeListener&&this.emit("removeListener",t,s.listener||i));else if(typeof s!="function"){for(p=-1,v=s.length-1;v>=0;v--)if(s[v]===i||s[v].listener===i){c=s[v].listener,p=v;break}if(p<0)return this;p===0?s.shift():f6(s,p),s.length===1&&(u[t]=s[0]),u.removeListener!==void 0&&this.emit("removeListener",t,c||i)}return this};gn.prototype.off=gn.prototype.removeListener;gn.prototype.removeAllListeners=function(t){var i,s,u;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[t]),this;if(arguments.length===0){var p=Object.keys(s),v;for(u=0;u<p.length;++u)v=p[u],v!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(i=s[t],typeof i=="function")this.removeListener(t,i);else if(i!==void 0)for(u=i.length-1;u>=0;u--)this.removeListener(t,i[u]);return this};function Gk(e,t,i){var s=e._events;if(s===void 0)return[];var u=s[t];return u===void 0?[]:typeof u=="function"?i?[u.listener||u]:[u]:i?m6(u):Wk(u,u.length)}gn.prototype.listeners=function(t){return Gk(this,t,!0)};gn.prototype.rawListeners=function(t){return Gk(this,t,!1)};gn.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Hk.call(e,t)};gn.prototype.listenerCount=Hk;function Hk(e){var t=this._events;if(t!==void 0){var i=t[e];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}gn.prototype.eventNames=function(){return this._eventsCount>0?cm(this._events):[]};function Wk(e,t){for(var i=new Array(t),s=0;s<t;++s)i[s]=e[s];return i}function f6(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function m6(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}function g6(e,t){return new Promise(function(i,s){function u(v){e.removeListener(t,p),s(v)}function p(){typeof e.removeListener=="function"&&e.removeListener("error",u),i([].slice.call(arguments))}Zk(e,t,p,{once:!0}),t!=="error"&&y6(e,u,{once:!0})})}function y6(e,t,i){typeof e.on=="function"&&Zk(e,"error",t,i)}function Zk(e,t,i,s){if(typeof e.on=="function")s.once?e.once(t,i):e.on(t,i);else if(typeof e.addEventListener=="function")e.addEventListener(t,function u(p){s.once&&e.removeEventListener(t,u),i(p)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var v6=Kx.exports;const _6=Tl(v6);function x6(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class b6{constructor(){this._apiKey="",this._fetch=x6()}set apiKey(t){this._apiKey=t}get apiKey(){return this._apiKey}set fetch(t){this._fetch=t}get fetch(){return this._fetch}}const ju=new b6,w6={AUTO:"auto",ALBANIAN:"sq",ARABIC:"ar",ARMENIAN:"hy",AZERBAIJANI:"az",BELORUSSIAN:"be",BOSNIAN:"bs",BRETON:"br",BULGARIAN:"bg",CATALAN:"ca",CHINESE:"zh",CROATIAN:"hr",CZECH:"cs",DANISH:"da",DUTCH:"nl",ENGLISH:"en",ESPERANTO:"eo",ESTONIAN:"et",FINNISH:"fi",FRENCH:"fr",FRISIAN:"fy",GEORGIAN:"ka",GERMAN:"de",GREEK:"el",HEBREW:"he",HUNGARIAN:"hu",ICELANDIC:"is",IRISH:"ga",ITALIAN:"it",JAPANESE:"ja",KANNADA:"kn",KAZAKH:"kk",KOREAN:"ko",ROMAN_LATIN:"la",LATVIAN:"lv",LITHUANIAN:"lt",LUXEMBOURGISH:"lb",MACEDONIAN:"mk",MALTESE:"mt",NORWEGIAN:"no",POLISH:"pl",PORTUGUESE:"pt",ROMANIAN:"ro",ROMANSH:"rm",RUSSIAN:"ru",SCOTTISH_GAELIC:"gd",SERBIAN_CYRILLIC:"sr",SLOVAK:"sk",SLOVENE:"sl",SPANISH:"es",SWEDISH:"sv",THAI:"th",TURKISH:"tr",UKRAINIAN:"uk",WELSH:"cy"};new Set(Object.values(w6));var S6=(e,t,i)=>new Promise((s,u)=>{var p=w=>{try{c(i.next(w))}catch(T){u(T)}},v=w=>{try{c(i.throw(w))}catch(T){u(T)}},c=w=>w.done?s(w.value):Promise.resolve(w.value).then(p,v);c((i=i.apply(e,t)).next())});function E6(e){return S6(this,arguments,function*(t,i={}){if(ju.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(t).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return ju.fetch(t,i)})}const Kk={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(Kk);class T6 extends Error{constructor(t,i=""){super(`Call to enpoint ${t.url} failed with the status code ${t.status}. ${i}`),this.res=t}}var C6=(e,t,i)=>new Promise((s,u)=>{var p=w=>{try{c(i.next(w))}catch(T){u(T)}},v=w=>{try{c(i.throw(w))}catch(T){u(T)}},c=w=>w.done?s(w.value):Promise.resolve(w.value).then(p,v);c((i=i.apply(e,t)).next())});const lS={403:"Key is missing, invalid or restricted"};function k6(){return C6(this,arguments,function*(e={}){var t;const i=new URL("geolocation/ip.json",Kk.maptilerApiURL);i.searchParams.set("key",(t=e.apiKey)!=null?t:ju.apiKey);const s=i.toString(),u=yield E6(s);if(!u.ok)throw new T6(u,u.status in lS?lS[u.status]:"");return yield u.json()})}const cS={info:k6};function Xk(e){const t=/^maptiler:\/\/(.*)/;let i;const s=e.trim();let u;return s.startsWith("http://")||s.startsWith("https://")?u=s:(i=t.exec(s))!==null?u=`https://api.maptiler.com/maps/${i[1]}/style.json`:u=`https://api.maptiler.com/maps/${s}/style.json`,u}class Yk{constructor(t,i,s,u,p,v){this.name=t,this.variantType=i,this.id=s,this.referenceStyle=u,this.description=p,this.imageURL=v}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(t){return this.referenceStyle.hasVariant(t)}getVariant(t){return this.referenceStyle.getVariant(t)}getVariants(){return this.referenceStyle.getVariants().filter(t=>t!==this)}getImageURL(){return this.imageURL}getExpandedStyleURL(){return Xk(this.getId())}}class Jk{constructor(t,i){this.name=t,this.id=i,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(t){this.variants[t.getType()]=t,this.orderedVariants.push(t)}hasVariant(t){return t in this.variants}getVariant(t){return t in this.variants?this.variants[t]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0]}}const Y0=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-night",name:"Night",variantType:"NIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]}];function P6(e){return new Proxy(e,{get(t,i,s){return t.hasVariant(i)?t.getVariant(i):i.toString().toUpperCase()===i?e.getDefaultVariant():Reflect.get(t,i,s)}})}function A6(){const e={};for(let t=0;t<Y0.length;t+=1){const i=Y0[t],s=P6(new Jk(i.name,i.referenceStyleID));for(let u=0;u<i.variants.length;u+=1){const p=i.variants[u],v=new Yk(p.name,p.variantType,p.id,s,p.description,p.imageURL);s.addVariant(v)}e[i.referenceStyleID]=s}return e}const Qk=A6();let qf;const I6=new Uint8Array(16);function M6(){if(!qf&&(qf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!qf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return qf(I6)}const Gi=[];for(let e=0;e<256;++e)Gi.push((e+256).toString(16).slice(1));function R6(e,t=0){return Gi[e[t+0]]+Gi[e[t+1]]+Gi[e[t+2]]+Gi[e[t+3]]+"-"+Gi[e[t+4]]+Gi[e[t+5]]+"-"+Gi[e[t+6]]+Gi[e[t+7]]+"-"+Gi[e[t+8]]+Gi[e[t+9]]+"-"+Gi[e[t+10]]+Gi[e[t+11]]+Gi[e[t+12]]+Gi[e[t+13]]+Gi[e[t+14]]+Gi[e[t+15]]}const z6=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),uS={randomUUID:z6};function L6(e,t,i){if(uS.randomUUID&&!t&&!e)return uS.randomUUID();e=e||{};const s=e.random||(e.rng||M6)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){i=i||0;for(let u=0;u<16;++u)t[i+u]=s[u];return t}return R6(s)}const Ua={AUTO:"auto",STYLE_LOCK:"style_lock",LATIN:"latin",NON_LATIN:"nonlatin",LOCAL:"",ALBANIAN:"sq",AMHARIC:"am",ARABIC:"ar",ARMENIAN:"hy",AZERBAIJANI:"az",BASQUE:"eu",BELORUSSIAN:"be",BOSNIAN:"bs",BRETON:"br",BULGARIAN:"bg",CATALAN:"ca",CHINESE:"zh",CORSICAN:"co",CROATIAN:"hr",CZECH:"cs",DANISH:"da",DUTCH:"nl",ENGLISH:"en",ESPERANTO:"eo",ESTONIAN:"et",FINNISH:"fi",FRENCH:"fr",FRISIAN:"fy",GEORGIAN:"ka",GERMAN:"de",GREEK:"el",HEBREW:"he",HINDI:"hi",HUNGARIAN:"hu",ICELANDIC:"is",INDONESIAN:"id",IRISH:"ga",ITALIAN:"it",JAPANESE:"ja",JAPANESE_HIRAGANA:"ja-Hira",JAPANESE_KANA:"ja_kana",JAPANESE_LATIN:"ja_rm",JAPANESE_2018:"ja-Latn",KANNADA:"kn",KAZAKH:"kk",KOREAN:"ko",KOREAN_LATIN:"ko-Latn",KURDISH:"ku",ROMAN_LATIN:"la",LATVIAN:"lv",LITHUANIAN:"lt",LUXEMBOURGISH:"lb",MACEDONIAN:"mk",MALAYALAM:"ml",MALTESE:"mt",NORWEGIAN:"no",OCCITAN:"oc",POLISH:"pl",PORTUGUESE:"pt",ROMANIAN:"ro",ROMANSH:"rm",RUSSIAN:"ru",SCOTTISH_GAELIC:"gd",SERBIAN_CYRILLIC:"sr",SERBIAN_LATIN:"sr-Latn",SLOVAK:"sk",SLOVENE:"sl",SPANISH:"es",SWEDISH:"sv",TAMIL:"ta",TELUGU:"te",THAI:"th",TURKISH:"tr",UKRAINIAN:"uk",WELSH:"cy"},O6=new Set(Object.values(Ua));function hS(e){return O6.has(e)}const D6=new Set(Object.values(Ua));function zv(){if(typeof navigator>"u")return Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];const e=Array.from(new Set(navigator.languages.map(t=>t.split("-")[0]))).filter(t=>D6.has(t));return e.length?e[0]:Ua.LATIN}const eP=L6();class B6 extends _6{constructor(){super(),this.primaryLanguage=Ua.AUTO,this.secondaryLanguage=null,this.session=!0,this._unit="metric",this._apiKey=""}set unit(t){this._unit=t,this.emit("unit",t)}get unit(){return this._unit}set apiKey(t){this._apiKey=t,ju.apiKey=t,this.emit("apiKey",t)}get apiKey(){return this._apiKey}set fetch(t){ju.fetch=t}get fetch(){return ju.fetch}}const Ba=new B6,Po={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:Ua.AUTO,secondaryLanguage:Ua.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(Po);class F6 extends Er.LogoControl{onAdd(t){return super.onAdd(t)}}class dS extends F6{constructor(t={}){var i,s;super(t),this.logoURL="",this.linkURL="",this.logoURL=(i=t.logoURL)!=null?i:Po.maptilerLogoURL,this.linkURL=(s=t.linkURL)!=null?s:Po.maptilerURL}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const i=window.document.createElement("a");return i.style.backgroundRepeat="no-repeat",i.style.cursor="pointer",i.style.display="block",i.style.height="23px",i.style.margin="0 0 -4px -4px",i.style.overflow="hidden",i.style.width="88px",i.style.backgroundImage=`url(${this.logoURL})`,i.style.backgroundSize="100px 30px",i.style.width="100px",i.style.height="30px",i.target="_blank",i.rel="noopener",i.href=this.linkURL,i.setAttribute("aria-label","MapTiler logo"),i.setAttribute("rel","noopener"),this._container.appendChild(i),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}}var N6=Object.defineProperty,pS=Object.getOwnPropertySymbols,U6=Object.prototype.hasOwnProperty,j6=Object.prototype.propertyIsEnumerable,fS=(e,t,i)=>t in e?N6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,mS=(e,t)=>{for(var i in t||(t={}))U6.call(t,i)&&fS(e,i,t[i]);if(pS)for(var i of pS(t))j6.call(t,i)&&fS(e,i,t[i]);return e};function $6(){Er.getRTLTextPluginStatus()==="unavailable"&&Er.setRTLTextPlugin(Po.rtlPluginURL,null,!0)}function V6(e,t){e.forEach(i=>{t[i]&&(t[i]=t[i].bind(t))})}function uc(e,t,i){const s=window.document.createElement(e);return t!==void 0&&(s.className=t),i&&i.appendChild(s),s}function q6(e){e.parentNode&&e.parentNode.removeChild(e)}function gS(e,t){let i=null;try{i=new URL(e)}catch{return{url:e}}return i.host===Po.maptilerApiHost&&(i.searchParams.has("key")||i.searchParams.append("key",Ba.apiKey),Ba.session&&i.searchParams.append("mtsid",eP)),{url:i.href}}function yS(e=null){return function(t,i){if(e){const s=e(t,i),u=gS(s.url);return mS(mS({},s),u)}else return gS(t)}}function vS(e){return e?typeof e=="string"||e instanceof String?!e.startsWith("http")&&e.toLowerCase().includes(".json")?e:Xk(e):e instanceof Yk?e.getExpandedStyleURL():e instanceof Jk?e.getDefaultVariant().getExpandedStyleURL():e:Qk[Y0[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL()}class G6{constructor(){V6(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=uc("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=uc("button","maplibregl-ctrl-terrain",this._container),uc("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){q6(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}}class H6 extends Er.NavigationControl{onAdd(t){return super.onAdd(t)}}class W6 extends H6{constructor(){super({showCompass:!0,showZoom:!0,visualizePitch:!0}),this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",t=>{this._map.getPitch()===0?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})}_createButton(t,i){const s=super._createButton(t,i);return s.clickFunction=i,s}_rotateCompassArrow(){const t=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5))}) rotateX(${Math.min(70,this._map.transform.pitch)}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t}}class Z6 extends Er.GeolocateControl{onAdd(t){return super.onAdd(t)}}var K6=Object.defineProperty,X6=Object.defineProperties,Y6=Object.getOwnPropertyDescriptors,_S=Object.getOwnPropertySymbols,J6=Object.prototype.hasOwnProperty,Q6=Object.prototype.propertyIsEnumerable,xS=(e,t,i)=>t in e?K6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,eF=(e,t)=>{for(var i in t||(t={}))J6.call(t,i)&&xS(e,i,t[i]);if(_S)for(var i of _S(t))Q6.call(t,i)&&xS(e,i,t[i]);return e},tF=(e,t)=>X6(e,Y6(t));const bS=Er.Marker,wS=Er.LngLat,rF=Er.LngLatBounds;class nF extends Z6{constructor(){super(...arguments),this.lastUpdatedCenter=new wS(0,0)}_updateCamera(t){const i=new wS(t.coords.longitude,t.coords.latitude),s=t.coords.accuracy,u=this._map.getBearing(),p=tF(eF({bearing:u},this.options.fitBoundsOptions),{linear:!0}),v=this._map.getZoom();v>this.options.fitBoundsOptions.maxZoom&&(p.zoom=v),this._map.fitBounds(rF.fromLngLat(i,s),p,{geolocateSource:!0});let c=!1;const w=()=>{c=!0};this._map.once("click",w),this._map.once("dblclick",w),this._map.once("dragstart",w),this._map.once("mousedown",w),this._map.once("touchstart",w),this._map.once("wheel",w),this._map.once("moveend",()=>{this._map.off("click",w),this._map.off("dblclick",w),this._map.off("dragstart",w),this._map.off("mousedown",w),this._map.off("touchstart",w),this._map.off("wheel",w),!c&&(this.lastUpdatedCenter=this._map.getCenter())})}_setupUI(t){if(this.lastUpdatedCenter=this._map.getCenter(),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=uc("button","maplibregl-ctrl-geolocate",this._container),uc("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",t===!1){const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=uc("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new bS(this._dotElement),this._circleElement=uc("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new bS({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",i=>{const s=i.originalEvent&&i.originalEvent.type==="resize",u=this.lastUpdatedCenter.distanceTo(this._map.getCenter());!i.geolocateSource&&this._watchState==="ACTIVE_LOCK"&&!s&&u>1&&(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})}_updateCircleRadius(){if(this._watchState!=="BACKGROUND"&&this._watchState!=="ACTIVE_LOCK")return;const t=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],i=this._map.project(t),s=this._map.unproject([i.x,i.y]),u=this._map.unproject([i.x+20,i.y]),p=s.distanceTo(u)/20,v=Math.ceil(2*this._accuracy/p);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}}class iF extends Er.AttributionControl{onAdd(t){return super.onAdd(t)}}class oF extends Er.ScaleControl{onAdd(t){return super.onAdd(t)}}class aF extends Er.FullscreenControl{onAdd(t){return super.onAdd(t)}}var sF=Object.defineProperty,lF=Object.defineProperties,cF=Object.getOwnPropertyDescriptors,SS=Object.getOwnPropertySymbols,uF=Object.prototype.hasOwnProperty,hF=Object.prototype.propertyIsEnumerable,ES=(e,t,i)=>t in e?sF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,dF=(e,t)=>{for(var i in t||(t={}))uF.call(t,i)&&ES(e,i,t[i]);if(SS)for(var i of SS(t))hF.call(t,i)&&ES(e,i,t[i]);return e},pF=(e,t)=>lF(e,cF(t)),il=(e,t,i)=>new Promise((s,u)=>{var p=w=>{try{c(i.next(w))}catch(T){u(T)}},v=w=>{try{c(i.throw(w))}catch(T){u(T)}},c=w=>w.done?s(w.value):Promise.resolve(w.value).then(p,v);c((i=i.apply(e,t)).next())});const fF={POINT:"POINT",COUNTRY:"COUNTRY"};let mF=class extends Er.Map{constructor(t){var i,s,u;t.apiKey&&(Ba.apiKey=t.apiKey);const p=vS(t.style),v=location.hash;Ba.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!"),super(pF(dF({},t),{style:p,maplibreLogo:!1,transformRequest:yS(t.transformRequest)})),this.isTerrainEnabled=!1,this.terrainExaggeration=1,this.primaryLanguage=null,this.secondaryLanguage=null,this.terrainGrowing=!1,this.terrainFlattening=!1,this.primaryLanguage=(i=t.language)!=null?i:Ba.primaryLanguage,this.secondaryLanguage=Ba.secondaryLanguage,this.terrainExaggeration=(s=t.terrainExaggeration)!=null?s:this.terrainExaggeration,this.once("styledata",()=>il(this,null,function*(){if(!t.geolocate||t.center||t.hash&&v)return;try{if(t.geolocate===fF.COUNTRY){yield this.fitToIpBounds();return}}catch(U){console.warn(U.message)}let L=null;try{yield this.centerOnIpPoint(t.zoom),L=this.getCameraHash()}catch(U){console.warn(U.message)}(yield navigator.permissions.query({name:"geolocation"})).state==="granted"&&navigator.geolocation.getCurrentPosition(U=>{L===this.getCameraHash()&&(this.terrain?this.easeTo({center:[U.coords.longitude,U.coords.latitude],zoom:t.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[U.coords.longitude,U.coords.latitude],zoom:t.zoom||12,duration:2e3})}))},null,{maximumAge:24*3600*1e3,timeout:5e3,enableHighAccuracy:!1})})),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage),this.setSecondaryLanguage(this.secondaryLanguage)}),this.on("styledata",()=>{this.getTerrain()===null&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",()=>il(this,null,function*(){$6()})),this.once("load",()=>il(this,null,function*(){let L={logo:null};try{const B=Object.keys(this.style.sourceCaches).map(N=>this.getSource(N)).filter(N=>typeof N.url=="string"&&N.url.includes("tiles.json")),U=new URL(B[0].url);U.searchParams.has("key")||U.searchParams.append("key",Ba.apiKey),L=yield(yield fetch(U.href)).json()}catch{}if("logo"in L&&L.logo){const B=L.logo;this.addControl(new dS({logoURL:B}),t.logoPosition),t.attributionControl===!1&&this.addControl(new iF({customAttribution:t.customAttribution}))}else t.maptilerLogo&&this.addControl(new dS,t.logoPosition);if(t.scaleControl){const B=t.scaleControl===!0||t.scaleControl===void 0?"bottom-right":t.scaleControl,U=new oF({unit:Ba.unit});this.addControl(U,B),Ba.on("unit",O=>{U.setUnit(O)})}if(t.navigationControl!==!1){const B=t.navigationControl===!0||t.navigationControl===void 0?"top-right":t.navigationControl;this.addControl(new W6,B)}if(t.geolocateControl!==!1){const B=t.geolocateControl===!0||t.geolocateControl===void 0?"top-right":t.geolocateControl;this.addControl(new nF({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),B)}if(t.terrainControl){const B=t.terrainControl===!0||t.terrainControl===void 0?"top-right":t.terrainControl;this.addControl(new G6,B)}if(t.fullscreenControl){const B=t.fullscreenControl===!0||t.fullscreenControl===void 0?"top-right":t.fullscreenControl;this.addControl(new aF({}),B)}}));let c=!1,w=!1,T=null;this.once("load",L=>{c=!0,w&&this.fire("loadWithTerrain",T)});const P=L=>{L.terrain&&(w=!0,T={type:"loadWithTerrain",target:this,terrain:L.terrain},this.off("terrain",P),c&&this.fire("loadWithTerrain",T))};this.on("terrain",P),t.terrain&&this.enableTerrain((u=t.terrainExaggeration)!=null?u:this.terrainExaggeration)}onLoadAsync(){return il(this,null,function*(){return new Promise((t,i)=>{if(this.loaded())return t(this);this.once("load",s=>{t(this)})})})}onLoadWithTerrainAsync(){return il(this,null,function*(){return new Promise((t,i)=>{if(this.loaded()&&this.terrain)return t(this);this.once("loadWithTerrain",s=>{t(this)})})})}setStyle(t,i){return super.setStyle(vS(t),i)}setLanguage(t=Po.primaryLanguage){if(t===Ua.AUTO)return this.setLanguage(zv());this.setPrimaryLanguage(t)}setPrimaryLanguage(t=Po.primaryLanguage){if(this.primaryLanguage===Ua.STYLE_LOCK){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}hS(t)&&(this.primaryLanguage=t,this.onStyleReady(()=>{if(t===Ua.AUTO)return this.setPrimaryLanguage(zv());const i=this.getStyle().layers,s=/^\s*{\s*name\s*(:\s*(\S*))?\s*}$/,u=/^\s*name\s*(:\s*(\S*))?\s*$/,p=/^\s*{\s*name\s*(:\s*(\S*))?\s*}(\s*){\s*name\s*(:\s*(\S*))?\s*}$/,v=/^(.*)({\s*name\s*(:\s*(\S*))?\s*})(.*)$/,c=t?`name:${t}`:"name",w=["case",["has",c],["get",c],["get","name"]];for(let T=0;T<i.length;T+=1){const P=i[T],L=P.layout;if(!L||!L["text-field"])continue;const B=this.getLayoutProperty(P.id,"text-field");let U;if(Array.isArray(B)&&B.length>=2&&B[0].trim().toLowerCase()==="concat"){const O=B.slice();for(let N=0;N<B.length;N+=1){const ae=B[N];if((typeof ae=="string"||ae instanceof String)&&s.exec(ae.toString())){O[N]=w;break}else if(Array.isArray(ae)&&ae.length>=2&&ae[0].trim().toLowerCase()==="get"&&u.exec(ae[1].toString())){O[N]=w;break}else if(Array.isArray(ae)&&ae.length===4&&ae[0].trim().toLowerCase()==="case"){O[N]=w;break}}this.setLayoutProperty(P.id,"text-field",O)}else if(Array.isArray(B)&&B.length>=2&&B[0].trim().toLowerCase()==="get"&&u.exec(B[1].toString())){const O=w;this.setLayoutProperty(P.id,"text-field",O)}else if((typeof B=="string"||B instanceof String)&&s.exec(B.toString())){const O=w;this.setLayoutProperty(P.id,"text-field",O)}else if(Array.isArray(B)&&B.length===4&&B[0].trim().toLowerCase()==="case"){const O=w;this.setLayoutProperty(P.id,"text-field",O)}else if((typeof B=="string"||B instanceof String)&&(U=p.exec(B.toString()))!==null){const O=`{${c}}${U[3]}{name${U[4]||""}}`;this.setLayoutProperty(P.id,"text-field",O)}else if((typeof B=="string"||B instanceof String)&&(U=v.exec(B.toString()))!==null){const O=`${U[1]}{${c}}${U[5]}`;this.setLayoutProperty(P.id,"text-field",O)}}}))}setSecondaryLanguage(t=Po.secondaryLanguage){if(this.primaryLanguage===Ua.STYLE_LOCK){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}hS(t)&&(this.secondaryLanguage=t,this.onStyleReady(()=>{if(t===Ua.AUTO)return this.setSecondaryLanguage(zv());const i=this.getStyle().layers,s=/^\s*{\s*name\s*(:\s*(\S*))?\s*}$/,u=/^\s*name\s*(:\s*(\S*))?\s*$/,p=/^\s*{\s*name\s*(:\s*(\S*))?\s*}(\s*){\s*name\s*(:\s*(\S*))?\s*}$/;let v;for(let c=0;c<i.length;c+=1){const w=i[c],T=w.layout;if(!T||!T["text-field"])continue;const P=this.getLayoutProperty(w.id,"text-field");let L;if(Array.isArray(P)&&P.length>=2&&P[0].trim().toLowerCase()==="concat"){L=P.slice();let B=0;for(let U=0;U<P.length;U+=1){const O=P[U];if((typeof O=="string"||O instanceof String)&&s.exec(O.toString())){if(B===1){L[U]=`{name:${t}}`;break}B+=1}else if(Array.isArray(O)&&O.length>=2&&O[0].trim().toLowerCase()==="get"&&u.exec(O[1].toString())){if(B===1){L[U][1]=`name:${t}`;break}B+=1}else if(Array.isArray(O)&&O.length===4&&O[0].trim().toLowerCase()==="case"){if(B===1){L[U]=["get",`name:${t}`];break}B+=1}}this.setLayoutProperty(w.id,"text-field",L)}else if((typeof P=="string"||P instanceof String)&&(v=p.exec(P.toString()))!==null){const B=t?`name:${t}`:"name";L=`{name${v[1]||""}}${v[3]}{${B}}`,this.setLayoutProperty(w.id,"text-field",L)}}}))}getPrimaryLanguage(){return this.primaryLanguage}getSecondaryLanguage(){return this.secondaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(t,i=1e3){if(!this.terrain)return;const s=performance.now(),u=this.terrain.exaggeration,p=t-u,v=()=>{if(!this.terrain||this.terrainFlattening)return;const c=(performance.now()-s)/i;if(c<.99){const w=1-Math.pow(1-c,4),T=u+w*p;this.terrain.exaggeration=T,requestAnimationFrame(v)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=t;this.triggerRepaint()};this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(v)}enableTerrain(t=this.terrainExaggeration){if(t<0){console.warn("Terrain exaggeration cannot be negative.");return}const i=u=>il(this,null,function*(){!this.terrain||u.type!=="data"||u.dataType!=="source"||!("source"in u)||u.sourceId!=="maptiler-terrain"||u.source.type!=="raster-dem"||u.isSourceLoaded&&(this.off("data",i),this.growTerrain(t))}),s=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=t,this.on("data",i),this.addSource(Po.terrainSourceId,{type:"raster-dem",url:Po.terrainSourceURL}),this.setTerrain({source:Po.terrainSourceId,exaggeration:0})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(t);return}this.loaded()||this.isTerrainEnabled?s():this.once("load",()=>{this.getTerrain()&&this.getSource(Po.terrainSourceId)||s()})}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;const t=1*1e3,i=performance.now(),s=this.terrain.exaggeration,u=()=>{if(!this.terrain||this.terrainGrowing)return;const p=(performance.now()-i)/t;if(p<.99){const v=Math.pow(1-p,4),c=s*v;this.terrain.exaggeration=c,requestAnimationFrame(u)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(null),this.getSource(Po.terrainSourceId)&&this.removeSource(Po.terrainSourceId);this.triggerRepaint()};this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(u)}setTerrainExaggeration(t,i=!0){!i&&this.terrain?(this.terrainExaggeration=t,this.terrain.exaggeration=t,this.triggerRepaint()):this.enableTerrain(t)}onStyleReady(t){this.isStyleLoaded()?t():this.once("styledata",()=>{t()})}fitToIpBounds(){return il(this,null,function*(){const t=yield cS.info();this.fitBounds(t.country_bounds,{duration:0,padding:100})})}centerOnIpPoint(t){return il(this,null,function*(){const i=yield cS.info();this.jumpTo({center:[i.longitude,i.latitude],zoom:t||11})})}getCameraHash(){const t=new Float32Array(5),i=this.getCenter();return t[0]=i.lng,t[1]=i.lat,t[2]=this.getZoom(),t[3]=this.getPitch(),t[4]=this.getBearing(),h6.fromUint8Array(new Uint8Array(t.buffer))}getSdkConfig(){return Ba}getMaptilerSessionId(){return eP}setTransformRequest(t){return super.setTransformRequest(yS(t)),this}};class gF extends Er.Marker{addTo(t){return super.addTo(t)}}class yF extends Er.Popup{addTo(t){return super.addTo(t)}}class BN extends Er.Style{constructor(t,i={}){super(t,i)}}class FN extends Er.CanvasSource{onAdd(t){super.onAdd(t)}}class NN extends Er.GeoJSONSource{onAdd(t){super.onAdd(t)}}class UN extends Er.ImageSource{onAdd(t){super.onAdd(t)}}class jN extends Er.RasterTileSource{onAdd(t){super.onAdd(t)}}class $N extends Er.RasterDEMTileSource{onAdd(t){super.onAdd(t)}}class VN extends Er.VectorTileSource{onAdd(t){super.onAdd(t)}}class qN extends Er.VideoSource{onAdd(t){super.onAdd(t)}}class GN extends Er.TerrainControl{onAdd(t){return super.onAdd(t)}}Er.Map;Er.Marker;Er.Popup;Er.Style;Er.CanvasSource;Er.GeoJSONSource;Er.ImageSource;Er.RasterTileSource;Er.RasterDEMTileSource;Er.VectorTileSource;Er.VideoSource;Er.NavigationControl;Er.GeolocateControl;Er.AttributionControl;Er.LogoControl;Er.ScaleControl;Er.FullscreenControl;Er.TerrainControl;function tP(e,t){return function(){return e.apply(t,arguments)}}const{toString:vF}=Object.prototype,{getPrototypeOf:Xx}=Object,Hg=(e=>t=>{const i=vF.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),fs=e=>(e=e.toLowerCase(),t=>Hg(t)===e),Wg=e=>t=>typeof t===e,{isArray:gh}=Array,dp=Wg("undefined");function _F(e){return e!==null&&!dp(e)&&e.constructor!==null&&!dp(e.constructor)&&ba(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const rP=fs("ArrayBuffer");function xF(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&rP(e.buffer),t}const bF=Wg("string"),ba=Wg("function"),nP=Wg("number"),Zg=e=>e!==null&&typeof e=="object",wF=e=>e===!0||e===!1,um=e=>{if(Hg(e)!=="object")return!1;const t=Xx(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},SF=fs("Date"),EF=fs("File"),TF=fs("Blob"),CF=fs("FileList"),kF=e=>Zg(e)&&ba(e.pipe),PF=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ba(e.append)&&((t=Hg(e))==="formdata"||t==="object"&&ba(e.toString)&&e.toString()==="[object FormData]"))},AF=fs("URLSearchParams"),IF=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function kp(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let s,u;if(typeof e!="object"&&(e=[e]),gh(e))for(s=0,u=e.length;s<u;s++)t.call(null,e[s],s,e);else{const p=i?Object.getOwnPropertyNames(e):Object.keys(e),v=p.length;let c;for(s=0;s<v;s++)c=p[s],t.call(null,e[c],c,e)}}function iP(e,t){t=t.toLowerCase();const i=Object.keys(e);let s=i.length,u;for(;s-- >0;)if(u=i[s],t===u.toLowerCase())return u;return null}const oP=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),aP=e=>!dp(e)&&e!==oP;function J0(){const{caseless:e}=aP(this)&&this||{},t={},i=(s,u)=>{const p=e&&iP(t,u)||u;um(t[p])&&um(s)?t[p]=J0(t[p],s):um(s)?t[p]=J0({},s):gh(s)?t[p]=s.slice():t[p]=s};for(let s=0,u=arguments.length;s<u;s++)arguments[s]&&kp(arguments[s],i);return t}const MF=(e,t,i,{allOwnKeys:s}={})=>(kp(t,(u,p)=>{i&&ba(u)?e[p]=tP(u,i):e[p]=u},{allOwnKeys:s}),e),RF=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),zF=(e,t,i,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},LF=(e,t,i,s)=>{let u,p,v;const c={};if(t=t||{},e==null)return t;do{for(u=Object.getOwnPropertyNames(e),p=u.length;p-- >0;)v=u[p],(!s||s(v,e,t))&&!c[v]&&(t[v]=e[v],c[v]=!0);e=i!==!1&&Xx(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},OF=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const s=e.indexOf(t,i);return s!==-1&&s===i},DF=e=>{if(!e)return null;if(gh(e))return e;let t=e.length;if(!nP(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},BF=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Xx(Uint8Array)),FF=(e,t)=>{const s=(e&&e[Symbol.iterator]).call(e);let u;for(;(u=s.next())&&!u.done;){const p=u.value;t.call(e,p[0],p[1])}},NF=(e,t)=>{let i;const s=[];for(;(i=e.exec(t))!==null;)s.push(i);return s},UF=fs("HTMLFormElement"),jF=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,s,u){return s.toUpperCase()+u}),TS=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),$F=fs("RegExp"),sP=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),s={};kp(i,(u,p)=>{let v;(v=t(u,p,e))!==!1&&(s[p]=v||u)}),Object.defineProperties(e,s)},VF=e=>{sP(e,(t,i)=>{if(ba(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const s=e[i];if(ba(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},qF=(e,t)=>{const i={},s=u=>{u.forEach(p=>{i[p]=!0})};return gh(e)?s(e):s(String(e).split(t)),i},GF=()=>{},HF=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Lv="abcdefghijklmnopqrstuvwxyz",CS="0123456789",lP={DIGIT:CS,ALPHA:Lv,ALPHA_DIGIT:Lv+Lv.toUpperCase()+CS},WF=(e=16,t=lP.ALPHA_DIGIT)=>{let i="";const{length:s}=t;for(;e--;)i+=t[Math.random()*s|0];return i};function ZF(e){return!!(e&&ba(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const KF=e=>{const t=new Array(10),i=(s,u)=>{if(Zg(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[u]=s;const p=gh(s)?[]:{};return kp(s,(v,c)=>{const w=i(v,u+1);!dp(w)&&(p[c]=w)}),t[u]=void 0,p}}return s};return i(e,0)},XF=fs("AsyncFunction"),YF=e=>e&&(Zg(e)||ba(e))&&ba(e.then)&&ba(e.catch),je={isArray:gh,isArrayBuffer:rP,isBuffer:_F,isFormData:PF,isArrayBufferView:xF,isString:bF,isNumber:nP,isBoolean:wF,isObject:Zg,isPlainObject:um,isUndefined:dp,isDate:SF,isFile:EF,isBlob:TF,isRegExp:$F,isFunction:ba,isStream:kF,isURLSearchParams:AF,isTypedArray:BF,isFileList:CF,forEach:kp,merge:J0,extend:MF,trim:IF,stripBOM:RF,inherits:zF,toFlatObject:LF,kindOf:Hg,kindOfTest:fs,endsWith:OF,toArray:DF,forEachEntry:FF,matchAll:NF,isHTMLForm:UF,hasOwnProperty:TS,hasOwnProp:TS,reduceDescriptors:sP,freezeMethods:VF,toObjectSet:qF,toCamelCase:jF,noop:GF,toFiniteNumber:HF,findKey:iP,global:oP,isContextDefined:aP,ALPHABET:lP,generateString:WF,isSpecCompliantForm:ZF,toJSONObject:KF,isAsyncFn:XF,isThenable:YF};function Hr(e,t,i,s,u){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),s&&(this.request=s),u&&(this.response=u)}je.inherits(Hr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:je.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const cP=Hr.prototype,uP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{uP[e]={value:e}});Object.defineProperties(Hr,uP);Object.defineProperty(cP,"isAxiosError",{value:!0});Hr.from=(e,t,i,s,u,p)=>{const v=Object.create(cP);return je.toFlatObject(e,v,function(w){return w!==Error.prototype},c=>c!=="isAxiosError"),Hr.call(v,e.message,t,i,s,u),v.cause=e,v.name=e.name,p&&Object.assign(v,p),v};const JF=null;function Q0(e){return je.isPlainObject(e)||je.isArray(e)}function hP(e){return je.endsWith(e,"[]")?e.slice(0,-2):e}function kS(e,t,i){return e?e.concat(t).map(function(u,p){return u=hP(u),!i&&p?"["+u+"]":u}).join(i?".":""):t}function QF(e){return je.isArray(e)&&!e.some(Q0)}const eN=je.toFlatObject(je,{},null,function(t){return/^is[A-Z]/.test(t)});function Kg(e,t,i){if(!je.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=je.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,ae){return!je.isUndefined(ae[N])});const s=i.metaTokens,u=i.visitor||P,p=i.dots,v=i.indexes,w=(i.Blob||typeof Blob<"u"&&Blob)&&je.isSpecCompliantForm(t);if(!je.isFunction(u))throw new TypeError("visitor must be a function");function T(O){if(O===null)return"";if(je.isDate(O))return O.toISOString();if(!w&&je.isBlob(O))throw new Hr("Blob is not supported. Use a Buffer instead.");return je.isArrayBuffer(O)||je.isTypedArray(O)?w&&typeof Blob=="function"?new Blob([O]):Buffer.from(O):O}function P(O,N,ae){let q=O;if(O&&!ae&&typeof O=="object"){if(je.endsWith(N,"{}"))N=s?N:N.slice(0,-2),O=JSON.stringify(O);else if(je.isArray(O)&&QF(O)||(je.isFileList(O)||je.endsWith(N,"[]"))&&(q=je.toArray(O)))return N=hP(N),q.forEach(function(K,ie){!(je.isUndefined(K)||K===null)&&t.append(v===!0?kS([N],ie,p):v===null?N:N+"[]",T(K))}),!1}return Q0(O)?!0:(t.append(kS(ae,N,p),T(O)),!1)}const L=[],B=Object.assign(eN,{defaultVisitor:P,convertValue:T,isVisitable:Q0});function U(O,N){if(!je.isUndefined(O)){if(L.indexOf(O)!==-1)throw Error("Circular reference detected in "+N.join("."));L.push(O),je.forEach(O,function(q,W){(!(je.isUndefined(q)||q===null)&&u.call(t,q,je.isString(W)?W.trim():W,N,B))===!0&&U(q,N?N.concat(W):[W])}),L.pop()}}if(!je.isObject(e))throw new TypeError("data must be an object");return U(e),t}function PS(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Yx(e,t){this._pairs=[],e&&Kg(e,this,t)}const dP=Yx.prototype;dP.append=function(t,i){this._pairs.push([t,i])};dP.toString=function(t){const i=t?function(s){return t.call(this,s,PS)}:PS;return this._pairs.map(function(u){return i(u[0])+"="+i(u[1])},"").join("&")};function tN(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function pP(e,t,i){if(!t)return e;const s=i&&i.encode||tN,u=i&&i.serialize;let p;if(u?p=u(t,i):p=je.isURLSearchParams(t)?t.toString():new Yx(t,i).toString(s),p){const v=e.indexOf("#");v!==-1&&(e=e.slice(0,v)),e+=(e.indexOf("?")===-1?"?":"&")+p}return e}class rN{constructor(){this.handlers=[]}use(t,i,s){return this.handlers.push({fulfilled:t,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){je.forEach(this.handlers,function(s){s!==null&&t(s)})}}const AS=rN,fP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nN=typeof URLSearchParams<"u"?URLSearchParams:Yx,iN=typeof FormData<"u"?FormData:null,oN=typeof Blob<"u"?Blob:null,aN=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),sN=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ja={isBrowser:!0,classes:{URLSearchParams:nN,FormData:iN,Blob:oN},isStandardBrowserEnv:aN,isStandardBrowserWebWorkerEnv:sN,protocols:["http","https","file","blob","url","data"]};function lN(e,t){return Kg(e,new ja.classes.URLSearchParams,Object.assign({visitor:function(i,s,u,p){return ja.isNode&&je.isBuffer(i)?(this.append(s,i.toString("base64")),!1):p.defaultVisitor.apply(this,arguments)}},t))}function cN(e){return je.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function uN(e){const t={},i=Object.keys(e);let s;const u=i.length;let p;for(s=0;s<u;s++)p=i[s],t[p]=e[p];return t}function mP(e){function t(i,s,u,p){let v=i[p++];const c=Number.isFinite(+v),w=p>=i.length;return v=!v&&je.isArray(u)?u.length:v,w?(je.hasOwnProp(u,v)?u[v]=[u[v],s]:u[v]=s,!c):((!u[v]||!je.isObject(u[v]))&&(u[v]=[]),t(i,s,u[v],p)&&je.isArray(u[v])&&(u[v]=uN(u[v])),!c)}if(je.isFormData(e)&&je.isFunction(e.entries)){const i={};return je.forEachEntry(e,(s,u)=>{t(cN(s),u,i,0)}),i}return null}function hN(e,t,i){if(je.isString(e))try{return(t||JSON.parse)(e),je.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(i||JSON.stringify)(e)}const Jx={transitional:fP,adapter:ja.isNode?"http":"xhr",transformRequest:[function(t,i){const s=i.getContentType()||"",u=s.indexOf("application/json")>-1,p=je.isObject(t);if(p&&je.isHTMLForm(t)&&(t=new FormData(t)),je.isFormData(t))return u&&u?JSON.stringify(mP(t)):t;if(je.isArrayBuffer(t)||je.isBuffer(t)||je.isStream(t)||je.isFile(t)||je.isBlob(t))return t;if(je.isArrayBufferView(t))return t.buffer;if(je.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(p){if(s.indexOf("application/x-www-form-urlencoded")>-1)return lN(t,this.formSerializer).toString();if((c=je.isFileList(t))||s.indexOf("multipart/form-data")>-1){const w=this.env&&this.env.FormData;return Kg(c?{"files[]":t}:t,w&&new w,this.formSerializer)}}return p||u?(i.setContentType("application/json",!1),hN(t)):t}],transformResponse:[function(t){const i=this.transitional||Jx.transitional,s=i&&i.forcedJSONParsing,u=this.responseType==="json";if(t&&je.isString(t)&&(s&&!this.responseType||u)){const v=!(i&&i.silentJSONParsing)&&u;try{return JSON.parse(t)}catch(c){if(v)throw c.name==="SyntaxError"?Hr.from(c,Hr.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ja.classes.FormData,Blob:ja.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};je.forEach(["delete","get","head","post","put","patch"],e=>{Jx.headers[e]={}});const Qx=Jx,dN=je.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),pN=e=>{const t={};let i,s,u;return e&&e.split(`
`).forEach(function(v){u=v.indexOf(":"),i=v.substring(0,u).trim().toLowerCase(),s=v.substring(u+1).trim(),!(!i||t[i]&&dN[i])&&(i==="set-cookie"?t[i]?t[i].push(s):t[i]=[s]:t[i]=t[i]?t[i]+", "+s:s)}),t},IS=Symbol("internals");function vd(e){return e&&String(e).trim().toLowerCase()}function hm(e){return e===!1||e==null?e:je.isArray(e)?e.map(hm):String(e)}function fN(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=i.exec(e);)t[s[1]]=s[2];return t}const mN=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ov(e,t,i,s,u){if(je.isFunction(s))return s.call(this,t,i);if(u&&(t=i),!!je.isString(t)){if(je.isString(s))return t.indexOf(s)!==-1;if(je.isRegExp(s))return s.test(t)}}function gN(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,s)=>i.toUpperCase()+s)}function yN(e,t){const i=je.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+i,{value:function(u,p,v){return this[s].call(this,t,u,p,v)},configurable:!0})})}class Xg{constructor(t){t&&this.set(t)}set(t,i,s){const u=this;function p(c,w,T){const P=vd(w);if(!P)throw new Error("header name must be a non-empty string");const L=je.findKey(u,P);(!L||u[L]===void 0||T===!0||T===void 0&&u[L]!==!1)&&(u[L||w]=hm(c))}const v=(c,w)=>je.forEach(c,(T,P)=>p(T,P,w));return je.isPlainObject(t)||t instanceof this.constructor?v(t,i):je.isString(t)&&(t=t.trim())&&!mN(t)?v(pN(t),i):t!=null&&p(i,t,s),this}get(t,i){if(t=vd(t),t){const s=je.findKey(this,t);if(s){const u=this[s];if(!i)return u;if(i===!0)return fN(u);if(je.isFunction(i))return i.call(this,u,s);if(je.isRegExp(i))return i.exec(u);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,i){if(t=vd(t),t){const s=je.findKey(this,t);return!!(s&&this[s]!==void 0&&(!i||Ov(this,this[s],s,i)))}return!1}delete(t,i){const s=this;let u=!1;function p(v){if(v=vd(v),v){const c=je.findKey(s,v);c&&(!i||Ov(s,s[c],c,i))&&(delete s[c],u=!0)}}return je.isArray(t)?t.forEach(p):p(t),u}clear(t){const i=Object.keys(this);let s=i.length,u=!1;for(;s--;){const p=i[s];(!t||Ov(this,this[p],p,t,!0))&&(delete this[p],u=!0)}return u}normalize(t){const i=this,s={};return je.forEach(this,(u,p)=>{const v=je.findKey(s,p);if(v){i[v]=hm(u),delete i[p];return}const c=t?gN(p):String(p).trim();c!==p&&delete i[p],i[c]=hm(u),s[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const i=Object.create(null);return je.forEach(this,(s,u)=>{s!=null&&s!==!1&&(i[u]=t&&je.isArray(s)?s.join(", "):s)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,i])=>t+": "+i).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...i){const s=new this(t);return i.forEach(u=>s.set(u)),s}static accessor(t){const s=(this[IS]=this[IS]={accessors:{}}).accessors,u=this.prototype;function p(v){const c=vd(v);s[c]||(yN(u,v),s[c]=!0)}return je.isArray(t)?t.forEach(p):p(t),this}}Xg.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);je.reduceDescriptors(Xg.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[i]=s}}});je.freezeMethods(Xg);const Rs=Xg;function Dv(e,t){const i=this||Qx,s=t||i,u=Rs.from(s.headers);let p=s.data;return je.forEach(e,function(c){p=c.call(i,p,u.normalize(),t?t.status:void 0)}),u.normalize(),p}function gP(e){return!!(e&&e.__CANCEL__)}function Pp(e,t,i){Hr.call(this,e??"canceled",Hr.ERR_CANCELED,t,i),this.name="CanceledError"}je.inherits(Pp,Hr,{__CANCEL__:!0});function vN(e,t,i){const s=i.config.validateStatus;!i.status||!s||s(i.status)?e(i):t(new Hr("Request failed with status code "+i.status,[Hr.ERR_BAD_REQUEST,Hr.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}const _N=ja.isStandardBrowserEnv?function(){return{write:function(i,s,u,p,v,c){const w=[];w.push(i+"="+encodeURIComponent(s)),je.isNumber(u)&&w.push("expires="+new Date(u).toGMTString()),je.isString(p)&&w.push("path="+p),je.isString(v)&&w.push("domain="+v),c===!0&&w.push("secure"),document.cookie=w.join("; ")},read:function(i){const s=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function xN(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function bN(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function yP(e,t){return e&&!xN(t)?bN(e,t):t}const wN=ja.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");let s;function u(p){let v=p;return t&&(i.setAttribute("href",v),v=i.href),i.setAttribute("href",v),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return s=u(window.location.href),function(v){const c=je.isString(v)?u(v):v;return c.protocol===s.protocol&&c.host===s.host}}():function(){return function(){return!0}}();function SN(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function EN(e,t){e=e||10;const i=new Array(e),s=new Array(e);let u=0,p=0,v;return t=t!==void 0?t:1e3,function(w){const T=Date.now(),P=s[p];v||(v=T),i[u]=w,s[u]=T;let L=p,B=0;for(;L!==u;)B+=i[L++],L=L%e;if(u=(u+1)%e,u===p&&(p=(p+1)%e),T-v<t)return;const U=P&&T-P;return U?Math.round(B*1e3/U):void 0}}function MS(e,t){let i=0;const s=EN(50,250);return u=>{const p=u.loaded,v=u.lengthComputable?u.total:void 0,c=p-i,w=s(c),T=p<=v;i=p;const P={loaded:p,total:v,progress:v?p/v:void 0,bytes:c,rate:w||void 0,estimated:w&&v&&T?(v-p)/w:void 0,event:u};P[t?"download":"upload"]=!0,e(P)}}const TN=typeof XMLHttpRequest<"u",CN=TN&&function(e){return new Promise(function(i,s){let u=e.data;const p=Rs.from(e.headers).normalize(),v=e.responseType;let c;function w(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}je.isFormData(u)&&(ja.isStandardBrowserEnv||ja.isStandardBrowserWebWorkerEnv?p.setContentType(!1):p.setContentType("multipart/form-data;",!1));let T=new XMLHttpRequest;if(e.auth){const U=e.auth.username||"",O=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";p.set("Authorization","Basic "+btoa(U+":"+O))}const P=yP(e.baseURL,e.url);T.open(e.method.toUpperCase(),pP(P,e.params,e.paramsSerializer),!0),T.timeout=e.timeout;function L(){if(!T)return;const U=Rs.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),N={data:!v||v==="text"||v==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:U,config:e,request:T};vN(function(q){i(q),w()},function(q){s(q),w()},N),T=null}if("onloadend"in T?T.onloadend=L:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(L)},T.onabort=function(){T&&(s(new Hr("Request aborted",Hr.ECONNABORTED,e,T)),T=null)},T.onerror=function(){s(new Hr("Network Error",Hr.ERR_NETWORK,e,T)),T=null},T.ontimeout=function(){let O=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const N=e.transitional||fP;e.timeoutErrorMessage&&(O=e.timeoutErrorMessage),s(new Hr(O,N.clarifyTimeoutError?Hr.ETIMEDOUT:Hr.ECONNABORTED,e,T)),T=null},ja.isStandardBrowserEnv){const U=(e.withCredentials||wN(P))&&e.xsrfCookieName&&_N.read(e.xsrfCookieName);U&&p.set(e.xsrfHeaderName,U)}u===void 0&&p.setContentType(null),"setRequestHeader"in T&&je.forEach(p.toJSON(),function(O,N){T.setRequestHeader(N,O)}),je.isUndefined(e.withCredentials)||(T.withCredentials=!!e.withCredentials),v&&v!=="json"&&(T.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&T.addEventListener("progress",MS(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&T.upload&&T.upload.addEventListener("progress",MS(e.onUploadProgress)),(e.cancelToken||e.signal)&&(c=U=>{T&&(s(!U||U.type?new Pp(null,e,T):U),T.abort(),T=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c)));const B=SN(P);if(B&&ja.protocols.indexOf(B)===-1){s(new Hr("Unsupported protocol "+B+":",Hr.ERR_BAD_REQUEST,e));return}T.send(u||null)})},dm={http:JF,xhr:CN};je.forEach(dm,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const vP={getAdapter:e=>{e=je.isArray(e)?e:[e];const{length:t}=e;let i,s;for(let u=0;u<t&&(i=e[u],!(s=je.isString(i)?dm[i.toLowerCase()]:i));u++);if(!s)throw s===!1?new Hr(`Adapter ${i} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(je.hasOwnProp(dm,i)?`Adapter '${i}' is not available in the build`:`Unknown adapter '${i}'`);if(!je.isFunction(s))throw new TypeError("adapter is not a function");return s},adapters:dm};function Bv(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Pp(null,e)}function RS(e){return Bv(e),e.headers=Rs.from(e.headers),e.data=Dv.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),vP.getAdapter(e.adapter||Qx.adapter)(e).then(function(s){return Bv(e),s.data=Dv.call(e,e.transformResponse,s),s.headers=Rs.from(s.headers),s},function(s){return gP(s)||(Bv(e),s&&s.response&&(s.response.data=Dv.call(e,e.transformResponse,s.response),s.response.headers=Rs.from(s.response.headers))),Promise.reject(s)})}const zS=e=>e instanceof Rs?e.toJSON():e;function oh(e,t){t=t||{};const i={};function s(T,P,L){return je.isPlainObject(T)&&je.isPlainObject(P)?je.merge.call({caseless:L},T,P):je.isPlainObject(P)?je.merge({},P):je.isArray(P)?P.slice():P}function u(T,P,L){if(je.isUndefined(P)){if(!je.isUndefined(T))return s(void 0,T,L)}else return s(T,P,L)}function p(T,P){if(!je.isUndefined(P))return s(void 0,P)}function v(T,P){if(je.isUndefined(P)){if(!je.isUndefined(T))return s(void 0,T)}else return s(void 0,P)}function c(T,P,L){if(L in t)return s(T,P);if(L in e)return s(void 0,T)}const w={url:p,method:p,data:p,baseURL:v,transformRequest:v,transformResponse:v,paramsSerializer:v,timeout:v,timeoutMessage:v,withCredentials:v,adapter:v,responseType:v,xsrfCookieName:v,xsrfHeaderName:v,onUploadProgress:v,onDownloadProgress:v,decompress:v,maxContentLength:v,maxBodyLength:v,beforeRedirect:v,transport:v,httpAgent:v,httpsAgent:v,cancelToken:v,socketPath:v,responseEncoding:v,validateStatus:c,headers:(T,P)=>u(zS(T),zS(P),!0)};return je.forEach(Object.keys(Object.assign({},e,t)),function(P){const L=w[P]||u,B=L(e[P],t[P],P);je.isUndefined(B)&&L!==c||(i[P]=B)}),i}const _P="1.5.0",e1={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{e1[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const LS={};e1.transitional=function(t,i,s){function u(p,v){return"[Axios v"+_P+"] Transitional option '"+p+"'"+v+(s?". "+s:"")}return(p,v,c)=>{if(t===!1)throw new Hr(u(v," has been removed"+(i?" in "+i:"")),Hr.ERR_DEPRECATED);return i&&!LS[v]&&(LS[v]=!0,console.warn(u(v," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(p,v,c):!0}};function kN(e,t,i){if(typeof e!="object")throw new Hr("options must be an object",Hr.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let u=s.length;for(;u-- >0;){const p=s[u],v=t[p];if(v){const c=e[p],w=c===void 0||v(c,p,e);if(w!==!0)throw new Hr("option "+p+" must be "+w,Hr.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Hr("Unknown option "+p,Hr.ERR_BAD_OPTION)}}const e_={assertOptions:kN,validators:e1},ol=e_.validators;class Qm{constructor(t){this.defaults=t,this.interceptors={request:new AS,response:new AS}}request(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=oh(this.defaults,i);const{transitional:s,paramsSerializer:u,headers:p}=i;s!==void 0&&e_.assertOptions(s,{silentJSONParsing:ol.transitional(ol.boolean),forcedJSONParsing:ol.transitional(ol.boolean),clarifyTimeoutError:ol.transitional(ol.boolean)},!1),u!=null&&(je.isFunction(u)?i.paramsSerializer={serialize:u}:e_.assertOptions(u,{encode:ol.function,serialize:ol.function},!0)),i.method=(i.method||this.defaults.method||"get").toLowerCase();let v=p&&je.merge(p.common,p[i.method]);p&&je.forEach(["delete","get","head","post","put","patch","common"],O=>{delete p[O]}),i.headers=Rs.concat(v,p);const c=[];let w=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(i)===!1||(w=w&&N.synchronous,c.unshift(N.fulfilled,N.rejected))});const T=[];this.interceptors.response.forEach(function(N){T.push(N.fulfilled,N.rejected)});let P,L=0,B;if(!w){const O=[RS.bind(this),void 0];for(O.unshift.apply(O,c),O.push.apply(O,T),B=O.length,P=Promise.resolve(i);L<B;)P=P.then(O[L++],O[L++]);return P}B=c.length;let U=i;for(L=0;L<B;){const O=c[L++],N=c[L++];try{U=O(U)}catch(ae){N.call(this,ae);break}}try{P=RS.call(this,U)}catch(O){return Promise.reject(O)}for(L=0,B=T.length;L<B;)P=P.then(T[L++],T[L++]);return P}getUri(t){t=oh(this.defaults,t);const i=yP(t.baseURL,t.url);return pP(i,t.params,t.paramsSerializer)}}je.forEach(["delete","get","head","options"],function(t){Qm.prototype[t]=function(i,s){return this.request(oh(s||{},{method:t,url:i,data:(s||{}).data}))}});je.forEach(["post","put","patch"],function(t){function i(s){return function(p,v,c){return this.request(oh(c||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:p,data:v}))}}Qm.prototype[t]=i(),Qm.prototype[t+"Form"]=i(!0)});const pm=Qm;class t1{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(p){i=p});const s=this;this.promise.then(u=>{if(!s._listeners)return;let p=s._listeners.length;for(;p-- >0;)s._listeners[p](u);s._listeners=null}),this.promise.then=u=>{let p;const v=new Promise(c=>{s.subscribe(c),p=c}).then(u);return v.cancel=function(){s.unsubscribe(p)},v},t(function(p,v,c){s.reason||(s.reason=new Pp(p,v,c),i(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}static source(){let t;return{token:new t1(function(u){t=u}),cancel:t}}}const PN=t1;function AN(e){return function(i){return e.apply(null,i)}}function IN(e){return je.isObject(e)&&e.isAxiosError===!0}const t_={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(t_).forEach(([e,t])=>{t_[t]=e});const MN=t_;function xP(e){const t=new pm(e),i=tP(pm.prototype.request,t);return je.extend(i,pm.prototype,t,{allOwnKeys:!0}),je.extend(i,t,null,{allOwnKeys:!0}),i.create=function(u){return xP(oh(e,u))},i}const bi=xP(Qx);bi.Axios=pm;bi.CanceledError=Pp;bi.CancelToken=PN;bi.isCancel=gP;bi.VERSION=_P;bi.toFormData=Kg;bi.AxiosError=Hr;bi.Cancel=bi.CanceledError;bi.all=function(t){return Promise.all(t)};bi.spread=AN;bi.isAxiosError=IN;bi.mergeConfig=oh;bi.AxiosHeaders=Rs;bi.formToJSON=e=>mP(je.isHTMLForm(e)?new FormData(e):e);bi.getAdapter=vP.getAdapter;bi.HttpStatusCode=MN;bi.default=bi;const RN=bi;function zN(e){const t=ge.useRef(null),i=ge.useRef(null),s={long:79.3832,lat:23.6325},[u,p]=ge.useState([]);console.log(u);const[v]=ge.useState(3.5),c=ge.useRef();Ba.apiKey="wbrYhSY66HizG6tkiSmf";const w=async(B,U)=>{const O=await RN.get(`https://api.api-ninjas.com/v1/reversegeocoding?lat=${B}&lon=${U}`,{headers:{"X-Api-Key":"JrraOAG1/dszP47Pd5JajQ==Ox6qLryrEKEtb0uW"}});return console.log(O.data[0].name),c.current=O.data[0].name,O.data[0].name},T=async B=>{console.log(2),console.log(B);let U=B;i.current=new mF({container:t.current,style:Qk.STREETS,center:[s.long,s.lat],zoom:v}),U.map(async O=>{console.log(O);const N=new gF({element:L(await w(O.lat,O.long)),anchor:"center"}).setLngLat([O.long,O.lat]).addTo(i.current),ae=new yF().setHTML(`<strong>${c.current}</strong>`);N.getElement().addEventListener("mouseenter",()=>{ae.addTo(i.current),ae.setLngLat([O.long,O.lat])}),N.getElement().addEventListener("mouseleave",()=>{ae.remove()})})};ge.useEffect(()=>{T()},[u]);const P=()=>{p(e.data),console.log(1),T(e.data)};ge.useEffect(()=>{P()});const L=B=>{const U=document.createElement("div");return U.className="custom-marker",U.innerHTML=`<img src="https://thenounproject.com/api/private/icons/211194/edit/?backgroundShape=SQUARE&backgroundShapeColor=%23000000&backgroundShapeOpacity=0&exportSize=752&flipX=false&flipY=false&foregroundColor=%23000000&foregroundOpacity=1&imageFormat=png&rotation=0" alt="${B}" style="width: 32px; height: 32px;" />`,U};return ke.jsx("div",{className:"map-wrap",children:ke.jsx("div",{ref:t,className:"map"})})}function LN(){const[e,t]=ge.useState(),[i,s]=ge.useState(!0);let[u,p]=ge.useState();ge.useState("Aloevera");const[v,c]=ge.useState(),w=async()=>{const L=await(await fetch("http://localhost:5000/plant-details")).json();t(L.data);let B=[];for(let U of L.data)B.push(U.name),U.name==="Aloevera"&&(console.log(U.points),c(U.points));p(B),s(!1)},T=P=>{for(let L of e)if(L.name===P){c(L.points),console.log(L.points);return}};return ge.useEffect(()=>{w()},[]),i?ke.jsx("h1",{children:"Loading..."}):ke.jsxs("div",{className:"maps",children:[ke.jsxs("div",{className:"maps-plants",children:[ke.jsx("h3",{children:"Medicinal Plants"}),u.map(P=>ke.jsx("button",{className:"btn map-btn",onClick:()=>{T(P)},children:P}))]}),ke.jsx("div",{className:"maps-world-map",children:ke.jsx(zN,{data:v})})]})}function ON(){const[e,t]=ge.useState(!0);return ge.useEffect(()=>{setTimeout(()=>{t(!1)},2e3)}),e?ke.jsx(XB,{}):ke.jsx(J5,{children:ke.jsx(Z5,{children:ke.jsxs($5,{children:[ke.jsx(Td,{path:"/",element:ke.jsx(KB,{})}),ke.jsx(Td,{path:"/med-plants",element:ke.jsx(YB,{})}),ke.jsx(Td,{path:"/maps",element:ke.jsx(LN,{})}),ke.jsx(Td,{path:"/chat-bot",element:ke.jsx(Tk,{})})]})})})}Fv.createRoot(document.getElementById("root")).render(ke.jsx(ON,{}));
